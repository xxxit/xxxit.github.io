<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä½¿ç”¨Rcloneè¿ç§»æ•°æ®åˆ°MinIO</title>
      <link href="/2023/01/06/%E4%BD%BF%E7%94%A8rclone%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E5%88%B0minio/"/>
      <url>/2023/01/06/%E4%BD%BF%E7%94%A8rclone%E8%BF%81%E7%A7%BB%E6%95%B0%E6%8D%AE%E5%88%B0minio/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS</li></ul><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>éƒ¨ç½²å¥½MinIOæœåŠ¡ä¹‹åï¼Œå°†æ—§æ•°æ®è¿ç§»è‡³MioIOæ˜¯ä¸ªé—®é¢˜ï¼ŒMinIOå…¼å®¹æ”¯æŒäºšé©¬é€ŠS3åè®®ï¼Œæ­£æ˜¯è¿™ä¸€ç‚¹Rcloneè¿™ä¸€å·¥å…·ä¹Ÿæ”¯æŒäºšé©¬é€ŠS3åè®®ï¼Œç”¨Rcloneæ¥è¿ç§»å†å¥½ä¸è¿‡äº†</p><h2 id="è¿ç§»å‡†å¤‡"><a href="#è¿ç§»å‡†å¤‡" class="headerlink" title="è¿ç§»å‡†å¤‡"></a>è¿ç§»å‡†å¤‡</h2><ol><li>å®‰è£…Rcloneï¼ŒæŸ¥çœ‹æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/1108.html" title="CentOSå®‰è£…Rclone">CentOSå®‰è£…Rclone</a></li><li>åœ¨MinIOåˆ›å»ºå¥½éœ€è¦ç”¨çš„â€œæ¡¶â€</li></ol><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><h4 id="Rcloneé…ç½®æ–‡ä»¶"><a href="#Rcloneé…ç½®æ–‡ä»¶" class="headerlink" title="Rcloneé…ç½®æ–‡ä»¶"></a>Rcloneé…ç½®æ–‡ä»¶</h4><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /root/.config/rclone/rclone.conf</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[minio]</span><br><span class="line">type = s3</span><br><span class="line">env_auth = false</span><br><span class="line">provider = Minio</span><br><span class="line">access_key_id = adc </span><br><span class="line">secret_access_key = 123</span><br><span class="line">region =</span><br><span class="line">endpoint = http://127.0.0.1:9000</span><br></pre></td></tr></table></figure><p><strong>é…ç½®ç¨å¾®è§£é‡Šä¸€ä¸‹</strong> [minio] <strong># éšä¾¿è‡ªå®šä¹‰ï¼Œä½†æ˜¯ä¸‹é¢è¦ç”¨åˆ°</strong> type &#x3D; s3 <strong># s3 å›ºå®š</strong> env_auth &#x3D; false <strong># åŠ ä¸åŠ éƒ½è¡Œ</strong> provider &#x3D; Minio <strong># åŠ ä¸åŠ éƒ½è¡Œï¼Œä¸åŠ å°±æ˜¯ç©ºå­—ç¬¦ä¸²</strong> access_key_id &#x3D; adc <strong># MinIOç”Ÿæˆçš„acess keyï¼æ³¨æ„: ä¸æ˜¯ç™»å½•æ§åˆ¶å°çš„ç”¨æˆ·åå’Œå¯†ç ï¼ï¼ï¼ï¼</strong> secret_access_key &#x3D; 123 <strong># MinIOç”Ÿæˆçš„access keyå¯¹åº”çš„ secret keyï¼æ³¨æ„: ä¸æ˜¯ç™»å½•æ§åˆ¶å°çš„ç”¨æˆ·åå’Œå¯†ç ï¼ï¼ï¼ï¼</strong> region &#x3D; endpoint &#x3D; <a href="http://127.0.0.1:9000/">http://127.0.0.1:9000</a> <strong># MinIO APIåœ°å€ï¼èƒ½è®¿é—®å†…ç½‘çš„æƒ…å†µä¸‹å»ºè®®ä½¿ç”¨å†…ç½‘ï¼æ•ˆç‡é«˜ï¼æ³¨æ„ï¼šä¸æ˜¯æ§åˆ¶å°åœ°å€ï¼ï¼ï¼</strong></p><h4 id="æ“ä½œå‘½ä»¤"><a href="#æ“ä½œå‘½ä»¤" class="headerlink" title="æ“ä½œå‘½ä»¤"></a>æ“ä½œå‘½ä»¤</h4><p>Rcloneå‘½ä»¤ï¼Œæµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½é“¾æ¥ä¸ŠMinIO åˆ—å‡ºMinIOä¸­æ‰€æœ‰çš„â€œæ¡¶â€,ï¼ˆbucketä¿¡æ¯ï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rclone lsd minio</span><br></pre></td></tr></table></figure><h4 id="è¿ç§»"><a href="#è¿ç§»" class="headerlink" title="è¿ç§»"></a>è¿ç§»</h4><p>å¦‚æœæœ‰ä¸ªbucketæ¡¶çš„åå­—æ˜¯ï¼šfileï¼Œå‡å¦‚å°†&#x2F;root&#x2F;data&#x2F;ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¿ç§»åˆ°MinIOçš„fileæ¡¶ä¸‹ï¼Œå‘½ä»¤å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rclone sync /root/data minio:file</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Rclone </category>
          
          <category> MinIO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rclone </tag>
            
            <tag> MinIO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…Rclone</title>
      <link href="/2023/01/06/centos%E5%AE%89%E8%A3%85rclone/"/>
      <url>/2023/01/06/centos%E5%AE%89%E8%A3%85rclone/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7</p><h3 id="åœ¨çº¿å®‰è£…å‘½ä»¤"><a href="#åœ¨çº¿å®‰è£…å‘½ä»¤" class="headerlink" title="åœ¨çº¿å®‰è£…å‘½ä»¤"></a>åœ¨çº¿å®‰è£…å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl https://rclone.org/install.sh  sudo bash</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆé…ç½®æ–‡ä»¶"><a href="#ç”Ÿæˆé…ç½®æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé…ç½®æ–‡ä»¶"></a>ç”Ÿæˆé…ç½®æ–‡ä»¶</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rclone config</span><br></pre></td></tr></table></figure><p>#æŒ‰ç…§æç¤ºè¾“å…¥ç›¸åº”é…ç½®ï¼Œä¸çŸ¥é“å°±éšä¾¿è¾“å…¥åé¢å¯ä»¥æ”¹ï¼Œç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„ï¼š&#x2F;root&#x2F;.config&#x2F;rclone&#x2F;rclone.conf</p><h3 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rclone --version</span><br></pre></td></tr></table></figure><p>å‡ºç°ç‰ˆæœ¬å·å³å¯</p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>æ®ç½‘ä¸Šæœ‰äº›æ–‡ç« è¯´åœ¨çº¿å®‰è£…éœ€è¦ç¿»å¢™ï¼Œç”±äºæµ‹è¯•æœåŠ¡å™¨åœ¨é¦™æ¸¯åœ°åŒºæ‰€ä»¥ä¸ç¡®å®šæ˜¯å¦çœŸçš„éœ€è¦ç¿»å¢™ï¼Œå¦‚æœä½ çš„æœºå™¨ä½¿ç”¨æœ¬æ–¹æ³•ä¸é€šï¼Œå°è¯•ç¿»å¢™</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Rclone </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Rclone </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MinIOè®¾ç½®æ°¸ä¹…åˆ†äº«é“¾æ¥</title>
      <link href="/2023/01/06/minio%E8%AE%BE%E7%BD%AE%E6%B0%B8%E4%B9%85%E5%88%86%E4%BA%AB%E9%93%BE%E6%8E%A5/"/>
      <url>/2023/01/06/minio%E8%AE%BE%E7%BD%AE%E6%B0%B8%E4%B9%85%E5%88%86%E4%BA%AB%E9%93%BE%E6%8E%A5/</url>
      
        <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p><strong>MinIOå®˜æ–¹è§„å®šï¼Œåˆ†äº«é“¾æ¥æœ€é•¿æ—¶é—´åªèƒ½æ˜¯7å¤©</strong> <strong>å…¶å®æ‰€è°“çš„æ°¸ä¹…åˆ†äº«é“¾æ¥ï¼Œå¤§å®¶æƒ³ä¸€ä¸‹ï¼Œæ°¸ä¹…åˆ†äº«å’Œå…¬å¼€æ²¡ä»€ä¹ˆä¸¤æ ·</strong></p><h3 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h3><p>åœ¨MinIOä¸­å¼•å…¥äº†â€œæ¡¶â€çš„æ¦‚å¿µï¼Œé»˜è®¤åˆ›å»ºæ¡¶çš„æƒé™æ˜¯<strong>private</strong>ç§æœ‰çš„ï¼Œä¹Ÿå°±æ˜¯æ¡¶å†…çš„æ–‡ä»¶æ˜¯ä¸å…è®¸å¤–ç•Œç›´æ¥è®¿é—®çš„ï¼Œ æ‰€è°“è®¾ç½®æ°¸ä¹…åˆ†äº«é“¾æ¥å°±æ˜¯å°†åˆ›å»ºçš„æ¡¶çš„æƒé™è®¾ç½®å…¬å¼€ï¼špublicå³å¯ï¼Œå°±å¯ä»¥å®ç°é€šè¿‡ï¼šåœ°å€&#x2F;æ¡¶åç§°&#x2F;æ–‡ä»¶åç›´æ¥è®¿é—®ï¼Œæ¯”å¦‚è®¿é—®çš„æ˜¯å›¾ç‰‡ï¼Œå‡å¦‚ï¼š<a href="https://minio.itze.cn/image/logo.png">https://minio.itze.cn/image/logo.png</a> åœ°å€æ”¾åˆ°æµè§ˆå™¨å³å¯ç›´æ¥è®¿é—®</p><h4 id="è®¾ç½®â€œæ¡¶â€ä¸ºå…¬å¼€ï¼Œå¦‚å›¾è®¾ç½®å³å¯"><a href="#è®¾ç½®â€œæ¡¶â€ä¸ºå…¬å¼€ï¼Œå¦‚å›¾è®¾ç½®å³å¯" class="headerlink" title="è®¾ç½®â€œæ¡¶â€ä¸ºå…¬å¼€ï¼Œå¦‚å›¾è®¾ç½®å³å¯"></a>è®¾ç½®â€œæ¡¶â€ä¸ºå…¬å¼€ï¼Œå¦‚å›¾è®¾ç½®å³å¯</h4><p><a href="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_adccb821d4b21ca7159bb4abad361f79.jpg"><img src="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_adccb821d4b21ca7159bb4abad361f79.jpg"></a> <a href="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_8c93b23cea81858814fd5c46f3aa467d.jpg"><img src="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_8c93b23cea81858814fd5c46f3aa467d.jpg"></a></p>]]></content>
      
      
      <categories>
          
          <category> MinIO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MinIO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MinIO+Nginxå¼€å¯httpsåŸŸåè®¿é—®</title>
      <link href="/2023/01/06/minionginx%E5%BC%80%E5%90%AFhttps%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE/"/>
      <url>/2023/01/06/minionginx%E5%BC%80%E5%90%AFhttps%E5%9F%9F%E5%90%8D%E8%AE%BF%E9%97%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€ï¼šæŒ‰ç…§æ–‡ç« é¡ºåºæ“ä½œï¼Œè¸©è¿‡çš„å‘éƒ½é¿å¼€äº†ï¼"><a href="#å‰è¨€ï¼šæŒ‰ç…§æ–‡ç« é¡ºåºæ“ä½œï¼Œè¸©è¿‡çš„å‘éƒ½é¿å¼€äº†ï¼" class="headerlink" title="å‰è¨€ï¼šæŒ‰ç…§æ–‡ç« é¡ºåºæ“ä½œï¼Œè¸©è¿‡çš„å‘éƒ½é¿å¼€äº†ï¼"></a>å‰è¨€ï¼šæŒ‰ç…§æ–‡ç« é¡ºåºæ“ä½œï¼Œè¸©è¿‡çš„å‘éƒ½é¿å¼€äº†ï¼</h2><h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ–‡ç« å»ºç«‹åœ¨MinIOæœåŠ¡æ˜¯é€šè¿‡Dockerå®¹å™¨åˆ›å»º</li><li>å‡è®¾æœ¬æ–‡ä»¥ä¸‹ä½¿ç”¨åŸŸåï¼šminio.itze.cn</li><li>å‡è®¾æœåŠ¡å™¨IPï¼š123.123.123.123</li></ul><h3 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h3><h4 id="1-å°†åŸŸåè§£æåˆ°æœåŠ¡å™¨IP"><a href="#1-å°†åŸŸåè§£æåˆ°æœåŠ¡å™¨IP" class="headerlink" title="1.å°†åŸŸåè§£æåˆ°æœåŠ¡å™¨IP"></a>1.å°†åŸŸåè§£æåˆ°æœåŠ¡å™¨IP</h4><p>æŸ¥çœ‹è§£ææˆåŠŸç¤ºä¾‹ï¼Œwindowsä¸‹ä½¿ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ping minio.itze.cn -t</span><br></pre></td></tr></table></figure><p><a href="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_a255e56cdd4659847f8927c8c9fd0156.jpg"><img src="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_a255e56cdd4659847f8927c8c9fd0156.jpg"></a> <strong>å‡ºç°å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¯´æ˜åŸŸåå·²ç»è§£æåˆ°å¯¹åº”çš„IPåœ°å€ï¼Œä¼šæœ‰äººé—®ï¼šå»å“ªé‡Œæ·»åŠ è§£æï¼Œç­”ï¼šå»è´­ä¹°åŸŸåçš„å‚å•†æ§åˆ¶å°ï¼Œæ¯”å¦‚ä½ çš„åŸŸåæ˜¯é˜¿é‡Œäº‘æ³¨å†Œçš„ï¼Œå°±ç™»é™†é˜¿é‡Œäº‘æ§åˆ¶å°æœ‰ç›¸å…³è§£ææ“ä½œæµç¨‹</strong></p><h4 id="2-ç”³è¯·åŸŸåå¯¹åº”çš„SSLå…è´¹è¯ä¹¦ï¼ŒPSï¼šèµ„é‡‘å¯Œè£•çš„ç›´æ¥ä»˜è´¹ä¹°"><a href="#2-ç”³è¯·åŸŸåå¯¹åº”çš„SSLå…è´¹è¯ä¹¦ï¼ŒPSï¼šèµ„é‡‘å¯Œè£•çš„ç›´æ¥ä»˜è´¹ä¹°" class="headerlink" title="2.ç”³è¯·åŸŸåå¯¹åº”çš„SSLå…è´¹è¯ä¹¦ï¼ŒPSï¼šèµ„é‡‘å¯Œè£•çš„ç›´æ¥ä»˜è´¹ä¹°"></a>2.ç”³è¯·åŸŸåå¯¹åº”çš„SSLå…è´¹è¯ä¹¦ï¼ŒPSï¼šèµ„é‡‘å¯Œè£•çš„ç›´æ¥ä»˜è´¹ä¹°</h4><p>è¿™é‡Œæä¾›ä¸€ä¸ªç”³è¯·å…è´¹çš„åœ°å€ï¼Œæ¯æ¬¡ç”³è¯·æœ‰æ•ˆæœŸ1å¹´ï¼Œ<a href="https://console.cloud.tencent.com/ssl" title="https://console.cloud.tencent.com/ssl">https://console.cloud.tencent.com/ssl</a> ç”³è¯·SSLæ³¨æ„äº‹é¡¹ï¼šæŒ‰ç…§æç¤ºï¼Œéœ€è¦æœ‰éªŒè¯åŸŸåæ˜¯ä½ çš„æ“ä½œï¼Œä¸€èˆ¬ä¸¤ç§æ–¹å¼ï¼Œ1.DNSï¼Œ2.æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨æ¨èçš„æ–¹æ³•æ·»åŠ ä¸€æ¡è§£æå³å¯ï¼Œä¸€èˆ¬åå‡ åˆ†é’Ÿå°±èƒ½é¢å‘è¯ä¹¦ï¼Œ<strong>è¯ä¹¦é¢å‘åé€‰æ‹©-ä¸‹è½½-Nginx</strong></p><h3 id="nginxåå‘ä»£ç†MinIO-APIåœ°å€å¹¶é…ç½®https"><a href="#nginxåå‘ä»£ç†MinIO-APIåœ°å€å¹¶é…ç½®https" class="headerlink" title="nginxåå‘ä»£ç†MinIO APIåœ°å€å¹¶é…ç½®https"></a>nginxåå‘ä»£ç†MinIO APIåœ°å€å¹¶é…ç½®https</h3><p>è¿™é‡Œåˆ©ç”¨åˆ°äº†Nginxçš„<strong>åå‘ä»£ç†</strong>ï¼Œé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼Œå»ºè®®ä¸è¦æ”¹åŠ¨åŸæ¥çš„<strong>nginx.conf</strong>æ–‡ä»¶ï¼Œå¦å¤–å†å•ç‹¬åˆ›å»ºä¸€ä¸ª<strong>nginx_minio.conf</strong>æ–‡ä»¶åœ¨é»˜è®¤çš„<strong>nginx.conf</strong>æ–‡ä»¶ä¸­åŠ å…¥ä¸€å¥è¯,ä½ç½®æ”¾åˆ°**http{}**å—ä¸­</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">include /ä½ çš„nginx_minio.confçš„è·¯å¾„/*.conf;</span><br></pre></td></tr></table></figure><p><strong>nginx_minio.conf</strong> é…ç½®å®Œæ•´å†…å®¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">itze.cn ProxyStart</span></span><br><span class="line">upstream minio &#123;</span><br><span class="line">    server 127.0.0.1:9000 fail_timeout=0;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">     listen 443 ssl;</span><br><span class="line">     server_name minio.itze.cn;</span><br><span class="line"></span><br><span class="line">    ssl_certificate     ./cert/ä½ çš„.crt; #è¿™é‡Œæ¢æˆä½ çš„è¯ä¹¦ä¸Šä¼ çš„ä½ç½® </span><br><span class="line">     ssl_certificate_key ./cert/ä½ çš„.key; #è¿™é‡Œæ¢æˆä½ çš„è¯ä¹¦ä¸Šä¼ çš„ä½ç½®</span><br><span class="line">     ssl_session_timeout 5m;</span><br><span class="line">     ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line">     ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;</span><br><span class="line">     ssl_prefer_server_ciphers on;   </span><br><span class="line">     client_max_body_size   30m; #æœ€å¤§ä¸Šä¼ é™åˆ¶         </span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   html;</span><br><span class="line">        index  index.html index.htm;</span><br><span class="line">        proxy_pass   https://minio;</span><br><span class="line"></span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto https;</span><br><span class="line">        proxy_redirect off;</span><br><span class="line">        proxy_connect_timeout      310;</span><br><span class="line">        proxy_send_timeout         310;</span><br><span class="line">        proxy_read_timeout         310;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    #å¼‚å¸¸çŠ¶æ€ç è·³è½¬</span><br><span class="line">    error_page  307   https://www.itze.cn;</span><br><span class="line">    error_page  400   https://www.itze.cn;</span><br><span class="line">    error_page  403   https://www.itze.cn;</span><br><span class="line">    error_page  404   https://www.itze.cn;</span><br><span class="line">    error_page  500   https://www.itze.cn;</span><br><span class="line">    error_page  502   https://www.itze.cn;</span><br><span class="line"></span><br><span class="line">&#125;   </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">itze.cn ProxyEnd</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">http forced jump https httpå¼ºåˆ¶è·³è½¬httpsé…ç½®</span></span><br><span class="line">server&#123;  </span><br><span class="line">    listen 80;</span><br><span class="line">    server_name minio.itze.com;</span><br><span class="line">    rewrite ^(.*)$  https://minio.itze.com;</span><br><span class="line">    location ~ / &#123;</span><br><span class="line">    index index.html index.php index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure><h3 id="MinIO-é…ç½®https"><a href="#MinIO-é…ç½®https" class="headerlink" title="MinIO é…ç½®https"></a>MinIO é…ç½®https</h3><h4 id="1-è¯ä¹¦å‡†å¤‡"><a href="#1-è¯ä¹¦å‡†å¤‡" class="headerlink" title="1.è¯ä¹¦å‡†å¤‡"></a>1.è¯ä¹¦å‡†å¤‡</h4><p>å°†ç”³è¯·çš„SSLè¯ä¹¦ .keyç»“å°¾çš„é‡å‘½åä¸ºï¼šprivate.keyå’Œ .crtç»“å°¾çš„é‡å‘½åä¸ºï¼špublic.crt åˆ«é—®ä¸ºä»€ä¹ˆï¼Œå®˜æ–¹è§„å®šï¼Œä¸ä¿¡è‡ªå·±çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://min.io/docs/minio/linux/operations/network-encryption.html?ref=docs-redirect" title="https://min.io/docs/minio/linux/operations/network-encryption.html?ref=docs-redirect">https://min.io/docs/minio/linux/operations/network-encryption.html?ref=docs-redirect</a> ç„¶åå°†private.keyå’Œpublic.crtä¸¤ä¸ªæ–‡ä»¶æ”¾åˆ°MinIOç›®å½•certsä¸‹é¢ï¼š&#x2F;ä½ çš„minioç›®å½•&#x2F;config&#x2F;certsï¼Œç®—äº†è¿˜æ˜¯ä¸Šä¸ªå›¾å§ <a href="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_bfac25e2b2db37fc9519b538b67aaf3e.jpg"><img src="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_bfac25e2b2db37fc9519b538b67aaf3e.jpg"></a></p><h4 id="2-å®¹å™¨æ›´æ”¹"><a href="#2-å®¹å™¨æ›´æ”¹" class="headerlink" title="2.å®¹å™¨æ›´æ”¹"></a>2.å®¹å™¨æ›´æ”¹</h4><p>åˆ›å»ºå®¹å™¨å‘½ä»¤æ›´æ”¹ä¸ºä»¥ä¸‹ï¼Œæ³¨æ„ï¼Œå¦‚æœåŸæ¥è·¯å¾„ä¸‹æœ‰æ–‡ä»¶å­˜åœ¨ï¼ŒæŠŠåŸæ¥çš„minioå®¹å™¨åˆ æ‰é‡æ–°åˆ›å»ºä¸ä¼šæœ‰å½±å“ï¼</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 9000:9000 -p 50000:50000 --name minio \</span><br><span class="line">-e &quot;MINIO_ROOT_USER=admin&quot; \</span><br><span class="line">-e &quot;MINIO_ROOT_PASSWORD=123456&quot; \</span><br><span class="line">-e &quot;MINIO_SERVER_URL=https://minio.itze.cn  &quot; \</span><br><span class="line">-v /root/minio/data:/data \</span><br><span class="line">-v /root/minio/config:/root/.minio \</span><br><span class="line">minio/minio server  /data --console-address &quot;:50000&quot; -address &quot;:9000&quot;</span><br></pre></td></tr></table></figure><p>å‘½ä»¤è§£é‡Šçœ‹æ–‡ç« ï¼š<a href="https://www.itze.cn/minio/1096.html" title="Dockeréƒ¨ç½²MinIO">Dockeréƒ¨ç½²MinIO</a></p><h4 id="3-è®¿é—®"><a href="#3-è®¿é—®" class="headerlink" title="3.è®¿é—®"></a>3.è®¿é—®</h4><p>æ§åˆ¶å°è®¿é—®åœ°å€ï¼š<a href="https://minio.itze.cn:50000/">https://minio.itze.cn:50000</a> APIè®¿é—®åœ°å€ï¼š<a href="https://minio.itze.cn/">https://minio.itze.cn</a> <strong>æ³¨æ„ï¼šè¿™é‡Œå¦‚æœç›´æ¥è®¿é—®APIçš„è®¿é—®åœ°å€ï¼ŒMinIOä¼š307é»˜è®¤è·³è½¬åˆ°æ§åˆ¶å°é¡µé¢ï¼Œæ§åˆ¶å°ç™»å½•é¡µé¢æˆ‘ä»¬å½“ç„¶ä¸æƒ³è®©å¤–éƒ¨çŸ¥é“ï¼Œä¸Šé¢çš„nginx_minio.confå·²ç»åšäº†é”™è¯¯é¡µé¢é…ç½®ï¼Œå¦‚æœä½ çš„ä¸ç”Ÿæ•ˆï¼Œè¯·æ£€æŸ¥nginxçš„é»˜è®¤é…ç½®æ–‡ä»¶nginx.confä¸­æœ‰æ²¡æœ‰ä»¥ä¸‹ä¸€å¥è¯ï¼šåŒæ ·æ”¾åˆ°http{}å—ä¸­å³å¯ï¼Œè®°å¾—é‡å¯nginxæœåŠ¡</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">proxy_intercept_errors on;</span><br></pre></td></tr></table></figure><h3 id="é‡ç‚¹æ³¨æ„äº‹é¡¹"><a href="#é‡ç‚¹æ³¨æ„äº‹é¡¹" class="headerlink" title="é‡ç‚¹æ³¨æ„äº‹é¡¹"></a>é‡ç‚¹æ³¨æ„äº‹é¡¹</h3><p>è¿™é‡Œç¨å¾®è§£é‡Šä¸€ä¸ªå‘½ä»¤ï¼š-e â€œMINIO_SERVER_URL&#x3D;<a href="https://minio.itze.cn/">https://minio.itze.cn</a> â€œ è¿™ä¹Ÿæ˜¯ä¸Šé¢nginxé‡Œé¢ä¸ºä»€ä¹ˆä¼šé‚£æ ·é…ç½®çš„åŸå›  è¿™ä¸ªåœ°å€æ˜¯MioIO APIè®¿é—®è¯·æ±‚çš„åœ°å€ï¼Œè¿™é‡Œåˆ›å»ºå®¹å™¨æ—¶æ˜¯ä»€ä¹ˆï¼Œæ— è®ºåœ¨MinIOæ§åˆ¶å°æˆ–è€…æ˜¯é€šè¿‡APIä»£ç åˆ†äº«çš„æ–‡ä»¶é“¾æ¥çš„å‰ç¼€å°±æ˜¯è¿™ä¸ªï¼ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆæˆ‘ä»¬ç›´æ¥å†™æˆäº†åŸŸåï¼Œè€Œä¸æ˜¯ç½‘ä¸Šå¤§éƒ¨åˆ†è¯´çš„IP+ç«¯å£å·ï¼ŒåŸå› å°±æ˜¯æ–‡ç« ä¸Šé¢çš„<strong>nginx_minio.conf</strong>å·²ç»åšäº†åå‘ä»£ç†ï¼Œè®¿é—®<strong><a href="https://minio.itze.cn/">https://minio.itze.cn</a></strong> å°±ç­‰äºè®¿é—® <strong><a href="https://123.123.123.123:9000/">https://123.123.123.123:9000</a></strong> æ˜ç™½äº†å— ä½†æ˜¯å¦‚æœæµè§ˆå™¨ç›´æ¥è®¿é—®åé¢è¿™ä¸ªIP+ç«¯å£çš„æµè§ˆå™¨ä¼šæŠ¥SSLè¯ä¹¦ä¸å®‰å…¨ï¼Œå› ä¸ºæˆ‘ä»¬ç­¾å‘è¯ä¹¦æ˜¯å¯¹<strong>minio.itze.cn</strong>è¿™ä¸ªåŸŸåä¸»é¢˜ <strong>MINIO_SERVER_URLç­‰äºä»€ä¹ˆä¸‹é¢åˆ†äº«é“¾æ¥çš„çº¢è‰²å­—ä½“å°±æ˜¯ä»€ä¹ˆï¼Œå¦‚æœä½ ç”¨çš„æ˜¯æœåŠ¡å™¨çš„å¤–ç½‘åŸŸå+ç«¯å£ï¼Œä¸‹é¢å°±æ˜¯IP:ç«¯å£å·ï¼Œå¦‚æœç¡¬æ˜¯æ”¹æˆåŸŸåè®¿é—®ä¼šæŠ¥é”™</strong> <a href="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_9074d25354fb26b00d511447d6f8f2fa.jpg"><img src="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_9074d25354fb26b00d511447d6f8f2fa.jpg"></a></p>]]></content>
      
      
      <categories>
          
          <category> MinIO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> MinIO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeréƒ¨ç½²MinIO</title>
      <link href="/2023/01/06/docker%E5%AE%89%E8%A3%85minio/"/>
      <url>/2023/01/06/docker%E5%AE%89%E8%A3%85minio/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 Dockerç‰ˆæœ¬ï¼š20.10.10</p><h4 id="1-æœç´¢MinIOé•œåƒ"><a href="#1-æœç´¢MinIOé•œåƒ" class="headerlink" title="1.æœç´¢MinIOé•œåƒ"></a>1.æœç´¢MinIOé•œåƒ</h4><p>é€‰æ‹©ç¬¬ä¸€ä¸ªï¼Œminio&#x2F;minio,æˆ–è€…å»<a href="http://hub.docker.com/" title="hub.docker.com">hub.docker.com</a>å»æœç´¢ä¹Ÿå¯ä»¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search minio</span><br></pre></td></tr></table></figure><p><a href="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_5e8ceb4152e4270814dc74a52697766c.jpg"><img src="https://www.itze.cn/wp-content/uploads/2023/01/wp_editor_md_5e8ceb4152e4270814dc74a52697766c.jpg"></a></p><h4 id="2-æ‹‰å–MinIOé•œåƒ"><a href="#2-æ‹‰å–MinIOé•œåƒ" class="headerlink" title="2.æ‹‰å–MinIOé•œåƒ"></a>2.æ‹‰å–MinIOé•œåƒ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull minio/minio</span><br></pre></td></tr></table></figure><h4 id="3-åˆ›å»ºå®¹å™¨"><a href="#3-åˆ›å»ºå®¹å™¨" class="headerlink" title="3.åˆ›å»ºå®¹å™¨"></a>3.åˆ›å»ºå®¹å™¨</h4><p>åˆ›å»ºå®¹å™¨ä¹‹å‰å…ˆåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨æ¥æ˜ å°„ï¼Œå‡è®¾æˆ‘åœ¨æœåŠ¡å™¨åˆ›å»ºçš„è·¯å¾„æ˜¯:&#x2F;root&#x2F;dataå’Œã€&#x2F;root&#x2F;configï¼Œåˆ›å»ºå®¹å™¨çš„å‘½ä»¤å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -d -p 9000:9000 -p 50000:50000 --name minio \</span><br><span class="line">-e &quot;MINIO_ROOT_USER=admin&quot; \</span><br><span class="line">-e &quot;MINIO_ROOT_PASSWORD=123456&quot; \</span><br><span class="line">-e &quot;MINIO_SERVER_URL=http://127.0.0.1:9000  &quot; \</span><br><span class="line">-v /root/data:/data \</span><br><span class="line">-v /root/config:/root/.minio \</span><br><span class="line">minio/minio server  /data --console-address &quot;:50000&quot; -address &quot;:9000&quot;</span><br></pre></td></tr></table></figure><p>å®¹å™¨å‘½ä»¤è§£é‡Š ç¨å¾®è¯´ä¸€ä¸‹ -d åå°è¿è¡Œ -p 9000:9000 #å‰é¢çš„9000æ˜¯æ‰“å¼€æœ¬æœºçš„9000ç«¯å£æ˜ å°„dockerå®¹å™¨ä¸­MinIOçš„9000ç«¯å£ -e â€œMINIO_ROOT_USER&#x3D;adminâ€ \ #ç”¨æˆ·å -e â€œMINIO_ROOT_PASSWORD&#x3D;12345678â€ \ #å¯†ç  -e â€œMINIO_SERVER_URL&#x3D;<a href="http://127.0.0.1:9000/">http://127.0.0.1:9000</a> â€œ #æŒ‡å®šAPIè®¿é—®åœ°å€ï¼Œå¯ä»¥ä¸åŠ é»˜è®¤127.0.0.1 -v &#x2F;dataBase&#x2F;minio&#x2F;data:&#x2F;data \ #æŒ‚è½½å· -v &#x2F;dataBase&#x2F;minio&#x2F;config:&#x2F;root&#x2F;.minio \ #æŒ‚è½½å· â€“console-address â€œ:50000â€ #æŒ‡å®šæ§åˆ¶å°ç«¯å£ä¸ºé™æ€ç«¯å£ -address â€œ:9000â€ # APIè®¿é—®ç«¯å£</p><h4 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h4><p>1.æ˜ å°„çš„9000å’Œ50000ç«¯å£ï¼Œé˜²ç«å¢™å¿…é¡»æ”¾è¡Œï¼Œå¯ä»¥æŸ¥çœ‹æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a> å¦‚æœé˜²ç«å¢™æ”¾è¡Œäº†ä¹‹åè¿˜æ˜¯ç«¯å£ä¸é€šï¼Œé‚£å°±å»æœåŠ¡å™¨å‚å•†çš„æ§åˆ¶å°å»æ·»åŠ ç«¯å£æ”¾è¡Œï¼Œæ¯”å¦‚ä½ çš„æœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘çš„ï¼Œå°±ç™»é™†é˜¿é‡Œäº‘æ§åˆ¶å°ä¸€èˆ¬éƒ½ä¼šæœ‰</p><h4 id="è®¿é—®"><a href="#è®¿é—®" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h4><p>æ§åˆ¶å°è®¿é—®åœ°å€ï¼š<a href="http://ip:50000ï¼ŒIPæ¢æˆä½ çš„æœåŠ¡å™¨åœ°å€">http://ip:50000ï¼ŒIPæ¢æˆä½ çš„æœåŠ¡å™¨åœ°å€</a> APIåœ°å€ï¼š<a href="http://ip:9000/">http://ip:9000</a></p>]]></content>
      
      
      <categories>
          
          <category> MinIO </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> MinIO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitlab prometheuså ç”¨ç£ç›˜è¿‡å¤§</title>
      <link href="/2022/08/08/gitlab-prometheus%E5%8D%A0%E7%94%A8%E7%A3%81%E7%9B%98%E8%BF%87%E5%A4%A7/"/>
      <url>/2022/08/08/gitlab-prometheus%E5%8D%A0%E7%94%A8%E7%A3%81%E7%9B%98%E8%BF%87%E5%A4%A7/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ç§æœ‰åŒ–éƒ¨ç½²gitlabï¼ŒåæœŸå‘ç°ç£ç›˜å ç”¨è¿‡é«˜ï¼Œç»è¿‡æŸ¥è¯¢æ˜¯gitlabä¸­prometheusçš„dataæ–‡ä»¶å¤¹å ç”¨è¿‡å¤§ï¼Œæ®è¯´è¿™æ˜¯prometheusçš„ç›‘æ§æ—¥å¿—ï¼Œæˆ‘è¿™é‡Œæ¯å¤©ä¼šäº§ç”Ÿå¤§æ¦‚80Må·¦å³çš„æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¿ç•™15å¤©çš„</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>ç»è¿‡æŸ¥é˜…ï¼Œç½‘ä¸Šå¤§è‡´ç»™å‡ºçš„éƒ½æ˜¯ä¸¤ç§æ–¹å¼ <strong>gitlabé…ç½®æ–‡ä»¶é»˜è®¤ä½ç½®ï¼š&#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb</strong></p><h4 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h4><p>ç›´æ¥åœæ­¢prometheusçš„ç›‘æ§ï¼Œæ“ä½œæ–¹æ³•,æ‰¾åˆ°é…ç½®æ–‡ä»¶ä¸­ä»¥ä¸‹ä»£ç å—ï¼Œé»˜è®¤æ˜¯æ³¨é‡Šæ‰çš„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;enable&#x27;</span>] = <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;monitor_kubernetes&#x27;</span>] = <span class="literal">true</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;username&#x27;</span>] = <span class="string">&#x27;gitlab-prometheus&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;group&#x27;</span>] = <span class="string">&#x27;gitlab-prometheus&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;uid&#x27;</span>] = nil</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;gid&#x27;</span>] = nil</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;shell&#x27;</span>] = <span class="string">&#x27;/bin/sh&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;home&#x27;</span>] = <span class="string">&#x27;/var/opt/gitlab/prometheus&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;log_directory&#x27;</span>] = <span class="string">&#x27;/var/log/gitlab/prometheus&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;rules_files&#x27;</span>] = [<span class="string">&#x27;/var/opt/gitlab/prometheus/rules/*.rules&#x27;</span>]</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;scrape_interval&#x27;</span>] = 15</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;scrape_timeout&#x27;</span>] = 15</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;external_labels&#x27;</span>] = &#123; &#125;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;env_directory&#x27;</span>] = <span class="string">&#x27;/opt/gitlab/etc/prometheus/env&#x27;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;env&#x27;</span>] = &#123;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  <span class="string">&#x27;SSL_CERT_DIR&#x27;</span> =&gt; <span class="string">&quot;/opt/gitlab/embedded/ssl/certs/&quot;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/08/prometheus.png"> å°†é…ç½®æ–‡ä»¶ä¸­çš„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;enable&#x27;</span>] = <span class="literal">true</span></span></span><br></pre></td></tr></table></figure><p>å–æ¶ˆæ³¨é‡Šåä¿®æ”¹ä¸º</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">prometheus[&#x27;enable&#x27;] = false</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h4><p>ä¿®æ”¹gitlabé»˜è®¤å­˜å‚¨å¤©æ•°ï¼Œé»˜è®¤ä¿ç•™15å¤©ï¼Œè¶…è¿‡è¿™ä¸ªå¤©æ•°çš„ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œæ‰¾åˆ°ä»¥ä¸‹ä»£ç å—ï¼Œé»˜è®¤æ˜¯å…¨éƒ¨è¢«æ³¨é‡Šæ‰çš„ï¼Œéœ€è¦æ‰“å¼€ï¼Œæˆªå›¾å±•ç¤ºæ˜¯å·²ç»æ‰“å¼€è¿‡çš„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">prometheus[<span class="string">&#x27;flags&#x27;</span>] = &#123;</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  <span class="string">&#x27;storage.tsdb.path&#x27;</span> =&gt; <span class="string">&quot;/var/opt/gitlab/prometheus/data&quot;</span>,<span class="comment">#é»˜è®¤å‚¨å­˜è·¯å¾„ï¼Œå¯ä¿®æ”¹</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  <span class="string">&#x27;storage.tsdb.retention.time&#x27;</span> =&gt; <span class="string">&quot;3d&quot;</span>,<span class="comment">#é»˜è®¤ä¿ç•™å¤©æ•°æ˜¯15d,è¿™é‡Œä¿®æ”¹ä¸º3d,ä»£è¡¨ä¿ç•™3å¤©</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">  <span class="string">&#x27;config.file&#x27;</span> =&gt; <span class="string">&quot;/var/opt/gitlab/prometheus/prometheus.yml&quot;</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">&#125;</span></span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/08/prometheus_flags.png"></p><h2 id="æœ€åé‡æ–°é…ç½®"><a href="#æœ€åé‡æ–°é…ç½®" class="headerlink" title="æœ€åé‡æ–°é…ç½®"></a>æœ€åé‡æ–°é…ç½®</h2><p>åœæ­¢</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl stop</span><br></pre></td></tr></table></figure><p>é‡æ–°é…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl start</span><br></pre></td></tr></table></figure><p>æˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼š<a href="https://cloud.tencent.com/developer/support-plan?invite_code=3rv2fz93gikgk" title="https://cloud.tencent.com/developer/support-plan?invite_code=3rv2fz93gikgk">https://cloud.tencent.com/developer/support-plan?invite_code&#x3D;3rv2fz93gikgk</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> GitLab </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/07/21/hello-world/"/>
      <url>/2022/07/21/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>It is illegal to call this method if the current request is not in asynchron</title>
      <link href="/2022/07/08/it-is-illegal-to-call-this-method-if-the-current-request-is-not-in-asynchron/"/>
      <url>/2022/07/08/it-is-illegal-to-call-this-method-if-the-current-request-is-not-in-asynchron/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨ä½¿ç”¨åˆ‡é¢+è‡ªå®šä¹‰æ³¨è§£å®ç°æ—¥å¿—è®°å½•æ—¶æŠ¥çš„é”™</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>proceedingJoinPoint.getArgs()è¿”å›çš„æ•°ç»„ä¸­æºå¸¦æœ‰Requestæˆ–è€…Responseå¯¹è±¡ï¼Œå¯¼è‡´åºåˆ—åŒ–å¼‚å¸¸</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>è¿‡æ»¤æ‰ä¹‹åå†è½¬æ¢</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–ä¼ å‚ä¿¡æ¯</span></span><br><span class="line">Object[] args = proceedingJoinPoint.getArgs();</span><br><span class="line"><span class="comment">//è¿‡æ»¤æ— æ³•åºåˆ—åŒ–</span></span><br><span class="line">Stream&lt;?&gt; stream = ArrayUtils.isEmpty(args) ? Stream.empty() : Arrays.stream(args);</span><br><span class="line">List&lt;Object&gt; logArgs = stream</span><br><span class="line">        .filter(arg -&gt; (!(arg <span class="keyword">instanceof</span> HttpServletRequest) &amp;&amp; !(arg <span class="keyword">instanceof</span> HttpServletResponse)))</span><br><span class="line">        .collect(Collectors.toList());</span><br><span class="line"><span class="comment">//è¿‡æ»¤ååºåˆ—åŒ–æ— å¼‚å¸¸</span></span><br><span class="line"><span class="type">String</span> <span class="variable">requestParam</span> <span class="operator">=</span> JSON.toJSONString(logArgs);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GeoServeræœåŠ¡wmsæƒé™æ§åˆ¶</title>
      <link href="/2022/07/06/geoserver%E6%9C%8D%E5%8A%A1wms%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/"/>
      <url>/2022/07/06/geoserver%E6%9C%8D%E5%8A%A1wms%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 Tomcatç‰ˆæœ¬ï¼š8.5.x GeoServerç‰ˆæœ¬ï¼š2.21</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>è¯¦ç»†æƒé™é…ç½®è§æ–‡ç« ï¼š<a href="https://www.itze.cn/tomcat/1062.html" title="GeoServeræœåŠ¡è®¿é—®æƒé™æ§åˆ¶">GeoServeræœåŠ¡è®¿é—®æƒé™æ§åˆ¶</a></p><h3 id="wmsæœåŠ¡éªŒè¯è°ƒç”¨"><a href="#wmsæœåŠ¡éªŒè¯è°ƒç”¨" class="headerlink" title="wmsæœåŠ¡éªŒè¯è°ƒç”¨"></a>wmsæœåŠ¡éªŒè¯è°ƒç”¨</h3><ol><li>å‡å¦‚wmsåŸå§‹ä¸åŠ æƒé™éªŒè¯è°ƒç”¨åœ°å€æ˜¯ï¼š<a href="https://127.0.0.1:8080/geoserver/wms/_workspace/wms?service=WMS&amp;version=1.0&amp;request=GetMap&amp;layers=test%5C_layer&amp;styles=&amp;format=application/openlayers">https://127.0.0.1:8080/geoserver/wms\_workspace/wms?service=WMS&amp;version=1.0&amp;request=GetMap&amp;layers=test\_layer&amp;styles=&amp;format=application/openlayers</a></li><li>å¦‚æœæ­¤æ—¶æŒ‰ç…§è°ƒç”¨ç“¦ç‰‡æ–¹å¼å»è°ƒç”¨ï¼Œåˆ™åœ°å€æ˜¯ï¼š <a href="https://127.0.0.1:8080/geoserver/wms/_workspace/wms?service=WMS&amp;version=1.0&amp;request=GetMap&amp;layers=test%5C_layer&amp;styles=&amp;format=application/openlayers?authkey=123456">https://127.0.0.1:8080/geoserver/wms\_workspace/wms?service=WMS&amp;version=1.0&amp;request=GetMap&amp;layers=test\_layer&amp;styles=&amp;format=application/openlayers?authkey=123456</a> è¿™ç§æ–¹å¼ç»è¿‡æµ‹è¯•ï¼Œæ¥å£éªŒè¯åœ°å€æ˜¯æ‹¿ä¸åˆ°éªŒè¯çš„keyï¼Œgeoserverä¼šè®¤ä¸ºç¬¬ä¸€ä¸ªé—®å¥½ï¼šâ€?â€åserviceæ˜¯éœ€è¦è°ƒç”¨æ¥å£éªŒè¯çš„ä¼ å‚</li></ol><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><ol><li>å°†éªŒè¯çš„keyä¿¡æ¯æ”¾åˆ°&#x2F;wmsç¬¬ä¸€ä¸ªé—®å·:â€?â€åé¢ è¯·æ±‚åœ°å€å¦‚ï¼š<a href="https://127.0.0.1:8080/geoserver/wms/_workspace/wms?authkey=123456?service=WMS&amp;version=1.0&amp;request=GetMap&amp;layers=test%5C_layer&amp;styles=&amp;format=application/openlayers">https://127.0.0.1:8080/geoserver/wms\_workspace/wms?authkey=123456?service=WMS&amp;version=1.0&amp;request=GetMap&amp;layers=test\_layer&amp;styles=&amp;format=application/openlayers</a></li><li>ä½†æ˜¯è¿™æ ·ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œgeoserverä¼ å‚åˆ°éªŒè¯æ¥å£ä¼šæ˜¯ï¼š123456?service&#x3D;WMS è¿™ä¸ªä¼šè¿å¸¦ç¬¬äºŒä¸ªé—®å·åé¢çš„serviceï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦éªŒè¯æ¥å£çš„æ–¹æ³•æ¥å£å‚æ•°æ—¶å¤„ç†ä¸€ä¸‹å³å¯</li><li>æˆ–è€…å“ªä½å°ä¼™ä¼´æœ‰æ›´å¥½çš„å¤„ç†wmsé€šè¿‡webServiceæ–¹å¼åŠ éªŒè¯è°ƒç”¨æ–¹æ³•ï¼Œå¯ä»¥é‚®ç®±æ»´æ»´æˆ‘ğŸ“«emailï¼š<a href="mailto:&#103;&#105;&#116;&#x6c;&#97;&#x62;&#64;&#49;&#x31;&#49;&#46;&#99;&#111;&#x6d;">&#103;&#105;&#116;&#x6c;&#97;&#x62;&#64;&#49;&#x31;&#49;&#46;&#99;&#111;&#x6d;</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> GeoServer </category>
          
          <category> Tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GeoServer </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GeoServeræœåŠ¡è®¿é—®æƒé™æ§åˆ¶</title>
      <link href="/2022/07/06/geoserver%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/"/>
      <url>/2022/07/06/geoserver%E6%9C%8D%E5%8A%A1%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Tomcatç‰ˆæœ¬ï¼š8.5.x</li><li>GeoServerç‰ˆæœ¬ï¼š2.21</li></ul><h2 id="éƒ¨ç½²æ–¹å¼"><a href="#éƒ¨ç½²æ–¹å¼" class="headerlink" title="éƒ¨ç½²æ–¹å¼"></a>éƒ¨ç½²æ–¹å¼</h2><p>ä½¿ç”¨geoserveræä¾›çš„waråŒ…ï¼Œé€šè¿‡tomcatéƒ¨ç½²è¿è¡Œï¼Œå…·ä½“éƒ¨ç½²æ–¹å¼ç•¥è¿‡</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><h3 id="ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®èº«ä»½éªŒè¯å™¨"><a href="#ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®èº«ä»½éªŒè¯å™¨" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®èº«ä»½éªŒè¯å™¨"></a>ç¬¬ä¸€æ­¥ï¼Œè®¾ç½®èº«ä»½éªŒè¯å™¨</h3><p><a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_8ed9d9cfa15b8a398900f1f16bcc8117.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_8ed9d9cfa15b8a398900f1f16bcc8117.jpg"></a> <a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_490e81bc95264e68191bfe7c3f31b83f.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_490e81bc95264e68191bfe7c3f31b83f.jpg"></a></p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>å¦‚æœç¬¬äºŒæ­¥ä¸­æ²¡æœ‰æ˜¾ç¤ºï¼šAuthKey è¿™ä¸ªï¼Œå°±è‡ªå·±å»å®˜ç½‘ä¸‹è½½å®‰è£…ä¸€ä¸ª ä¸‹è½½åœ°å€ï¼š<a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.21.0/extensions/geoserver-2.21.0-authkey-plugin.zip" title="Key authentication">Key authentication</a> å®‰è£…æ–¹æ³•ï¼šå°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ä¸­çš„jaråŒ…å…¨éƒ¨å¤åˆ¶åˆ°tomcat&#x2F;webapps&#x2F;geoserver&#x2F;WEB-INF&#x2F;lib æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åé‡å¯tomcatæœåŠ¡å³å¯ <a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_6422d245428dcf2dd8df4c685e19270f.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_6422d245428dcf2dd8df4c685e19270f.jpg"></a></p><h3 id="ç¬¬äºŒæ­¥ï¼Œè®¾ç½®è¿‡æ»¤å™¨"><a href="#ç¬¬äºŒæ­¥ï¼Œè®¾ç½®è¿‡æ»¤å™¨" class="headerlink" title="ç¬¬äºŒæ­¥ï¼Œè®¾ç½®è¿‡æ»¤å™¨"></a>ç¬¬äºŒæ­¥ï¼Œè®¾ç½®è¿‡æ»¤å™¨</h3><p><a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_becf0a543aabcc0c990e04ebb5206b70.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_becf0a543aabcc0c990e04ebb5206b70.jpg"></a> ä¿®æ”¹é»˜è®¤ <a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_b1861f375a9dee1f4ec973f5e357150e.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_b1861f375a9dee1f4ec973f5e357150e.jpg"></a> æ·»åŠ æ–°çš„ <a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_691ea79300d98d8b0766f189a04d63ac.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_691ea79300d98d8b0766f189a04d63ac.jpg"></a> <a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_d2e0e64e734795839e5f54ded6b48ceb.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_d2e0e64e734795839e5f54ded6b48ceb.jpg"></a> <a href="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_effca544f2eecd31c29c21d2f3ee2b29.jpg"><img src="https://www.itze.cn/wp-content/uploads/2022/07/wp_editor_md_effca544f2eecd31c29c21d2f3ee2b29.jpg"></a></p><h3 id="webService-URL"><a href="#webService-URL" class="headerlink" title="webService URL"></a>webService URL</h3><p>è¿™ç§æ–¹å¼æ˜¯é€šè¿‡geoserverè‡ªå·±å»è°ƒç”¨è‡ªå®šä¹‰çš„æ¥å£éªŒè¯åœ°å€ï¼Œç¤ºä¾‹ä»£ç </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;geoServerAuth&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">geoServerAuth</span><span class="params">(<span class="meta">@RequestParam</span> String authkey)</span> &#123;</span><br><span class="line">        <span class="comment">//éªŒè¯keyä¸šåŠ¡ä»£ç ï¼Œçœç•¥ï¼Œè‡ªå·±å¡«è¡¥</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1</span>==<span class="number">1</span>)&#123;</span><br><span class="line">        System.out.println(authkey);</span><br><span class="line">        <span class="comment">//è¿™é‡Œè¦æ ¹æ®keyéªŒè¯çš„ç”¨æˆ·ä¿¡æ¯ï¼Œè¿”å›geoserverä¸­ç”¨æˆ·å¯¹åº”çš„ç”¨æˆ·å</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;admin&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="comment">//èº«ä»½éªŒè¯ä¸é€šè¿‡è¿”å›ç©ºå­—ç¬¦ä¸²æˆ–è€…éç”¨æˆ·åå…¶ä»–ï¼Œæ ¹æ®è‡ªå·±ä¸šåŠ¡è¿”å›</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†™å®ŒéªŒè¯æ¥å£ä¹‹åï¼ŒwebService RULä¸­å°±å¡«å†™å®é™…çº¿ä¸Šæˆ–è€…geoserverèƒ½è°ƒçš„é€šçš„æ¥å£åœ°å€ æ¯”å¦‚ï¼š<a href="https://www.itze.cn/controller/geoServerAuth?authkey=%7Bkey%7D">https://www.itze.cn/controller/geoServerAuth?authkey={key}</a></p><h3 id="å…³äºä½¿ç”¨éªŒè¯"><a href="#å…³äºä½¿ç”¨éªŒè¯" class="headerlink" title="å…³äºä½¿ç”¨éªŒè¯"></a>å…³äºä½¿ç”¨éªŒè¯</h3><p>æ¯”å¦‚ç“¦ç‰‡åŸæ¥è¯·æ±‚åœ°å€ï¼š<a href="https://127.0.0.1:8080/geoserver/gwc/service/aaa/1.0.0/123.png">https://127.0.0.1:8080/geoserver/gwc/service/aaa/1.0.0/123.png</a> æ·»åŠ keyè¯·æ±‚ï¼š<a href="https://127.0.0.1:8080/geoserver/gwc/service/aaa/1.0.0/123.png?authkey=123456">https://127.0.0.1:8080/geoserver/gwc/service/aaa/1.0.0/123.png?authkey=123456</a> è°ƒç”¨geoserveræ—¶ï¼Œgeoserverä¼šå…ˆæŠŠauthkey&#x3D;123456è¿™ä¸ªå€¼å»è¯·æ±‚webService RULä¸­è‡ªå®šä¹‰éªŒè¯æ¥å£</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>geoserveræœåŠ¡å™¨è°ƒç”¨ä¸€æ¬¡éªŒè¯æˆåŠŸä¹‹åï¼Œ10åˆ†é’Ÿå†…è¯·æ±‚geoserverä¸ä¼šå†å»è°ƒç”¨éªŒè¯æ¥å£</li><li>å…³äºwmsæœåŠ¡çš„éªŒè¯è°ƒç”¨ï¼Œå› ä¸ºwmsæœåŠ¡é“¾æ¥ä¼šè‡ªå¸¦é—®å·ï¼šâ€?â€ æ­¤æ—¶å¦‚æœå†æœ€åé¢æ‹¼æ¥?authkey&#x3D;123456é‚£ä¹ˆè¯·æ±‚éªŒè¯å°†æ‹¿ä¸åˆ°keyå€¼ï¼Œéœ€è¦å°†?authkey&#x3D;123456æ”¾åˆ°&#x2F;wmsåé¢ï¼Œå¦‚&#x2F;wms?authkey&#x3D;123456?serviceï¼Œè¯¦ç»†è§æ–‡ç« ï¼š<a href="https://www.itze.cn/tomcat/1066.html" title="GeoServeræœåŠ¡wmsæƒé™æ§åˆ¶">GeoServeræœåŠ¡wmsæƒé™æ§åˆ¶</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> GeoServer </category>
          
          <category> Tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GeoServer </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisTemplateæ‰¹é‡è·å–å€¼</title>
      <link href="/2022/07/01/redistemplate%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%E5%80%BC/"/>
      <url>/2022/07/01/redistemplate%E6%89%B9%E9%87%8F%E8%8E%B7%E5%8F%96%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h2 id="multiGetæ–¹å¼"><a href="#multiGetæ–¹å¼" class="headerlink" title="multiGetæ–¹å¼"></a>multiGetæ–¹å¼</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŒæ—¶è·å–rediså¤šä¸ªkeyå€¼</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> www.itze.cn</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">mGetTypeGetValue</span><span class="params">(Set matchKey)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().multiGet(matchKey);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;å¼‚å¸¸ï¼š&quot;</span>, e);</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="plpelineæ–¹å¼ï¼Œæ¨èä½¿ç”¨è¯¥æ–¹æ³•"><a href="#plpelineæ–¹å¼ï¼Œæ¨èä½¿ç”¨è¯¥æ–¹æ³•" class="headerlink" title="plpelineæ–¹å¼ï¼Œæ¨èä½¿ç”¨è¯¥æ–¹æ³•"></a>plpelineæ–¹å¼ï¼Œæ¨èä½¿ç”¨è¯¥æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰¹é‡è·å–keyå€¼å¯¹åº”çš„Value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> matchKey</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">pipeLineTypeGetValue</span><span class="params">(Set&lt;String&gt; matchKey)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> redisTemplate.executePipelined((RedisCallback&lt;Object&gt;) connection -&gt; &#123;</span><br><span class="line">        <span class="type">StringRedisConnection</span> <span class="variable">conn</span> <span class="operator">=</span> (StringRedisConnection) connection;</span><br><span class="line">        <span class="keyword">for</span> (String key : matchKey) &#123;</span><br><span class="line">            conn.get(key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æç¤º"><a href="#æç¤º" class="headerlink" title="æç¤º"></a>æç¤º</h2><p>plpelineæ–¹å¼å…±äº«ä¸€ä¸ªè¿æ¥ï¼ŒæŸ¥è¯¢è¿”å›çš„ç»“æœï¼Œå’Œé”®çš„é¡ºåºæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå¦‚æœæ²¡æŸ¥åˆ°ï¼Œä¼šè¿”å›nullå€¼ <strong>å¯ä»¥ç»“åˆæ–‡ç« ï¼š</strong><a href="https://www.itze.cn/java/1051.html" title="RedisTemplateä½¿ç”¨Redis scan">RedisTemplateä½¿ç”¨Redis scan</a>ï¼Œ<strong>æ‰¹é‡è·å–Redis keyæ–¹æ³•ä½¿ç”¨</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisTemplateæ‰¹é‡è·å–Key</title>
      <link href="/2022/07/01/redistemplate%E4%BD%BF%E7%94%A8redis-scan/"/>
      <url>/2022/07/01/redistemplate%E4%BD%BF%E7%94%A8redis-scan/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Integer</span> <span class="variable">SCAN_COUNT</span> <span class="operator">=</span> <span class="number">10000</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨scanéå†key</span></span><br><span class="line"><span class="comment"> * ä¸ºä»€ä¹ˆä¸ä½¿ç”¨keys å› ä¸ºKeysä¼šå¼•å‘Redisé”ï¼Œå¹¶ä¸”å¢åŠ Redisçš„CPUå ç”¨,ç‰¹åˆ«æ˜¯æ•°æ®åºå¤§çš„æƒ…å†µä¸‹ã€‚è¿™ä¸ªå‘½ä»¤åƒä¸‡åˆ«åœ¨ç”Ÿäº§ç¯å¢ƒä¹±ç”¨ã€‚</span></span><br><span class="line"><span class="comment"> * æ”¯æŒrediså•èŠ‚ç‚¹å’Œé›†ç¾¤è°ƒç”¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> matchKey</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">scanMatch</span><span class="params">(String matchKey)</span> &#123;</span><br><span class="line">    Set&lt;String&gt; keys = <span class="keyword">new</span> <span class="title class_">HashSet</span>();</span><br><span class="line">    <span class="type">RedisConnectionFactory</span> <span class="variable">connectionFactory</span> <span class="operator">=</span> redisTemplate.getConnectionFactory();</span><br><span class="line">    <span class="type">RedisConnection</span> <span class="variable">redisConnection</span> <span class="operator">=</span> connectionFactory.getConnection();</span><br><span class="line">    Cursor&lt;<span class="type">byte</span>[]&gt; scan = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//é›†ç¾¤</span></span><br><span class="line">    <span class="keyword">if</span>(redisConnection <span class="keyword">instanceof</span> JedisClusterConnection)&#123;</span><br><span class="line">        <span class="type">RedisClusterConnection</span> <span class="variable">clusterConnection</span> <span class="operator">=</span> connectionFactory.getClusterConnection();</span><br><span class="line">        Iterable&lt;RedisClusterNode&gt; redisClusterNodes = clusterConnection.clusterGetNodes();</span><br><span class="line">        Iterator&lt;RedisClusterNode&gt; iterator = redisClusterNodes.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">RedisClusterNode</span> <span class="variable">next</span> <span class="operator">=</span> iterator.next();</span><br><span class="line">            scan = clusterConnection.scan(next, ScanOptions.scanOptions().match(matchKey).count(Integer.MAX_VALUE).build());</span><br><span class="line">            <span class="keyword">while</span> (scan.hasNext()) &#123;</span><br><span class="line">                keys.add(<span class="keyword">new</span> <span class="title class_">String</span>(scan.next()));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(scan !=<span class="literal">null</span>)&#123;</span><br><span class="line">                    scan.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                log.error(<span class="string">&quot;scanéå†keyå…³é—­æ¸¸æ ‡å¼‚å¸¸&quot;</span>,e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> keys;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å•æœº</span></span><br><span class="line">    <span class="keyword">if</span>(redisConnection <span class="keyword">instanceof</span> JedisConnection)&#123;</span><br><span class="line">    scan = redisConnection.scan(ScanOptions.scanOptions().match(matchKey + <span class="string">&quot;*&quot;</span>).count(SCAN_COUNT).build());</span><br><span class="line">    <span class="keyword">while</span> (scan.hasNext()) &#123;</span><br><span class="line">        <span class="comment">//æ‰¾åˆ°ä¸€æ¬¡å°±æ·»åŠ ä¸€æ¬¡</span></span><br><span class="line">        keys.add(<span class="keyword">new</span> <span class="title class_">String</span>(scan.next()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (scan != <span class="literal">null</span>) &#123;</span><br><span class="line">            scan.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;scanéå†keyå…³é—­æ¸¸æ ‡å¼‚å¸¸&quot;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> keys;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> keys;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p><strong>Redis scan å‘½ä»¤ä¼šè·å–é‡å¤çš„æ•°æ®ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨Seté›†åˆ</strong> scanå‘½ä»¤æ ¼å¼</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SCAN cursor [MATCH pattern] [COUNT count]</span><br></pre></td></tr></table></figure><p>æ ·ä¾‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SCAN 0 MATCH user_* COUNT 10000</span><br></pre></td></tr></table></figure><blockquote><p>æ¥æºç½‘ç»œï¼Œè‹¥ä¾µè¯·å‘ŠçŸ¥åˆ é™¤ï¼Œè°¢è°¢ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ShardingSphereä»‹ç»</title>
      <link href="/2022/06/29/shardingsphere-proxy%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/"/>
      <url>/2022/06/29/shardingsphere-proxy%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul><li>ç®€ä»‹ ShardingSphere-JDBC ShardingSphere-Proxy ShardingSphere-Sidecarï¼ˆTODOï¼‰</li><li>æ··åˆæ¶æ„</li><li>è§£å†³æ–¹æ¡ˆ</li><li>çº¿è·¯è§„åˆ’</li></ul><p>ShardingSphere GitHubåœ°å€ï¼š<a href="https://github.com/apache/shardingsphere" title="https://github.com/apache/shardingsphere">https://github.com/apache/shardingsphere</a> ShardingSphere å®˜ç½‘ï¼š<a href="https://shardingsphere.apache.org/index_zh.html" title="https://shardingsphere.apache.org/index_zh.html">https://shardingsphere.apache.org/index_zh.html</a> <a href="https://github.com/apache/shardingsphere/releases" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/a3ym4-2skn1.jpg"></a> <a href="https://github.com/apache/shardingsphere/stargazers" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/a7bs8-8h8qb.jpg"></a> <a href="https://github.com/apache/shardingsphere/fork" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/acgyr-nuq4c.jpg"></a> <a href="https://github.com/apache/shardingsphere/watchers" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/aznzn-0e0mn.jpg"></a> **æ˜Ÿè¯„å¢é•¿æ—¶é—´çº¿** <a href="https://starchart.cc/apache/shardingsphere" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/star.png"></a> **è´¡çŒ®è€…å¢é•¿æ—¶é—´çº¿** <a href="https://api7.ai/contributor-graph?chart=contributorOverTime&repo=apache/shardingsphere" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/gongxian-e1656495229927.png"></a> Apache ShardingSphere äº§å“å®šä½ä¸º Database Plusï¼Œæ—¨åœ¨æ„å»ºå¤šæ¨¡æ•°æ®åº“ä¸Šå±‚çš„æ ‡å‡†å’Œç”Ÿæ€ã€‚ å®ƒå…³æ³¨å¦‚ä½•å……åˆ†åˆç†åœ°åˆ©ç”¨æ•°æ®åº“çš„è®¡ç®—å’Œå­˜å‚¨èƒ½åŠ›ï¼Œè€Œå¹¶éå®ç°ä¸€ä¸ªå…¨æ–°çš„æ•°æ®åº“ã€‚ShardingSphere ç«™åœ¨æ•°æ®åº“çš„ä¸Šå±‚è§†è§’ï¼Œå…³æ³¨ä»–ä»¬ä¹‹é—´çš„åä½œå¤šäºæ•°æ®åº“è‡ªèº«ã€‚ è¿æ¥ã€å¢é‡å’Œå¯æ’æ‹”æ˜¯ Apache ShardingSphere çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p><ul><li>è¿æ¥ï¼šé€šè¿‡å¯¹æ•°æ®åº“åè®®ã€SQL æ–¹è¨€ä»¥åŠæ•°æ®åº“å­˜å‚¨çš„çµæ´»é€‚é…ï¼Œå¿«é€Ÿçš„è¿æ¥åº”ç”¨ä¸å¤šæ¨¡å¼çš„å¼‚æ„æ•°æ®åº“ï¼›</li><li>å¢é‡ï¼šè·å–æ•°æ®åº“çš„è®¿é—®æµé‡ï¼Œå¹¶æä¾›æµé‡é‡å®šå‘ï¼ˆæ•°æ®åˆ†ç‰‡ã€è¯»å†™åˆ†ç¦»ã€å½±å­åº“ï¼‰ã€æµé‡å˜å½¢ï¼ˆæ•°æ®åŠ å¯†ã€æ•°æ®è„±æ•ï¼‰ã€æµé‡é‰´æƒï¼ˆå®‰å…¨ã€å®¡è®¡ã€æƒé™ï¼‰ã€æµé‡æ²»ç†ï¼ˆç†”æ–­ã€é™æµï¼‰ä»¥åŠæµé‡åˆ†æï¼ˆæœåŠ¡è´¨é‡åˆ†æã€å¯è§‚å¯Ÿæ€§ï¼‰ç­‰é€æ˜åŒ–å¢é‡åŠŸèƒ½ï¼›</li><li>å¯æ’æ‹”ï¼šé¡¹ç›®é‡‡ç”¨å¾®å†…æ ¸ + ä¸‰å±‚å¯æ’æ‹”æ¨¡å‹ï¼Œä½¿å†…æ ¸ã€åŠŸèƒ½ç»„ä»¶ä»¥åŠç”Ÿæ€å¯¹æ¥å®Œå…¨èƒ½å¤Ÿçµæ´»çš„æ–¹å¼è¿›è¡Œæ’æ‹”å¼æ‰©å±•ï¼Œå¼€å‘è€…èƒ½å¤Ÿåƒä½¿ç”¨ç§¯æœ¨ä¸€æ ·å®šåˆ¶å±äºè‡ªå·±çš„ç‹¬ç‰¹ç³»ç»Ÿã€‚</li></ul><p>ShardingSphere å·²äº2020å¹´4æœˆ16æ—¥æˆä¸º Apache è½¯ä»¶åŸºé‡‘ä¼šçš„é¡¶çº§é¡¹ç›®ã€‚ <a href="https://www.apache.org/licenses/LICENSE-2.0.html" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/ahfw8-td4zj.jpg"></a> <a href="https://github.com/apache/shardingsphere/releases" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/a3ym4-2skn1.jpg"></a></p><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Apache ShardingSphere ç”± JDBCã€Proxy å’Œ Sidecarï¼ˆè§„åˆ’ä¸­ï¼‰è¿™ 3 æ¬¾æ—¢èƒ½å¤Ÿç‹¬ç«‹éƒ¨ç½²ï¼Œåˆæ”¯æŒæ··åˆéƒ¨ç½²é…åˆä½¿ç”¨çš„äº§å“ç»„æˆã€‚ å®ƒä»¬å‡æä¾›æ ‡å‡†åŒ–çš„åŸºäºæ•°æ®åº“ä½œä¸ºå­˜å‚¨èŠ‚ç‚¹çš„å¢é‡åŠŸèƒ½ï¼Œå¯é€‚ç”¨äºå¦‚ Java åŒæ„ã€å¼‚æ„è¯­è¨€ã€äº‘åŸç”Ÿç­‰å„ç§å¤šæ ·åŒ–çš„åº”ç”¨åœºæ™¯ã€‚ å…³ç³»å‹æ•°æ®åº“å½“ä»Šä¾ç„¶å æœ‰å·¨å¤§å¸‚åœºä»½é¢ï¼Œæ˜¯ä¼ä¸šæ ¸å¿ƒç³»ç»Ÿçš„åŸºçŸ³ï¼Œæœªæ¥ä¹Ÿéš¾äºæ’¼åŠ¨ï¼Œæˆ‘ä»¬æ›´åŠ æ³¨é‡åœ¨åŸæœ‰åŸºç¡€ä¸Šæä¾›å¢é‡ï¼Œè€Œéé¢ è¦†ã€‚</p><h3 id="star-ShardingSphere-JDBC"><a href="#star-ShardingSphere-JDBC" class="headerlink" title=":star:ShardingSphere-JDBC"></a>:star:ShardingSphere-JDBC</h3><p><a href="https://mvnrepository.com/artifact/org.apache.shardingsphere/shardingsphere-jdbc" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/alalj-9w5uv.jpg"></a> å®šä½ä¸ºè½»é‡çº§ Java æ¡†æ¶ï¼Œåœ¨ Java çš„ JDBC å±‚æä¾›çš„é¢å¤–æœåŠ¡ã€‚ å®ƒä½¿ç”¨å®¢æˆ·ç«¯ç›´è¿æ•°æ®åº“ï¼Œä»¥ jar åŒ…å½¢å¼æä¾›æœåŠ¡ï¼Œæ— éœ€é¢å¤–éƒ¨ç½²å’Œä¾èµ–ï¼Œå¯ç†è§£ä¸ºå¢å¼ºç‰ˆçš„ JDBC é©±åŠ¨ï¼Œå®Œå…¨å…¼å®¹ JDBC å’Œå„ç§ ORM æ¡†æ¶ã€‚ - é€‚ç”¨äºä»»ä½•åŸºäº JDBC çš„ ORM æ¡†æ¶ï¼Œå¦‚ï¼šJPA, Hibernate, Mybatis, Spring JDBC Template æˆ–ç›´æ¥ä½¿ç”¨ JDBCï¼› - æ”¯æŒä»»ä½•ç¬¬ä¸‰æ–¹çš„æ•°æ®åº“è¿æ¥æ± ï¼Œå¦‚ï¼šDBCP, C3P0, BoneCP, HikariCP ç­‰ï¼› - æ”¯æŒä»»æ„å®ç° JDBC è§„èŒƒçš„æ•°æ®åº“ï¼Œç›®å‰æ”¯æŒ MySQLï¼ŒPostgreSQLï¼ŒOracleï¼ŒSQLServer ä»¥åŠä»»ä½•å¯ä½¿ç”¨ JDBC è®¿é—®çš„æ•°æ®åº“ã€‚ <img src="https://www.itze.cn/wp-content/uploads/2022/06/shardingsphere-jdbc_v3.png"></p><h3 id="star-ShardingSphere-Proxy"><a href="#star-ShardingSphere-Proxy" class="headerlink" title=":star:ShardingSphere-Proxy"></a>:star:ShardingSphere-Proxy</h3><p><a href="https://apache.org/dyn/closer.cgi?path=shardingsphere/5.0.0-beta/apache-shardingsphere-5.0.0-beta-shardingsphere-proxy-bin.tar.gz" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/a23uj-lbcau.jpg"></a> <a href="https://hub.docker.com/r/apache/sharding-proxy" title="&lt;img src=">â€œ&gt;<img src="https://www.itze.cn/wp-content/uploads/2022/06/ajbwj-jvqlt.jpg"></a> å®šä½ä¸ºé€æ˜åŒ–çš„æ•°æ®åº“ä»£ç†ç«¯ï¼Œæä¾›å°è£…äº†æ•°æ®åº“äºŒè¿›åˆ¶åè®®çš„æœåŠ¡ç«¯ç‰ˆæœ¬ï¼Œç”¨äºå®Œæˆå¯¹å¼‚æ„è¯­è¨€çš„æ”¯æŒã€‚ ç›®å‰æä¾› MySQL å’Œ PostgreSQLï¼ˆå…¼å®¹ openGauss ç­‰åŸºäº PostgreSQL çš„æ•°æ®åº“ï¼‰ç‰ˆæœ¬ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä»»ä½•å…¼å®¹ MySQL&#x2F;PostgreSQL åè®®çš„è®¿é—®å®¢æˆ·ç«¯ï¼ˆå¦‚ï¼šMySQL Command Client, MySQL Workbench, Navicat ç­‰ï¼‰æ“ä½œæ•°æ®ï¼Œå¯¹ DBA æ›´åŠ å‹å¥½ã€‚</p><ul><li>å‘åº”ç”¨ç¨‹åºå®Œå…¨é€æ˜ï¼Œå¯ç›´æ¥å½“åš MySQL&#x2F;PostgreSQL ä½¿ç”¨ï¼›</li><li>é€‚ç”¨äºä»»ä½•å…¼å®¹ MySQL&#x2F;PostgreSQL åè®®çš„çš„å®¢æˆ·ç«¯ã€‚</li></ul><p><img src="https://www.itze.cn/wp-content/uploads/2022/06/shardingsphere-proxy_v2.png"></p><h3 id="star-ShardingSphere-Sidecarï¼ˆTODOï¼‰"><a href="#star-ShardingSphere-Sidecarï¼ˆTODOï¼‰" class="headerlink" title=":star:ShardingSphere-Sidecarï¼ˆTODOï¼‰"></a>:star:ShardingSphere-Sidecarï¼ˆTODOï¼‰</h3><p>å®šä½ä¸º Kubernetes çš„äº‘åŸç”Ÿæ•°æ®åº“ä»£ç†ï¼Œä»¥ Sidecar çš„å½¢å¼ä»£ç†æ‰€æœ‰å¯¹æ•°æ®åº“çš„è®¿é—®ã€‚ é€šè¿‡æ— ä¸­å¿ƒã€é›¶ä¾µå…¥çš„æ–¹æ¡ˆæä¾›ä¸æ•°æ®åº“äº¤äº’çš„å•®åˆå±‚ï¼Œå³ Database Meshï¼Œåˆå¯ç§°æ•°æ®åº“ç½‘æ ¼ã€‚ Database Mesh çš„å…³æ³¨é‡ç‚¹åœ¨äºå¦‚ä½•å°†åˆ†å¸ƒå¼çš„æ•°æ®è®¿é—®åº”ç”¨ä¸æ•°æ®åº“æœ‰æœºä¸²è”èµ·æ¥ï¼Œå®ƒæ›´åŠ å…³æ³¨çš„æ˜¯äº¤äº’ï¼Œæ˜¯å°†æ‚ä¹±æ— ç« çš„åº”ç”¨ä¸æ•°æ®åº“ä¹‹é—´çš„äº¤äº’è¿›è¡Œæœ‰æ•ˆåœ°æ¢³ç†ã€‚ ä½¿ç”¨ Database Meshï¼Œè®¿é—®æ•°æ®åº“çš„åº”ç”¨å’Œæ•°æ®åº“ç»ˆå°†å½¢æˆä¸€ä¸ªå·¨å¤§çš„ç½‘æ ¼ä½“ç³»ï¼Œåº”ç”¨å’Œæ•°æ®åº“åªéœ€åœ¨ç½‘æ ¼ä½“ç³»ä¸­å¯¹å·å…¥åº§å³å¯ï¼Œå®ƒä»¬éƒ½æ˜¯è¢«å•®åˆå±‚æ‰€æ²»ç†çš„å¯¹è±¡ã€‚ <img src="https://www.itze.cn/wp-content/uploads/2022/06/shardingsphere-sidecar-brief.png"> <img src="https://www.itze.cn/wp-content/uploads/2022/06/%E6%80%A7%E8%83%BD-1.png"></p><h3 id="star-æ··åˆæ¶æ„"><a href="#star-æ··åˆæ¶æ„" class="headerlink" title=":star:æ··åˆæ¶æ„"></a>:star:æ··åˆæ¶æ„</h3><p>ShardingSphere-JDBC é‡‡ç”¨æ— ä¸­å¿ƒåŒ–æ¶æ„ï¼Œä¸åº”ç”¨ç¨‹åºå…±äº«èµ„æºï¼Œé€‚ç”¨äº Java å¼€å‘çš„é«˜æ€§èƒ½çš„è½»é‡çº§ OLTP åº”ç”¨ï¼› ShardingSphere-Proxy æä¾›é™æ€å…¥å£ä»¥åŠå¼‚æ„è¯­è¨€çš„æ”¯æŒï¼Œç‹¬ç«‹äºåº”ç”¨ç¨‹åºéƒ¨ç½²ï¼Œé€‚ç”¨äº OLAP åº”ç”¨ä»¥åŠå¯¹åˆ†ç‰‡æ•°æ®åº“è¿›è¡Œç®¡ç†å’Œè¿ç»´çš„åœºæ™¯ã€‚ Apache ShardingSphere æ˜¯å¤šæ¥å…¥ç«¯å…±åŒç»„æˆçš„ç”Ÿæ€åœˆã€‚ é€šè¿‡æ··åˆä½¿ç”¨ ShardingSphere-JDBC å’Œ ShardingSphere-Proxyï¼Œå¹¶é‡‡ç”¨åŒä¸€æ³¨å†Œä¸­å¿ƒç»Ÿä¸€é…ç½®åˆ†ç‰‡ç­–ç•¥ï¼Œèƒ½å¤Ÿçµæ´»çš„æ­å»ºé€‚ç”¨äºå„ç§åœºæ™¯çš„åº”ç”¨ç³»ç»Ÿï¼Œä½¿å¾—æ¶æ„å¸ˆæ›´åŠ è‡ªç”±åœ°è°ƒæ•´é€‚åˆäºå½“å‰ä¸šåŠ¡çš„æœ€ä½³ç³»ç»Ÿæ¶æ„ã€‚ <img src="https://www.itze.cn/wp-content/uploads/2022/06/shardingsphere-hybrid-architecture_v2.png"></p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p><img src="https://www.itze.cn/wp-content/uploads/2022/06/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-1.png"></p><h2 id="çº¿è·¯è§„åˆ’"><a href="#çº¿è·¯è§„åˆ’" class="headerlink" title="çº¿è·¯è§„åˆ’"></a>çº¿è·¯è§„åˆ’</h2><p><img src="https://www.itze.cn/wp-content/uploads/2022/06/roadmap_v2.png"></p><blockquote><p><em>è¯´æ˜ï¼šä»¥ä¸Šå†…å®¹æ‘˜æŠ„ShardingSphereå®˜ç½‘ï¼Œä¸€åˆ‡ä»¥å®˜ç½‘ä¸ºå‡†ï¼Œè‹¥æœ‰ä¾µæƒï¼Œè¯·è”ç³»åˆ é™¤ï¼Œè°¢è°¢</em></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ShardingSphere </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ShardingSphere </tag>
            
            <tag> ShardingSphere-JDBC </tag>
            
            <tag> ShardingSphere-Proxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡Msyqlå´©æºƒå¯¼è‡´æ— æ³•å¯åŠ¨</title>
      <link href="/2022/06/24/%E8%AE%B0%E4%B8%80%E6%AC%A1msyql%E5%B4%A9%E6%BA%83%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8/"/>
      <url>/2022/06/24/%E8%AE%B0%E4%B8%80%E6%AC%A1msyql%E5%B4%A9%E6%BA%83%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 Mysqlç‰ˆæœ¬ï¼šMysql 8.0.x Dockerç‰ˆæœ¬ï¼šDocker version 20.10.10</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>mysqlæœåŠ¡æ˜¯é€šè¿‡Dockeræ–¹å¼éƒ¨ç½²ï¼Œä¸€æ¬¡é‡å¯å¯¼è‡´mysqlå®¹å™¨æ— æ³•æ­£å¸¸å¯åŠ¨ï¼ŒæŸ¥çœ‹å‘ç°mysqlå®¹å™¨ä¸€ç›´åœ¨ä¸æ–­å¯åŠ¨â€¦æ–­å¼€â€¦å¯åŠ¨â€¦æ–­å¼€ï¼Œä¹‹æ‰€ä»¥ä¼šè¿™æ ·æ˜¯å› ä¸ºèµ·åˆåˆ›å»ºmysqlå®¹å™¨æ˜¯è®¾ç½®äº†ï¼šâ€“restart always å°±æ˜¯åªè¦DockeræœåŠ¡æ´»ç€ï¼Œè¯¥å®¹å™¨å°±ä¼šå¯åŠ¨ï¼Œå¦‚æœæ–­å¼€äº†å°±ä¼šè‡ªåŠ¨é‡å¯ï¼Œç”±äºå´©æºƒï¼ŒMysqlæ— æ³•å¯åŠ¨ï¼Œç„¶ådockerå†å°è¯•é‡å¯ï¼Œå°±è¿™æ ·é™·å…¥äº†å¾ªç¯â€¦ æ‘˜å–ä¸€æ®µmysqlå®¹å™¨æŠ¥é”™æ—¥å¿—</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">2022-05-23T03:29:02.744075Z 1 [ERROR] [MY-011972] [InnoDB] Your database may be corrupt or you may have copied the InnoDB tablespace but not the InnoDB log files. Please refer to http://dev.mysql.com/doc/refman/8.0/en/forcing-innodb-recovery.html for information about forcing recovery.</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹mysqlå®¹å™¨æ—¥å¿—çœ‹åˆ°ä¸€æ®µä¿¡æ¯ï¼Œå¤§æ¦‚æ„æ€æ˜¯å­˜å‚¨å¼•æ“å¯èƒ½å·²ç»æŸåï¼Œç»™å‡ºä¸€ä¸ªå®˜æ–¹æ–‡æ¡£åœ°å€</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>æ—¢ç„¶å®˜æ–¹å·²ç»ç»™å‡ºäº†è§£å†³æ–‡æ¡£ï¼Œå°±å»çœ‹äº†ä¸€ä¸‹ï¼Œæ–‡æ¡£åœ°å€ï¼š<a href="https://dev.mysql.com/doc/refman/8.0/en/forcing-innodb-recovery.html" title="https://dev.mysql.com/doc/refman/8.0/en/forcing-innodb-recovery.html">https://dev.mysql.com/doc/refman/8.0/en/forcing-innodb-recovery.html</a> ç¿»è¯‘äº†ä¸€ä¸‹ç½‘é¡µ <img src="https://www.itze.cn/wp-content/uploads/2022/06/innodb.png"> å®˜æ–¹çš„æ„æ€æ˜¯ï¼Œé€šè¿‡è®¾ç½®å­˜å‚¨å¼•æ“å¼ºåˆ¶æ¢å¤çš„çº§åˆ«æ¥å®ç°æš‚æ—¶èƒ½ä½¿mysqlæœåŠ¡å¯åŠ¨ï¼Œä»¥æ–¹ä¾¿æŠŠæ•°æ®å¤‡ä»½å‡ºæ¥ï¼Œä¸€å…±ç»™äº†6ä¸ªçº§åˆ«</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">innodb_force_recovery <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥å…ˆä»å°å¾€å¤§ä¸€ä¸ªçº§åˆ«ä¸€ä¸ªçº§åˆ«å»è®¾ç½®ï¼Œä¸è¦ç›´æ¥ä»1è°ƒåˆ°5&#x2F;6è¿™æ ·ï¼Œå°ç¼–æ˜¯å°è¯•è®¾ç½®åˆ°äº†3å°±èƒ½æ­£å¸¸å¯åŠ¨äº†ï¼Œä¸è¿‡å¯åŠ¨åï¼Œmysqlåªæœ‰æŸ¥è¯¢æƒé™ï¼Œæ²¡æœ‰å†™å…¥æƒé™ï¼Œå®˜æ–¹æ–‡æ¡£é‡Œä¹Ÿè¯´äº†ï¼Œè¿™æ ·å°±æ˜¯ä¸ºäº†æš‚æ—¶å¯åŠ¨ï¼Œå°†æ•°æ®å¤‡ä»½å‡ºæ¥ <strong>å…³äºå¦‚ä½•åœ¨dockerå®¹å™¨æ–¹å¼éƒ¨ç½²mysqlæ—¶ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå‚è€ƒï¼š</strong><a href="https://www.itze.cn/mysql/819.html" title="Dockerç¯å¢ƒä¸‹Mysqlè·³è¿‡å¯†ç éªŒè¯">Dockerç¯å¢ƒä¸‹Mysqlè·³è¿‡å¯†ç éªŒè¯</a></p><h2 id="æ‘˜å–å®˜æ–¹"><a href="#æ‘˜å–å®˜æ–¹" class="headerlink" title="æ‘˜å–å®˜æ–¹"></a>æ‘˜å–å®˜æ–¹</h2><p>ä½œä¸ºå®‰å…¨æªæ–½ï¼ŒInnoDBé˜²æ­¢ INSERTã€ UPDATEã€ æˆ– å¤§äº 0DELETEæ—¶çš„æ“ä½œ ã€‚åªè¯»æ¨¡å¼ä¸‹ 4 ä½æˆ–æ›´å¤šä½çš„è®¾ç½®ã€‚innodb_force_recoveryinnodb_force_recoveryInnoDB 1 ( SRV_FORCE_IGNORE_CORRUPT) è®©æœåŠ¡å™¨å³ä½¿æ£€æµ‹åˆ°æŸåçš„ é¡µé¢ä¹Ÿèƒ½è¿è¡Œã€‚å°è¯• è·³è¿‡æŸåçš„ç´¢å¼•è®°å½•å’Œé¡µé¢ï¼Œè¿™æœ‰åŠ©äºè½¬å‚¨è¡¨ã€‚ SELECT * FROM tbl_name 2 ( SRV_FORCE_NO_BACKGROUND) é˜»æ­¢ä¸»çº¿ç¨‹å’Œä»»ä½•æ¸…é™¤çº¿ç¨‹è¿è¡Œã€‚å¦‚æœåœ¨æ¸…é™¤æ“ä½œæœŸé—´å‘ç”Ÿæ„å¤–é€€å‡ºï¼Œæ­¤æ¢å¤å€¼ä¼šé˜»æ­¢å®ƒã€‚ 3 ( SRV_FORCE_NO_TRX_UNDO) å´©æºƒæ¢å¤å ä¸è¿è¡Œäº‹åŠ¡ å›æ»šã€‚ 4 ( SRV_FORCE_NO_IBUF_MERGE) é˜²æ­¢æ’å…¥ç¼“å†²åŒºåˆå¹¶æ“ä½œã€‚å¦‚æœå®ƒä»¬ä¼šå¯¼è‡´å´©æºƒï¼Œè¯·ä¸è¦è¿™æ ·åšã€‚ä¸è®¡ç®—è¡¨ ç»Ÿè®¡ä¿¡æ¯ã€‚æ­¤å€¼å¯èƒ½ä¼šæ°¸ä¹…æŸåæ•°æ®æ–‡ä»¶ã€‚ä½¿ç”¨æ­¤å€¼åï¼Œå‡†å¤‡åˆ é™¤å¹¶é‡æ–°åˆ›å»ºæ‰€æœ‰äºŒçº§ç´¢å¼•ã€‚è®¾ç½® InnoDBä¸ºåªè¯»ã€‚ 5 ( SRV_FORCE_NO_UNDO_LOG_SCAN) å¯åŠ¨æ•°æ®åº“æ—¶ ä¸æŸ¥çœ‹æ’¤æ¶ˆæ—¥å¿—InnoDBï¼šç”šè‡³å°†ä¸å®Œæ•´çš„äº‹åŠ¡è§†ä¸ºå·²æäº¤ã€‚æ­¤å€¼å¯èƒ½ä¼šæ°¸ä¹…æŸåæ•°æ®æ–‡ä»¶ã€‚è®¾ç½®InnoDBä¸ºåªè¯»ã€‚ 6 ( SRV_FORCE_NO_LOG_REDO) ä¸æ‰§è¡Œä¸æ¢å¤ç›¸å…³çš„é‡åšæ—¥å¿— å‰æ»šã€‚æ­¤å€¼å¯èƒ½ä¼šæ°¸ä¹…æŸåæ•°æ®æ–‡ä»¶ã€‚ä½¿æ•°æ®åº“é¡µé¢å¤„äºè¿‡æ—¶çŠ¶æ€ï¼Œè¿™åè¿‡æ¥å¯èƒ½ä¼šç»™ B æ ‘å’Œå…¶ä»–æ•°æ®åº“ç»“æ„å¸¦æ¥æ›´å¤šæŸåã€‚è®¾ç½® InnoDBä¸ºåªè¯»ã€‚ æ‚¨å¯ä»¥SELECTä»è¡¨ä¸­è½¬å‚¨å®ƒä»¬ã€‚innodb_force_recoveryå€¼ä¸º 3 æˆ–æ›´å°‘æ—¶ï¼Œæ‚¨å¯ä»¥æˆ– DROPè¡¨æ ¼ CREATEã€‚DROP TABLEä¹Ÿæ”¯æŒ innodb_force_recoveryå¤§äº 3çš„å€¼ã€‚DROP TABLEä¸å…è®¸ innodb_force_recoveryå¤§äº 4 çš„å€¼ã€‚ å¦‚æœæ‚¨çŸ¥é“ç»™å®šè¡¨å¯¼è‡´å›æ»šæ—¶æ„å¤–é€€å‡ºï¼Œåˆ™å¯ä»¥å°†å…¶åˆ é™¤ã€‚å¦‚æœé‡åˆ°ç”±äºæ‰¹é‡å¯¼å…¥å¤±è´¥è€Œå¯¼è‡´çš„å¤±æ§å›æ»šALTER TABLEï¼Œæ‚¨å¯ä»¥ç»ˆæ­¢ mysqld è¿›ç¨‹å¹¶è®¾ç½® innodb_force_recoveryä¸º 3åœ¨ä¸å›æ»šçš„æƒ…å†µä¸‹å¯åŠ¨æ•°æ®åº“ï¼Œç„¶åDROPæ˜¯å¯¼è‡´å¤±æ§å›æ»šçš„è¡¨ã€‚ å¦‚æœè¡¨æ•°æ®ä¸­çš„æŸåé˜»æ­¢æ‚¨è½¬å‚¨æ•´ä¸ªè¡¨å†…å®¹ï¼Œåˆ™å¸¦æœ‰å­å¥çš„æŸ¥è¯¢å¯èƒ½èƒ½å¤Ÿè½¬å‚¨æŸåéƒ¨åˆ†ä¹‹åçš„è¡¨éƒ¨åˆ†ã€‚ ORDER BY primary_key DESC innodb_force_recovery å¦‚æœstart éœ€è¦ ä¸€ä¸ªé«˜å€¼InnoDBï¼Œåˆ™å¯èƒ½å­˜åœ¨æŸåçš„æ•°æ®ç»“æ„ï¼Œè¿™å¯èƒ½å¯¼è‡´å¤æ‚æŸ¥è¯¢ï¼ˆåŒ…å«WHEREã€ORDER BYæˆ–å…¶ä»–å­å¥çš„æŸ¥è¯¢ï¼‰å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½åªèƒ½è¿è¡ŒåŸºæœ¬SELECT * FROM t æŸ¥è¯¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlé€šè¿‡ibdæ–‡ä»¶æ¢å¤æ•°æ®</title>
      <link href="/2022/06/24/mysql%E9%80%9A%E8%BF%87ibd%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE/"/>
      <url>/2022/06/24/mysql%E9%80%9A%E8%BF%87ibd%E6%96%87%E4%BB%B6%E6%81%A2%E5%A4%8D%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 Mysqlç‰ˆæœ¬ï¼š8.0.x</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å¦‚æœMysqlæœåŠ¡æ— æ³•å¯åŠ¨ï¼Œåˆ™å¯ä»¥é€šè¿‡Mysqlè¡¨å¯¹åº”çš„.ibdæ–‡ä»¶æ¢å¤æ•°æ®ï¼Œå¦‚æœä½ çš„MysqlæœåŠ¡å¯ä»¥æ­£å¸¸å¯åŠ¨ï¼Œå°±ä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼äº†</p><h2 id="åŠæ³•"><a href="#åŠæ³•" class="headerlink" title="åŠæ³•"></a>åŠæ³•</h2><ol><li>åˆ›å»ºä¸€å¼ è¡¨ï¼Œè¡¨ç»“æ„ä¸åŸè¡¨ç»“æ„ä¸€è‡´</li><li>åˆ é™¤æ–°å»ºçš„è¡¨ç©ºé—´</li></ol><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>table_name<span class="operator">&gt;</span> DISCARD TABLESPACE;</span><br></pre></td></tr></table></figure><ol start="3"><li>å°†å¾…æ¢å¤çš„.ibdæ–‡ä»¶copyåˆ°ç›®æ ‡æ•°æ®åº“æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶æƒé™:</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp &lt;table_name&gt;.ibd /var/lib/mysql/&lt;database_name&gt;</span><br><span class="line">cd /var/lib/mysql/&lt;database_name&gt;</span><br><span class="line">chown mysql:mysql &lt;table_name&gt;.ibd</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šå¦‚æœmysqlæœåŠ¡æ˜¯é€šè¿‡Dockeræ–¹å¼éƒ¨ç½²ï¼Œéœ€è¦å°†.ibdæ–‡ä»¶æ‹·è´åˆ°ï¼Œæ˜ å°„åˆ°Mysqlçš„Dockerå®¹å™¨è·¯å¾„ä¸‹ï¼Œä¿®æ”¹æƒé™éœ€è¦è¿›å…¥åˆ°Mysqlæ‰€åœ¨çš„Dockerå®¹å™¨ï¼é‡ç‚¹ï¼Œä¸æ˜¯ç›´æ¥åœ¨å®‰è£…Dockeré‚£å°æœºå™¨ä¸Šä¿®æ”¹æƒé™ï¼Œä¸€å®šè¦è¿›å…¥åˆ°myslqæ‰€åœ¨çš„dockerå®¹å™¨</strong> dockerè¿›å…¥æŸå®¹å™¨å‘½ä»¤ï¼Œå‡å¦‚æˆ‘çš„å®¹å™¨åæ˜¯docker_mysql</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it docker_mysql /bin/bash</span><br></pre></td></tr></table></figure><ol start="4"><li>å¯¼å…¥è¡¨ç©ºé—´</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ALTER TABLE &lt;table_name&gt; IMPORT TABLESPACE;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Mysql </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>GeoServerå¯åŠ¨æŠ¥é”™ï¼šjava.lang.NoClassDefFoundError: Could not initialize class javax.media.jai.JAI</title>
      <link href="/2022/06/24/geoserver%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99%EF%BC%9Ajava-lang-noclassdeffounderror-could-not-initialize-class-javax-media-jai-jai/"/>
      <url>/2022/06/24/geoserver%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99%EF%BC%9Ajava-lang-noclassdeffounderror-could-not-initialize-class-javax-media-jai-jai/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>JDKç‰ˆæœ¬ï¼š1.8</li><li>Tomcatç‰ˆæœ¬ï¼š8.x</li><li>GeoServerç‰ˆæœ¬ï¼šStable 2.21.0</li></ul><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>CentOS 7ç³»ç»Ÿé€šè¿‡geoserverå®˜æ–¹æä¾›çš„waråŒ…å½¢å¼éƒ¨ç½²ï¼Œtomcatå¯åŠ¨æ­£å¸¸ï¼Œç¡®å®štomcatæ²¡é—®é¢˜ï¼Œå°†ä¸‹è½½çš„geoserver.waråŒ…æ”¾ç½®tomcatçš„webappsè·¯å¾„ä¸‹ï¼Œtomcatå¯åŠ¨çŠ¶æ€ä¼šè‡ªåŠ¨éƒ¨ç½²ï¼Œé€šè¿‡å¯åŠ¨logæŸ¥çœ‹æŠ¥é”™ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">java.lang.NoClassDefFoundError: Could not initialize <span class="keyword">class</span> <span class="title class_">javax</span>.media.jai.JAI</span><br></pre></td></tr></table></figure><p>tomcatåœ¨linuxä¸Šå¯åŠ¨æ—¶æŸ¥çœ‹æ§åˆ¶å°å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tomcat/bin/start.sh &amp;&amp; tail -f tomcat/logs/catalina.out</span><br></pre></td></tr></table></figure><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>1.ä¸‹è½½JAI Java Advanced Imaging (JAI) æ˜¯Oracleå¼€å‘çš„ç”¨äºé«˜çº§å›¾åƒå¤„ç†çš„åº“ã€‚ GeoServeræ— éœ€å®ƒå³å¯è¿è¡Œï¼Œ å› ä¸ºå®ƒéšé™„äº†çº¯Javaç‰ˆæœ¬çš„JAIã€‚ å®‰è£…JAIå¯ä»¥å¤§å¤§æé«˜å¤„ç†å›¾åƒæ—¶çš„æ€§èƒ½ï¼Œ å³æ …æ ¼æ ¼å¼æ•°æ®ã€‚ å¦‚æœæ‚¨ä¸æ‰“ç®—ä½¿ç”¨ç©ºé—´æ …æ ¼æ•°æ®ï¼Œ å½“æ‚¨ç´¢è¦åœ°å›¾æ—¶ï¼ŒGeoServerå¯ä»¥ä½¿ç”¨å›¾åƒæ ¼å¼ï¼Œä¾‹å¦‚ï¼Œ åœ¨WMS GetMap è¯·æ±‚ä¸­ï¼Œå› æ­¤å°†å®ƒæ”¾åœ¨ç”Ÿäº§ç«™ç‚¹ä¸Šå¾ˆå€¼å¾— é€šè¿‡wgetå‘½ä»¤ä¸‹è½½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://download.java.net/media/jai/builds/release/1_1_3/jai-1_1_3-lib-linux-amd64-jre.bin</span><br></pre></td></tr></table></figure><p>2.å°†æ–‡ä»¶å¤åˆ¶åˆ°å®‰è£…JREçš„æ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åè¿è¡Œå®ƒï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp jai-1_1_3-lib-linux-amd64-jre.bin /jre1.8.0/.(æ”¹æˆä½ çš„jreå®‰è£…è·¯å¾„)</span><br></pre></td></tr></table></figure><p>åˆ‡å…¥åˆ°ä½ çš„jreè·¯å¾„ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/lib/jvm/jre1.8.0/(æ”¹æˆä½ çš„jreå®‰è£…è·¯å¾„)</span><br></pre></td></tr></table></figure><p>è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh jai-1_1_3-lib-linux-amd64-jre.bin</span><br></pre></td></tr></table></figure><p>ç„¶åä¼šå‡ºç°ç±»ä¼¼ç”¨æˆ·è®¸å¯åè®®ï¼Œçœ‹å®Œå°±è¡Œäº†ï¼ŒæŒ‰é”®ç›˜å›è½¦ï¼ˆEnterï¼‰ å‡ºç°ä¸‹é¢çš„Doneä»£è¡¨å·²ç»å®Œæˆ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">    inflating: COPYRIGHT-jai.txt</span><br><span class="line">    inflating: DISTRIBUTIONREADME-jai.txt</span><br><span class="line">    inflating: LICENSE-jai.txt</span><br><span class="line">    inflating: THIRDPARTYLICENSEREADME-jai.txt</span><br><span class="line">    inflating: UNINSTALL-jai</span><br><span class="line">    inflating: lib/amd64/libmlib_jai.so</span><br><span class="line">    inflating: lib/ext/jai_core.jar</span><br><span class="line">    inflating: lib/ext/jai_codec.jar</span><br><span class="line">    inflating: lib/ext/mlibwrapper_jai.jar</span><br><span class="line">Done</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…å®Œæ¯•ä¹‹åå¦‚æœè¿˜æ˜¯æŠ¥é”™ï¼Œå†å°è¯•å®‰è£…ä¸‹é¢çš„jai-imageio"><a href="#å®‰è£…å®Œæ¯•ä¹‹åå¦‚æœè¿˜æ˜¯æŠ¥é”™ï¼Œå†å°è¯•å®‰è£…ä¸‹é¢çš„jai-imageio" class="headerlink" title="å®‰è£…å®Œæ¯•ä¹‹åå¦‚æœè¿˜æ˜¯æŠ¥é”™ï¼Œå†å°è¯•å®‰è£…ä¸‹é¢çš„jai_imageio"></a>å®‰è£…å®Œæ¯•ä¹‹åå¦‚æœè¿˜æ˜¯æŠ¥é”™ï¼Œå†å°è¯•å®‰è£…ä¸‹é¢çš„jai_imageio</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://download.java.net/media/jai-imageio/builds/ release/1.1/jai_imageio-1_1-lib-linux-amd64-jre.bin</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ä¹‹åæ“ä½œå’Œä¸Šé¢çš„å®Œå…¨ç›¸åŒ ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½è¯¥jaråŒ…ï¼Œ<a href="https://layui.itze.cn/static/download/java/jai_imageio-1.1.jar" title="jai_imageio-1.1.jar">jai_imageio-1.1.jar</a>ç‚¹å‡»ä¸‹è½½ï¼Œç„¶åå°†ä¸‹è½½çš„jaråŒ…æ”¾åˆ°å®‰è£…jdkè·¯å¾„ä¸‹ï¼Œjdk1.8.0ï¼ˆå‰é¢è¿™é‡Œæ¢æˆä½ è‡ªå·±çš„è·¯å¾„ï¼Œåé¢ä¸ç”¨å˜ï¼‰&#x2F;jre&#x2F;lib&#x2F;extçš„ä¸‹é¢</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jdk1.8.0ï¼ˆå‰é¢è¿™é‡Œæ¢æˆä½ è‡ªå·±çš„è·¯å¾„ï¼Œåé¢ä¸ç”¨å˜ï¼‰/jre/lib/ext</span><br></pre></td></tr></table></figure><h3 id="æœ€åé‡å¯tomcatæœåŠ¡"><a href="#æœ€åé‡å¯tomcatæœåŠ¡" class="headerlink" title="æœ€åé‡å¯tomcatæœåŠ¡"></a>æœ€åé‡å¯tomcatæœåŠ¡</h3>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> GeoServer </category>
          
          <category> Tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> GeoServer </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå¯¹å·²æœ‰å·ç»„æ‰©å®¹</title>
      <link href="/2022/03/30/centos%E5%AF%B9%E5%B7%B2%E6%9C%89%E5%8D%B7%E7%BB%84%E6%89%A9%E5%AE%B9/"/>
      <url>/2022/03/30/centos%E5%AF%B9%E5%B7%B2%E6%9C%89%E5%8D%B7%E7%BB%84%E6%89%A9%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentos 7</p><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>å¯¹å·²æœ‰çš„ä¸€å—æŒ‚è½½ç£ç›˜å·ç»„è¿›è¡Œæ‰©å®¹ <img src="https://www.itze.cn/wp-content/uploads/2022/03/71969909-2A18-4f21-9234-0DC2578ADF8D.png"></p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><ol><li>æ·»åŠ ä¸€å—æ–°ç£ç›˜ æŸ¥çœ‹ç£ç›˜</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚æ–°åŠ çš„ç£ç›˜åç§°ä¸ºï¼š&#x2F;dev&#x2F;vdd 2. å°†æ–°æ·»åŠ çš„ç£ç›˜åˆ›å»ºç‰©ç†å·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pvcreate /dev/vdd</span><br></pre></td></tr></table></figure><ol start="3"><li>å°†æ–°åˆ›å»ºçš„ç‰©ç†å·åŠ å…¥å·²å­˜åœ¨éœ€è¦æ‰©å®¹çš„å·ç»„ æŸ¥çœ‹å·ç»„ä¿¡æ¯</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vgdisplay</span><br></pre></td></tr></table></figure><p>åŠ å…¥ç¬¬äºŒæ­¥ä¸­æ–°åˆ›å»ºçš„å·ç»„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vgextend centos /dev/vdd </span><br></pre></td></tr></table></figure><ol start="4"><li>å°†æ–°æ·»åŠ çš„å¤§å°å…¨éƒ¨ç»™åˆ°å·ç»„</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lvextend -l +100%FREE /dev/mapper/centos-lvname</span><br></pre></td></tr></table></figure><ol start="5"><li>é‡æ–°åŠ è½½å·ç»„å¤§å°</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">resize2fs /dev/mapper/centos-lvname</span><br></pre></td></tr></table></figure><ol start="6"><li>æŸ¥çœ‹</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">df -Th</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„é¡¹"><a href="#æ³¨æ„é¡¹" class="headerlink" title="æ³¨æ„é¡¹"></a>æ³¨æ„é¡¹</h2><ul><li>å¦‚æœä½ çš„ç£ç›˜æ˜¯ä½¿ç”¨çš„å’Œæœ¬æ–‡ç« è¿™æ ·æ˜¯å°†å¤šä¸ªç£ç›˜ä½¿ç”¨LVMé€šè¿‡åˆ›å»ºç‰©ç†å·ç„¶ååˆ›å»ºå·ç»„ï¼Œé€šè¿‡æŒ‚è½½å·ç»„ç£ç›˜çš„æ–¹å¼ï¼Œæ‰©å®¹æ—¶ä¸è¦åœ¨å·²ç»åˆå§‹åŒ–ä¸ºç‰©ç†å·çš„ç£ç›˜ä¸Šç›´æ¥æ‰©å®¹</li><li>æ¯”å¦‚ï¼Œ&#x2F;dev&#x2F;vda è¿™å—ç£ç›˜å·²ç»è¢«åˆ›å»ºæˆç‰©ç†å·å¹¶ä¸”æ·»åŠ è‡³å·ç»„ï¼Œä¸è¦åœ¨è¿™å—ç£ç›˜ä¸Šç›´æ¥æ‰©å®¹è¿™å—ç£ç›˜çš„å¤§å°ï¼Œç›®å‰å·²çŸ¥åä¸ºäº‘æ˜¯å¯ä»¥ç›´æ¥åœ¨å·²æœ‰çš„ç£ç›˜ä¸Šç›´æ¥æ‰©å®¹ï¼Œè¿™ç§æ–¹å¼æ‰©å®¹äº†ä¹Ÿæ²¡æ³•ç”¨</li><li>è¦æ–°åŠ ä¸€å—æ–°çš„ç£ç›˜ï¼Œç„¶åæŒ‰ç…§æœ¬æ–‡ç« æ“ä½œå³å¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡Mysqlæ•°æ®è¿ç§»è‡³Mycat</title>
      <link href="/2022/03/04/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/"/>
      <url>/2022/03/04/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ•°æ®åº“ï¼šMysql8</li><li>æ“ä½œç³»ç»Ÿï¼šWindows10ã€CentOS7</li><li>ä¸­é—´ä»¶ï¼šMycat1.6.7</li></ul><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>æ•°æ®åº“ä½¿ç”¨çš„mysqlï¼Œèµ·åˆæ˜¯å•åº“å•è¡¨ï¼Œæ—¶é—´ä¹…äº†å•è¡¨çš„æ•°æ®é‡è¶Šæ¥è¶Šå¤§ï¼Œä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®é‡è¾¾åˆ°3ä¸ªå¤šäº¿ï¼Œmysqlå•è¡¨æ•°æ®é‡è¾¾åˆ°800ä¸‡å·¦å³å°±è¾¾åˆ°ç“¶é¢ˆäº†ï¼Œä¸å¾—ä¸åˆ†è¡¨äº†,ä½¿ç”¨mycatä¸­é—´ä»¶</p><h2 id="è¿ç§»å‰å‡†å¤‡"><a href="#è¿ç§»å‰å‡†å¤‡" class="headerlink" title="è¿ç§»å‰å‡†å¤‡"></a>è¿ç§»å‰å‡†å¤‡</h2><ol><li>éƒ¨ç½²å¥½æ–°çš„æ•°æ®åº“èŠ‚ç‚¹ï¼ŒæœåŠ¡å™¨ç£ç›˜å®¹é‡ä¿è¯è¦ä»å……è¶³</li><li>åˆ†æéœ€è¦è¿ç§»çš„å•è¡¨æ•°æ®é‡ï¼Œè®¡ç®—ç°æœ‰æ•°æ®é‡åŠä¼°ç®—æ¯æ—¥æ–°å¢å¤§æ¦‚æ•°æ®é‡ï¼ŒæŒ‰ç…§å•è¡¨800ä¸‡å·¦å³å­˜å‚¨ï¼Œè®¡ç®—å•è¡¨éœ€è¦æ‹†åˆ†æˆå¤šå°‘ä¸ªåˆ†ç‰‡</li><li>åœ¨æ–°çš„æ•°æ®åº“èŠ‚ç‚¹åˆ›å»ºå¥½ç›¸åº”çš„åˆ†ç‰‡è¡¨åŠmycaté…ç½®ï¼Œå»ºè®®æ¶‰åŠåˆ°çš„ç´¢å¼•è¿™ä¸ªæ—¶å€™ä¹Ÿåˆ›å»ºå¥½</li></ol><h2 id="å¯¼å‡ºåŸå§‹æ•°æ®"><a href="#å¯¼å‡ºåŸå§‹æ•°æ®" class="headerlink" title="å¯¼å‡ºåŸå§‹æ•°æ®"></a>å¯¼å‡ºåŸå§‹æ•°æ®</h2><p>å¯¼å‡ºæ•°æ®çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/mysql/858.html" title="Mysqlåƒä¸‡çº§æ•°æ®é‡æ‰¹é‡å¿«é€Ÿè¿ç§»">Mysqlåƒä¸‡çº§æ•°æ®é‡æ‰¹é‡å¿«é€Ÿè¿ç§»</a> - mysqldump æ–¹å¼ - load data æ–¹å¼ - åˆ©ç”¨Navicat For Mysqlå¯è§†åŒ–å·¥å…·æ–¹å¼ - ç¬¬ä¸‰æ–¹å¼€æºå·¥å…·yugong - â€¦ <strong>æ³¨ï¼šä»¥ä¸Šå‡ ç§æœ€å¿«çš„æ–¹å¼æ˜¯ç¬¬äºŒç§load data</strong> - å®é™…æµ‹è¯•å¦‚æœå°†å¯¼å‡ºçš„æ•°æ®é€šmycat1.6.7ç‰ˆæœ¬å¯¼å…¥åˆ°æ–°çš„æ•°æ®èŠ‚ç‚¹ï¼Œload dataæ–¹å¼ä¸æ”¯æŒï¼Œæ ¹æ®mycat1.xå®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œä½¿ç”¨load dataæ–¹å¼è¿ç§»æ•°æ®åˆ†é…è·¯ç”±ï¼Œschema.xmlé…ç½®æ–‡ä»¶ä¸­dbDriveræ–¹å¼å¿…é¡»ä¸ºnativeï¼Œå®é™…æµ‹è¯•å¹¶æ²¡æœ‰ç”¨ï¼Œmycatç¤¾åŒºå§”å‘˜ä¼šä¿Šæ–‡ä¹Ÿè¡¨ç¤ºä¸å»ºè®®é€šè¿‡mycat1.xä½¿ç”¨load dataæ–¹å¼ - ç”±äºä½œè€…ä½¿ç”¨çš„æ˜¯mycat1.6.7ç‰ˆæœ¬æ‰€ä»¥ï¼Œæ²¡èƒ½ä½¿ç”¨load dataè¿ç§»ï¼Œæœ€åé€‰æ‹©ä½¿ç”¨mysqldumpæ–¹å¼ï¼Œæœ‰ä¸€å¼ å•è¡¨æ•°æ®é‡è¾¾åˆ°äº†å°†è¿‘4äº¿ï¼Œåœ¨å¤„ç†è¿™å¼ è¡¨çš„æ—¶å€™ï¼Œè€ƒè™‘åˆ°æ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œä»¥åŠæœ‰å…¶ä»–ç¨‹åºä¹Ÿåœ¨æºæºä¸æ–­çš„å†™å…¥æ–°çš„æ•°æ®ï¼Œæ‰€ä»¥é‡‡ç”¨æŒ‰æ¡ä»¶åˆ†å‰²å¤„ç†ï¼Œåˆ†æè¡¨ç»“æ„ï¼Œå¦‚æœæœ‰IDè‡ªå¢ä¸»é”®è¿™ç§ï¼Œå¯ä»¥æŒ‰ç…§IDæ¥åˆ†å‰²ï¼Œæˆ–è€…æŒ‰ç…§å…¶ä»–æ—§æ•°æ®ä¸ä¼šå†æ–°å¢çš„æ¡ä»¶ï¼Œè¿™é‡Œæ ¹æ®è‡ªå·±å®é™…ä¸šåŠ¡éœ€æ±‚ å¯¼å‡ºè¯­å¥ç¤ºä¾‹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p123456 <span class="operator">-</span>h127<span class="number">.0</span><span class="number">.1</span> <span class="operator">-</span>P3306 <span class="comment">--default-character-set=utf8 -c -t --skip-add-locks --databases testDB --tables user --where=&quot;user_id BETWEEN 0 AND 10000&quot;&gt; D:\user_id_0_10000.sql</span></span><br></pre></td></tr></table></figure><p>mysqldump -uroot -p123456 -h127.0.1 -P3306 â€“default-character-set&#x3D;utf8 -c -t â€“skip-add-locks â€“databases testDB â€“tables user â€“where&#x3D;â€user_id BETWEEN 0 AND 10000â€&gt; D:\user_id_0_10000.sql å‚æ•°è§£é‡Š - -uï¼ˆå°å†™ï¼‰ï¼šmysqlç”¨æˆ·å - -pï¼ˆå°å†™ï¼‰ï¼šmysqlå¯†ç  - -hï¼ˆå°å†™ï¼‰ï¼šmysqlæ‰€åœ¨ä¸»æœºåœ°å€ï¼Œå¯ä»¥æ˜¯è¿œç¨‹å¯ä»¥æ˜¯æœ¬æœºï¼Œæœ¬æœºå¯ä»¥çœç•¥ - -Pï¼ˆå¤§å†™ï¼‰ï¼šmysqlç«¯å£å· - -cï¼ˆå°å†™ï¼‰ï¼šä½¿ç”¨å®Œæ•´çš„insertè¯­å¥(åŒ…å«åˆ—åç§°)ã€‚è¿™ä¹ˆåšèƒ½æé«˜æ’å…¥æ•ˆç‡ï¼Œä½†æ˜¯å¯èƒ½ä¼šå—åˆ°max_allowed_packetå‚æ•°çš„å½±å“è€Œå¯¼è‡´æ’å…¥å¤±è´¥ã€‚ - -tï¼ˆå°å†™ï¼‰:åªå¯¼å‡ºæ•°æ®ï¼Œè€Œä¸æ·»åŠ CREATE TABLE è¯­å¥ã€‚ - â€“default-character-set&#x3D;utf8ï¼šè®¾ç½®é»˜è®¤å­—ç¬¦é›†ï¼Œé»˜è®¤å€¼ä¸ºutf8 - â€“skip-add-locksï¼šå–æ¶ˆåœ¨æ¯ä¸ªè¡¨å¯¼å‡ºä¹‹å‰å¢åŠ LOCK TABLESï¼ˆé»˜è®¤å­˜åœ¨é”ï¼‰ - â€“databasesï¼šå¯¼å‡ºçš„æ•°æ®åï¼Œè¿™é‡Œåªéœ€è¦å¯¼å‡ºçš„è¡¨æ‰€åœ¨çš„æ•°æ®åå­— - â€“tablesï¼šéœ€è¦å¯¼å‡ºçš„è¡¨å - â€“whereï¼šæ·»åŠ æ¡ä»¶ï¼Œç¤ºä¾‹ï¼šuser_id BETWEEN 0 AND 10000ï¼Œè¿™é‡Œåªä¼šå¯¼å‡ºuser_idå¤§äºç­‰äº0å°äº10000çš„æ•°æ®ï¼Œå¯ä»¥ç†è§£ä¸ºæ‰§è¡Œå¯¼å‡ºäº†ä»¥ä¸‹sqlç»“æœï¼šSELECT * FROM user WHERE user_id BETWEEN 0 AND 10000; - D:\user_id_0_10000.sqlï¼šå¯¼å‡ºä½ç½®ï¼Œå¦‚æœä½¿ç”¨çš„windowsæœ¬æœºæœºå™¨å¯¼å‡ºè¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼Œè¿™é‡Œå°±æ˜¯æœ¬åœ°çš„è·¯å¾„ï¼Œå¦‚æœåœ¨linuxä¸Šæ‰§è¡Œï¼Œè·¯å¾„å°±æ¢æˆlinuxä¸Šçš„å³å¯æ¯”å¦‚ï¼š&#x2F;root&#x2F;user_id_0_10000.sql</p><h2 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h2><h4 id="å¦‚æœè¦å¯¹åŸè¡¨è¿›è¡Œåˆ†ç‰‡ï¼Œç„¶åé€šè¿‡mycatå¯¼å…¥"><a href="#å¦‚æœè¦å¯¹åŸè¡¨è¿›è¡Œåˆ†ç‰‡ï¼Œç„¶åé€šè¿‡mycatå¯¼å…¥" class="headerlink" title="å¦‚æœè¦å¯¹åŸè¡¨è¿›è¡Œåˆ†ç‰‡ï¼Œç„¶åé€šè¿‡mycatå¯¼å…¥"></a>å¦‚æœè¦å¯¹åŸè¡¨è¿›è¡Œåˆ†ç‰‡ï¼Œç„¶åé€šè¿‡mycatå¯¼å…¥</h4><p>å¦‚æœåŸè¡¨å•è¡¨å¯¼å…¥åˆ°æ–°èŠ‚ç‚¹ä¹‹ååšäº†åˆ†ç‰‡ï¼Œè¿™é‡Œä¸¾ä¾‹ï¼Œå‡å¦‚åŸæ¥ä¸€å¼ å•è¡¨é€šè¿‡mycatåˆ†ç‰‡å¯¼å…¥ä¹‹ååˆ†æˆäº†3ä¸ªåˆ†ç‰‡è¡¨ï¼Œä¹Ÿå°±æ˜¯åŸæ¥çš„ä¸€å¼ è¡¨æ•°æ®åˆ†æ•£å¯¼å…¥åˆ°ä¸‰å¼ è¡¨ä¸­ ä»¥ä¸‹é…ç½®å‰æå·²ç»åˆ›å»ºå¥½äº†åˆ†ç‰‡è¡¨ï¼Œå‡å¦‚åˆ†ç‰‡è¡¨åä¸ºuser1ã€user2ã€user3 mycaté…ç½®æ–‡ä»¶schemal.xml</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;table name=&quot;user&quot; primaryKey=&quot;user_id&quot; autoIncrement=&quot;true&quot; dataNode=&quot;dn1&quot; subTables=&quot;user$1-3&quot; rule=&quot;mod_Name&quot;&gt;&lt;/table&gt;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå…¨å±€åºåˆ—å·é‡‡ç”¨ï¼šè‡ªå¢é•¿ä¸»é”®æ–¹å¼ï¼Œå…·ä½“å‚è€ƒæ–‡ç« ï¼š<a href="https://www.itze.cn/mycat/958.html" title="Mycat1.6.7.6å…¨å±€åºåˆ—å·çš„ä½¿ç”¨">Mycat1.6.7.6å…¨å±€åºåˆ—å·çš„ä½¿ç”¨</a> åˆ†ç‰‡ç®—æ³•é‡‡ç”¨ï¼šå–æ¨¡ é…ç½®å®Œæˆä¹‹åé‡å¯mycatå¼€å§‹æ‰§è¡Œå¯¼å…¥å³å¯ï¼Œmycatä¼šè‡ªåŠ¨è·¯ç”±å°†åŸæ¥çš„æ•°æ®è¾ƒå‡åŒ€åˆ†é…åˆ°å„ä¸ªåˆ†ç‰‡ä¸­</p><h4 id="æœ¬åœ°å¯¼å…¥"><a href="#æœ¬åœ°å¯¼å…¥" class="headerlink" title="æœ¬åœ°å¯¼å…¥"></a>æœ¬åœ°å¯¼å…¥</h4><p>å¦‚æœæœ¬åœ°èƒ½é“¾æ¥mycatæœåŠ¡ï¼Œæˆ–è€…mycatåšäº†é«˜å¯ç”¨ä¸ªï¼Œå¯ä»¥é€šè¿‡haproxyé“¾æ¥ï¼Œé‡ç‚¹æ˜¯æœ¬åœ°å¦‚æœèƒ½å¤Ÿè¿æ¥æˆåŠŸmycatï¼Œé‚£ä¹ˆå‰é¢å¯¼å‡ºçš„user_id_0_10000.sqlæ–‡ä»¶å°±ä¸éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨äº†ï¼Œä½œè€…å®é™…æµ‹è¯•æœ¬åœ°windowsä¸Šçš„mysqlæœåŠ¡å¹¶ä¸èƒ½å¤ŸæˆåŠŸè¿æ¥åˆ°Linuxä¸Šçš„mycatæœåŠ¡ï¼Œå¦‚æœæœ¬åœ°ä½ èƒ½å¤Ÿè¿æ¥æˆåŠŸï¼Œé‚£ä¹ˆæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¼å…¥æ•°æ®åˆ°æ–°çš„æ•°æ®èŠ‚ç‚¹å³å¯ï¼Œæ³¨æ„è·¯å¾„åˆ‡æ¢åˆ°ä½ è‡ªå·±çš„</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">source D:\user_id_0_10000.sql</span><br></pre></td></tr></table></figure><h4 id="æœåŠ¡å™¨å¯¼å…¥"><a href="#æœåŠ¡å™¨å¯¼å…¥" class="headerlink" title="æœåŠ¡å™¨å¯¼å…¥"></a>æœåŠ¡å™¨å¯¼å…¥</h4><p>å¦‚æœæœ¬åœ°ä¸èƒ½è¿æ¥åˆ°mycatæœåŠ¡ï¼Œä¸èƒ½é€šè¿‡æœ¬åœ°å®ç°ï¼Œå°±éœ€è¦å¤šä¸€æ­¥ï¼Œå°†å¯¼å‡ºçš„sqlæ–‡ä»¶ä¸Šä¼ è‡³è£…æœ‰mysqlæœåŠ¡çš„æœåŠ¡å™¨ï¼Œä»»æ„ä¸€å°å³å¯ï¼Œå‰æå®‰è£…æœ‰mysqlæœåŠ¡ï¼Œä¸Šä¼ å®Œæˆä¹‹åå°±å’Œæœ¬åœ°ç±»ä¼¼äº†ï¼Œé€šè¿‡mysqlæœåŠ¡è¿æ¥åˆ°mycatï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼Œæ³¨æ„è·¯å¾„åˆ‡æ¢åˆ°ä½ è‡ªå·±çš„</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">source <span class="operator">/</span>root<span class="operator">/</span>user_id_0_10000.sql</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±æ˜¯æ…¢æ…¢çš„ç­‰å¾…æ‰§è¡Œå®Œæˆ~ å®é™…æµ‹è¯•å¹³å‡æ‰§è¡Œæ•ˆç‡å¤§æ¦‚æ¯ç§’æ’å…¥1000æ¡å·¦å³</p><h2 id="æ£€æŸ¥"><a href="#æ£€æŸ¥" class="headerlink" title="æ£€æŸ¥"></a>æ£€æŸ¥</h2><p>å¯¼å…¥å®Œæˆä¹‹åéœ€è¦æ£€æŸ¥æ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿™é‡Œå°±å¾ˆç®€ç­”äº†ï¼Œæ¯”å¦‚å¯¼å‡ºä¹‹å‰åœ¨åŸå§‹æ•°æ®åº“ä¸ŠæŸ¥ä¸€ä¸‹å¯¼å‡ºçš„æ•°æ®æ•°é‡ï¼ŒæŒ‰ç…§æœ¬æ–‡ç¤ºä¾‹ç»Ÿè®¡æŸ¥è¯¢</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">FROM</span> <span class="keyword">user</span> <span class="keyword">WHERE</span> user_id <span class="keyword">BETWEEN</span> <span class="number">0</span> <span class="keyword">AND</span> <span class="number">10000</span>;</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æ–°çš„æ•°æ®èŠ‚ç‚¹æ‰§è¡ŒåŒæ ·çš„å‘½ä»¤ï¼Œå¯¹æ¯”ä¸¤æ¬¡æŸ¥è¯¢ç»“æœå³å¯</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mycat1.6.7.6å…¨å±€åºåˆ—å·çš„ä½¿ç”¨</title>
      <link href="/2022/03/03/mycat1-6-7-6%E5%85%A8%E5%B1%80%E5%BA%8F%E5%88%97%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2022/03/03/mycat1-6-7-6%E5%85%A8%E5%B1%80%E5%BA%8F%E5%88%97%E5%8F%B7%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mysqlç‰ˆæœ¬ï¼šMysql8</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li></ul><h2 id="å…¨å±€åºåˆ—å·-sequence"><a href="#å…¨å±€åºåˆ—å·-sequence" class="headerlink" title="å…¨å±€åºåˆ—å·(sequence)"></a>å…¨å±€åºåˆ—å·(sequence)</h2><p>æ•°æ®åˆ‡åˆ†åï¼ŒåŸæœ‰çš„å…³ç³»æ•°æ®åº“ä¸­çš„ä¸»é”®çº¦æŸåœ¨åˆ†å¸ƒå¼æ¡ä»¶ä¸‹å°†æ— æ³•ä½¿ç”¨ï¼Œå› æ­¤éœ€è¦å¼•å…¥å¤–éƒ¨æœºåˆ¶ä¿è¯æ•°æ® å”¯ä¸€æ€§æ ‡è¯†ï¼Œè¿™ç§ä¿è¯å…¨å±€æ€§çš„æ•°æ®å”¯ä¸€æ ‡è¯†çš„æœºåˆ¶å°±æ˜¯å…¨å±€åºåˆ—å·ï¼ˆsequenceï¼‰ï¼Œå› æ­¤ä¸€èˆ¬å…¨å±€åºåˆ—å·ç”¨äºåˆ†è¡¨æƒ…å†µ</p><h2 id="å…¨å±€åºåˆ—å·ä»‹ç»"><a href="#å…¨å±€åºåˆ—å·ä»‹ç»" class="headerlink" title="å…¨å±€åºåˆ—å·ä»‹ç»"></a>å…¨å±€åºåˆ—å·ä»‹ç»</h2><p>åœ¨å®ç°åˆ†åº“åˆ†è¡¨çš„æƒ…å†µä¸‹ï¼Œæ•°æ®åº“è‡ªå¢ä¸»é”®å·²æ— æ³•ä¿è¯è‡ªå¢ä¸»é”®çš„å…¨å±€å”¯ä¸€ã€‚ä¸ºæ­¤ï¼ŒMyCatæä¾›äº†å…¨å±€sequenceï¼Œå¹¶ä¸”æä¾›äº†åŒ…å«æœ¬åœ°é…ç½®å’Œæ•°æ®åº“é…ç½®ç­‰å¤šç§å®ç°æ–¹å¼ã€‚</p><h3 id="1-æœ¬åœ°æ–‡ä»¶æ–¹å¼"><a href="#1-æœ¬åœ°æ–‡ä»¶æ–¹å¼" class="headerlink" title="1.æœ¬åœ°æ–‡ä»¶æ–¹å¼"></a>1.æœ¬åœ°æ–‡ä»¶æ–¹å¼</h3><p><strong>åŸç†ï¼š</strong> æ­¤æ–¹å¼MyCATå°†sequenceé…ç½®åˆ°æ–‡ä»¶ä¸­ï¼Œå½“ä½¿ç”¨åˆ°sequenceä¸­çš„é…ç½®åï¼ŒMyCATä¼šæ›´ä¸‹ classpathä¸­çš„sequence_conf.propertiesæ–‡ä»¶ä¸­sequenceå½“å‰çš„å€¼ã€‚ <strong>é…ç½®æ–¹å¼ï¼š</strong> åœ¨ sequence_conf.properties æ–‡ä»¶ä¸­åšå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GLOBAL_SEQ.HISIDS= GLOBAL_SEQ.MINID=1001</span><br><span class="line">GLOBAL_SEQ.MAXID=1000000000</span><br><span class="line">GLOBAL_SEQ.CURID=1000</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ HISIDS è¡¨ç¤ºä½¿ç”¨è¿‡çš„å†å²åˆ†æ®µ(ä¸€èˆ¬æ— ç‰¹æ®Šéœ€è¦å¯ä¸é…ç½®)ï¼ŒMINIDè¡¨ç¤ºæœ€å°IDå€¼ï¼ŒMAXIDè¡¨ç¤ºæœ€å¤§IDå€¼ï¼ŒCURIDè¡¨ç¤ºå½“å‰IDå€¼ã€‚ server.xml ä¸­é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;system&gt;</span><br><span class="line">    &lt;property name=&quot;sequnceHandlerType&quot;&gt;0&lt;/property&gt;</span><br><span class="line">&lt;/system&gt;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šsequnceHandlerType éœ€è¦é…ç½®ä¸º 0ï¼Œè¡¨ç¤ºä½¿ç”¨æœ¬åœ°æ–‡ä»¶æ–¹å¼ã€‚ <strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table1(id,name) <span class="keyword">values</span>(<span class="string">&#x27;next value for MYCATSEQ_GLOBAL&#x27;</span>,<span class="string">&#x27;test&#x27;</span>);</span><br></pre></td></tr></table></figure><p><strong>å‡½æ•°ï¼šnext value for MYCATSEQ_GLOBAL ä¼šåœ¨ä¸‹é¢æ•°æ®åº“æ¨¡å¼è®²åˆ°</strong> <strong>ç¼ºç‚¹ï¼š</strong> å½“ MyCAT é‡æ–°å‘å¸ƒåï¼Œé…ç½®æ–‡ä»¶ä¸­çš„ sequence ä¼šæ¢å¤åˆ°åˆå§‹å€¼ã€‚ <strong>ä¼˜ç‚¹ï¼š</strong>æœ¬åœ°åŠ è½½ï¼Œè¯»å–é€Ÿåº¦è¾ƒå¿«ã€‚</p><h3 id="2-æ•°æ®åº“æ–¹å¼"><a href="#2-æ•°æ®åº“æ–¹å¼" class="headerlink" title="2.æ•°æ®åº“æ–¹å¼"></a>2.æ•°æ®åº“æ–¹å¼</h3><p><strong>åŸç†ï¼š</strong> åœ¨æ•°æ®åº“ä¸­å»ºç«‹ä¸€å¼ è¡¨ï¼Œå­˜æ”¾ sequence åç§°(name)ï¼Œsequence å½“å‰å€¼(current_value)ï¼Œæ­¥é•¿(increment intç±»å‹æ¯æ¬¡è¯»å–å¤šå°‘ä¸ªsequenceï¼Œå‡è®¾ä¸ºK)ç­‰ä¿¡æ¯ <strong>Sequenceè·å–æ­¥éª¤ï¼š</strong> 1. å½“åˆæ¬¡ä½¿ç”¨è¯¥sequenceæ—¶ï¼Œæ ¹æ®ä¼ å…¥çš„sequenceåç§°ï¼Œä»æ•°æ®åº“è¿™å¼ è¡¨ä¸­è¯»å–current_valueï¼Œå’Œincrementåˆ°MyCatä¸­ï¼Œå¹¶å°†æ•°æ®åº“ä¸­çš„current_valueè®¾ç½®ä¸ºåŸ current_valueå€¼+incrementå€¼ã€‚ 2. MyCatå°†è¯»å–åˆ°current_value+incrementä½œä¸ºæœ¬æ¬¡è¦ä½¿ç”¨çš„sequenceå€¼ï¼Œä¸‹æ¬¡ä½¿ç”¨æ—¶ï¼Œè‡ªåŠ¨åŠ 1ï¼Œå½“ä½¿ç”¨ incrementæ¬¡åï¼Œæ‰§è¡Œæ­¥éª¤1)ç›¸åŒçš„æ“ä½œã€‚ 3. MyCatè´Ÿè´£ç»´æŠ¤è¿™å¼ è¡¨ï¼Œç”¨åˆ°å“ªäº›sequenceï¼Œåªéœ€è¦åœ¨è¿™å¼ è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•å³å¯ã€‚è‹¥æŸæ¬¡è¯»å–çš„sequence æ²¡æœ‰ç”¨å®Œï¼Œç³»ç»Ÿå°±åœæ‰äº†ï¼Œåˆ™è¿™æ¬¡è¯»å–çš„sequenceå‰©ä½™å€¼ä¸ä¼šå†ä½¿ç”¨ <strong>é…ç½®æ–¹å¼ï¼š</strong> server.xml é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;system&gt;</span><br><span class="line">    &lt;property name=&quot;sequnceHandlerType&quot;&gt;1&lt;/property&gt;</span><br><span class="line">&lt;/system&gt;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šsequnceHandlerType éœ€è¦é…ç½®ä¸º1ï¼Œè¡¨ç¤ºä½¿ç”¨æ•°æ®åº“æ–¹å¼ç”Ÿæˆsequence <strong>æ•°æ®åº“é…ç½®ï¼š</strong> 1. åˆ›å»º MYCAT_SEQUENCE è¡¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> MYCAT_SEQUENCE (NAME <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,current_value <span class="type">INT</span> <span class="keyword">NOT</span></span><br><span class="line"><span class="keyword">NULL</span>,increment <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">100</span>, <span class="keyword">PRIMARY</span> KEY(NAME)) ENGINE<span class="operator">=</span>INNODB;</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºç›¸å…³å‡½æ•° <img src="https://www.itze.cn/wp-content/uploads/2022/03/function_1.png"></li></ol><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#è·å–å½“å‰ sequence çš„å€¼ (è¿”å›å½“å‰å€¼,å¢é‡ï¼‰</span><br><span class="line">#æ³¨æ„ï¼æ­¤å¤„åé¢åŠ ç©ºæ ¼åŠ ä¸¤ä¸ªç¾å…ƒç¬¦å·ï¼Œç¼–è¾‘å™¨æ˜¾ç¤ºï¼å¦‚ï¼šDELIMITER ç©ºæ ¼ ç¾å…ƒç¬¦å·<span class="number">1</span>ç¾å…ƒç¬¦å·<span class="number">2</span>ï¼Œ<span class="keyword">END</span>åé¢åŒç†ï¼Œä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°åŒç†</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mycat_seq_currval(seq_name <span class="type">VARCHAR</span>(<span class="number">50</span>)) <span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">64</span>)</span><br><span class="line"><span class="keyword">DETERMINISTIC</span> </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> retval <span class="type">VARCHAR</span>(<span class="number">64</span>);</span><br><span class="line"><span class="keyword">SET</span> retval<span class="operator">=</span>&quot;-999999999,null&quot;;</span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="built_in">CAST</span>(current_value <span class="keyword">AS</span> <span class="type">CHAR</span>),&quot;,&quot;,<span class="built_in">CAST</span>(increment <span class="keyword">AS</span> <span class="type">CHAR</span>)) <span class="keyword">INTO</span> retval <span class="keyword">FROM</span></span><br><span class="line">MYCAT_SEQUENCE <span class="keyword">WHERE</span> NAME <span class="operator">=</span> seq_name;</span><br><span class="line"><span class="keyword">RETURN</span> retval;</span><br><span class="line"><span class="keyword">END</span> $$</span><br><span class="line">DELIMITER ;</span><br><span class="line">#è®¾ç½®sequenceå€¼</span><br><span class="line">DELIMITER $$ </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mycat_seq_setval(seq_name <span class="type">VARCHAR</span>(<span class="number">50</span>),<span class="keyword">VALUE</span> <span class="type">INTEGER</span>) <span class="keyword">RETURNS</span> </span><br><span class="line"><span class="type">VARCHAR</span>(<span class="number">64</span>)</span><br><span class="line"><span class="keyword">DETERMINISTIC</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">UPDATE</span> MYCAT_SEQUENCE <span class="keyword">SET</span> current_value <span class="operator">=</span> <span class="keyword">VALUE</span></span><br><span class="line"><span class="keyword">WHERE</span> NAME <span class="operator">=</span> seq_name;</span><br><span class="line"><span class="keyword">RETURN</span> mycat_seq_currval(seq_name);</span><br><span class="line"><span class="keyword">END</span> $$</span><br><span class="line">DELIMITER ;</span><br><span class="line">#è·å–ä¸‹ä¸€ä¸ªsequenceå€¼</span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mycat_seq_nextval(seq_name <span class="type">VARCHAR</span>(<span class="number">50</span>)) <span class="keyword">RETURNS</span> <span class="type">VARCHAR</span>(<span class="number">64</span>) </span><br><span class="line"><span class="keyword">DETERMINISTIC</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">UPDATE</span> MYCAT_SEQUENCE</span><br><span class="line"><span class="keyword">SET</span> current_value <span class="operator">=</span> current_value <span class="operator">+</span> increment <span class="keyword">WHERE</span> NAME <span class="operator">=</span> seq_name;</span><br><span class="line"><span class="keyword">RETURN</span> mycat_seq_currval(seq_name);</span><br><span class="line"><span class="keyword">END</span> $$</span><br><span class="line">DELIMITER ;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–ä¸€ä¸ªå€¼</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#åˆå§‹åŒ–åºåˆ—è¡¨è®°å½•</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> MYCAT_SEQUENCE(NAME,current_value,increment) <span class="keyword">VALUES</span> (<span class="string">&#x27;GLOBAL&#x27;</span>, <span class="number">100</span>,<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶æƒ…å†µå¦‚ä¸‹å›¾ <img src="https://www.itze.cn/wp-content/uploads/2022/03/function.png"></p><ol start="3"><li>sequence_db_conf.propertiesç›¸å…³é…ç½®,æŒ‡å®š sequence ç›¸å…³é…ç½®åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šï¼š ä¾‹å¦‚ï¼Œä¸Šå›¾ä¸­mycat_sequenceä¸­æœ‰ä¸€æ¡æ•°æ®çš„NAMEå€¼ä¸ºGLOBAL sequence_db_conf.propertiesé…ç½®å¦‚ä¸‹,é…ç½®ä¸­çš„dn1ï¼Œæ ¹æ®è‡ªå·±å®é™…schema.xmlä¸­é…ç½®çš„ä¸»æœºå¯¹åº”çš„èŠ‚ç‚¹ï¼ GLOBAL&#x3D;dn1 <strong>æ³¨æ„ï¼š</strong> MYCAT_SEQUENCEè¡¨å’Œä»¥ä¸Šçš„3ä¸ªfunctionï¼Œéœ€è¦æ”¾åœ¨åŒä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚functionè¯·ç›´æ¥åœ¨å…·ä½“èŠ‚ç‚¹çš„æ•°æ®åº“ä¸Šæ‰§è¡Œï¼Œå¦‚æœæ‰§è¡Œçš„æ—¶å€™æŠ¥ï¼š <strong>you might want to use the less safe log_bin_trust_function_creators variable</strong> éœ€è¦å¯¹æ•°æ®åº“åšå¦‚ä¸‹è®¾ç½®ï¼š</li></ol><p>- windowsä¸‹ my.ini[mysqld]åŠ ä¸Š log_bin_trust_function_creators&#x3D;1 - linuxä¸‹&#x2F;etc&#x2F;my.cnf ä¸‹ my.ini[mysqld]åŠ ä¸Š log_bin_trust_function_creators&#x3D;1 ä¿®æ”¹å®Œåï¼Œå³å¯åœ¨mysqlæ•°æ®åº“ä¸­æ‰§è¡Œä¸Šé¢çš„å‡½æ•°ã€‚ <strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> table1(id,name) <span class="keyword">values</span>(<span class="string">&#x27;next value for MYCATSEQ_GLOBAL&#x27;</span>,&quot;testName&quot;)ï¼›</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„ï¼š-next-value-for-MYCATSEQ-GLOBALå‡½æ•°äº²æµ‹1-6-7éœ€è¦æ·»åŠ å•å¼•å·ï¼å•å¼•å·ä¸èƒ½çœç•¥ï¼å¦åˆ™æ— æ³•è¯†åˆ«å‡½æ•°ï¼"><a href="#æ³¨æ„ï¼š-next-value-for-MYCATSEQ-GLOBALå‡½æ•°äº²æµ‹1-6-7éœ€è¦æ·»åŠ å•å¼•å·ï¼å•å¼•å·ä¸èƒ½çœç•¥ï¼å¦åˆ™æ— æ³•è¯†åˆ«å‡½æ•°ï¼" class="headerlink" title="æ³¨æ„ï¼š next value for MYCATSEQ_GLOBALå‡½æ•°äº²æµ‹1.6.7éœ€è¦æ·»åŠ å•å¼•å·ï¼å•å¼•å·ä¸èƒ½çœç•¥ï¼å¦åˆ™æ— æ³•è¯†åˆ«å‡½æ•°ï¼"></a>æ³¨æ„ï¼š next value for MYCATSEQ_GLOBALå‡½æ•°äº²æµ‹1.6.7éœ€è¦æ·»åŠ å•å¼•å·ï¼å•å¼•å·ä¸èƒ½çœç•¥ï¼å¦åˆ™æ— æ³•è¯†åˆ«å‡½æ•°ï¼</h4><p>å‡½æ•°ä½¿ç”¨æ ¼å¼ï¼šnext value for MYCATSEQ_+MYCAT_SEQUENCEè¡¨ä¸­NAMEçš„å€¼</p><h3 id="æœ¬åœ°æ—¶é—´æˆ³æ–¹å¼"><a href="#æœ¬åœ°æ—¶é—´æˆ³æ–¹å¼" class="headerlink" title="æœ¬åœ°æ—¶é—´æˆ³æ–¹å¼"></a>æœ¬åœ°æ—¶é—´æˆ³æ–¹å¼</h3><p>ID&#x3D;64ä½äºŒè¿›åˆ¶(42(æ¯«ç§’)+5(æœºå™¨ ID)+5(ä¸šåŠ¡ç¼–ç )+12(é‡å¤ç´¯åŠ )æ¢ç®—æˆåè¿›åˆ¶ä¸º18ä½æ•°çš„longç±»å‹ï¼Œæ¯æ¯«ç§’å¯ä»¥å¹¶å‘ 12 ä½äºŒè¿›åˆ¶çš„ç´¯åŠ ã€‚ ä½¿ç”¨æ–¹å¼ï¼š 1. é…ç½® server.xml</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&lt;</span>property name<span class="operator">=</span>&quot;sequnceHandlerType&quot;<span class="operator">&gt;</span><span class="number">2</span><span class="operator">&lt;</span><span class="operator">/</span>property<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨mycatä¸‹é…ç½®ï¼šsequence_time_conf.properties WORKID&#x3D;0-31 ä»»æ„æ•´ DATAACENTERID&#x3D;0-31 ä»»æ„æ•´æ•° å¤šä¸ªä¸ª mycat èŠ‚ç‚¹ä¸‹æ¯ä¸ª mycat é…ç½®çš„ WORKIDï¼ŒDATAACENTERID ä¸åŒï¼Œç»„æˆå”¯ä¸€æ ‡è¯†ï¼Œæ€»å…±æ”¯æŒ32*32&#x3D;1024 ç§ç»„åˆã€‚ ID ç¤ºä¾‹ï¼š5676308347551</li></ol><h3 id="åˆ†å¸ƒå¼ZK-IDç”Ÿæˆå™¨"><a href="#åˆ†å¸ƒå¼ZK-IDç”Ÿæˆå™¨" class="headerlink" title="åˆ†å¸ƒå¼ZK IDç”Ÿæˆå™¨"></a>åˆ†å¸ƒå¼ZK IDç”Ÿæˆå™¨</h3><p>é…ç½®server.xml</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&lt;</span>property name<span class="operator">=</span>&quot;sequnceHandlerType&quot;<span class="operator">&gt;</span><span class="number">3</span><span class="operator">&lt;</span><span class="operator">/</span>property<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>Zkçš„è¿æ¥ä¿¡æ¯ç»Ÿä¸€åœ¨myid.propertiesçš„zkURLå±æ€§ä¸­é…ç½®ã€‚ åŸºäºZKä¸æœ¬åœ°é…ç½®çš„åˆ†å¸ƒå¼IDç”Ÿæˆå™¨(å¯ä»¥é€šè¿‡ ZK è·å–é›†ç¾¤ï¼ˆæœºæˆ¿ï¼‰å”¯ä¸€ InstanceIDï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ ä»¶é…ç½® InstanceID) ID ç»“æ„ï¼šlong 64 ä½ï¼ŒID æœ€å¤§å¯å  63 ä½ * current time millis(å¾®ç§’æ—¶é—´æˆ³ 38 ä½,å¯ä»¥ä½¿ç”¨ 17 å¹´)clusterIdï¼ˆæœºæˆ¿æˆ–è€… ZKidï¼Œé€šè¿‡é…ç½®æ–‡ä»¶é…ç½® 5 ä½ï¼‰instanceIdï¼ˆå®ä¾‹ IDï¼Œå¯ä»¥é€šè¿‡ ZK æˆ–è€…é…ç½®æ–‡ä»¶è·å–ï¼Œ5 ä½ï¼‰threadIdï¼ˆçº¿ç¨‹ IDï¼Œ9 ä½ï¼‰ increment(è‡ªå¢,6 ä½) * ä¸€å…± 63 ä½ï¼Œå¯ä»¥æ‰¿å—å•æœºæˆ¿å•æœºå™¨å•çº¿ç¨‹ 1000_(2^6)&#x3D;640000 çš„å¹¶å‘ã€‚ * ä¸€å…± 63 ä½ï¼Œå¯ä»¥æ‰¿å—å•æœºæˆ¿å•æœºå™¨å•çº¿ç¨‹ 1000_(2^7)&#x3D;1280000 çš„å¹¶å‘ã€‚ * æ— æ‚²è§‚é”ï¼Œæ— å¼ºç«äº‰ï¼Œååé‡æ›´é«˜ é…ç½®æ–‡ä»¶ï¼šsequence_distributed_conf.propertiesï¼Œåªè¦é…ç½®é‡Œé¢ï¼šINSTANCEID&#x3D;ZK å°±æ˜¯ä» ZK ä¸Šè·å– InstanceIDã€‚</p><h3 id="Zké€’å¢æ–¹å¼"><a href="#Zké€’å¢æ–¹å¼" class="headerlink" title="Zké€’å¢æ–¹å¼"></a>Zké€’å¢æ–¹å¼</h3><p>é…ç½®server.xml</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&lt;</span>property name<span class="operator">=</span>&quot;sequnceHandlerType&quot;<span class="operator">&gt;</span><span class="number">4</span><span class="operator">&lt;</span><span class="operator">/</span>property<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>Zkçš„è¿æ¥ä¿¡æ¯ç»Ÿä¸€åœ¨myid.properties çš„zkURLå±æ€§ä¸­é…ç½® * é…ç½®æ–‡ä»¶ï¼šsequence_conf.properties * åªè¦é…ç½®å¥½ZKåœ°å€å’Œè¡¨åçš„å¦‚ä¸‹å±æ€§ * TABLE.MINID æŸçº¿ç¨‹å½“å‰åŒºé—´å†…æœ€å°å€¼ * TABLE.MAXID æŸçº¿ç¨‹å½“å‰åŒºé—´å†…æœ€å¤§å€¼ * TABLE.CURID æŸçº¿ç¨‹å½“å‰åŒºé—´å†…å½“å‰å€¼ * æ–‡ä»¶é…ç½®çš„ MAXID ä»¥åŠ MINID å†³å®šæ¯æ¬¡å–å¾—åŒºé—´ï¼Œè¿™ä¸ªå¯¹äºæ¯ä¸ªçº¿ç¨‹æˆ–è€…è¿›ç¨‹éƒ½æœ‰æ•ˆ * æ–‡ä»¶ä¸­çš„è¿™ä¸‰ä¸ªå±æ€§é…ç½®åªå¯¹ç¬¬ä¸€ä¸ªè¿›ç¨‹çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹æœ‰æ•ˆï¼Œå…¶ä»–çº¿ç¨‹å’Œè¿›ç¨‹ä¼šåŠ¨æ€è¯»å–ZK</p><h3 id="å…¶ä»–æ–¹å¼"><a href="#å…¶ä»–æ–¹å¼" class="headerlink" title="å…¶ä»–æ–¹å¼"></a>å…¶ä»–æ–¹å¼</h3><ol><li>ä½¿ç”¨cateletæ³¨è§£æ–¹å¼ &#x2F;*!mycat:catlet&#x3D;demo.catlets.BatchGetSequence *&#x2F;SELECT mycat_get_seq(â€˜GLOBALâ€™,100); æ³¨ï¼šæ­¤æ–¹æ³•è¡¨ç¤ºè·å– GLOBAL çš„ 100 ä¸ª sequence å€¼ï¼Œä¾‹å¦‚å½“å‰ GLOBAL çš„æœ€å¤§ sequence å€¼ä¸º 5000ï¼Œ åˆ™é€šè¿‡æ­¤æ–¹å¼è¿”å›çš„æ˜¯ 5001ï¼ŒåŒæ—¶æ›´æ–°æ•°æ®åº“ä¸­çš„ BLOBAL çš„æœ€å¤§ sequence å€¼ä¸º 5100ã€‚</li><li>åˆ©ç”¨zookeeperæ–¹å¼å®ç°â€¦</li></ol><h3 id="è‡ªå¢é•¿ä¸»é”®æ–¹å¼"><a href="#è‡ªå¢é•¿ä¸»é”®æ–¹å¼" class="headerlink" title="è‡ªå¢é•¿ä¸»é”®æ–¹å¼"></a>è‡ªå¢é•¿ä¸»é”®æ–¹å¼</h3><p><strong>è¯´æ˜ï¼š</strong> 1. mysql æœ¬èº«å¯¹éè‡ªå¢é•¿ä¸»é”®ï¼Œä½¿ç”¨ last_insert_id()æ˜¯ä¸ä¼šè¿”å›ç»“æœçš„ï¼Œåªä¼šè¿”å› 0ï¼› 2. mysql åªä¼šå¯¹å®šä¹‰è‡ªå¢é•¿ä¸»é”®ï¼Œå¯ä»¥ç”¨ last_insert_id()è¿”å›ä¸»é”®å€¼ï¼› 3. MyCATç›®å‰æä¾›äº†è‡ªå¢é•¿ä¸»é”®åŠŸèƒ½ï¼Œä½†æ˜¯å¦‚æœå¯¹åº”çš„mysqlèŠ‚ç‚¹ä¸Šæ•°æ®è¡¨ï¼Œæ²¡æœ‰å®šä¹‰auto_incrementï¼Œé‚£ä¹ˆåœ¨ MyCATå±‚è°ƒç”¨last_insert_id()ä¹Ÿæ˜¯ä¸ä¼šè¿”å›ç»“æœçš„ã€‚ <strong>æ­£ç¡®çš„é…ç½®æ–¹å¼</strong> 1. é¦–å…ˆä½ çš„è¡¨éœ€è¦æœ‰è‡ªå¢IDä¸»é”® 2. åœ¨mycaté…ç½®æ–‡ä»¶schema.xmlä¸­é…ç½®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;table name=&quot;talbeName&quot; primaryKey=&quot;id&quot; autoIncrement=&quot;true&quot; dataNode=&quot;dn1&quot; subTables=&quot;talbeName$0-10&quot; rule=&quot;modRuleName&quot;&gt;&lt;/table&gt;</span><br></pre></td></tr></table></figure><p>ä¸»è¦æ˜¯æ·»åŠ primaryKey&#x3D;â€idâ€ autoIncrement&#x3D;â€trueâ€ è¿™ä¸¤ä¸ªå±æ€§ 3. åœ¨MYCAT_SEQUENCEè¡¨ä¸­ï¼Œæ·»åŠ è®°å½•å€¼ï¼Œè¿™é‡Œæ“ä½œåŒæ•°æ®åº“æ¨¡å¼ä¸­ï¼Œä½†æ˜¯æ·»åŠ çš„è®°å½•å€¼éœ€è¦æ—¶schema.xmlé…ç½®ä¸­tableæ ‡ç­¾ä¸­çš„nameå€¼çš„å…¨éƒ¨å¤§å†™ ä¾‹å¦‚ï¼šname&#x3D;â€talbeNameâ€ï¼Œé‚£ä¹ˆMYCAT_SEQUENCEè¡¨ä¸­NAMEå€¼åº”è¯¥æ˜¯ï¼šTABLENAME 4. ä¿®æ”¹mycatå¯¹åº” sequence_db_conf.properties å¢åŠ ç›¸åº”è®¾ç½®ï¼Œè¿™ä¸€æ­¥åŒæ•°æ®åº“æ¨¡å¼ï¼Œå¦‚ä¸‹ TABLENAME&#x3D;dn1</p><h4 id="å®Œæˆæ‰€æœ‰é…ç½®åä¸è¦å¿˜è®°é‡å¯mycatæœåŠ¡ï¼"><a href="#å®Œæˆæ‰€æœ‰é…ç½®åä¸è¦å¿˜è®°é‡å¯mycatæœåŠ¡ï¼" class="headerlink" title="å®Œæˆæ‰€æœ‰é…ç½®åä¸è¦å¿˜è®°é‡å¯mycatæœåŠ¡ï¼"></a>å®Œæˆæ‰€æœ‰é…ç½®åä¸è¦å¿˜è®°é‡å¯mycatæœåŠ¡ï¼</h4><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>ä½œè€…åœ¨æµ‹è¯•ä½¿ç”¨æ•°æ®åº“æ¨¡å¼æ—¶ï¼Œä¼šé‡åˆ°1062é—®é¢˜ï¼Œå³mysqlåœ¨æ’å…¥ä¸€æ¡æ•°æ®æ˜¯æŠ¥è‡ªå¢ä¸»é”®å€¼å·²å­˜åœ¨ï¼Œå¤šæ¬¡æµ‹è¯•å‡ä¼šå‡ºç°ï¼Œç›®å‰mycatå®˜æ–¹ç¤¾åŒºè¿˜æ²¡æœ‰å›å¤è¿™ä¸ªé—®é¢˜ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯1.6.7ç‰ˆæœ¬çš„é—®é¢˜ ç¬¬ä¸€æ¬¡æµ‹è¯•å†™å…¥93æ¡æ•°æ®ï¼Œå‡ºç°äº†20æ¬¡ ç¬¬äºŒæ¬¡æµ‹è¯•å†™å…¥722æ¡æ•°æ®ï¼Œ636æ¡æˆåŠŸå†™å…¥ï¼Œ86æ¡åŒæ ·çš„åŸå› å¤±è´¥ ä½œè€…æœ€åä½¿ç”¨çš„æ˜¯è‡ªå¢é•¿ä¸»é”®æ–¹å¼ï¼Œæš‚æ—¶æ²¡æœ‰å‡ºç°1062é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mycat </tag>
            
            <tag> å…¨å±€åºåˆ—å· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºHAæœºåˆ¶çš„Mycaté«˜å¯ç”¨</title>
      <link href="/2022/01/27/%E5%9F%BA%E4%BA%8Eha%E6%9C%BA%E5%88%B6%E7%9A%84mycat%E9%AB%98%E5%8F%AF%E7%94%A8/"/>
      <url>/2022/01/27/%E5%9F%BA%E4%BA%8Eha%E6%9C%BA%E5%88%B6%E7%9A%84mycat%E9%AB%98%E5%8F%AF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li><li>HAproxyç‰ˆæœ¬ï¼š1.5.18</li><li>Keepalivedç‰ˆæœ¬ï¼š1.4.2</li></ul><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><ul><li>Mycatå®‰è£…ï¼š<a href="https://www.itze.cn/linux/937.html" title="CentOSå®‰è£…Keepalived">CentOSå®‰è£…Keepalived</a></li><li>HAproxyå®‰è£…ï¼š<a href="https://www.itze.cn/linux/866.html" title="CentOSå®‰è£…HAproxy">CentOSå®‰è£…HAproxy</a></li><li>Keepalivedï¼š<a href="https://www.itze.cn/mycat/890.html" title="Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨">Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨</a></li></ul><h2 id="é«˜å¯ç”¨æ–¹æ¡ˆ"><a href="#é«˜å¯ç”¨æ–¹æ¡ˆ" class="headerlink" title="é«˜å¯ç”¨æ–¹æ¡ˆ"></a>é«˜å¯ç”¨æ–¹æ¡ˆ</h2><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒMycatæœåŠ¡ä¹Ÿéœ€è¦è€ƒè™‘é«˜å¯ç”¨æ€§ï¼Œå¦‚æœMycatæ‰€åœ¨æœåŠ¡å™¨å‡ºç°å®•æœºï¼Œæˆ–MycatæœåŠ¡æ•…éšœï¼Œéœ€è¦æœ‰å¤‡æœºæä¾›æœåŠ¡ï¼Œéœ€è¦è€ƒè™‘Mycaté›†ç¾¤ï¼Œå¯ä»¥ä½¿ç”¨ <strong>HAProxy + Keepalived</strong> é…åˆä¸¤å°+Mycatæ­èµ·Mycaté›†ç¾¤å®ç°é«˜å¯ç”¨æ€§ã€‚HAProxyå®ç°äº†MyCatå¤šèŠ‚ç‚¹çš„é›†ç¾¤é«˜å¯ç”¨å’Œè´Ÿè½½å‡è¡¡ï¼Œè€ŒHAProxyè‡ªèº«çš„é«˜å¯ç”¨åˆ™å¯ä»¥é€šè¿‡Keepalivedæ¥å®ç° <img src="https://www.itze.cn/wp-content/uploads/2022/01/MASTER_BACKUP.png"> <img src="https://www.itze.cn/wp-content/uploads/2022/01/host.png"></p><h2 id="HAproxyé…ç½®"><a href="#HAproxyé…ç½®" class="headerlink" title="HAproxyé…ç½®"></a>HAproxyé…ç½®</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">global</span><br><span class="line">         log 127.0.0.1 local0</span><br><span class="line">         #log 127.0.0.1 local1 notice</span><br><span class="line">         #log loghost local0 info</span><br><span class="line">         maxconn 4096</span><br><span class="line">         chroot /usr/local/haproxy</span><br><span class="line">         pidfile /usr/data/haproxy/haproxy.pid</span><br><span class="line">         uid 99</span><br><span class="line">         gid 99</span><br><span class="line">         daemon</span><br><span class="line">         #debug</span><br><span class="line">         #quiet</span><br><span class="line">defaults</span><br><span class="line">         log global</span><br><span class="line">         mode tcp</span><br><span class="line">         option abortonclose</span><br><span class="line">         option redispatch</span><br><span class="line">         retries 3</span><br><span class="line">         maxconn 2000</span><br><span class="line">         timeout connect 5000</span><br><span class="line">         timeout client 50000</span><br><span class="line">         timeout server 50000</span><br><span class="line">listen proxy_status </span><br><span class="line">     bind :8081</span><br><span class="line">         mode tcp</span><br><span class="line">         balance roundrobin</span><br><span class="line">         server mycat_12 192.168.100.11:8066 check inter 10s</span><br><span class="line">         server mycat_12 192.168.100.12:8066 check inter 10s</span><br><span class="line">frontend admin_stats </span><br><span class="line">     bind :8082</span><br><span class="line">         mode http</span><br><span class="line">         stats enable</span><br><span class="line">         option httplog</span><br><span class="line">         maxconn 10</span><br><span class="line">         stats refresh 30s</span><br><span class="line">         stats uri /admin</span><br><span class="line">         stats auth admin:123456</span><br><span class="line">         stats hide-version</span><br><span class="line">         stats admin if TRUE</span><br></pre></td></tr></table></figure><p>é…ç½®å®ŒHAproxyï¼Œå¯ä»¥å…ˆéªŒè¯ä¸€ä¸‹è´Ÿè½½å‡è¡¡,æŠŠé…ç½®çš„MycatæœåŠ¡éƒ½å¯åŠ¨èµ·æ¥ï¼Œæˆ‘è¿™é‡Œåªé…ç½®äº†ä¸¤å°MycatæœåŠ¡ï¼Œæ ¹æ®å®é™…éœ€æ±‚å¯æ›´æ”¹ï¼Œå¯åŠ¨Mycatï¼Œå†å¯åŠ¨HAproxyï¼Œä»¥è®¿é—®Mycatçš„å½¢å¼è®¿é—®ï¼ŒæŠŠç«¯å£å·å’ŒIPæ”¹ä¸ºHAproxyçš„ï¼Œä¸¾ä¾‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -umycat -p123456 -h192.168.100.13 -P8081</span><br></pre></td></tr></table></figure><p>è®¿é—®HAproxyWebç«¯é¡µé¢åœ°å€ï¼š<a href="http://192.168.100.13:8082/admin">http://192.168.100.13:8082/admin</a> ç”¨æˆ·åï¼šadminï¼Œå¯†ç ï¼š123456ï¼Œç•Œé¢æˆªå›¾ç•¥è¿‡ è¿™é‡Œé…ç½®ä¸€å°HAproxyä¹‹åï¼Œé…ç½®å¤šå°MycatæœåŠ¡ï¼Œåˆ°è¿™é‡Œå·²ç»å¯ä»¥è¾¾åˆ°ä¸€å®šæŠ—é£é™©èƒ½åŠ›ï¼Œæ­¤æ—¶å°±å¯ä»¥æŠŠåŸæ¥æ“ä½œMycatæœåŠ¡é“¾æ¥æ”¹æˆHAproxyï¼Œè®©åŸæ¥èµ°MycatæœåŠ¡æ“ä½œæ•°æ®åº“æ›´æ”¹ä¸ºé€šè¿‡HAproxyè®¿é—®ï¼Œæ­¤æ—¶æµç¨‹åº”è¯¥æ˜¯è¿™æ · <img src="https://www.itze.cn/wp-content/uploads/2022/01/HAproxy_mycat.png"> ç»æµ‹è¯•ï¼Œæ‰‹åŠ¨æ¨¡æ‹Ÿå…¶ä¸­ä¸€å°MycatæœåŠ¡å®•æœºï¼Œé€šè¿‡HAproxyä¾ç„¶èƒ½å¤Ÿè®¿é—®æ•°æ®</p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>å¦‚æœä»¥ä¸‹Keepalivedé…ç½®â€œIPæ¼‚ç§»â€ä¸æˆåŠŸï¼Œåªé…ç½®HAproxyä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œç½‘ç»œä¸Šå¤§å¤šæ•°é…ç½®Keepalivedçš„â€œIPæ¼‚ç§»â€éƒ½æ˜¯å»ºç«‹åœ¨è™šæ‹Ÿæœºä¸Šï¼Œå¾ˆå°‘æœ‰æ–‡ç« è®²åœ¨çœŸå®æœåŠ¡å™¨ä¸Šå¦‚ä½•é…ç½®ï¼Œè‡³å°‘ä½œè€…æ˜¯æ²¡é‡åˆ°ä¸€ä¸ªè®²è§£åœ¨çœŸå®æœåŠ¡å™¨å¦‚ä½•é…ç½®ï¼Œè¯¦æƒ…è§ä¸‹æ–¹Keepalivedé…ç½® æ³¨ï¼šå¦‚æœéœ€è¦ç»§ç»­é…ç½®ä½¿ç”¨Keepalivedï¼Œä¸¤å°HAproxyé…ç½®è¦ä¿æŒä¸€è‡´</p><h2 id="Keepalivedé…ç½®"><a href="#Keepalivedé…ç½®" class="headerlink" title="Keepalivedé…ç½®"></a>Keepalivedé…ç½®</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">! Configuration File for keepalived</span><br><span class="line">global_defs &#123;</span><br><span class="line">    notification_email &#123;</span><br><span class="line">        gitlab@111.com</span><br><span class="line">    &#125;</span><br><span class="line">     notification_email_from gitlab@111.com</span><br><span class="line">     smtp_server smtp.itze.cn</span><br><span class="line">     smtp_connect_timeout 30</span><br><span class="line">     router_id LVS_DEVEL</span><br><span class="line">     vrrp_skip_check_adv_addr</span><br><span class="line">     vrrp_garp_interval 0</span><br><span class="line">     vrrp_gna_interval 0</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">     #ä¸»æœºé…MASTERï¼Œå¤‡æœºé…BACKUP</span><br><span class="line">     state MASTER</span><br><span class="line">     #æ‰€åœ¨æœºå™¨ç½‘å¡,é€šè¿‡ï¼šifconfig æŸ¥çœ‹</span><br><span class="line">     interface eth0</span><br><span class="line">     virtual_router_id 51</span><br><span class="line">     #æ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜</span><br><span class="line">     priority 100</span><br><span class="line">     advert_int 1</span><br><span class="line">     authentication &#123;</span><br><span class="line">         auth_type PASS</span><br><span class="line">         auth_pass 1111</span><br><span class="line">     &#125;</span><br><span class="line">     virtual_ipaddress &#123;</span><br><span class="line">         #è™šæ‹ŸIP</span><br><span class="line">         192.168.100.20</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line">virtual_server 192.168.100.20 8081 &#123;</span><br><span class="line">     delay_loop 6</span><br><span class="line">     lb_algo rr</span><br><span class="line">     lb_kind NAT</span><br><span class="line">     persistence_timeout 50</span><br><span class="line">     protocol TCP</span><br><span class="line">     real_server 192.168.100.13 8081 &#123;</span><br><span class="line">         weight 1</span><br><span class="line">         TCP_CHECK &#123;</span><br><span class="line">             connect_timeout 3</span><br><span class="line">             retry 3</span><br><span class="line">             delay_before_retry 3</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    real_server 192.168.100.14 8081 &#123;</span><br><span class="line">         weight 1</span><br><span class="line">         TCP_CHECK &#123;</span><br><span class="line">             connect_timeout 3</span><br><span class="line">             nb_get_retry 3</span><br><span class="line">             delay_before_retry 3</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒ‰ç…§åœ¨è™šæ‹Ÿæœºä¸Šé…ç½®ï¼Œè¿™é‡Œé…ç½®å®Œä¹‹åï¼Œå¯åŠ¨Mycat,å¯åŠ¨Haproxyï¼Œå¯åŠ¨keepalivedä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡keepalivedä¸­é…ç½®çš„è™šæ‹ŸIPè®¿é—®æ•°æ® ä¸¾ä¾‹,æ­¤æ—¶è®¿é—®æ•°æ®æ˜¯å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql -umycat -p123456 -h192.168.100.20 -P8081</span><br></pre></td></tr></table></figure><h3 id="å…³äºè™šæ‹ŸIP"><a href="#å…³äºè™šæ‹ŸIP" class="headerlink" title="å…³äºè™šæ‹ŸIP"></a>å…³äºè™šæ‹ŸIP</h3><p>å…ˆè¯´è¦å®ç°çš„æ•ˆæœï¼Œä¸€åˆ‡é¡ºåˆ©çš„è¯ï¼Œåˆ°è¿™é‡Œå·²ç»å®Œæˆäº†æ–‡ç« å¼€å¤´æ’å…¥çš„æ•ˆæœï¼Œåº”ç”¨æœåŠ¡é€šè¿‡è™šæ‹ŸIPè®¿é—®æ•°æ®ï¼Œç®—äº†æˆ‘è¿˜æ˜¯ä¸Šä¸ªå›¾å§â€¦ <img src="https://www.itze.cn/wp-content/uploads/2022/01/%E6%96%87%E5%AD%97%E2%80%94%E2%80%94%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1.png"> å›¾è§£æ–‡å­—ï¼šMASTERä¸»æœºæ²¡æœ‰æŒ‚æ‰ä¹‹å‰ï¼Œéƒ½æ˜¯é€šè¿‡MASTERè®¿é—®ï¼Œåªæœ‰MASTERå®•æœºï¼ŒIPæ‰ä¼šé£˜ç§»è‡³BACKUPå¤‡æœºï¼Œæ­¤æ—¶æˆ‘ä»¬çš„åº”ç”¨ä¾æ—§æ˜¯å›ºå®šé…ç½®çš„è™šæ‹ŸIPï¼Œä¸éœ€è¦æ”¹å˜ é‡ç‚¹æ¥äº†ï¼Œåœ¨è™šæ‹Ÿæœºä¸Šæˆ‘ä»¬æœºå™¨IPéƒ½æ˜¯å¯ä»¥å®šçš„ï¼Œå¦‚æœæ˜¯è™šæ‹Ÿæœºåšæµ‹è¯•ï¼Œè™šæ‹ŸIPè¦æ˜¯å’ŒKeepalivedä¸­é…ç½®çš„æœåŠ¡åœ¨åŒä¸€ä¸ªç½‘æ®µï¼Œæ¯”å¦‚æœ¬æ–‡é…ç½®çš„æ˜¯192.168.100.13å’Œ192.168.100.14ï¼Œè™šæ‹ŸIPå°±éœ€è¦é…ç½®192.168.100.xx ,ä½†æ˜¯åœ¨çœŸå®äº‘æœåŠ¡å™¨ä¸Šæ€ä¹ˆé…ç½®å‘¢ï¼Ÿæ¯”å¦‚ä½¿ç”¨çš„æœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘ã€è…¾è®¯ã€åä¸ºç­‰ç­‰å‚å•†çš„ï¼Œå¤§å¤šæ˜¯é€šè¿‡å¼¹æ€§å…¬ç½‘IPç»‘å®šåˆ°äº‘ä¸»æœºï¼Œé€šè¿‡å›ºå®šçš„æœåŠ¡å™¨IPæ¥è®¿é—®çœŸå®æœåŠ¡å™¨</p><h4 id="åä¸ºäº‘æœåŠ¡å™¨æµ‹è¯•"><a href="#åä¸ºäº‘æœåŠ¡å™¨æµ‹è¯•" class="headerlink" title="åä¸ºäº‘æœåŠ¡å™¨æµ‹è¯•"></a>åä¸ºäº‘æœåŠ¡å™¨æµ‹è¯•</h4><p>èµ·åˆæ²¡é…ç½®ä¹‹å‰æ„Ÿè§‰è¿™TMå°±æ˜¯åœ¨æ‰¯æ·¡ï¼Œé€šè¿‡è™šæ‹ŸIPè®¿é—®çš„é€šï¼Ÿï¼Ÿï¼Ÿæ€ä¹ˆå¯èƒ½è®¿é—®çš„é€šè¿™ä¸æ˜¯æŠŠæ™ºå•†æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦å—ï¼Ÿ å¸¦ç€ä¸å¯èƒ½çš„ç–‘æƒ‘ä¸€é¡¿æ“ä½œï¼Œä½œè€…ä½¿ç”¨æµ‹è¯•çš„æ˜¯åä¸ºå¼¹æ€§äº‘æœåŠ¡å™¨ï¼Œåœ¨çœŸå®æœåŠ¡å™¨ä¸Šåšæµ‹è¯•ï¼Œkeepalivedé…ç½®ä¸­çš„è™šæ‹ŸIPä¸çŸ¥é“é…ç½®ä»€ä¹ˆï¼Œåªæ˜¯çŸ¥é“è¦åœ¨åŒä¸€ç½‘æ®µï¼Œä½†æ˜¯æœåŠ¡å™¨ä¹°çš„æ—¶å€™å¼¹æ€§å…¬ç½‘IPè¦æŒ¨ç€ä¹°? äºæ˜¯å°±å…ˆifconfigçœ‹ä¸€ä¸‹ç½‘å¡çš„åœ°å€ï¼Œè™šæ‹ŸIPå°±éšä¾¿è®¾ç½®äº†ä¸€ä¸ªå’Œç½‘å¡åœ°å€ç›¸åŒç½‘æ®µçš„IPï¼Œé‡å¯ä¸¤å°æœºå™¨çš„Keepalivedï¼Œè®¿é—®æµ‹è¯•ï¼Œä¸é€šï¼Œä¸¤å°æœºå™¨æ›´ä¸ç”¨è¯´é€šè¿‡è™šæ‹ŸIPé€šä¿¡äº†ï¼Œæœ€ç»ˆç»è¿‡æ‘¸ç´¢ï¼Œèƒ½å¤Ÿåœ¨ä¸€å°æœºå™¨ä¸Šé€šè¿‡è™šæ‹ŸIPè®¿é—®æ•°æ®ï¼Œä½†æ˜¯ä¸¤å°ä¸èƒ½é€šä¿¡ <strong>ä¸€å°çœŸå®æœåŠ¡å™¨é€šè¿‡è™šæ‹ŸIPæ“ä½œæ•°æ®çš„æƒ…å†µé…ç½®</strong> ä¿®æ”¹Keepalivedé…ç½®ä¸­ï¼Œè™šæ‹ŸIPå’Œvirtual_serveråé¢çš„IPä¸è¦é…ç½®ç›¸åŒï¼Œä½†æ˜¯è¦åœ¨ä¸€ä¸ªç½‘æ®µï¼Œå¦‚ä¸‹é…ç½®ï¼Œä»…èƒ½åœ¨å®‰è£…Keepalivedçš„è¿™å°æœ¬æœºé€šè¿‡è™šæ‹ŸIPè®¿é—®æ•°æ®ï¼Œå¦‚æœåªèƒ½è¿™æ ·ï¼ŒKeepalivedåªèµ·åˆ°äº†ä¿æŠ¤çœŸå®æ•°æ®æœåŠ¡IPçš„ä½œç”¨ï¼Œä¸»å¤‡åˆ‡æ¢å°±æ²¡å®ç°ï¼Œå€’è¿˜ä¸å¦‚ç›´æ¥é€šè¿‡HAproxyè®¿é—®æ•°æ®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">virtual_ipaddress &#123;</span><br><span class="line">         #è™šæ‹ŸIP</span><br><span class="line">         192.168.100.20</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">virtual_server 192.168.100.21 8081 &#123;</span><br></pre></td></tr></table></figure><p>æœ€åç»è¿‡æ¢ç´¢æŸ¥é˜…æ‰çŸ¥é“ï¼Œæ¯”å¦‚ä½œè€…æ˜¯åä¸ºäº‘å‚å•†çš„æœåŠ¡å™¨ï¼Œå°±éœ€è¦åˆ°åä¸ºäº‘æ§åˆ¶å°å»æ‰‹åŠ¨ç”³è¯·ä¸€ä¸ªè™šæ‹ŸIPåœ°å€ï¼Œç„¶åç»è¿‡ä¸€ç³»åˆ—æ“ä½œæ‰èƒ½è¾¾åˆ°ä»¥ä¸Šåœ¨è™šæ‹Ÿæœºä¸­å®ç°çš„èƒ½ä¸»å¤‡åˆ‡æ¢ï¼Œè¾¾åˆ°é«˜å¯ç”¨ï¼Œæœ€ç»ˆå› ä¸ºç¼ºå°‘ä¸€ä¸ªå¼¹æ€§å…¬ç½‘IPæ²¡å»å®ç°çœŸå®æœåŠ¡å™¨IPæ¼‚ç§»ï¼Œåªèƒ½ç­‰åˆ°åç»­ä¸šåŠ¡çœŸæ­£éœ€è¦çš„æ—¶å€™å†æ¥å®ç°ï¼Œåˆ°æ—¶å€™å†æ¥æ›´æ–°</p><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>å¦‚æœæƒ³å»æ£é¼“ï¼Œè¿™é‡Œå¥‰ä¸Šåä¸ºäº‘ç”³è¯·è™šæ‹ŸIPçš„å®˜æ–¹æ“ä½œæ–‡æ¡£ï¼š<a href="https://support.huaweicloud.com/usermanual-vpc/vpc_vip_0000.html" title="è™šæ‹Ÿç§æœ‰äº‘VPC">è™šæ‹Ÿç§æœ‰äº‘VPC</a> åä¸ºç§æœ‰äº‘VPCæ“ä½œPDFç‰ˆæœ¬ä¸‹è½½ï¼š<a href="https://support.huaweicloud.com/usermanual-vpc/vpc-usermanual.pdf" title="https://support.huaweicloud.com/usermanual-vpc/vpc-usermanual.pdf">https://support.huaweicloud.com/usermanual-vpc/vpc-usermanual.pdf</a> å»ºè®®æŸ¥çœ‹PDFç‰ˆæœ¬ï¼ŒPDFç‰ˆæœ¬æœ‰å®ä¾‹æ›´ä¸ºè¯¦ç»†ï¼Œå¦‚æœä½ çœŸæ˜¯æœåŠ¡å™¨ç¯å¢ƒæå‡ºæ¥äº†ï¼Œè®°å¾—è‰¾ç‰¹æˆ‘ï¼è‡³å°‘ç»™æˆ‘å‘ä¸ªé‚®ä»¶:satisfied: :envelope:é‚®ç®±ï¼š<strong><a href="mailto:&#103;&#x69;&#116;&#108;&#x61;&#98;&#x40;&#49;&#49;&#49;&#x2e;&#99;&#111;&#x6d;">&#103;&#x69;&#116;&#108;&#x61;&#98;&#x40;&#49;&#49;&#49;&#x2e;&#99;&#111;&#x6d;</a></strong> äº’ç›¸å­¦ä¹ !</p>]]></content>
      
      
      <categories>
          
          <category> HAproxy </category>
          
          <category> Keepalived </category>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> HAproxy </tag>
            
            <tag> Keepalived </tag>
            
            <tag> Mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…Keepalived</title>
      <link href="/2022/01/27/centos%E5%AE%89%E8%A3%85keepalived/"/>
      <url>/2022/01/27/centos%E5%AE%89%E8%A3%85keepalived/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Keepalivedç‰ˆæœ¬ï¼š1.4.2</li></ul><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>ä¸‹è½½Keepalivedå®‰è£…åŒ… - æ–¹å¼ä¸€ï¼Œå°†ä¸‹è½½å¥½çš„å®‰è£…åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œç‚¹å‡»ä¸‹è½½ï¼š<a href="https://itze.cn/uploads/keepalived-1.4.2.tar.gz" title="keepalived-1.4.2.tar.gz">keepalived-1.4.2.tar.gz</a> - æ–¹å¼äºŒï¼Œé€šè¿‡wgetå‘½ä»¤ç›´æ¥åœ¨æœåŠ¡å™¨ä¸‹è½½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://itze.cn/uploads/keepalived-1.4.2.tar.gz</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>è§£å‹åˆ°&#x2F;usr&#x2F;local&#x2F;srcï¼ˆä½ç½®è‡ªå·±å¯ä»¥æ”¹å˜ï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf keepalived-1.4.2.tar.gz -C /usr/local/src</span><br></pre></td></tr></table></figure><p>å®‰è£…ä¾èµ–æ’ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y gcc openssl-devel popt-devel</span><br></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹åçš„ç›®å½•ï¼Œè¿›è¡Œé…ç½®ï¼Œè¿›è¡Œç¼–è¯‘</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/src/keepalived-1.4.2</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/keepalived</span><br></pre></td></tr></table></figure><p>è¿›è¡Œç¼–è¯‘ï¼Œå®Œæˆåè¿›è¡Œå®‰è£…</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>è¿è¡Œå‰é…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp /usr/local/src/keepalived-1.4.2/keepalived/etc/init.d/keepalived /etc/init.d/</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /etc/keepalived</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp /usr/local/keepalived/etc/keepalived/keepalived.conf /etc/keepalived/</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp /usr/local/src/keepalived-1.4.2/keepalived/etc/sysconfig/keepalived /etc/sysconfig/</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cp /usr/local/keepalived/sbin/keepalived /usr/sbin/</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶çš„ä¿®æ”¹è¿™é‡Œä¸ä»‹ç»ï¼Œæ ¹æ®è‡ªå·±ä¸šåŠ¡éœ€è¦ä¿®æ”¹ï¼Œä¼šåœ¨æœ¬ç«™æ–‡ç« ï¼šåŸºäºHAæœºåˆ¶çš„Mycaté«˜å¯ç”¨ä¸­æœ‰ä»‹ç» å¯åŠ¨éªŒè¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start keepalived</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status keepalived</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Keepalived </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Keepalived </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ERROR: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</title>
      <link href="/2022/01/21/error-cannot-connect-to-the-docker-daemon-at-unix-var-run-docker-sock-is-the-docker-daemon-running/"/>
      <url>/2022/01/21/error-cannot-connect-to-the-docker-daemon-at-unix-var-run-docker-sock-is-the-docker-daemon-running/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 Dockerç‰ˆæœ¬ï¼šDocker version 20.10.10</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>dockeræ›´æ”¹é»˜è®¤å­˜å‚¨ç›®å½•ï¼ŒCentOSé»˜è®¤å­˜å‚¨ç›®å½•ä½ç½®ï¼š&#x2F;var&#x2F;local&#x2F;dockerï¼Œéœ€è¦æ›´æ”¹è‡³å…¶ä»–æŒ‚è½½ç›®å½•ï¼Œæ¯”å¦‚æ›´æ”¹åˆ°&#x2F;data&#x2F;docker,å‘ç°è¿ç§»ä¹‹åæ‰€æœ‰dockerå‘½ä»¤éƒ½ç”¨ä¸äº†äº†</p><h2 id="æ›´æ”¹å­˜å‚¨ä½ç½®"><a href="#æ›´æ”¹å­˜å‚¨ä½ç½®" class="headerlink" title="æ›´æ”¹å­˜å‚¨ä½ç½®"></a>æ›´æ”¹å­˜å‚¨ä½ç½®</h2><p>1.åœæ­¢dockeræœåŠ¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure><p>2.æ‰“åŒ…å¤‡ä»½dockeråŸæ–‡ä»¶,å»ºè®®å…ˆå¤‡ä»½ï¼Œä»¥é˜²ä¸‡ä¸€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /var/lib/</span><br></pre></td></tr></table></figure><p>æ‰“åŒ…å¤‡ä»½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -cvf docker.tar docker/</span><br></pre></td></tr></table></figure><p>3.ç§»åŠ¨æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv /var/lib/docker /data/</span><br></pre></td></tr></table></figure><p>4.ä¿®æ”¹é»˜è®¤å­˜å‚¨ä½ç½®,åœ¨å›¾ä¸­æ ‡æ³¨çº¢æ¡†ä½ç½®åŠ ä¸Šâ€“graph&#x3D;&#x2F;data&#x2F;docker æŒ‡å®šå­˜å‚¨ä½ç½®ï¼Œä¿å­˜å¹¶é€€å‡º</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/01/ExecStart.png"> æ­£ç¡®é…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ExecStart=/usr/bin/dockerd --graph=/data/docker -H fd:// --containerd=/run/containerd/containerd.sock -H unix:///var/run/docker.sock</span><br></pre></td></tr></table></figure><p>é‡å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload &amp;&amp; systemctl start docker</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å­˜å‚¨ä½ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker infogrep Dir</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@linux ~]# docker infogrep Dir</span><br><span class="line"> Docker Root Dir: /var/lib/docker</span><br></pre></td></tr></table></figure><h2 id="è§£å†³é¢˜ç›®é”™è¯¯"><a href="#è§£å†³é¢˜ç›®é”™è¯¯" class="headerlink" title="è§£å†³é¢˜ç›®é”™è¯¯"></a>è§£å†³é¢˜ç›®é”™è¯¯</h2><p>ä¸€åˆ‡éƒ½æ˜¯æƒ³è±¡çš„é‚£ä¹ˆé¡ºåˆ©ï¼Œç„¶åå¯åŠ¨åå‘ç°å®¹å™¨éƒ½æ²¡äº†ï¼Œå­˜å‚¨è·¯å¾„æ˜¯æ”¹å˜äº†ï¼Œè¿™é‡Œå®¹æ˜“çŠ¯é”™çš„åœ°æ–¹æ˜¯åœ¨ç§»åŠ¨çš„åœ°æ–¹ æ­£ç¡®çš„æ˜¯mv &#x2F;var&#x2F;lib&#x2F;docker &#x2F;data&#x2F; é”™è¯¯çš„ç§»åŠ¨mv &#x2F;var&#x2F;lib&#x2F;docker &#x2F;data&#x2F;docker çœ‹å‡ºé—®é¢˜äº†å—ï¼Œå°±æ˜¯åœ¨åé¢è·¯å¾„å¤šåŠ ä¸€å±‚dockerï¼Œè¿™æ ·æ‰§è¡Œä¹‹åè·¯å¾„ä¾¿æ˜¯&#x2F;data&#x2F;docker&#x2F;dockerï¼Œæ‰€ä»¥æŠ¥æ‰¾ä¸åˆ°ã€‚ å¦‚æœæ­¤æ—¶ä½ å¹¶æ²¡æœ‰æŠ¥æ‰¾ä¸åˆ°å®¹å™¨ï¼Œè€Œæ˜¯æŠ¥ä»¥ä¸‹é”™è¯¯ï¼ŒdockeræœåŠ¡èƒ½æ­£å¸¸å¯åŠ¨ï¼Œä½†æ˜¯æ‰€æœ‰dockerå‘½ä»¤éƒ½ç”¨ä¸äº†ï¼Œæ‰§è¡Œä»»ä½•dockerå‘½ä»¤éƒ½æŠ¥ä»¥ä¸‹é”™è¯¯ <strong>ERROR: Cannot connect to the Docker daemon at unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock. Is the docker daemon running?</strong> è§£å†³åŠæ³• ä¿®æ”¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/lib/systemd/system/docker.service</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ExecStartï¼Œå¦‚æœå’Œä¸‹é¢ä¸€æ ·ï¼Œ ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;dockerd -H fd:&#x2F;&#x2F; â€“containerd&#x3D;&#x2F;run&#x2F;containerd&#x2F;containerd.sock åœ¨æœ€åé¢æ·»åŠ ï¼š-H unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock æ·»åŠ ä¹‹å <strong>ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;dockerd -H fd:&#x2F;&#x2F; â€“containerd&#x3D;&#x2F;run&#x2F;containerd&#x2F;containerd.sock -H unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock</strong> é‡å¯dockeræœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload &amp;&amp; systemctl start docker</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰dockerå‘½ä»¤éƒ½æ— æ³•ä½¿ç”¨è¿™ä¸ªé—®é¢˜æäº†å¥½å‡ ä¸ªå°æ—¶æ²¡è§£å†³ï¼Œæœ€ååŒäº‹ç»™è§£å†³äº†</p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mycat1.6.7.6å¯¹Mysqlåˆ†è¡¨é…ç½®</title>
      <link href="/2022/01/18/mycat1-6-7-6%E5%AF%B9mysql%E5%88%86%E8%A1%A8%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/01/18/mycat1-6-7-6%E5%AF%B9mysql%E5%88%86%E8%A1%A8%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mysqlç‰ˆæœ¬ï¼šMysql8</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li></ul><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p><strong>éœ€è¦å¯¹ç”¨æˆ·è¡¨åˆ†ç‰‡æ“ä½œï¼Œè¦æ±‚åˆ†æˆ3ä¸ªåˆ†ç‰‡</strong> ç”¨æˆ·è¡¨ç»“æ„ <img src="https://www.itze.cn/wp-content/uploads/2022/01/%E5%AD%97%E6%AE%B5.png"></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>æ¶‰åŠéœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ï¼Œschema.xmlã€rule.xml å…ˆçœ‹ä¸€ä¸‹é…ç½®ï¼Œä¸‹é¢è§£é‡Š</p><h3 id="æœ€ç®€å•çš„åŒä¸€å°æœºå™¨ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“ï¼Œåˆ†è¡¨é…ç½®ç¤ºä¾‹"><a href="#æœ€ç®€å•çš„åŒä¸€å°æœºå™¨ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“ï¼Œåˆ†è¡¨é…ç½®ç¤ºä¾‹" class="headerlink" title="æœ€ç®€å•çš„åŒä¸€å°æœºå™¨ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“ï¼Œåˆ†è¡¨é…ç½®ç¤ºä¾‹"></a>æœ€ç®€å•çš„åŒä¸€å°æœºå™¨ï¼ŒåŒä¸€ä¸ªæ•°æ®åº“ï¼Œåˆ†è¡¨é…ç½®ç¤ºä¾‹</h3><p><strong>schema.xmlé…ç½®æ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span><br><span class="line">&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;true&quot; sqlMaxLimit=&quot;100&quot; randomDataNode=&quot;dn1&quot; dataNode=&quot;dn1&quot;&gt;</span><br><span class="line">        &lt;!-- é…ç½®éœ€è¦åˆ†ç‰‡çš„è¡¨ --&gt;</span><br><span class="line">        &lt;table name=&quot;t_user&quot; dataNode=&quot;dn1&quot; subTables=&quot;t_user$1-3&quot; rule=&quot;mod_rule&quot;&gt;&lt;/table&gt;</span><br><span class="line">    &lt;/schema&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;localhost1&quot; database=&quot;db1&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dataHost name=&quot;localhost1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span><br><span class="line">              writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;jdbc&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span><br><span class="line">        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span><br><span class="line">        &lt;!-- can have multi write hosts --&gt;</span><br><span class="line">        &lt;writeHost host=&quot;hostM1&quot; url=&quot;jdbc:mysql://127.0.0.1:3306&quot; user=&quot;root&quot;</span><br><span class="line">                   password=&quot;123456&quot;&gt;</span><br><span class="line">        &lt;/writeHost&gt;</span><br><span class="line">    &lt;/dataHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mycat:schema&gt;</span><br></pre></td></tr></table></figure><p><strong>rule.xmlé…ç½®æ–‡ä»¶</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!-- - - Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); </span><br><span class="line">    - you may not use this file except in compliance with the License. - You </span><br><span class="line">    may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 </span><br><span class="line">    - - Unless required by applicable law or agreed to in writing, software - </span><br><span class="line">    distributed under the License is distributed on an &quot;AS IS&quot; BASIS, - WITHOUT </span><br><span class="line">    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the </span><br><span class="line">    License for the specific language governing permissions and - limitations </span><br><span class="line">    under the License. --&gt;</span><br><span class="line">&lt;!DOCTYPE mycat:rule SYSTEM &quot;rule.dtd&quot;&gt;</span><br><span class="line">&lt;mycat:rule xmlns:mycat=&quot;http://io.mycat/&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;tableRule name=&quot;mod_rule&quot;&gt; &lt;!-- åˆ†ç‰‡è§„åˆ™åç§°ï¼Œå¯éšæ„å¡«å†™ï¼Œä¸schema.xmlä¸­rule=&quot;mod_rule&quot;å¯¹åº”å³å¯ --&gt;</span><br><span class="line">        &lt;rule&gt;</span><br><span class="line">            &lt;columns&gt;user_id&lt;/columns&gt; &lt;!-- å¯¹åº”çœŸå®æ•°æ®è¡¨å­—æ®µï¼Œä¸€èˆ¬æ˜¯è¯¥è¡¨IDä¸»é”® --&gt;</span><br><span class="line">            &lt;algorithm&gt;mod-long&lt;/algorithm&gt; &lt;!-- ä½¿ç”¨å“ªä¸ªåˆ†ç‰‡ç®—æ³•ï¼Œè¦ä¸ä¸‹é¢å‡½æ•°åç§°å¯¹åº” --&gt;</span><br><span class="line">        &lt;/rule&gt;</span><br><span class="line">    &lt;/tableRule&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- ä»¥ä¸‹æ˜¯å®˜æ–¹æä¾›çš„åˆ†ç‰‡æ‰€æ¶‰åŠç®—æ³•å‡½æ•° --&gt;</span><br><span class="line">    &lt;!-- æš‚æ—¶å°±æ˜¯ä½¿ç”¨mod-longè¿™ä¸€ä¸ªå‡½æ•° --&gt;</span><br><span class="line">    &lt;function name=&quot;mod-long&quot; class=&quot;io.mycat.route.function.PartitionByMod&quot;&gt;</span><br><span class="line">        &lt;!-- how many data nodes --&gt;</span><br><span class="line">        &lt;property name=&quot;count&quot;&gt;3&lt;/property&gt;</span><br><span class="line">    &lt;/function&gt;</span><br><span class="line"></span><br><span class="line">&lt;/mycat:rule&gt;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è§£é‡Š"><a href="#é…ç½®è§£é‡Š" class="headerlink" title="é…ç½®è§£é‡Š"></a>é…ç½®è§£é‡Š</h3><ol><li>schema.xmlä¸­éƒ¨åˆ†æ ‡ç­¾ <strong>table</strong></li></ol><p>- nameï¼šå¦‚æœè¿›è¡Œåˆ†è¡¨æ“ä½œäº†ï¼Œè¯¥å€¼ä¸ºé€»è¾‘è¡¨è¡¨åï¼Œä¸éœ€è¦å­˜åœ¨å¯¹åº”çš„çœŸå®è¡¨ - dataNodeï¼šèŠ‚ç‚¹åç§° - subTablesï¼šä½œç”¨å¯ä»¥ç†è§£ä¸ºåŒ…å«å“ªäº›åˆ†ç‰‡ï¼Œå¯¹åº”çš„ä¸ºçœŸå®è¡¨è¡¨åï¼Œä¾‹å¦‚æœ¬æ–‡ç« é…ç½®ä¸­subTables&#x3D;â€t_user$1-3â€ï¼Œä¹Ÿå¯ä»¥å•ç‹¬å†™ï¼Œä¸­é—´ç”¨è‹±æ–‡é€—å·éš”å¼€ï¼Œåˆ™éœ€è¦åœ¨çœŸå®dn1èŠ‚ç‚¹å¯¹åº”çš„localhost1è¿™å°æœºå™¨çš„db1æ•°æ®åº“ä¸‹åˆ›å»ºt_user1ã€t_user2ã€t_user3ä¸‰å¼ è¡¨ï¼Œè¡¨ç»“æ„ä¿æŒä¸€è‡´ æœ¬æ–‡ç¤ºä¾‹ï¼š <img src="https://www.itze.cn/wp-content/uploads/2022/01/t_user.png"> - ruleï¼šåˆ†ç‰‡è§„åˆ™ï¼Œå€¼å¯¹åº”rule.xmlä¸­tableRuleæ ‡ç­¾nameå€¼ <strong>dataNode</strong> - nameï¼šèŠ‚ç‚¹åç§°ï¼Œå¯éšæ„å¡«å†™ - dataHostï¼šå¯¹åº”dataHostæ ‡ç­¾ä¸­nameå€¼ï¼Œä¿æŒä¸€è‡´å³å¯ - databaseï¼šå¯¹åº”dataHostä¸­nameå€¼å¯¹åº”çš„dataHosté‚£å°æœºå™¨ä¸­çœŸå®å­˜åœ¨çš„æ•°æ®åº“åç§°ï¼Œæ¯”å¦‚åƒæœ¬æ–‡ï¼Œéœ€è¦æå‰åˆ›å»ºå¥½æ•°æ®åº“åº“åä¸ºdb1çš„æ•°æ®åº“ 2. rule.xmlä¸­éƒ¨åˆ†æ ‡ç­¾ <strong>tableRule</strong> - nameï¼šåˆ†ç‰‡è§„åˆ™åç§° - columnsï¼šåˆ†ç‰‡å­—æ®µï¼Œè¯¥å­—æ®µä¸€èˆ¬ä¸ºè¡¨ä¸­çš„ä¸»é”® - algorithmï¼šä½¿ç”¨é‚£ç§åˆ†ç‰‡ç®—æ³•å¯¹åº”çš„å‡½æ•°å - functionä¸­éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œè¿™é‡Œåªè¯´å–æ¨¡åˆ†ç‰‡è§„åˆ™çš„ï¼Œname&#x3D;â€countâ€å¯¹åº”çš„æ•°å€¼ï¼Œéœ€è¦å’Œåˆ†ç‰‡æ•°é‡ä¸€ç›´ï¼Œæ¯”å¦‚æœ¬æ–‡subTableså¯¹åº”ä¸‰ä¸ªåˆ†ç‰‡ï¼Œè¿™é‡Œçš„æ•°å€¼å°±è¦æ˜¯3 å…¶ä»–æ ‡ç­¾è§£é‡Šå‚è€ƒï¼š<a href="https://www.itze.cn/mycat/890.html" title="Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨">Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨</a> ä¸­çš„æ ‡ç­¾è§£é‡Š</p><h3 id="å…³äºæ“ä½œ"><a href="#å…³äºæ“ä½œ" class="headerlink" title="å…³äºæ“ä½œ"></a>å…³äºæ“ä½œ</h3><p>å¼€å‘è€…åªéœ€è¦é€šè¿‡æ“ä½œMycatæœåŠ¡å»æ“ä½œæ•°æ®ï¼Œä¸éœ€è¦å…³å¿ƒæ•°æ®åœ¨å“ªä¸ªæœåŠ¡å™¨å“ªä¸ªåº“ä¸­ï¼Œæ¯”å¦‚ä½ çš„åç«¯ä½ æ˜¯Javaï¼Œåªéœ€è¦å°†é…ç½®æ•°æ®åº“çš„åœ°æ–¹æ”¹ä¸ºmycatçš„æœåŠ¡å³å¯ï¼ŒCRUDå’Œæ­£å¸¸æ“ä½œMysqlä¸€æ ·å³å¯ æ¯”å¦‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jdbc:mysql://127.0.0.1:8066/TESTDB...åé¢çœç•¥</span><br></pre></td></tr></table></figure><ul><li>8066:MycatæœåŠ¡é»˜è®¤ç«¯å£</li><li>TESTDB:Mycaté…ç½®æ–‡ä»¶server.xmlä¸­é…ç½®çš„é€»è¾‘åº“å</li></ul><p>æ“ä½œçš„æ—¶å€™åªéœ€æ“ä½œè¡¨åï¼št_userå³å¯ï¼Œæ¯”å¦‚æŸ¥è¯¢</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_user;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœä½¿ç”¨Mycat1.xç‰ˆæœ¬è¿›è¡Œåˆ†åº“æ“ä½œï¼Œéœ€è¦æ³¨æ„è·¨åº“ç›®å‰ä¸æ”¯æŒJOINæ“ä½œï¼Œåˆ†è¡¨ä¸åˆ†åº“Mycat1.6.7.6äº²æµ‹é»˜è®¤æ”¯æŒJOINæ“ä½œï¼Œæ— é¡»é…ç½®ERè¡¨å…³ç³»</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Mycat </tag>
            
            <tag> åˆ†è¡¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mycat1.6.7.6å¯¹Mysqlåˆ†åº“é…ç½®</title>
      <link href="/2022/01/17/mycat1-6-7-6%E5%AF%B9mysql%E5%88%86%E5%BA%93%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/01/17/mycat1-6-7-6%E5%AF%B9mysql%E5%88%86%E5%BA%93%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mysqlç‰ˆæœ¬ï¼šMysql8</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li><li>host_1:127.0.0.1</li><li>host_2:127.0.0.2</li></ul><h2 id="æ–¹å¼"><a href="#æ–¹å¼" class="headerlink" title="æ–¹å¼"></a>æ–¹å¼</h2><ol><li>æ–¹å¼ä¸€ï¼šä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥å…ˆé€šè¿‡Mysqlè´¦æˆ·ä½¿ç”¨å›¾å½¢åŒ–å·¥å…·Navicatåœ¨ä¸¤å°ä¸»æœºä¸åŒçš„MsqlæœåŠ¡é‡Œåˆ›å»ºå¥½æ•°æ®åº“åŠæ•°æ®è¡¨ï¼Œç„¶åå†ä¿®æ”¹Mycaté…ç½®æ–‡ä»¶ï¼Œå°†å¯¹åº”çš„æ•°æ®åº“åŠæ•°æ®è¡¨é…ç½®å¥½</li><li>æ–¹å¼äºŒï¼šæå‰å†Mycaté…ç½®æ–‡ä»¶é…ç½®å¥½æ•°æ®åº“åŠæ•°æ®è¡¨ï¼Œé€šè¿‡MycatæœåŠ¡å»åˆ›å»ºï¼ŒMycatä¼šå¸®ä½ è‡ªåŠ¨å°†ä¸åŒçš„æ•°æ®è¡¨åˆ›å»ºåˆ°é…ç½®å¯¹åº”çš„ç‰©ç†ä¸»æœºçš„MysqlæœåŠ¡ä¸‹</li><li>æ³¨æ„ï¼šè‹¥è¦é€šè¿‡Mycat1.xç‰ˆæœ¬å»ºè¡¨ï¼Œåªèƒ½ä½¿ç”¨å»ºè¡¨SQLï¼ŒMycat1.xä¸æ”¯æŒä½¿ç”¨Navicatç›´æ¥å»ºè¡¨ï¼Œè¿™é‡Œæ˜¯æŒ‡ä¸æ”¯æŒé€šè¿‡Navicatç™»é™†MycatæœåŠ¡ï¼Œç„¶åç›´æ¥åˆ›å»ºè¡¨ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡Navicatç™»é™†Mycat</li></ol><h2 id="åˆ†åº“é…ç½®"><a href="#åˆ†åº“é…ç½®" class="headerlink" title="åˆ†åº“é…ç½®"></a>åˆ†åº“é…ç½®</h2><p>ä¿®æ”¹ schema é…ç½®æ–‡ä»¶</p><h3 id="ç®€å•åˆ†åº“é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹"><a href="#ç®€å•åˆ†åº“é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹" class="headerlink" title="ç®€å•åˆ†åº“é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹"></a>ç®€å•åˆ†åº“é…ç½®æ–‡ä»¶å®Œæ•´ç¤ºä¾‹</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span><br><span class="line">&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;</span><br><span class="line">    &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;true&quot; sqlMaxLimit=&quot;100&quot; randomDataNode=&quot;dn1&quot; dataNode=&quot;dn1&quot;&gt;</span><br><span class="line">        &lt;table name=&quot;customer&quot; dataNode=&quot;dn2&quot; &gt;&lt;/table&gt;</span><br><span class="line">    &lt;/schema&gt;</span><br><span class="line">    &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;orders&quot; /&gt;</span><br><span class="line">    &lt;dataNode name=&quot;dn2&quot; dataHost=&quot;host2&quot; database=&quot;orders&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span><br><span class="line">              writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;jdbc&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span><br><span class="line">        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span><br><span class="line">        &lt;!-- can have multi write hosts --&gt;</span><br><span class="line">        &lt;writeHost host=&quot;hostM1&quot; url=&quot;jdbc:mysql://127.0.0.1:3306&quot; user=&quot;root&quot;</span><br><span class="line">                   password=&quot;123456&quot;&gt;</span><br><span class="line">        &lt;/writeHost&gt;</span><br><span class="line">    &lt;/dataHost&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dataHost name=&quot;host2&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span><br><span class="line">              writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;jdbc&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span><br><span class="line">        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span><br><span class="line">        &lt;!-- can have multi write hosts --&gt;</span><br><span class="line">        &lt;writeHost host=&quot;hostM2&quot; url=&quot;jdbc:mysql://127.0.0.2:3306&quot; user=&quot;root&quot;</span><br><span class="line">                   password=&quot;123456&quot;&gt;</span><br><span class="line">        &lt;/writeHost&gt;</span><br><span class="line">    &lt;/dataHost&gt;</span><br><span class="line">&lt;/mycat:schema&gt;</span><br></pre></td></tr></table></figure><h3 id="é…ç½®è§£é‡Š"><a href="#é…ç½®è§£é‡Š" class="headerlink" title="é…ç½®è§£é‡Š"></a>é…ç½®è§£é‡Š</h3><p>å¦‚æœé€šè¿‡æ–¹å¼äºŒå»åˆ›å»ºè¡¨ï¼Œåªæœ‰åˆ›å»ºè¡¨æ˜ä¸ºï¼šcustomerçš„æ—¶å€™ï¼ŒMycatä¼šè‡ªåŠ¨å¸®ä½ æŠŠè¡¨åˆ›å»ºåˆ°å¯¹åº”çš„dn2çš„Host2ä¸»æœºé…ç½®çš„MysqlæœåŠ¡ï¼Œåˆ›å»ºå…¶ä»–çš„ä»»æ„è¡¨ï¼Œéƒ½å°†é»˜è®¤åˆ›å»ºåˆ°dn1å¯¹åº”çš„Host1ä¸»æœºé…ç½®çš„MysqlæœåŠ¡</p><h3 id="å…³äºæ“ä½œ"><a href="#å…³äºæ“ä½œ" class="headerlink" title="å…³äºæ“ä½œ"></a>å…³äºæ“ä½œ</h3><p>å¼€å‘è€…åªéœ€è¦é€šè¿‡æ“ä½œMycatæœåŠ¡å»æ“ä½œæ•°æ®ï¼Œä¸éœ€è¦å…³å¿ƒæ•°æ®åœ¨å“ªä¸ªæœåŠ¡å™¨å“ªä¸ªåº“ä¸­ï¼Œæ¯”å¦‚ä½ çš„åç«¯ä½ æ˜¯Javaï¼Œåªéœ€è¦å°†é…ç½®æ•°æ®åº“çš„åœ°æ–¹æ”¹ä¸ºmycatçš„æœåŠ¡å³å¯ï¼ŒCRUDå’Œæ­£å¸¸æ“ä½œMysqlä¸€æ ·å³å¯ æ¯”å¦‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jdbc:mysql://127.0.0.1:8066/TESTDB...åé¢çœç•¥</span><br></pre></td></tr></table></figure><ul><li>8066:MycatæœåŠ¡é»˜è®¤ç«¯å£</li><li>TESTDB:Mycaté…ç½®æ–‡ä»¶server.xmlä¸­é…ç½®çš„é€»è¾‘åº“å</li></ul><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœä½¿ç”¨Mycat1.xç‰ˆæœ¬è¿›è¡Œåˆ†åº“æ“ä½œï¼Œéœ€è¦æ³¨æ„è·¨åº“ç›®å‰ä¸æ”¯æŒJOINæ“ä½œï¼Œåˆ†è¡¨ä¸åˆ†åº“Mycat1.6.7.6äº²æµ‹é»˜è®¤æ”¯æŒJOINæ“ä½œï¼Œæ— é¡»é…ç½®ERè¡¨å…³ç³»</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨</title>
      <link href="/2022/01/17/mycat1-6-7-6%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E5%8A%A8/"/>
      <url>/2022/01/17/mycat1-6-7-6%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li></ul><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p>é¦–å…ˆä¸‹è½½Mycatçš„å‹ç¼©åŒ…ï¼ŒMycat1å®˜ç½‘ï¼š<a href="http://www.mycat.org.cn/mycat1.html" title="http://www.mycat.org.cn/mycat1.html">http://www.mycat.org.cn/mycat1.html</a> Mycat1.6.7.6å®˜ç½‘ä¸‹è½½åœ°å€ï¼š<a href="http://dl.mycat.org.cn/1.6.7.6/" title="http://dl.mycat.org.cn/1.6.7.6/">http://dl.mycat.org.cn/1.6.7.6/</a> æ‰¾åˆ°æœ€æ–°æ—¥æœŸçš„ä¸‹è½½å³å¯</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…ï¼Œä¸Šä¼ è‡³æœåŠ¡å™¨è§£å‹å³å¯ï¼Œæ— é¡»ç¼–è¯‘å®‰è£… è§£å‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf Mycat-server-1.6.7.6-release-linux.tar.gz(åå­—æ”¹æˆè‡ªå·±ä¸‹è½½çš„å‹ç¼©åŒ…åç§°)</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h2><p>æ¶‰åŠåˆ°éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ - server.xmlï¼šå®šä¹‰ç”¨æˆ·ä»¥åŠç³»ç»Ÿç›¸å…³å˜é‡ï¼Œå¦‚ç«¯å£ç­‰ - schema.xmlï¼šå®šä¹‰é€»è¾‘åº“ï¼Œè¡¨ã€åˆ†ç‰‡èŠ‚ç‚¹ç­‰å†…å®¹ 1. ä¿®æ”¹é…ç½®æ–‡ä»¶server.xml</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;user name=&quot;mycat&quot; defaultAccount=&quot;true&quot;&gt;       &lt;!-- mycatç™»é™†ç”¨æˆ·å --&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt; &lt;!-- mycatç™»é™†å¯†ç  --&gt;</span><br><span class="line">    &lt;property name=&quot;schemas&quot;&gt;TESTDB&lt;/property&gt;  &lt;!-- mycatè¿æ¥é€»è¾‘åº“ --&gt;</span><br><span class="line">    &lt;property name=&quot;defaultSchema&quot;&gt;TESTDB&lt;/property&gt;  &lt;!-- mycatè¿æ¥é€»è¾‘åº“ --&gt;</span><br><span class="line">&lt;/user&gt;</span><br></pre></td></tr></table></figure><p>é…ç½®è§£é‡Š - user name&#x3D;â€mycatâ€ï¼šé€šè¿‡MycatæœåŠ¡è¿æ¥MysqlæœåŠ¡çš„ç”¨æˆ·åï¼Œå¯éšæ„ä¿®æ”¹ - name&#x3D;â€schemasâ€ï¼šMycatçš„é€»è¾‘åº“TESTDBï¼Œå¯éšæ„ä¿®æ”¹ 2. ä¿®æ”¹é…ç½®æ–‡ä»¶ schema.xml</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span><br><span class="line">&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;true&quot; sqlMaxLimit=&quot;100&quot; randomDataNode=&quot;dn1&quot; dataNode=&quot;dn1&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/schema&gt;</span><br><span class="line">    &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;testdb&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span><br><span class="line">              writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;jdbc&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span><br><span class="line">        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span><br><span class="line">        &lt;!-- can have multi write hosts --&gt;</span><br><span class="line">        &lt;writeHost host=&quot;hostM1&quot; url=&quot;jdbc:mysql://127.0.0.1:3306&quot; user=&quot;root&quot;</span><br><span class="line">                   password=&quot;123456&quot;&gt;</span><br><span class="line">        &lt;/writeHost&gt;</span><br><span class="line">    &lt;/dataHost&gt;</span><br><span class="line">&lt;/mycat:schema&gt;</span><br></pre></td></tr></table></figure><h3 id="æ ‡ç­¾è§£é‡Š"><a href="#æ ‡ç­¾è§£é‡Š" class="headerlink" title="æ ‡ç­¾è§£é‡Š"></a>æ ‡ç­¾è§£é‡Š</h3><h4 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h4><ul><li>nameï¼šå¯¹åº”Server.xmlä¸­é…ç½®çš„é€»è¾‘åº“åTESTDB</li><li>checkSQLschemaï¼šå½“è¯¥å€¼è®¾ç½®ä¸ºtrueæ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œè¯­å¥select * from TESTDB.travelrecord;åˆ™MyCatä¼šæŠŠè¯­å¥ä¿®æ”¹ä¸ºselect * from travelrecord;å³æŠŠè¡¨ç¤ºschemaçš„å­—ç¬¦å»æ‰ï¼Œé¿å…å‘é€åˆ°åç«¯æ•°æ®åº“æ‰§è¡Œæ—¶æŠ¥ï¼ˆERROR 1146 (42S02): Table â€˜testdb.travelrecordâ€™ doesnâ€™t existï¼‰ã€‚ä¸è¿‡ï¼Œå³ä½¿è®¾ç½®è¯¥å€¼ä¸º true ï¼Œå¦‚æœè¯­å¥æ‰€å¸¦çš„æ˜¯å¹¶éæ˜¯schemaæŒ‡å®šçš„åå­—ï¼Œä¾‹å¦‚ï¼šselect * from db1.travelrecord; é‚£ä¹ˆMyCatå¹¶ä¸ä¼šåˆ é™¤db1è¿™ä¸ªå­—æ®µï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰è¯¥åº“çš„è¯åˆ™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åœ¨æä¾›SQLè¯­å¥çš„æœ€å¥½æ˜¯ä¸å¸¦è¿™ä¸ªå­—æ®µã€‚</li><li>sqlMaxLimitï¼šå½“è¯¥å€¼è®¾ç½®ä¸ºæŸä¸ªæ•°å€¼æ—¶ã€‚æ¯æ¡æ‰§è¡Œçš„SQLè¯­å¥ï¼Œå¦‚æœæ²¡æœ‰åŠ ä¸Šlimitè¯­å¥ï¼ŒMyCatä¹Ÿä¼šè‡ªåŠ¨çš„åŠ ä¸Šæ‰€å¯¹åº”çš„å€¼ã€‚ä¾‹å¦‚è®¾ç½®å€¼ä¸º100ï¼Œæ‰§è¡Œselect * from TESTDB.travelrecord;çš„æ•ˆæœä¸ºå’Œæ‰§è¡Œselect * from TESTDB.travelrecord limit 100;ç›¸åŒè®¾ç½®è¯¥å€¼çš„è¯ï¼ŒMyCaté»˜è®¤ä¼šæŠŠæŸ¥è¯¢åˆ°çš„ä¿¡æ¯å…¨éƒ¨éƒ½å±•ç¤ºå‡ºæ¥ï¼Œé€ æˆè¿‡å¤šçš„è¾“å‡ºã€‚æ‰€ä»¥ï¼Œåœ¨æ­£å¸¸ä½¿ç”¨ä¸­ï¼Œè¿˜æ˜¯å»ºè®®åŠ ä¸Šä¸€ä¸ªå€¼ï¼Œç”¨äºå‡å°‘è¿‡å¤šçš„æ•°æ®è¿”å›ã€‚å½“ç„¶SQLè¯­å¥ä¸­ä¹Ÿæ˜¾å¼çš„æŒ‡å®šlimitçš„å¤§å°ï¼Œä¸å—è¯¥å±æ€§çš„çº¦æŸã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¿è¡Œçš„schemaä¸ºéæ‹†åˆ†åº“çš„ï¼Œé‚£ä¹ˆè¯¥å±æ€§ä¸ä¼šç”Ÿæ•ˆã€‚éœ€è¦æ‰‹åŠ¨æ·»åŠ limitè¯­å¥ã€‚</li><li>randomDataNodeå’ŒdataNodeï¼šåŒæ—¶å­˜åœ¨ï¼ŒæŒ‡å®šé»˜è®¤å­˜å‚¨èŠ‚ç‚¹ï¼Œæ¯”å¦‚å»ºè¡¨é»˜è®¤ä¼šåˆ›å»ºåˆ°è¯¥èŠ‚ç‚¹ä¸‹</li></ul><h4 id="dataNode"><a href="#dataNode" class="headerlink" title="dataNode"></a>dataNode</h4><ul><li>nameï¼šèŠ‚ç‚¹åç§°ï¼Œå¯éšæ„å¡«å†™</li><li>dataHostï¼šå¯¹åº”dataHostæ ‡ç­¾ä¸­nameå±æ€§å€¼</li><li>databaseï¼šçœŸå®MysqlæœåŠ¡ä¸­åˆ›å»ºçš„æ•°æ®åº“åç§°</li></ul><h4 id="dataHost"><a href="#dataHost" class="headerlink" title="dataHost"></a>dataHost</h4><ul><li>nameï¼šä¸»æœºåç§°ï¼Œå¯éšæ„å¡«å†™</li><li>maxConï¼šæŒ‡å®šæ¯ä¸ªè¯»å†™å®ä¾‹è¿æ¥æ± çš„æœ€å¤§è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ‡ç­¾å†…åµŒå¥—çš„writeHostã€readHostæ ‡ç­¾éƒ½ä¼šä½¿ç”¨è¿™ä¸ªå±æ€§çš„å€¼æ¥å®ä¾‹åŒ–å‡ºè¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°ã€‚</li><li>minConï¼šæŒ‡å®šæ¯ä¸ªè¯»å†™å®ä¾‹è¿æ¥æ± çš„æœ€å°è¿æ¥ï¼Œåˆå§‹åŒ–è¿æ¥æ± çš„å¤§å°ã€‚</li><li>balanceï¼šè´Ÿè½½å‡è¡¡ç±»å‹ï¼Œç›®å‰çš„å–å€¼æœ‰3ç§ï¼š balance&#x3D;â€0â€, ä¸å¼€å¯è¯»å†™åˆ†ç¦»æœºåˆ¶ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½å‘é€åˆ°å½“å‰å¯ç”¨çš„writeHostä¸Šã€‚ balance&#x3D;â€1â€ï¼Œå…¨éƒ¨çš„readHostä¸stand by writeHostå‚ä¸selectè¯­å¥çš„è´Ÿè½½å‡è¡¡ï¼Œç®€å•çš„è¯´ï¼Œå½“åŒä¸»åŒä»æ¨¡å¼(M1-&gt;S1ï¼ŒM2-&gt;S2ï¼Œå¹¶ä¸”M1ä¸ M2äº’ä¸ºä¸»å¤‡)ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒM2,S1,S2éƒ½å‚ä¸selectè¯­å¥çš„è´Ÿè½½å‡è¡¡ã€‚balance&#x3D;â€2â€ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½éšæœºçš„åœ¨writeHostã€readhostä¸Šåˆ†å‘ã€‚balance&#x3D;â€3â€ï¼Œæ‰€æœ‰è¯»è¯·æ±‚éšæœºçš„åˆ†å‘åˆ°wiriterHostå¯¹åº”çš„readhostæ‰§è¡Œï¼ŒwriterHostä¸è´Ÿæ‹…è¯»å‹åŠ›ï¼Œæ³¨æ„balance&#x3D;3åªåœ¨1.4åŠå…¶ä»¥åç‰ˆæœ¬æœ‰ï¼Œ1.3æ²¡æœ‰ã€‚</li><li>writeTypeï¼šè´Ÿè½½å‡è¡¡ç±»å‹ï¼Œç›®å‰çš„å–å€¼æœ‰3ç§ï¼šwriteType&#x3D;â€0â€, æ‰€æœ‰å†™æ“ä½œå‘é€åˆ°é…ç½®çš„ç¬¬ä¸€ä¸ªwriteHostï¼Œç¬¬ä¸€ä¸ªæŒ‚äº†åˆ‡åˆ°è¿˜ç”Ÿå­˜çš„ç¬¬äºŒä¸ªwriteHostï¼Œé‡æ–°å¯åŠ¨åå·²åˆ‡æ¢åçš„ä¸ºå‡†ï¼Œåˆ‡æ¢è®°å½•åœ¨é…ç½®æ–‡ä»¶ä¸­:dnindex.propertiesï¼ŒwriteType&#x3D;â€1â€ï¼Œæ‰€æœ‰å†™æ“ä½œéƒ½éšæœºçš„å‘é€åˆ°é…ç½®çš„writeHostï¼Œ1.5ä»¥ååºŸå¼ƒä¸æ¨èã€‚switchTypeå±æ€§ 1 è¡¨ç¤ºä¸è‡ªåŠ¨åˆ‡æ¢ã€‚ 1 é»˜è®¤å€¼ï¼Œè‡ªåŠ¨åˆ‡æ¢ã€‚ 2 åŸºäºMySQLä¸»ä»åŒæ­¥çš„çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢ã€‚</li><li>dbTypeï¼šæŒ‡å®šåç«¯è¿æ¥çš„æ•°æ®åº“ç±»å‹ï¼Œç›®å‰æ”¯æŒäºŒè¿›åˆ¶çš„mysqlåè®®ï¼Œè¿˜æœ‰å…¶ä»–ä½¿ç”¨JDBCè¿æ¥çš„æ•°æ®åº“ã€‚ä¾‹å¦‚ï¼šmongodbã€oracleã€sparkç­‰ã€‚</li><li>dbDriverï¼šæŒ‡å®šè¿æ¥åç«¯æ•°æ®åº“ä½¿ç”¨çš„Driverï¼Œç›®å‰å¯é€‰çš„å€¼æœ‰nativeå’ŒJDBCã€‚ä½¿ç”¨nativeçš„è¯ï¼Œå› ä¸ºè¿™ä¸ªå€¼æ‰§è¡Œçš„æ˜¯äºŒè¿›åˆ¶çš„mysqlåè®®ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨mysqlå’Œmaridbã€‚å…¶ä»–ç±»å‹çš„æ•°æ®åº“åˆ™éœ€è¦ä½¿ç”¨JDBCé©±åŠ¨æ¥æ”¯æŒã€‚ä»1.6ç‰ˆæœ¬å¼€å§‹æ”¯æŒpostgresqlçš„nativeåŸå§‹åè®®ã€‚ å¦‚æœä½¿ç”¨JDBCçš„è¯éœ€è¦å°†ç¬¦åˆJDBC 4æ ‡å‡†çš„é©±åŠ¨JARåŒ…æ”¾åˆ°MYCAT\libç›®å½•ä¸‹ï¼Œå¹¶æ£€æŸ¥é©±åŠ¨JARåŒ…ä¸­åŒ…æ‹¬å¦‚ä¸‹ç›®å½•ç»“æ„çš„æ–‡ä»¶ï¼šMETA-INF\services\java.sql.Driverã€‚åœ¨è¿™ä¸ªæ–‡ä»¶å†…å†™ä¸Šå…·ä½“çš„Driverç±»åï¼Œä¾‹å¦‚ï¼šcom.mysql.jdbc.Driverã€‚</li><li>switchTypeï¼š -1 è¡¨ç¤ºä¸è‡ªåŠ¨åˆ‡æ¢ 1 é»˜è®¤å€¼ï¼Œè‡ªåŠ¨åˆ‡æ¢ 2 åŸºäºMySQLä¸»ä»åŒæ­¥çš„çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢ å¿ƒè·³è¯­å¥ä¸º show slave status 3 åŸºäºMySQL galary clusterçš„åˆ‡æ¢æœºåˆ¶ï¼ˆé€‚åˆé›†ç¾¤ï¼‰ï¼ˆ1.4.1ï¼‰ å¿ƒè·³è¯­å¥ä¸º show status like â€˜wsrep%â€™</li></ul><h4 id="heartbeat"><a href="#heartbeat" class="headerlink" title="heartbeat"></a>heartbeat</h4><p>è¿™ä¸ªæ ‡ç­¾å†…æŒ‡æ˜ç”¨äºå’Œåç«¯æ•°æ®åº“è¿›è¡Œå¿ƒè·³æ£€æŸ¥çš„è¯­å¥ã€‚ä¾‹å¦‚,MYSQLå¯ä»¥ä½¿ç”¨select user()ï¼ŒOracleå¯ä»¥ä½¿ç”¨select 1 from dualç­‰ã€‚ è¿™ä¸ªæ ‡ç­¾è¿˜æœ‰ä¸€ä¸ªconnectionInitSqlå±æ€§ï¼Œä¸»è¦æ˜¯å½“ä½¿ç”¨Oraclaæ•°æ®åº“æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„åˆå§‹åŒ–SQLè¯­å¥å°±è¿™ä¸ªæ”¾åˆ°è¿™é‡Œé¢æ¥ã€‚ä¾‹å¦‚ï¼šalter session set nls_date_format&#x3D;â€™yyyy-mm-dd hh24ï¼šmi:ssâ€™(æŠŠè¿™é‡Œçš„ä¸­æ–‡å†’å·æ”¹ä¸ºè‹±æ–‡å†’å·)ï¼Œ1.4ä¸»ä»åˆ‡æ¢çš„è¯­å¥å¿…é¡»æ˜¯ï¼šshow slave status</p><h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><p>mycatå¯åŠ¨ç›¸å…³å‘½ä»¤ï¼Œè¦å…ˆcd åˆ°mycat\bin\è·¯å¾„ä¸‹ linux ç¯å¢ƒä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./mycat start å¯åŠ¨</span><br><span class="line">./mycat stop åœæ­¢</span><br><span class="line">./mycat console å‰å°è¿è¡Œ</span><br><span class="line">./mycat restart é‡å¯æœåŠ¡</span><br><span class="line">./mycat pause æš‚åœ</span><br><span class="line">./mycat status æŸ¥çœ‹å¯åŠ¨çŠ¶æ€</span><br></pre></td></tr></table></figure><p>window å¯åŠ¨ä¸ºï¼š ç›´æ¥åŒå‡»è¿è¡Œ startup_nowrap.bat ï¼Œå¦‚æœé—ªé€€ç”¨ cmd æ¨¡å¼è¿è¡ŒæŸ¥çœ‹æ—¥å¿— å»ºè®®å…ˆä½¿ç”¨å‰å°è¿è¡Œï¼Œä¾¿å®œæŸ¥çœ‹è¿è¡Œæƒ…å†µ</p><h2 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h2><p>ç™»é™†å‰æï¼Œéœ€è¦æœºå™¨è£…æœ‰MysqlæœåŠ¡ç¯å¢ƒï¼ŒMycaté»˜è®¤æœåŠ¡ç«¯å£8066ï¼Œåå°ç»´æŠ¤ç«¯å£9066 ç™»é™†æ•°æ®çª—å£</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -umycat -p123456 -P8066 -h127.0.0.1ï¼ˆæ¢æˆMycatæœåŠ¡å®‰è£…æœºå™¨IPï¼‰</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ï¼Œæ³¨æ„TESTDBæ˜¯Server.xmlä¸­é…ç½®çš„é€»è¾‘åº“åç§°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">show database;</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/01/TESTDB.png"></p>]]></content>
      
      
      <categories>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mycat1.6.7.6å¯¹Mysqlè¯»å†™åˆ†ç¦»é…ç½®</title>
      <link href="/2022/01/17/mycat1-6-7-6%E5%AF%B9mysql%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/01/17/mycat1-6-7-6%E5%AF%B9mysql%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mysqlç‰ˆæœ¬ï¼šMysql8</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li></ul><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>å‰æMysqlæœåŠ¡å·²ç»æ­å»ºå¥½ä¸»ä»å¤åˆ¶ï¼ŒMysqlæ­å»ºä¸»ä»å¤åˆ¶å¯å‚è€ƒï¼š<a href="https://www.itze.cn/mysql/870.html" title="Mysql8å®ç°ä¸»ä»å¤åˆ¶">Mysql8å®ç°ä¸»ä»å¤åˆ¶</a></p><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>æ¶‰åŠåˆ°éœ€è¦ä¿®æ”¹çš„é…ç½®æ–‡ä»¶ - server.xmlï¼šå®šä¹‰ç”¨æˆ·ä»¥åŠç³»ç»Ÿç›¸å…³å˜é‡ï¼Œå¦‚ç«¯å£ç­‰ - schema.xmlï¼šå®šä¹‰é€»è¾‘åº“ï¼Œè¡¨ã€åˆ†ç‰‡èŠ‚ç‚¹ç­‰å†…å®¹ 1. ä¿®æ”¹é…ç½®æ–‡ä»¶server.xml</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;user name=&quot;mycat&quot; defaultAccount=&quot;true&quot;&gt;       &lt;!-- mycatç™»é™†ç”¨æˆ·å --&gt;</span><br><span class="line">    &lt;property name=&quot;password&quot;&gt;123456&lt;/property&gt; &lt;!-- mycatç™»é™†å¯†ç  --&gt;</span><br><span class="line">    &lt;property name=&quot;schemas&quot;&gt;TESTDB&lt;/property&gt;  &lt;!-- mycatè¿æ¥é€»è¾‘åº“ --&gt;</span><br><span class="line">    &lt;property name=&quot;defaultSchema&quot;&gt;TESTDB&lt;/property&gt;  &lt;!-- mycatè¿æ¥é€»è¾‘åº“ --&gt;</span><br><span class="line">&lt;/user&gt;</span><br></pre></td></tr></table></figure><p>é…ç½®è§£é‡Š - user name&#x3D;â€mycatâ€ï¼šé€šè¿‡MycatæœåŠ¡è¿æ¥MysqlæœåŠ¡çš„ç”¨æˆ·åï¼Œå¯éšæ„ä¿®æ”¹ - name&#x3D;â€schemasâ€ï¼šMycatçš„é€»è¾‘åº“TESTDBï¼Œå¯éšæ„ä¿®æ”¹ 2. ä¿®æ”¹é…ç½®æ–‡ä»¶ schema.xml åˆ é™¤schemaæ ‡ç­¾é—´çš„è¡¨ä¿¡æ¯ï¼ŒdataNodeæ ‡ç­¾åªç•™ä¸€ä¸ªï¼ŒdataHostæ ‡ç­¾åªç•™ä¸€ä¸ªï¼ŒwriteHostã€readHoståªç•™ä¸€å¯¹</p><h3 id="è¯»å†™åˆ†ç¦»å®Œæ•´é…ç½®æ–‡ä»¶ï¼ˆä¸€ä¸»ä¸€ä»ï¼‰"><a href="#è¯»å†™åˆ†ç¦»å®Œæ•´é…ç½®æ–‡ä»¶ï¼ˆä¸€ä¸»ä¸€ä»ï¼‰" class="headerlink" title="è¯»å†™åˆ†ç¦»å®Œæ•´é…ç½®æ–‡ä»¶ï¼ˆä¸€ä¸»ä¸€ä»ï¼‰"></a>è¯»å†™åˆ†ç¦»å®Œæ•´é…ç½®æ–‡ä»¶ï¼ˆä¸€ä¸»ä¸€ä»ï¼‰</h3><p>è¿™é‡Œçš„é…ç½®æ˜¯ä¸€ä¸»ä¸€ä»ï¼Œå¦‚æœæœåŠ¡å™¨æ•°é‡æ¡ä»¶å…è®¸å»ºè®®æ­å»ºåŒä¸»åŒä»</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span><br><span class="line">&lt;mycat:schema xmlns:mycat=&quot;http://io.mycat/&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;true&quot; sqlMaxLimit=&quot;100&quot; randomDataNode=&quot;dn1&quot; dataNode=&quot;dn1&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/schema&gt;</span><br><span class="line">    &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;testdb&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;2&quot;</span><br><span class="line">              writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;jdbc&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span><br><span class="line">        &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span><br><span class="line">        &lt;!-- can have multi write hosts --&gt;</span><br><span class="line">        &lt;writeHost host=&quot;hostM1&quot; url=&quot;jdbc:mysql://127.0.0.1:3306&quot; user=&quot;root&quot;</span><br><span class="line">                   password=&quot;123456&quot;&gt;</span><br><span class="line">                   &lt;readHost host=&quot;hostS1&quot; url=&quot;jdbc:mysql://127.0.0.2:3306&quot; user=&quot;root&quot; </span><br><span class="line">                    password=&quot;123456&quot; /&gt;</span><br><span class="line">        &lt;/writeHost&gt;</span><br><span class="line">    &lt;/dataHost&gt;</span><br><span class="line">&lt;/mycat:schema&gt;</span><br></pre></td></tr></table></figure><h3 id="æ ‡ç­¾è§£é‡Š"><a href="#æ ‡ç­¾è§£é‡Š" class="headerlink" title="æ ‡ç­¾è§£é‡Š"></a>æ ‡ç­¾è§£é‡Š</h3><h4 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h4><ul><li>nameï¼šå¯¹åº”Server.xmlä¸­é…ç½®çš„é€»è¾‘åº“åTESTDB</li><li>checkSQLschemaï¼šå½“è¯¥å€¼è®¾ç½®ä¸ºtrueæ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œè¯­å¥select * from TESTDB.travelrecord;åˆ™MyCatä¼šæŠŠè¯­å¥ä¿®æ”¹ä¸ºselect * from travelrecord;å³æŠŠè¡¨ç¤ºschemaçš„å­—ç¬¦å»æ‰ï¼Œé¿å…å‘é€åˆ°åç«¯æ•°æ®åº“æ‰§è¡Œæ—¶æŠ¥ï¼ˆERROR 1146 (42S02): Table â€˜testdb.travelrecordâ€™ doesnâ€™t existï¼‰ã€‚ä¸è¿‡ï¼Œå³ä½¿è®¾ç½®è¯¥å€¼ä¸º true ï¼Œå¦‚æœè¯­å¥æ‰€å¸¦çš„æ˜¯å¹¶éæ˜¯schemaæŒ‡å®šçš„åå­—ï¼Œä¾‹å¦‚ï¼šselect * from db1.travelrecord; é‚£ä¹ˆMyCatå¹¶ä¸ä¼šåˆ é™¤db1è¿™ä¸ªå­—æ®µï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰è¯¥åº“çš„è¯åˆ™ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥åœ¨æä¾›SQLè¯­å¥çš„æœ€å¥½æ˜¯ä¸å¸¦è¿™ä¸ªå­—æ®µã€‚</li><li>sqlMaxLimitï¼šå½“è¯¥å€¼è®¾ç½®ä¸ºæŸä¸ªæ•°å€¼æ—¶ã€‚æ¯æ¡æ‰§è¡Œçš„SQLè¯­å¥ï¼Œå¦‚æœæ²¡æœ‰åŠ ä¸Šlimitè¯­å¥ï¼ŒMyCatä¹Ÿä¼šè‡ªåŠ¨çš„åŠ ä¸Šæ‰€å¯¹åº”çš„å€¼ã€‚ä¾‹å¦‚è®¾ç½®å€¼ä¸º100ï¼Œæ‰§è¡Œselect * from TESTDB.travelrecord;çš„æ•ˆæœä¸ºå’Œæ‰§è¡Œselect * from TESTDB.travelrecord limit 100;ç›¸åŒè®¾ç½®è¯¥å€¼çš„è¯ï¼ŒMyCaté»˜è®¤ä¼šæŠŠæŸ¥è¯¢åˆ°çš„ä¿¡æ¯å…¨éƒ¨éƒ½å±•ç¤ºå‡ºæ¥ï¼Œé€ æˆè¿‡å¤šçš„è¾“å‡ºã€‚æ‰€ä»¥ï¼Œåœ¨æ­£å¸¸ä½¿ç”¨ä¸­ï¼Œè¿˜æ˜¯å»ºè®®åŠ ä¸Šä¸€ä¸ªå€¼ï¼Œç”¨äºå‡å°‘è¿‡å¤šçš„æ•°æ®è¿”å›ã€‚å½“ç„¶SQLè¯­å¥ä¸­ä¹Ÿæ˜¾å¼çš„æŒ‡å®šlimitçš„å¤§å°ï¼Œä¸å—è¯¥å±æ€§çš„çº¦æŸã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¿è¡Œçš„schemaä¸ºéæ‹†åˆ†åº“çš„ï¼Œé‚£ä¹ˆè¯¥å±æ€§ä¸ä¼šç”Ÿæ•ˆã€‚éœ€è¦æ‰‹åŠ¨æ·»åŠ limitè¯­å¥ã€‚</li><li>randomDataNodeå’ŒdataNodeï¼šåŒæ—¶å­˜åœ¨ï¼ŒæŒ‡å®šé»˜è®¤å­˜å‚¨èŠ‚ç‚¹ï¼Œæ¯”å¦‚å»ºè¡¨é»˜è®¤ä¼šåˆ›å»ºåˆ°è¯¥èŠ‚ç‚¹ä¸‹</li></ul><h4 id="dataNode"><a href="#dataNode" class="headerlink" title="dataNode"></a>dataNode</h4><ul><li>nameï¼šèŠ‚ç‚¹åç§°ï¼Œå¯éšæ„å¡«å†™</li><li>dataHostï¼šå¯¹åº”dataHostæ ‡ç­¾ä¸­nameå±æ€§å€¼</li><li>databaseï¼šçœŸå®MysqlæœåŠ¡ä¸­åˆ›å»ºçš„æ•°æ®åº“åç§°</li></ul><h4 id="dataHost"><a href="#dataHost" class="headerlink" title="dataHost"></a>dataHost</h4><ul><li>nameï¼šä¸»æœºåç§°ï¼Œå¯éšæ„å¡«å†™</li><li>maxConï¼šæŒ‡å®šæ¯ä¸ªè¯»å†™å®ä¾‹è¿æ¥æ± çš„æœ€å¤§è¿æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ ‡ç­¾å†…åµŒå¥—çš„writeHostã€readHostæ ‡ç­¾éƒ½ä¼šä½¿ç”¨è¿™ä¸ªå±æ€§çš„å€¼æ¥å®ä¾‹åŒ–å‡ºè¿æ¥æ± çš„æœ€å¤§è¿æ¥æ•°ã€‚</li><li>minConï¼šæŒ‡å®šæ¯ä¸ªè¯»å†™å®ä¾‹è¿æ¥æ± çš„æœ€å°è¿æ¥ï¼Œåˆå§‹åŒ–è¿æ¥æ± çš„å¤§å°ã€‚</li><li>balanceï¼šè´Ÿè½½å‡è¡¡ç±»å‹ï¼Œç›®å‰çš„å–å€¼æœ‰3ç§ï¼š balance&#x3D;â€0â€, ä¸å¼€å¯è¯»å†™åˆ†ç¦»æœºåˆ¶ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½å‘é€åˆ°å½“å‰å¯ç”¨çš„writeHostä¸Šã€‚ balance&#x3D;â€1â€ï¼Œå…¨éƒ¨çš„readHostä¸stand by writeHostå‚ä¸selectè¯­å¥çš„è´Ÿè½½å‡è¡¡ï¼Œç®€å•çš„è¯´ï¼Œå½“åŒä¸»åŒä»æ¨¡å¼(M1-&gt;S1ï¼ŒM2-&gt;S2ï¼Œå¹¶ä¸”M1ä¸ M2äº’ä¸ºä¸»å¤‡)ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒM2,S1,S2éƒ½å‚ä¸selectè¯­å¥çš„è´Ÿè½½å‡è¡¡ã€‚balance&#x3D;â€2â€ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½éšæœºçš„åœ¨writeHostã€readhostä¸Šåˆ†å‘ã€‚balance&#x3D;â€3â€ï¼Œæ‰€æœ‰è¯»è¯·æ±‚éšæœºçš„åˆ†å‘åˆ°wiriterHostå¯¹åº”çš„readhostæ‰§è¡Œï¼ŒwriterHostä¸è´Ÿæ‹…è¯»å‹åŠ›ï¼Œæ³¨æ„balance&#x3D;3åªåœ¨1.4åŠå…¶ä»¥åç‰ˆæœ¬æœ‰ï¼Œ1.3æ²¡æœ‰ã€‚</li><li>writeTypeï¼šè´Ÿè½½å‡è¡¡ç±»å‹ï¼Œç›®å‰çš„å–å€¼æœ‰3ç§ï¼šwriteType&#x3D;â€0â€, æ‰€æœ‰å†™æ“ä½œå‘é€åˆ°é…ç½®çš„ç¬¬ä¸€ä¸ªwriteHostï¼Œç¬¬ä¸€ä¸ªæŒ‚äº†åˆ‡åˆ°è¿˜ç”Ÿå­˜çš„ç¬¬äºŒä¸ªwriteHostï¼Œé‡æ–°å¯åŠ¨åå·²åˆ‡æ¢åçš„ä¸ºå‡†ï¼Œåˆ‡æ¢è®°å½•åœ¨é…ç½®æ–‡ä»¶ä¸­:dnindex.propertiesï¼ŒwriteType&#x3D;â€1â€ï¼Œæ‰€æœ‰å†™æ“ä½œéƒ½éšæœºçš„å‘é€åˆ°é…ç½®çš„writeHostï¼Œ1.5ä»¥ååºŸå¼ƒä¸æ¨èã€‚switchTypeå±æ€§ 1 è¡¨ç¤ºä¸è‡ªåŠ¨åˆ‡æ¢ã€‚ 1 é»˜è®¤å€¼ï¼Œè‡ªåŠ¨åˆ‡æ¢ã€‚ 2 åŸºäºMySQLä¸»ä»åŒæ­¥çš„çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢ã€‚</li><li>dbTypeï¼šæŒ‡å®šåç«¯è¿æ¥çš„æ•°æ®åº“ç±»å‹ï¼Œç›®å‰æ”¯æŒäºŒè¿›åˆ¶çš„mysqlåè®®ï¼Œè¿˜æœ‰å…¶ä»–ä½¿ç”¨JDBCè¿æ¥çš„æ•°æ®åº“ã€‚ä¾‹å¦‚ï¼šmongodbã€oracleã€sparkç­‰ã€‚</li><li>dbDriverï¼šæŒ‡å®šè¿æ¥åç«¯æ•°æ®åº“ä½¿ç”¨çš„Driverï¼Œç›®å‰å¯é€‰çš„å€¼æœ‰nativeå’ŒJDBCã€‚ä½¿ç”¨nativeçš„è¯ï¼Œå› ä¸ºè¿™ä¸ªå€¼æ‰§è¡Œçš„æ˜¯äºŒè¿›åˆ¶çš„mysqlåè®®ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨mysqlå’Œmaridbã€‚å…¶ä»–ç±»å‹çš„æ•°æ®åº“åˆ™éœ€è¦ä½¿ç”¨JDBCé©±åŠ¨æ¥æ”¯æŒã€‚ä»1.6ç‰ˆæœ¬å¼€å§‹æ”¯æŒpostgresqlçš„nativeåŸå§‹åè®®ã€‚ å¦‚æœä½¿ç”¨JDBCçš„è¯éœ€è¦å°†ç¬¦åˆJDBC 4æ ‡å‡†çš„é©±åŠ¨JARåŒ…æ”¾åˆ°MYCAT\libç›®å½•ä¸‹ï¼Œå¹¶æ£€æŸ¥é©±åŠ¨JARåŒ…ä¸­åŒ…æ‹¬å¦‚ä¸‹ç›®å½•ç»“æ„çš„æ–‡ä»¶ï¼šMETA-INF\services\java.sql.Driverã€‚åœ¨è¿™ä¸ªæ–‡ä»¶å†…å†™ä¸Šå…·ä½“çš„Driverç±»åï¼Œä¾‹å¦‚ï¼šcom.mysql.jdbc.Driverã€‚</li><li>switchTypeï¼š -1 è¡¨ç¤ºä¸è‡ªåŠ¨åˆ‡æ¢ 1 é»˜è®¤å€¼ï¼Œè‡ªåŠ¨åˆ‡æ¢ 2 åŸºäºMySQLä¸»ä»åŒæ­¥çš„çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢ å¿ƒè·³è¯­å¥ä¸º show slave status 3 åŸºäºMySQL galary clusterçš„åˆ‡æ¢æœºåˆ¶ï¼ˆé€‚åˆé›†ç¾¤ï¼‰ï¼ˆ1.4.1ï¼‰ å¿ƒè·³è¯­å¥ä¸º show status like â€˜wsrep%â€™</li></ul><h4 id="heartbeat"><a href="#heartbeat" class="headerlink" title="heartbeat"></a>heartbeat</h4><p>è¿™ä¸ªæ ‡ç­¾å†…æŒ‡æ˜ç”¨äºå’Œåç«¯æ•°æ®åº“è¿›è¡Œå¿ƒè·³æ£€æŸ¥çš„è¯­å¥ã€‚ä¾‹å¦‚,MYSQLå¯ä»¥ä½¿ç”¨select user()ï¼ŒOracleå¯ä»¥ä½¿ç”¨select 1 from dualç­‰ã€‚ è¿™ä¸ªæ ‡ç­¾è¿˜æœ‰ä¸€ä¸ªconnectionInitSqlå±æ€§ï¼Œä¸»è¦æ˜¯å½“ä½¿ç”¨Oraclaæ•°æ®åº“æ—¶ï¼Œéœ€è¦æ‰§è¡Œçš„åˆå§‹åŒ–SQLè¯­å¥å°±è¿™ä¸ªæ”¾åˆ°è¿™é‡Œé¢æ¥ã€‚ä¾‹å¦‚ï¼šalter session set nls_date_format&#x3D;â€™yyyy-mm-dd hh24ï¼šmi:ssâ€™(æŠŠè¿™é‡Œçš„ä¸­æ–‡å†’å·æ”¹ä¸ºè‹±æ–‡å†’å·)ï¼Œ1.4ä¸»ä»åˆ‡æ¢çš„è¯­å¥å¿…é¡»æ˜¯ï¼šshow slave status</p><h4 id="writeHostï¼ˆå†™ä¸»æœºï¼‰ã€readHostï¼ˆè¯»ä¸»æœºï¼‰"><a href="#writeHostï¼ˆå†™ä¸»æœºï¼‰ã€readHostï¼ˆè¯»ä¸»æœºï¼‰" class="headerlink" title="writeHostï¼ˆå†™ä¸»æœºï¼‰ã€readHostï¼ˆè¯»ä¸»æœºï¼‰"></a>writeHostï¼ˆå†™ä¸»æœºï¼‰ã€readHostï¼ˆè¯»ä¸»æœºï¼‰</h4><p>è¿™ä¸¤ä¸ªæ ‡ç­¾éƒ½æŒ‡å®šåç«¯æ•°æ®åº“çš„ç›¸å…³é…ç½®ç»™mycatï¼Œç”¨äºå®ä¾‹åŒ–åç«¯è¿æ¥æ± ã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ï¼ŒwriteHostæŒ‡å®šå†™å®ä¾‹ã€readHostæŒ‡å®šè¯»å®ä¾‹ï¼Œç»„ç€è¿™äº›è¯»å†™å®ä¾‹æ¥æ»¡è¶³ç³»ç»Ÿçš„è¦æ±‚ã€‚ åœ¨ä¸€ä¸ªdataHostå†…å¯ä»¥å®šä¹‰å¤šä¸ªwriteHostå’ŒreadHostã€‚ä½†æ˜¯ï¼Œå¦‚æœwriteHostæŒ‡å®šçš„åç«¯æ•°æ®åº“å®•æœºï¼Œé‚£ä¹ˆè¿™ä¸ªwriteHostç»‘å®šçš„æ‰€æœ‰readHostéƒ½å°†ä¸å¯ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºè¿™ä¸ªwriteHostå®•æœºç³»ç»Ÿä¼šè‡ªåŠ¨çš„æ£€æµ‹åˆ°ï¼Œå¹¶åˆ‡æ¢åˆ°å¤‡ç”¨çš„writeHostä¸Šå»ã€‚</p><h3 id="æœ€åé‡å¯MycatæœåŠ¡å³å¯"><a href="#æœ€åé‡å¯MycatæœåŠ¡å³å¯" class="headerlink" title="æœ€åé‡å¯MycatæœåŠ¡å³å¯"></a>æœ€åé‡å¯MycatæœåŠ¡å³å¯</h3><p>mycatå¯åŠ¨ç›¸å…³å‘½ä»¤ï¼Œè¦å…ˆcd åˆ°mycat\bin\è·¯å¾„ä¸‹ linux ç¯å¢ƒä¸ºï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./mycat start å¯åŠ¨</span><br><span class="line">./mycat stop åœæ­¢</span><br><span class="line">./mycat console å‰å°è¿è¡Œ</span><br><span class="line">./mycat restart é‡å¯æœåŠ¡</span><br><span class="line">./mycat pause æš‚åœ</span><br><span class="line">./mycat status æŸ¥çœ‹å¯åŠ¨çŠ¶æ€</span><br></pre></td></tr></table></figure><p>window å¯åŠ¨ä¸ºï¼š ç›´æ¥åŒå‡»è¿è¡Œ startup_nowrap.bat ï¼Œå¦‚æœé—ªé€€ç”¨ cmd æ¨¡å¼è¿è¡ŒæŸ¥çœ‹æ—¥å¿—</p><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>åœ¨å†™ä¸»æœºæ’å…¥ï¼šinsert into mytbl values (1,@@hostname); è¿™é‡Œåªæ˜¯ä¸¾ä¾‹ï¼Œæµ‹è¯•çš„æ—¶å€™å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªvarcharç±»å‹çš„æ–°å¢æ•°æ®æ—¶æ’å…¥ï¼š@@hostname @@hostnameï¼šä¸åŒä¸»æœºä¸Šçš„åå­—ä¼šæ˜¾ç¤ºä¸ä¸€æ ·ï¼Œå†æµ‹è¯•æŸ¥è¯¢è¿™ä¸ªæ’å…¥çš„å­—æ®µå¯¹æ¯”æ˜¯å“ªå°æœºå™¨çš„å³å¯ï¼Œæ³¨æ„æŸ¥è¯¢æ˜¯è¦é€šè¿‡ç™»é™†MycatæœåŠ¡æŸ¥è¯¢</p><h3 id="å…³äºæ“ä½œ"><a href="#å…³äºæ“ä½œ" class="headerlink" title="å…³äºæ“ä½œ"></a>å…³äºæ“ä½œ</h3><p>å¼€å‘è€…åªéœ€è¦é€šè¿‡æ“ä½œMycatæœåŠ¡å»æ“ä½œæ•°æ®ï¼Œä¸éœ€è¦å…³å¿ƒæ•°æ®åœ¨å“ªä¸ªæœåŠ¡å™¨å“ªä¸ªåº“ä¸­ï¼Œæ¯”å¦‚ä½ çš„åç«¯ä½ æ˜¯Javaï¼Œåªéœ€è¦å°†é…ç½®æ•°æ®åº“çš„åœ°æ–¹æ”¹ä¸ºmycatçš„æœåŠ¡å³å¯ï¼ŒCRUDå’Œæ­£å¸¸æ“ä½œMysqlä¸€æ ·å³å¯ æ¯”å¦‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">jdbc:mysql://127.0.0.1:8066/TESTDB...åé¢çœç•¥</span><br></pre></td></tr></table></figure><ul><li>8066:MycatæœåŠ¡é»˜è®¤ç«¯å£</li><li>TESTDB:Mycaté…ç½®æ–‡ä»¶server.xmlä¸­é…ç½®çš„é€»è¾‘åº“å</li></ul><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœä½¿ç”¨Mycat1.xç‰ˆæœ¬è¿›è¡Œåˆ†åº“æ“ä½œï¼Œéœ€è¦æ³¨æ„è·¨åº“ç›®å‰ä¸æ”¯æŒJOINæ“ä½œï¼Œåˆ†è¡¨ä¸åˆ†åº“Mycat1.6.7.6äº²æµ‹é»˜è®¤æ”¯æŒJOINæ“ä½œï¼Œæ— é¡»é…ç½®ERè¡¨å…³ç³»</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mycat1.6.7.6å¯¹Mysql8æ”¯æŒä½¿ç”¨é…ç½®</title>
      <link href="/2022/01/17/mycat1-6-7-6%E5%AF%B9mysql8%E6%94%AF%E6%8C%81%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/"/>
      <url>/2022/01/17/mycat1-6-7-6%E5%AF%B9mysql8%E6%94%AF%E6%8C%81%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mysqlç‰ˆæœ¬ï¼šMysql8</li><li>Mycatç‰ˆæœ¬ï¼šMycat1.6.7.6</li></ul><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>å‰æéœ€æ±‚æ˜¯å·²ç»å®Œæˆå®‰è£…äº†MysqlæœåŠ¡ï¼ŒMysqlçš„å®‰è£…å¯å‚è€ƒï¼š<a href="https://www.itze.cn/mysql/510.html" title="Dockerå®‰è£…Mysql">Dockerå®‰è£…Mysql</a> è¿™é‡Œåªä»‹ç»Mycat1.6.7.6å¯¹Mysql8æ”¯æŒä½¿ç”¨é…ç½®,å…¶ä»–åŸºäºmycatå®Œæˆè¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ç­‰é…ç½®è¯¦è§æœ¬ç«™å…¶ä»–æ–‡ç« </p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>Mycatå®‰è£…å‚è€ƒï¼š<a href="https://www.itze.cn/mycat/890.html" title="Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨">Mycat1.6.7.6å®‰è£…ä¸å¯åŠ¨</a></p><h2 id="æ”¯æŒMysql8é…ç½®ä¿®æ”¹"><a href="#æ”¯æŒMysql8é…ç½®ä¿®æ”¹" class="headerlink" title="æ”¯æŒMysql8é…ç½®ä¿®æ”¹"></a>æ”¯æŒMysql8é…ç½®ä¿®æ”¹</h2><ol><li>æ›¿æ¢åŸæœ‰Mysqlè¿æ¥é©±åŠ¨JaråŒ… å»<a href="https://mvnrepository.com/artifact/mysql/mysql-connector-java" title="Mavenä»“åº“">Mavenä»“åº“</a>ä¸‹è½½ä½ å¯¹åº”çš„Mysql8çš„é©±åŠ¨JaråŒ…ï¼Œæ³¨æ„æ˜¯JaråŒ…ä¸æ˜¯pomæ–‡ä»¶é…ç½® <img src="https://www.itze.cn/wp-content/uploads/2022/01/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220117104733.png"> ä¸‹è½½å¥½ä¹‹åå°†JaråŒ…æ”¾ç½®è§£å‹å‡ºæ¥mycat&#x2F;lib&#x2F;è·¯å¾„ä¸‹ï¼Œåˆ é™¤mycatå®‰è£…åŒ…åŸæœ‰è‡ªå¸¦çš„mysql-connector-java-5.x.x.jar</li><li>ä¿®æ”¹æ¨¡æ‹Ÿç‰ˆæœ¬å·,ä¿®æ”¹server.xmlé…ç½®æ–‡ä»¶ æ³¨æ„è¯¥è¡ŒåŸæœ¬æ˜¯è¢«æ³¨é‡Šæ‰çš„ï¼Œéœ€è¦æ‰‹åŠ¨å»é™¤æ³¨é‡Šï¼Œå¹¶ä¸”ä¿®æ”¹ç‰ˆæœ¬å· <img src="https://www.itze.cn/wp-content/uploads/2022/01/%E7%89%88%E6%9C%AC%E5%8F%B7.png"> <strong>é‡å¯MycatæœåŠ¡å³å¯</strong></li></ol><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>å¦‚æœmycaté…ç½®æ–‡ä»¶schema.xmlä¸­é…ç½®ä¸»æœºçš„åœ°æ–¹dbDriver&#x3D;â€nativeâ€ï¼Œä½¿ç”¨mysql8éœ€è¦å°†æ›´æ”¹mysqlçš„åŠ å¯†æ–¹å¼ï¼ŒdbDriver&#x3D;â€jdbcâ€åˆ™ä¸éœ€è¦ã€‚ æ›´æ”¹åŠ å¯†æ–¹å¼</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span> PASSWORD EXPIRE NEVER;</span><br></pre></td></tr></table></figure><p>æ›´æ–°å¯†ç </p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;test&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span>;</span><br></pre></td></tr></table></figure><p>åˆ·æ–°æƒé™</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
          <category> Mycat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> Mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql8å®ç°ä¸»ä»å¤åˆ¶</title>
      <link href="/2022/01/14/mysql8%E5%AE%9E%E7%8E%B0%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"/>
      <url>/2022/01/14/mysql8%E5%AE%9E%E7%8E%B0%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Mysqlç‰ˆæœ¬ï¼š8.0</li><li>MysqlServer_1ï¼šM1ï¼ˆä¸»ï¼‰</li><li>MysqlServer_2ï¼šM2ï¼ˆä»ï¼‰</li></ul><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><ol><li>ä¿®æ”¹M1é…ç½®æ–‡ä»¶ï¼švim &#x2F;etc&#x2F;my.cnf ï¼ˆmy.cnfè·¯å¾„ä½ç½®æ ¹æ®è‡ªå·±å®é™…è·¯å¾„æ›´æ”¹ï¼‰</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä¸»æœåŠ¡å™¨å”¯ä¸€ID</span></span><br><span class="line">server-id=1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯ç”¨äºŒè¿›åˆ¶æ—¥å¿—</span></span><br><span class="line">log-bin=mysql-bin</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">è®¾ç½®ä¸è¦å¤åˆ¶çš„æ•°æ®åº“(å¯è®¾ç½®å¤šä¸ª)</span></span><br><span class="line">binlog-ignore-db=mysql</span><br><span class="line">binlog-ignore-db=information_schema</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è®¾ç½®éœ€è¦å¤åˆ¶çš„æ•°æ®åº“</span></span><br><span class="line">binlog-do-db=éœ€è¦å¤åˆ¶çš„ä¸»æ•°æ®åº“åå­—</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è®¾ç½®logbinæ ¼å¼</span></span><br><span class="line">binlog_format=STATEMENT</span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹M2é…ç½®æ–‡ä»¶ï¼švim &#x2F;etc&#x2F;my.cnf ï¼ˆmy.cnfè·¯å¾„ä½ç½®æ ¹æ®è‡ªå·±å®é™…è·¯å¾„æ›´æ”¹ï¼‰</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä»æœåŠ¡å™¨å”¯ä¸€ID</span></span><br><span class="line">server-id=2</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å¯ç”¨ä¸­ç»§æ—¥å¿—</span></span><br><span class="line">relay-log=mysql-relay</span><br></pre></td></tr></table></figure><ol start="3"><li><p>ä¾æ¬¡é‡å¯ä¸»æœºM1ã€ä»æœºM2æœåŠ¡ï¼Œæ³¨æ„æ˜¯æŒ‡é‡å¯MysqlæœåŠ¡ä¸æ˜¯æœºå™¨é‡å¯</p></li><li><p>åœ¨ä¸»æœºä¸Šå»ºç«‹å¸æˆ·slave</p></li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">create user &#x27;slave&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure><ol start="5"><li>æˆæƒï¼Œè¿™é‡ŒåªæˆäºˆSLAVEæƒé™ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æˆæ‰€æœ‰æƒé™</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grant REPLICATION SLAVE on *.* to &#x27;slave&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><ol start="6"><li>åœ¨M1ä¸»æœºMySQLé‡Œæ‰§è¡Œå‘½ä»¤ï¼ŒæŸ¥è¯¢masterçš„çŠ¶æ€</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">show master status;</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/01/status.png"> è®°å½•ä¸‹Fileå’ŒPositionçš„å€¼ <strong>æ³¨æ„ï¼šæ‰§è¡Œå®Œæ­¤æ­¥éª¤åä¸è¦å†æ“ä½œä¸»æœåŠ¡å™¨MySQLï¼Œé˜²æ­¢ä¸»æœåŠ¡å™¨çŠ¶æ€å€¼å˜åŒ–</strong></p><ol start="7"><li>åœ¨M2ä»æœºä¸Šé…ç½®éœ€è¦å¤åˆ¶çš„ä¸»æœº,ä¿®æ”¹å®Œæ¯•ä¹‹åå†M2æœåŠ¡ä¸Šæ‰§è¡Œè¯¥SQL</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CHANGE MASTER TO MASTER_HOST=&#x27;ä¸»æœºçš„IPåœ°å€&#x27;,</span><br><span class="line">MASTER_USER=&#x27;slave&#x27;,</span><br><span class="line">MASTER_PASSWORD=&#x27;123456&#x27;,</span><br><span class="line">MASTER_LOG_FILE=&#x27;mysql-bin.å…·ä½“æ•°å­—&#x27;,MASTER_LOG_POS=å…·ä½“å€¼;</span><br></pre></td></tr></table></figure><ol start="8"><li>å¯åŠ¨ä»æœåŠ¡å™¨å¤åˆ¶åŠŸèƒ½</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">start slave;</span><br></pre></td></tr></table></figure><ol start="9"><li>æŸ¥çœ‹ä»æœåŠ¡å™¨çŠ¶æ€</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">show slave status\G;</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/01/slave.png"> <strong>ä¸‹é¢ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯Yesï¼Œåˆ™è¯´æ˜ä¸»ä»é…ç½®æˆåŠŸï¼</strong> - Slave_IO_Running: Yes - Slave_SQL_Running: Yes <strong>æ¥ä¸‹æ¥å°±å¯ä»¥å»M1ä¸»æœºæ–°å»ºåº“ã€å»ºè¡¨ç­‰æµ‹è¯•äº†ï¼Œè§‚å¯ŸM2ä»æœºæœåŠ¡æ˜¯å¦ä¼šè·Ÿç€æ”¹å˜</strong> å¦‚ä½•åœæ­¢ä»æœåŠ¡å¤åˆ¶åŠŸèƒ½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">stop slave;</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦é‡æ–°é…ç½®ï¼Œéœ€è¦å…ˆåœæ­¢ï¼Œç„¶åé‡ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">stop slave;</span><br></pre></td></tr></table></figure><p>é‡ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reset master;</span><br></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>å¦‚æœä½¿ç”¨Mysqlçš„ä¸»ä»å¤åˆ¶ï¼Œéœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œæ¯”å¦‚å¦‚ä½•æŒç»­ä¿è¯æ•°æ®ä¸€ç›´é—®é¢˜ï¼Œå°±æ¯”å¦‚ä¸€æ—¦ä¸»ä»å…³ç³»æ–­å¼€ä¹‹åï¼Œå†æ¬¡å»ºç«‹ä¸»ä»ï¼Œæ¯”å¦‚å¯ä»¥å†™è„šæœ¬å»ç›‘æ§MysqlæœåŠ¡ç­‰ç­‰</p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…HAproxy</title>
      <link href="/2022/01/14/centos%E5%AE%89%E8%A3%85haproxy/"/>
      <url>/2022/01/14/centos%E5%AE%89%E8%A3%85haproxy/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7</p><h2 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h2><p>é€šè¿‡yumå®‰è£…å·¥å…·ç›´æ¥å®‰è£…ï¼Œç®€å•å¿«æ·ï¼Œé€šè¿‡ç³»ç»ŸæœåŠ¡å¯åŠ¨ï¼Œæ·»åŠ å¼€æœºå¯åŠ¨ç­‰éƒ½å¾ˆæ–¹ä¾¿ å®‰è£…å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install haproxy</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆä¹‹åæŸ¥çœ‹ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">haproxy -version</span><br></pre></td></tr></table></figure><p>å¯åŠ¨haproxyæœåŠ¡ï¼ŒæŸ¥çœ‹å¯åŠ¨çŠ¶æ€å°±æŠŠstartæ¢æˆstatusï¼Œåœæ­¢å°±æ˜¯stop</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start haproxy</span><br></pre></td></tr></table></figure><p>é»˜è®¤haproxy.cnfé…ç½®æ–‡ä»¶æ˜¯åœ¨**&#x2F;etc&#x2F;haproxy&#x2F;haproxy.cnf**</p><h2 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h2><p>é€šè¿‡ä¸‹è½½å®‰è£…åŒ…ç¼–è¯‘å®‰è£…ï¼Œç›¸å¯¹æ–¹å¼ä¸€è¾ƒä¸ºéº»çƒ¦ é¦–å…ˆä¸‹è½½å®‰è£…åŒ…ï¼Œè¿™é‡Œæä¾›ä¸€ä»½ï¼Œç‚¹å‡»ä¸‹è½½ï¼š<a href="https://itze.cn/uploads/haproxy-1.5.18.tar.gz" title="haproxy-1.5.18.tar.gz">haproxy-1.5.18.tar.gz</a> æˆ–è€…ä½¿ç”¨wgetå‘½ä»¤ç›´æ¥ä¸‹è½½åˆ°æœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://itze.cn/uploads/haproxy-1.5.18.tar.gz</span><br></pre></td></tr></table></figure><p>è§£å‹åˆ°&#x2F;usr&#x2F;local&#x2F;src</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf haproxy-1.5.18.tar.gz -C /usr/local/src</span><br></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹åçš„ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/src/haproxy-1.5.18</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">arch</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2022/01/uname-r.png"> ç¼–è¯‘</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make TARGET=linux310 PREFIX=/usr/local/haproxy ARCH=x86_64</span><br></pre></td></tr></table></figure><ul><li>ARGET&#x3D;linux310ï¼Œå†…æ ¸ç‰ˆæœ¬ï¼Œä½¿ç”¨uname -ræŸ¥çœ‹å†…æ ¸ï¼Œå¦‚ï¼š3.10.0-514.el7ï¼Œæ­¤æ—¶è¯¥å‚æ•°å°±ä¸ºlinux310</li><li>ARCH&#x3D;x86_64ï¼Œç³»ç»Ÿä½æ•°</li><li>PREFIX&#x3D;&#x2F;usr&#x2F;local&#x2F;haprpxy #&#x2F;usr&#x2F;local&#x2F;haprpxyï¼Œä¸ºhaprpxyå®‰è£…è·¯å¾„</li></ul><p>ç¼–è¯‘å®Œæˆåï¼Œè¿›è¡Œå®‰è£…</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make install PREFIX=/usr/local/haproxy</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œåˆ›å»ºç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /usr/data/haproxy/</span><br></pre></td></tr></table></figure><p>åˆ›å»ºHAProxyé…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/local/haproxy/haproxy.conf</span><br></pre></td></tr></table></figure><p>haproxy.cnfå†…å®¹ï¼Œlisten proxy_statusä¸­æ›¿æ¢æˆçœŸå®éœ€æ±‚å†…å®¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">global</span><br><span class="line">         log 127.0.0.1 local0</span><br><span class="line">         #log 127.0.0.1 local1 notice</span><br><span class="line">         #log loghost local0 info</span><br><span class="line">         maxconn 4096</span><br><span class="line">         chroot /usr/local/haproxy</span><br><span class="line">         pidfile /usr/data/haproxy/haproxy.pid</span><br><span class="line">         uid 99</span><br><span class="line">         gid 99</span><br><span class="line">         daemon</span><br><span class="line">         #debug</span><br><span class="line">         #quiet</span><br><span class="line">defaults</span><br><span class="line">         log global</span><br><span class="line">         mode tcp</span><br><span class="line">         option abortonclose</span><br><span class="line">         option redispatch</span><br><span class="line">         retries 3</span><br><span class="line">         maxconn 2000</span><br><span class="line">         timeout connect 5000</span><br><span class="line">         timeout client 50000</span><br><span class="line">         timeout server 50000</span><br><span class="line">listen proxy_status </span><br><span class="line">     bind :8081</span><br><span class="line">         mode tcp</span><br><span class="line">         balance roundrobin</span><br><span class="line">         server serverName_1 127.x.x.x:8080 check inter 10s</span><br><span class="line">         server serverName_2 127.x.x.x:8080 check inter 10s</span><br><span class="line">frontend admin_stats </span><br><span class="line">     bind :8082</span><br><span class="line">         mode http</span><br><span class="line">         stats enable</span><br><span class="line">         option httplog</span><br><span class="line">         maxconn 10</span><br><span class="line">         stats refresh 30s</span><br><span class="line">         stats uri /admin</span><br><span class="line">         stats auth admin:123456</span><br><span class="line">         stats hide-version</span><br><span class="line">         stats admin if TRUE</span><br></pre></td></tr></table></figure><p>å¯åŠ¨HAProxy</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/haproxy/sbin/haproxy -f /usr/local/haproxy/haproxy.conf</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹HAProxyè¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps -efgrep haproxy</span><br></pre></td></tr></table></figure><p>æ‰“å¼€æµè§ˆå™¨è®¿é—®,<a href="http://127.0.0.1:8082/admin">http://127.0.0.1:8082/admin</a> è´¦æˆ·ï¼šadmin;å¯†ç ï¼š123456ï¼Œå°†ipæ¢æˆå®é™…å®‰è£…haproxyæœåŠ¡å™¨IP</p><h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p>å¦‚æœå®‰è£…ä¹‹åè®¿é—®ä¸äº†ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨ç«¯å£æ˜¯å¦å¼€æ”¾ï¼Œæœ¬æ–‡é…ç½®ç«¯å£webç«¯å£æ˜¯8082ï¼ŒæœåŠ¡ç«¯å£æ˜¯8081ï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚æ›´æ”¹ï¼Œå…³äºå¼€æ”¾ç«¯å£å‚è€ƒï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a> å¦‚æœæœåŠ¡å™¨é˜²ç«å¢™å·²ç»æ·»åŠ æ”¾è¡Œï¼Œä»ç„¶æ— æ³•è®¿é—®ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨å‚å•†æ§åˆ¶é¢æ¿æ˜¯å¦æ”¾è¡Œï¼Œæ¯”å¦‚é˜¿é‡Œäº‘çš„æœåŠ¡å™¨å°±å»é˜¿é‡Œäº‘æ§åˆ¶é¢æ¿ä¸­å»æŸ¥çœ‹</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> HAproxy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> HAproxy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlåƒä¸‡çº§æ•°æ®é‡æ‰¹é‡å¿«é€Ÿè¿ç§»</title>
      <link href="/2022/01/13/mysql%E5%8D%83%E4%B8%87%E7%BA%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E6%89%B9%E9%87%8F%E5%BF%AB%E9%80%9F%E8%BF%81%E7%A7%BB/"/>
      <url>/2022/01/13/mysql%E5%8D%83%E4%B8%87%E7%BA%A7%E6%95%B0%E6%8D%AE%E9%87%8F%E6%89%B9%E9%87%8F%E5%BF%AB%E9%80%9F%E8%BF%81%E7%A7%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>Mysqlç‰ˆæœ¬ï¼š8.0</p><h2 id="è¿ç§»è¯´æ˜"><a href="#è¿ç§»è¯´æ˜" class="headerlink" title="è¿ç§»è¯´æ˜"></a>è¿ç§»è¯´æ˜</h2><p>Mysqlæ•°æ®çš„è¿ç§»ï¼Œæ¨èä¸¤ç§æ–¹å¼ 1. mysqldump mysqldumpæ¯”è¾ƒé€‚åˆå‡ åä¸‡ä¸Šç™¾ä¸‡çš„è¾ƒå°æ•°æ®çš„è¿ç§»ä½¿ç”¨ 2. mysql load data load data infile è¯­å¥å¯ä»¥ä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ä»¥å¾ˆé«˜çš„é€Ÿåº¦è¯»å…¥ä¸€ä¸ªè¡¨ä¸­ï¼Œæ€§èƒ½å¤§æ¦‚æ˜¯ insert è¯­å¥çš„å‡ åå€ï¼Œæ¯”è¾ƒé€‚åˆä¸Šåƒä¸‡çº§åŠæ›´é«˜çš„æµ·é‡æ•°æ®è¿ç§»ä½¿ç”¨</p><h2 id="1-mysqldump"><a href="#1-mysqldump" class="headerlink" title="1.mysqldump"></a>1.mysqldump</h2><h3 id="1-1å¯¼å‡º"><a href="#1-1å¯¼å‡º" class="headerlink" title="1.1å¯¼å‡º"></a>1.1å¯¼å‡º</h3><p><strong>ä½¿ç”¨ç¯å¢ƒï¼šåªè¦æ˜¯æœ‰mysqlçš„ç¯å¢ƒå°±å¯ä»¥ï¼Œä¸é™åˆ¶Linuxæˆ–è€…æ˜¯Windowsç³»ç»Ÿï¼Œä¸åŒç³»ç»Ÿæœ€åé¢çš„å¯¼å‡ºä½ç½®ä¸ä¸€æ ·è€Œå·²</strong> å¯¼å‡ºæŸä¸ªåº“ä¸­çš„è¡¨æ•°æ®å†…å®¹ï¼Œå¦‚æœæ˜¯å¯¼å‡ºæ•´ä¸ªåº“ï¼ŒæŠŠâ€“tables testtableå»æ‰å³å¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uroot <span class="operator">-</span>p123456 <span class="operator">-</span>h127<span class="number">.0</span><span class="number">.0</span><span class="number">.1</span> <span class="operator">-</span>P3306 <span class="comment">--default-character-set=utf8 -c -t --skip-add-locks --databases testbase --tables testtable&gt; \root\move.sql</span></span><br></pre></td></tr></table></figure><p>å¯¹åº”</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysqldump <span class="operator">-</span>uç”¨æˆ·å <span class="operator">-</span>på¯†ç  <span class="operator">-</span>hæ•°æ®åº“IPåœ°å€ <span class="operator">-</span>Pç«¯å£ <span class="comment">--default-character-set=utf8 -c -t --skip-add-locks --databases æ•°æ®åº“åç§° --tables è¦å¯¼å‡ºçš„è¡¨åç§°&gt; å¯¼å‡ºçš„ä½ç½®</span></span><br></pre></td></tr></table></figure><p>éƒ¨åˆ†è§£é‡Š - -cï¼šä½¿ç”¨å®Œæ•´çš„insertè¯­å¥(åŒ…å«åˆ—åç§°)ã€‚è¿™ä¹ˆåšèƒ½æé«˜æ’å…¥æ•ˆç‡ï¼Œä½†æ˜¯å¯èƒ½ä¼šå—åˆ°max_allowed_packetå‚æ•°çš„å½±å“è€Œå¯¼è‡´æ’å…¥å¤±è´¥ã€‚ - -tï¼šåªå¯¼å‡ºæ•°æ®ï¼Œè€Œä¸æ·»åŠ CREATE TABLE è¯­å¥ã€‚ä½¿ç”¨è¯¥å‚æ•°ï¼Œå¯¼å…¥ä¹‹å‰éœ€è¦æå‰å»ºå¥½ç›¸åŒè¡¨ç»“æ„ï¼Œå¦‚æœä¸åŠ è¯¥å‚æ•°åˆ™å¯¼å…¥æ—¶ä¸éœ€è¦å†å»ºè¡¨ã€‚ - â€“skip-add-locksï¼šâ€”å–æ¶ˆåœ¨æ¯ä¸ªè¡¨å¯¼å‡ºä¹‹å‰å¢åŠ LOCK TABLESï¼ˆé»˜è®¤å­˜åœ¨é”ï¼‰</p><h3 id="1-2å¯¼å…¥"><a href="#1-2å¯¼å…¥" class="headerlink" title="1.2å¯¼å…¥"></a>1.2å¯¼å…¥</h3><p><strong>ä½¿ç”¨ç¯å¢ƒï¼šåªè¦æ˜¯æœ‰mysqlçš„ç¯å¢ƒå°±å¯ä»¥ï¼Œä¸é™åˆ¶Linuxæˆ–è€…æ˜¯Windowsç³»ç»Ÿï¼Œä¸åŒç³»ç»Ÿæœ€åé¢çš„å¯¼å‡ºä½ç½®ä¸ä¸€æ ·è€Œå·²</strong> ä½¿ç”¨å‘½ä»¤ç™»é™†åˆ°éœ€è¦è¢«å¯¼å…¥æ•°æ®çš„mysqlæœåŠ¡ä¸Š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p123456 <span class="operator">-</span>h127<span class="number">.0</span>.xxx.xxx <span class="operator">-</span>P3306</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢éœ€è¦å¯¼å…¥çš„æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use databasename(æ•°æ®åº“åç§°);</span><br></pre></td></tr></table></figure><p>å¯¼å…¥æ•°æ®,source åé¢æ¢æˆä½ çš„å¯¼å‡ºçš„sqlæ–‡ä»¶è·¯å¾„ï¼Œç„¶åå›è½¦æ‰§è¡Œå‘½ä»¤ï¼Œé™é™åœ°ç­‰å¾…å°±å¥½äº†</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">source <span class="operator">/</span>root<span class="operator">/</span>move.sql;</span><br></pre></td></tr></table></figure><h2 id="2-load-data"><a href="#2-load-data" class="headerlink" title="2.load data"></a>2.load data</h2><h3 id="load-dataä½¿ç”¨å‰æ"><a href="#load-dataä½¿ç”¨å‰æ" class="headerlink" title="load dataä½¿ç”¨å‰æ"></a>load dataä½¿ç”¨å‰æ</h3><p>æŸ¥çœ‹secure_file_privè¯¥å˜é‡çš„è®¾ç½®</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;%secure%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+-------+</span></span><br><span class="line"> Variable_name             <span class="keyword">Value</span> </span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+-------+</span></span><br><span class="line"> require_secure_transport  OFF   </span><br><span class="line"> secure_file_priv                </span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------+-------+</span></span><br></pre></td></tr></table></figure><p>secure_file_privçš„Valueä¸èƒ½æ˜¯nullï¼Œå¦‚æœæ˜¯nullæ˜¯ä¸èƒ½å¯¼å…¥æ•°æ®çš„,å¯ä»¥åˆ†ä»¥ä¸‹ä¸¤ç§æƒ…å†µ 1. Valueå€¼æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œæ¯”å¦‚ï¼š&#x2F;root&#x2F;data&#x2F; åœ¨ä¸æ”¹å˜è¯¥å€¼çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å°†å¯¼å‡ºçš„æ•°æ®å¤åˆ¶åˆ°è¯¥è·¯å¾„ä¸‹ 2. Valueå€¼ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œå°±åƒä½œè€…è¿™æ ·ï¼Œè¿™æ ·å¯¼å‡ºçš„æ•°æ®å¯ä»¥åœ¨Mysqlæœºå™¨çš„ä»»æ„ä½ç½®</p><h3 id="è§£å†³secure-file-privå€¼é—®é¢˜"><a href="#è§£å†³secure-file-privå€¼é—®é¢˜" class="headerlink" title="è§£å†³secure_file_privå€¼é—®é¢˜"></a>è§£å†³secure_file_privå€¼é—®é¢˜</h3><p>å¦‚æœä½ çš„mysqlæœåŠ¡æ˜¯æŒ‰ç…§ä¼ ç»Ÿçš„æ–¹å¼å®‰è£… ç¼–è¾‘é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/my.cnfï¼ˆæ¢æˆä½ çš„my.cnfè·¯å¾„ï¼‰</span><br></pre></td></tr></table></figure><p>åœ¨[mysqld]ä¸‹æ–°å¢ä¸€è¡Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">secure_file_priv=&#x27;&#x27;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯dockerå®¹å™¨è¿è¡Œçš„Mysqlï¼Œ 1.å¦‚æœåœ¨åˆ›å»ºå®¹å™¨æ—¶ï¼Œæ˜ å°„çš„æœ‰å®é™…ç‰©ç†ä¸»æœºä¸­my.cnfé…ç½®æ–‡ä»¶ï¼ŒåŒä¸Šæ–¹æ³•å³å¯ï¼Œç„¶åé‡å¯mysqlå®¹å™¨ 2.å¦‚æœåˆ›å»ºå®¹å™¨æ—¶å¹¶æ²¡æœ‰æ˜ å°„my.cnfé…ç½®æ–‡ä»¶,å‚è€ƒï¼š<a href="https://www.itze.cn/mysql/819.html" title="Dockerç¯å¢ƒä¸‹Mysql">Dockerç¯å¢ƒä¸‹Mysql</a></p><h2 id="2-1å¯¼å‡º"><a href="#2-1å¯¼å‡º" class="headerlink" title="2.1å¯¼å‡º"></a>2.1å¯¼å‡º</h2><p>éœ€è¦å…ˆç™»é™†åˆ°mysqlæœåŠ¡ï¼Œload dataå¯¼å‡ºæ‰§è¡Œä¸€æ¡sql</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">table</span>(è¡¨å) <span class="keyword">into</span> outfile <span class="string">&#x27;/root/data.txt&#x27;</span>(å¯¼å‡ºè·¯å¾„);</span><br></pre></td></tr></table></figure><p>äº²æµ‹å¤§çº¦2åƒä¸‡çš„æ•°æ®ï¼Œå¯¼å‡ºè€—æ—¶åªè¦272.24ç§’ <img src="https://www.itze.cn/wp-content/uploads/2022/01/loadData.png"></p><h2 id="2-2å¯¼å…¥"><a href="#2-2å¯¼å…¥" class="headerlink" title="2.2å¯¼å…¥"></a>2.2å¯¼å…¥</h2><p>åŒæ ·éœ€è¦å…ˆç™»é™†åˆ°mysqlæœåŠ¡ï¼Œload dataå¯¼å…¥æ‰§è¡Œä¸€æ¡sqlï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€å¼ å’ŒåŸæ¥ç»“æ„å­—æ®µæ•°ç›¸åŒçš„è¡¨ï¼Œæ³¨æ„å‡ ç‚¹ï¼Œæ¯”å¦‚å­—æ®µç±»å‹å¯ä»¥ç”±åŸæ¥çš„int&gt;varchar,ä½†æ˜¯è¿”è¿‡æ¥å°±ä¸è¡Œï¼Œå­—æ®µåå’Œè¡¨æ˜å¯ä»¥å’ŒåŸæ¥ä¸ä¸€æ ·éƒ½å¯ä»¥ï¼Œä½†æ˜¯å­—æ®µæ•°é‡è¦å¤§äºç­‰äºåŸæ¥çš„å­—æ®µæ•°é‡ï¼Œæ¯”å¦‚åŸè¡¨å¦‚ä¸‹ï¼Œåˆ™éœ€è¦åˆ›å»ºæ–°è¡¨å­—æ®µä¸èƒ½å°‘äº3ä¸ª</p><p>ID</p><p>NAME</p><p>AGE</p><p>1</p><p>Siri</p><p>18</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">load data infile <span class="string">&#x27;/root/data.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> tableName(ID,NAME,AGE);</span><br></pre></td></tr></table></figure><p>å¯¼å…¥æ—¶å¯ä»¥ä½¿ç”¨@dummyä¸¢å¼ƒä¸éœ€è¦çš„å­—æ®µï¼Œä¾‹å¦‚ä¸¢å¼ƒAGEå­—æ®µå€¼</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">load data infile <span class="string">&#x27;/root/data.txt&#x27;</span> <span class="keyword">into</span> <span class="keyword">table</span> tableName(ID,NAME,<span class="variable">@dummy</span>);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå›è½¦é™é™çš„ç­‰å¾…å°±å¥½äº† <strong>æ³¨æ„äº‹é¡¹</strong> - å¦‚æœå¯¼å‡ºå‰ï¼Œè¡¨ä¸­æ•°æ®ä¸ºç©ºå€¼nullï¼Œå¯¼å‡ºåä¼šæ˜¯\Nè¡¨ç¤º - æ•°æ®åº“å­—æ®µå¦‚æœæ˜¯varchar&#x2F;charï¼Œæ’å…¥ç©ºæ—¶ï¼Œload data é»˜è®¤å¯¼å…¥ ç©ºå­—ç¬¦ä¸² - æ•°æ®åº“å­—æ®µå¦‚æœæ˜¯decimalï¼Œæ’å…¥ç©ºæ—¶ï¼Œload data é»˜è®¤å¯¼å…¥ 0.00000000 - æ•°æ®åº“å­—æ®µå¦‚æœæ˜¯datetimeï¼Œæ’å…¥ç©ºæ—¶ï¼Œload data é»˜è®¤å¯¼å…¥ 0000-00-00 00:00:00 - æ•°æ®åº“å­—æ®µå¦‚æœæ˜¯datetimeï¼Œæ’å…¥yyyy-MM-ddæ—¶ï¼Œload data é»˜è®¤å¯¼å…¥ yyyy-MM-dd 00:00:00ï¼Œæ•°æ®æ­£ç¡®æ€§èƒ½å¤Ÿä¿è¯ - æ•°æ®åº“å­—æ®µå¦‚æœæ˜¯datetimeï¼Œæ’å…¥HHï¼šmm:ssæ—¶ï¼ˆHHåé¢åº”æ˜¯è‹±æ–‡å†’å·ï¼‰ï¼Œload data é»˜è®¤å¯¼å…¥ 0000-00-00 00:00:00ï¼Œæ•°æ®æ­£ç¡®æ€§ä¸èƒ½å¤Ÿä¿è¯ <em>æ³¨ï¼šmysqldumpçš„è¯¦è§£å¯å‚è€ƒ:<a href="https://www.cnblogs.com/chenmh/p/5300370.html">https://www.cnblogs.com/chenmh/p/5300370.html</a> æ³¨æ„äº‹é¡¹æœ‰æ‘˜æŠ„ç½‘ç»œæ–‡ç« ï¼Œä¾µå‘ŠçŸ¥ï¼Œç«‹å³åˆ é™¤</em></p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootè¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶</title>
      <link href="/2022/01/11/springboot%E8%AF%BB%E5%8F%96%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
      <url>/2022/01/11/springboot%E8%AF%BB%E5%8F%96%E5%A4%96%E9%83%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p><strong>SpringBootè¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œspringbootè¯»å–é…ç½®æ–‡ä»¶é¡ºåºï¼Œå¦‚ä¸‹ï¼ˆ1,2,3ä»£è¡¨ä¼˜å…ˆçº§ï¼‰</strong> <img src="https://www.itze.cn/wp-content/uploads/2022/01/%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20220111141259.png"></p><h2 id="è¯»å–ä¼˜å…ˆçº§ï¼ˆ1-2-3ä»£è¡¨ä¼˜å…ˆçº§ï¼‰"><a href="#è¯»å–ä¼˜å…ˆçº§ï¼ˆ1-2-3ä»£è¡¨ä¼˜å…ˆçº§ï¼‰" class="headerlink" title="è¯»å–ä¼˜å…ˆçº§ï¼ˆ1,2,3ä»£è¡¨ä¼˜å…ˆçº§ï¼‰"></a>è¯»å–ä¼˜å…ˆçº§ï¼ˆ1,2,3ä»£è¡¨ä¼˜å…ˆçº§ï¼‰</h2><ol><li>å’ŒJaråŒ…å¤„äºåŒä¸€çº§çš„configæ–‡ä»¶å¤¹ä¸­çš„application.propertiesé…ç½®æ–‡ä»¶</li><li>åœ¨1.configæ–‡ä»¶å¤¹ä¸å­˜åœ¨æ—¶ï¼Œä¼šè¯»å–å’ŒJaråŒ…å¤„äºåŒä¸€çº§çš„application.propertiesé…ç½®æ–‡ä»¶</li><li>1å’Œ2çš„æƒ…å†µéƒ½ä¸å­˜åœ¨çš„æ—¶å€™ä¹Ÿå°±æ˜¯æ­£å¸¸æ‰“åŒ…å‡ºæ¥application.propertiesé…ç½®æ–‡ä»¶å¤„äºé¡¹ç›®çš„ resource&#x2F;application.propertiesä¸‹ï¼Œæ‰ä¼šè¯»å–æ”¹é…ç½®</li></ol><p>å¦‚æœ1ï¼Œ2ï¼Œ3 åŒæ—¶å­˜åœ¨ï¼ŒjaråŒ…æ–‡ä»¶ä¼šå…ˆæŒ‰ç…§configä¸­çš„application.propertiesé…ç½®æ–‡ä»¶ï¼Œä¾ç…§ä¼˜å…ˆçº§æ¥è¯»å–</p><h2 id="è¯»å–æ–¹å¼"><a href="#è¯»å–æ–¹å¼" class="headerlink" title="è¯»å–æ–¹å¼"></a>è¯»å–æ–¹å¼</h2><p><strong>æ¨èä¸¤ç§ ç¬¬ä¸€ç§ï¼šä½¿ç”¨@Value(â€œ${name}â€) ç¬¬äºŒç§ï¼šä½¿ç”¨Environmentç±»ï¼Œé…ç½®å¯å‚è€ƒï¼š</strong><a href="https://www.itze.cn/java/415.html" title="Springboot@Autowiredæ³¨å…¥ä¸ºNull">Springboot@Autowiredæ³¨å…¥ä¸ºNull</a></p>]]></content>
      
      
      <categories>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueé¡¹ç›®æ‰“åŒ…æŠ¥é”™ï¼šJavaScript heap out of memory</title>
      <link href="/2021/12/09/vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%8A%A5%E9%94%99%EF%BC%9Ajavascript-heap-out-of-memory/"/>
      <url>/2021/12/09/vue%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85%E6%8A%A5%E9%94%99%EF%BC%9Ajavascript-heap-out-of-memory/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>npmç‰ˆæœ¬ï¼š7.21.0</li><li>nodeç‰ˆæœ¬ï¼šv13.14.0</li></ul><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>åœ¨Linuxç¯å¢ƒä¸‹ï¼ŒCentOS 7 æ“ä½œç³»ç»Ÿä¸‹ï¼Œvueé¡¹ç›®æ‰“åŒ…ï¼Œä¸€ç›´æ‰“åŒ…å¤±è´¥ï¼Œèµ·åˆåˆšå¼€å§‹ä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼Œæœ‰å‡ æ¬¡æ‰“åŒ…å¤±è´¥æ²¡æŠ¥é”™ï¼Œå¤§æ¦‚æŠ¥äº†ä¸ªæ„æ€æ˜¯æ‰“åŒ…è¿›ç¨‹è¢«æ€æ‰äº†</p><h2 id="é”™è¯¯ç¤ºä¾‹"><a href="#é”™è¯¯ç¤ºä¾‹" class="headerlink" title="é”™è¯¯ç¤ºä¾‹"></a>é”™è¯¯ç¤ºä¾‹</h2><p><img src="https://www.itze.cn/wp-content/uploads/2021/12/message.png"></p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>åœ¨æ‰“åŒ…çš„æœºå™¨ä¸Šæ‰§è¡Œï¼Œ4096è¿™ä¸ªå€¼å¯æ ¹æ®è‡ªå·±å®é™…æƒ…å†µæ”¹å˜</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export NODE_OPTIONS=--max_old_space_size=4096</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo $NODE_OPTIONS</span><br></pre></td></tr></table></figure><h3 id="å†æ¬¡è¿›è¡Œæ‰“åŒ…å³å¯"><a href="#å†æ¬¡è¿›è¡Œæ‰“åŒ…å³å¯" class="headerlink" title="å†æ¬¡è¿›è¡Œæ‰“åŒ…å³å¯"></a>å†æ¬¡è¿›è¡Œæ‰“åŒ…å³å¯</h3>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springæ•´åˆRediså“¨å…µæ¨¡å¼ï¼ˆSentinelï¼‰</title>
      <link href="/2021/11/18/spring%E6%95%B4%E5%90%88redis%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%EF%BC%88sentinel%EF%BC%89/"/>
      <url>/2021/11/18/spring%E6%95%B4%E5%90%88redis%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%EF%BC%88sentinel%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><p>å‡†å¤‡JaråŒ…ä¾èµ–ï¼Œæ³¨æ„ç‰ˆæœ¬ä¸è¦éšæ„æ›´æ¢ï¼Œç»æµ‹è¯•ï¼Œæœ‰çš„ç‰ˆæœ¬ä¼šæŠ¥é”™</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-data-redis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.8</span><span class="number">.6</span>.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- redis ä¾èµ– --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.9</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="redis-properties"><a href="#redis-properties" class="headerlink" title="redis.properties"></a>redis.properties</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#æœ€å¤§ç©ºé—²æ•°(é»˜è®¤:<span class="number">8</span>)</span><br><span class="line">redis.maxIdle=<span class="number">300</span></span><br><span class="line">#å½“è¿æ¥æ± èµ„æºè€—å°½æ—¶,è°ƒç”¨è€…æœ€å¤§é˜»å¡æ—¶é—´,è¶…æ—¶å°†æŠ›å‡ºå¼‚å¸¸.å•ä½:æ¯«ç§’,é»˜è®¤:-<span class="number">1</span>,è¡¨ç¤ºæ°¸ä¸è¶…æ—¶.</span><br><span class="line">redis.maxWait=<span class="number">1000</span></span><br><span class="line">#æœ€å¤§è¿æ¥æ•°(é»˜è®¤:<span class="number">8</span>)</span><br><span class="line">redis.maxTotal=<span class="number">500</span></span><br><span class="line">#æŒ‡æ˜æ˜¯å¦åœ¨ä»æ± ä¸­å–å‡ºè¿æ¥å‰è¿›è¡Œæ£€éªŒ,å¦‚æœæ£€éªŒå¤±è´¥,åˆ™ä»æ± ä¸­å»é™¤è¿æ¥å¹¶å°è¯•å–å‡ºå¦ä¸€ä¸ª (é»˜è®¤:<span class="literal">false</span>)</span><br><span class="line">redis.testOnBorrow=<span class="literal">true</span></span><br><span class="line">redis.testOnReturn=<span class="literal">true</span></span><br><span class="line">redis.testWhileIdle=<span class="literal">true</span></span><br><span class="line">redis.blockWhenExhausted=<span class="literal">false</span></span><br><span class="line">redis.numTestsPerEvictionRun=<span class="number">1024</span></span><br><span class="line">redis.timeBetweenEvictionRunsMillis=<span class="number">30000</span></span><br><span class="line">redis.minEvictableIdleTimeMillis=<span class="number">1800000</span></span><br><span class="line">redis.maxActive = <span class="number">1024</span></span><br><span class="line">redis.timeOut = <span class="number">10000</span></span><br><span class="line">#Sentinel</span><br><span class="line">redis.sentinel.master = mymaster #è¿™é‡Œæ˜¯é…ç½®Rediså“¨å…µsentinel.confä¸­çš„åå­—ï¼ä¸€å®šè¦ä¸€æ ·ï¼</span><br><span class="line">redis.sentinel.auth = <span class="number">123456789</span>  #åŒæ ·æ˜¯sentinel.confä¸­é…ç½®çš„å¯†ç ï¼Œå¦‚æœæ²¡è®¾ç½®å¯ä»¥ä¸å†™</span><br><span class="line">#Rediså“¨å…µé…ç½®çš„æ‰€æœ‰æœåŠ¡å™¨å’Œç«¯å£å·ï¼ˆsentinel.confä¸­çš„ç«¯å£å·ï¼Œä¸æ˜¯redis.confä¸­çš„ï¼ï¼‰</span><br><span class="line">redis.sentinel.addr_1 = <span class="number">192.168</span><span class="number">.100</span><span class="number">.1</span></span><br><span class="line">redis.sentinel.port_1 = <span class="number">26379</span></span><br><span class="line">redis.sentinel.addr_2 = <span class="number">192.168</span><span class="number">.100</span><span class="number">.2</span></span><br><span class="line">redis.sentinel.port_2 = <span class="number">26379</span></span><br><span class="line">redis.sentinel.addr_3 = <span class="number">192.168</span><span class="number">.100</span><span class="number">.3</span></span><br><span class="line">redis.sentinel.port_3 = <span class="number">26379</span></span><br></pre></td></tr></table></figure><h3 id="redis-xml"><a href="#redis-xml" class="headerlink" title="redis.xml"></a>redis.xml</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;!--æ‰«æredisé…ç½®æ–‡ä»¶--&gt;</span><br><span class="line">    &lt;context:property-placeholder location=<span class="string">&quot;classpath:redis.properties&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--è®¾ç½®è¿æ¥æ± --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;jedisPoolConfig&quot;</span> class=<span class="string">&quot;redis.clients.jedis.JedisPoolConfig&quot;</span>&gt;</span><br><span class="line">        &lt;!-- æœ€å¤§ç©ºé—²è¿æ¥æ•° --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;maxIdle&quot;</span> value=<span class="string">&quot;$&#123;redis.maxIdle&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- æœ€å¤§è¿æ¥æ•° --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;maxTotal&quot;</span> value=<span class="string">&quot;$&#123;redis.maxTotal&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- æ¯æ¬¡é‡Šæ”¾è¿æ¥çš„æœ€å¤§æ•°ç›® --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;numTestsPerEvictionRun&quot;</span> value=<span class="string">&quot;$&#123;redis.numTestsPerEvictionRun&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- é‡Šæ”¾è¿æ¥çš„æ‰«æé—´éš”ï¼ˆæ¯«ç§’ï¼‰ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;timeBetweenEvictionRunsMillis&quot;</span> value=<span class="string">&quot;$&#123;redis.timeBetweenEvictionRunsMillis&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- è¿æ¥æœ€å°ç©ºé—²æ—¶é—´ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;minEvictableIdleTimeMillis&quot;</span> value=<span class="string">&quot;$&#123;redis.minEvictableIdleTimeMillis&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- è·å–è¿æ¥æ—¶çš„æœ€å¤§ç­‰å¾…æ¯«ç§’æ•°,å°äºé›¶:é˜»å¡ä¸ç¡®å®šçš„æ—¶é—´,é»˜è®¤-<span class="number">1</span> --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;maxWaitMillis&quot;</span> value=<span class="string">&quot;$&#123;redis.maxWait&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- åœ¨è·å–è¿æ¥çš„æ—¶å€™æ£€æŸ¥æœ‰æ•ˆæ€§, é»˜è®¤<span class="literal">false</span> --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;testOnBorrow&quot;</span> value=<span class="string">&quot;$&#123;redis.testOnBorrow&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;testOnReturn&quot;</span> value=<span class="string">&quot;$&#123;redis.testOnReturn&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- åœ¨ç©ºé—²æ—¶æ£€æŸ¥æœ‰æ•ˆæ€§, é»˜è®¤<span class="literal">false</span> --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;testWhileIdle&quot;</span> value=<span class="string">&quot;$&#123;redis.testWhileIdle&#125;&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- è¿æ¥è€—å°½æ—¶æ˜¯å¦é˜»å¡, <span class="literal">false</span>æŠ¥å¼‚å¸¸,tureé˜»å¡ç›´åˆ°è¶…æ—¶, é»˜è®¤<span class="literal">true</span> --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;blockWhenExhausted&quot;</span> value=<span class="string">&quot;$&#123;redis.blockWhenExhausted&#125;&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- Sentinelæ¨¡å¼ --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;sentinelConfiguration&quot;</span> class=<span class="string">&quot;org.springframework.data.redis.connection.RedisSentinelConfiguration&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;master&quot;</span>&gt;</span><br><span class="line">            &lt;bean class=<span class="string">&quot;org.springframework.data.redis.connection.RedisNode&quot;</span>&gt;</span><br><span class="line">                &lt;!--è¿™ä¸ªå€¼è¦å’ŒSentinelä¸­æŒ‡å®šçš„masterçš„å€¼ä¸€è‡´ï¼Œä¸ç„¶å¯åŠ¨æ—¶æ‰¾ä¸åˆ°Sentinelä¼šæŠ¥é”™çš„--&gt;</span><br><span class="line">                &lt;property name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.master&#125;&quot;</span>/&gt;</span><br><span class="line">            &lt;/bean&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;!-- æŒ‡å®šSentinelçš„IPå’Œç«¯å£ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;sentinels&quot;</span>&gt;</span><br><span class="line">            &lt;set&gt;</span><br><span class="line">                &lt;bean class=<span class="string">&quot;org.springframework.data.redis.connection.RedisNode&quot;</span>&gt;</span><br><span class="line">                    &lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.addr_1&#125;&quot;</span>/&gt;</span><br><span class="line">                    &lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.port_1&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;/bean&gt;</span><br><span class="line">                &lt;bean class=<span class="string">&quot;org.springframework.data.redis.connection.RedisNode&quot;</span>&gt;</span><br><span class="line">                    &lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.addr_2&#125;&quot;</span>/&gt;</span><br><span class="line">                    &lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.port_2&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;/bean&gt;</span><br><span class="line">                &lt;bean class=<span class="string">&quot;org.springframework.data.redis.connection.RedisNode&quot;</span>&gt;</span><br><span class="line">                    &lt;constructor-arg name=<span class="string">&quot;host&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.addr_3&#125;&quot;</span>/&gt;</span><br><span class="line">                    &lt;constructor-arg name=<span class="string">&quot;port&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.port_3&#125;&quot;</span>/&gt;</span><br><span class="line">                &lt;/bean&gt;</span><br><span class="line">            &lt;/set&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;jedisConnectionFactory&quot;</span> class=<span class="string">&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;</span>&gt;</span><br><span class="line">        &lt;constructor-arg name=<span class="string">&quot;sentinelConfig&quot;</span> ref=<span class="string">&quot;sentinelConfiguration&quot;</span>/&gt;</span><br><span class="line">        &lt;constructor-arg name=<span class="string">&quot;poolConfig&quot;</span> ref=<span class="string">&quot;jedisPoolConfig&quot;</span>/&gt;</span><br><span class="line">        &lt;!-- å¦‚æœæ²¡æœ‰è®¾ç½®å¯†ç ï¼Œä¸‹é¢è¿™è¡Œå¯ä»¥æ³¨é‡Šæ‰ --&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;$&#123;redis.sentinel.auth&#125;&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;redisTemplate&quot;</span></span><br><span class="line">          class=<span class="string">&quot;org.springframework.data.redis.core.StringRedisTemplate&quot;</span>&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;connectionFactory&quot;</span> ref=<span class="string">&quot;jedisConnectionFactory&quot;</span>/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><h2 id="Springä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶"><a href="#Springä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶" class="headerlink" title="Springä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶"></a>Springä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶</h2><p>åœ¨SpringContextçš„ä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶ä¸­å¯¼å…¥ä»¥ä¸Šä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œä¸€èˆ¬è¿™ä¸ªä¸Šä¸‹æ–‡é…ç½®æ–‡ä»¶åå­—éƒ½æ˜¯ç±»ä¼¼ï¼šapplicationContext.xmlã€springContext.xmlç­‰ç­‰ç­‰â€¦è¿™é‡Œå°±ä¸æ”¾å…¨éƒ¨çš„å†…å®¹ï¼Œæ¯ä¸ªäººçš„é¡¹ç›®å¯èƒ½éƒ½ä¸å¤ªä¸€æ ·ï¼Œåªæ”¾éœ€è¦é…ç½®çš„</p><h3 id="å¯¼å…¥redis-properties"><a href="#å¯¼å…¥redis-properties" class="headerlink" title="å¯¼å…¥redis.properties"></a>å¯¼å…¥redis.properties</h3><p>è¿™ä¸ªä¸€èˆ¬æ”¾åœ¨é…ç½®æ–‡ä»¶çš„è¾ƒä¸Šé¢ä½ç½®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¼•å…¥é…ç½®æ–‡ä»¶ --&gt;</span><br><span class="line">&lt;bean id=<span class="string">&quot;propertyConfigurer&quot;</span> class=<span class="string">&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;</span>&gt;</span><br><span class="line">    &lt;!-- ç³»ç»Ÿé…ç½®å‚æ•° --&gt;</span><br><span class="line">    &lt;property name=<span class="string">&quot;locations&quot;</span>&gt;</span><br><span class="line">        &lt;list&gt;</span><br><span class="line">            &lt;!-- redisé…ç½®å‚æ•° --&gt;</span><br><span class="line">            &lt;value&gt;classpath:redis.properties&lt;/value&gt;</span><br><span class="line">        &lt;/list&gt;</span><br><span class="line">    &lt;/property&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure><h3 id="å¯¼å…¥redis-xml"><a href="#å¯¼å…¥redis-xml" class="headerlink" title="å¯¼å…¥redis.xml"></a>å¯¼å…¥redis.xml</h3><p>è¿™ä¸ªä¸€èˆ¬æ”¾åœ¨é…ç½®æ–‡ä»¶çš„æœ€ä¸‹é¢</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- å¼•å…¥redisé…ç½® --&gt;</span><br><span class="line">&lt;<span class="keyword">import</span> resource=<span class="string">&quot;classpath:redis.xml&quot;</span>/&gt;</span><br></pre></td></tr></table></figure><p>ä¹‹åå¯åŠ¨é¡¹ç›®éªŒè¯å°±è¡Œäº†ï¼Œè‡³äºJedisConnectionFactoryæ˜¯æ€ä¹ˆå®ç°é€šè¿‡Sentinelå¸®æˆ‘ä»¬å‘ç°å¹¶ä¸”åˆ‡æ¢masterä¸»èŠ‚ç‚¹çš„ï¼Œåšä¸»æœ‰æ—¶é—´å†ç ”ç©¶ä¸€ä¸‹</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Redis </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeræ–¹å¼Redisä¸»ä»å¤åˆ¶åŠSentinelå“¨å…µæ¨¡å¼å®ç°</title>
      <link href="/2021/11/18/docker%E6%96%B9%E5%BC%8Fredis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8F%8Asentinel%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0/"/>
      <url>/2021/11/18/docker%E6%96%B9%E5%BC%8Fredis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E5%8F%8Asentinel%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Redisç‰ˆæœ¬ï¼šlatest é»˜è®¤æ‹‰å–æœ€æ–°ç‰ˆ</li><li>Dockerç‰ˆæœ¬ï¼š20.10</li></ul><h2 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h2><ul><li>192.168.100.1</li><li>192.168.100.2</li><li>192.168.100.3</li></ul><h2 id="å‰æ"><a href="#å‰æ" class="headerlink" title="å‰æ"></a>å‰æ</h2><ul><li>åœ¨ä¸‰å°æœåŠ¡å™¨ä¸Šå·²ç»å®‰è£…å¥½Dockerï¼Œå¹¶ä¸”å·²ç»æ‹‰å–Redisé•œåƒï¼Œæ–‡ç« ä½¿ç”¨çš„æ˜¯é»˜è®¤æ‹‰å–æœ€æ–°ç‰ˆ</li><li>ä¸‰å°æœåŠ¡å™¨æå‰å¼€æ”¾6379ï¼ˆRedisé»˜è®¤ï¼‰å’Œ26379ï¼ˆSentinelé»˜è®¤ï¼‰ç«¯å£ï¼Œå¦‚ä½•åœ¨CentOSå¼€æ”¾æŒ‡å®šç«¯å£å¯æŸ¥çœ‹ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a></li><li>å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘ã€åä¸ºäº‘ç­‰ä¸€äº›å‚å•†çš„ï¼Œæ§åˆ¶é¢æ¿ä¸­ä¹Ÿéœ€è¦é˜²ç«å¢™ç«¯å£æ”¾è¡Œ</li></ul><p>æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull redis</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²å­˜åœ¨é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h2 id="1-ä¸»ä»å¤åˆ¶"><a href="#1-ä¸»ä»å¤åˆ¶" class="headerlink" title="1.ä¸»ä»å¤åˆ¶"></a>1.ä¸»ä»å¤åˆ¶</h2><p>ä¸»ä»å¤åˆ¶ï¼Œè¿™é‡Œæ˜¯ä¸€å°ä¸»ï¼ˆmasterï¼‰ä¸¤å°ä»ï¼ˆslaveï¼‰,masterä¸»èŠ‚ç‚¹å¯è¯»å¯å†™ï¼Œslaveåªå…·å¤‡è¯»çš„æƒé™ æˆ‘ä»¬å°† <strong>192.168.100.1</strong> ä½œä¸ºmasterä¸»èŠ‚ç‚¹ï¼Œå…¶ä½™ä¸¤å°ä¸ºslaveä»èŠ‚ç‚¹</p><h3 id="1-1-åˆ›å»ºRedisé…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬é»˜è®¤ä¸‰å°æœåŠ¡å™¨æ–‡ä»¶ä½ç½®å‡åœ¨-x2F-redis-ä¸‹ï¼‰"><a href="#1-1-åˆ›å»ºRedisé…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬é»˜è®¤ä¸‰å°æœåŠ¡å™¨æ–‡ä»¶ä½ç½®å‡åœ¨-x2F-redis-ä¸‹ï¼‰" class="headerlink" title="1.1 åˆ›å»ºRedisé…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬é»˜è®¤ä¸‰å°æœåŠ¡å™¨æ–‡ä»¶ä½ç½®å‡åœ¨ &#x2F;redis ä¸‹ï¼‰"></a>1.1 åˆ›å»ºRedisé…ç½®æ–‡ä»¶ï¼ˆæˆ‘ä»¬é»˜è®¤ä¸‰å°æœåŠ¡å™¨æ–‡ä»¶ä½ç½®å‡åœ¨ &#x2F;redis ä¸‹ï¼‰</h3><p>ä»¥ä¸‹æ“ä½œé»˜è®¤ä¸ºæ“ä½œè·¯å¾„å‡ä¸º**&#x2F;redis**ï¼Œä¸€å®šè¦è®°ä½åˆ›å»ºé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œä¸‹é¢åˆ›å»ºå®¹å™¨éœ€è¦ç”¨åˆ°ï¼</p><h4 id="1-1-1-åˆ›å»ºmasterä¸»èŠ‚ç‚¹æ–‡ä»¶ï¼šredis-master-conf-å†…å®¹å¦‚ä¸‹"><a href="#1-1-1-åˆ›å»ºmasterä¸»èŠ‚ç‚¹æ–‡ä»¶ï¼šredis-master-conf-å†…å®¹å¦‚ä¸‹" class="headerlink" title="1.1.1 åˆ›å»ºmasterä¸»èŠ‚ç‚¹æ–‡ä»¶ï¼šredis-master.conf å†…å®¹å¦‚ä¸‹"></a>1.1.1 åˆ›å»ºmasterä¸»èŠ‚ç‚¹æ–‡ä»¶ï¼šredis-master.conf å†…å®¹å¦‚ä¸‹</h4><p>é¦–å…ˆå¤åˆ¶è¯¥æ–‡ä»¶å†…å®¹ï¼Œæ ¹æ®ä½ è‡ªå·±çš„éœ€æ±‚æ›´æ”¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">port 6379</span><br><span class="line"></span><br><span class="line">logfile &quot;redis-master.log&quot;</span><br><span class="line"></span><br><span class="line">dir /redis/data</span><br><span class="line"></span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename appendonly.aof</span><br><span class="line"></span><br><span class="line">masterauth 123456789</span><br><span class="line"></span><br><span class="line">requirepass 123456789</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶å†…å®¹è§£é‡Š - portï¼šRedisç«¯å£å·ï¼Œé»˜è®¤6379 - logfileï¼šlogæ–‡ä»¶å - dirï¼šå­˜å‚¨è·¯å¾„ï¼Œå¯æ ¹æ®è‡ªå·±å®é™…ä¿®æ”¹ï¼Œ - appendonly yes ï¼šRedisæŒä¹…åŒ–æ–¹å¼ï¼Œè¿™é‡Œä½¿ç”¨AOFï¼Œå…³äºRedisæŒä¹…åŒ–æ–¹å¼å¯å‚è€ƒï¼š<a href="https://www.itze.cn/docker/558.html" title="Dockeré…ç½®RedisæŒä¹…åŒ–">Dockeré…ç½®RedisæŒä¹…åŒ–</a> - appendfilename appendonly.aofï¼šAOFæŒä¹…åŒ–ä¿å­˜æ–‡ä»¶å - masterauth 123456789 ï¼šä¸»èŠ‚ç‚¹å¯†ç ï¼Œå¯æ ¹æ®å®é™…ä¿®æ”¹ - requirepass 123456789ï¼šå»ºè®®è®¾ç½®masterauthä¸€æ · å°†é…ç½®å†…å®¹ä¿®æ”¹å¤åˆ¶-ä¿®æ”¹ä¹‹åï¼Œåœ¨æœåŠ¡å™¨åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œé»˜è®¤ä¸ºåˆ›å»ºä½ç½®ä¸º**&#x2F;redis&#x2F;redis-master.conf**,ç„¶åå°†é…ç½®å†…å®¹ç²˜è´´è¿›å»ï¼Œä¿å­˜å³å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /redis/redis-master.conf</span><br></pre></td></tr></table></figure><h4 id="1-1-2-åˆ›å»ºslaveä»èŠ‚ç‚¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œä¸¤ä¸ªä»èŠ‚ç‚¹é…ç½®æ–‡ä»¶å†…å®¹æ˜¯ä¸€æ ·çš„"><a href="#1-1-2-åˆ›å»ºslaveä»èŠ‚ç‚¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œä¸¤ä¸ªä»èŠ‚ç‚¹é…ç½®æ–‡ä»¶å†…å®¹æ˜¯ä¸€æ ·çš„" class="headerlink" title="1.1.2 åˆ›å»ºslaveä»èŠ‚ç‚¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œä¸¤ä¸ªä»èŠ‚ç‚¹é…ç½®æ–‡ä»¶å†…å®¹æ˜¯ä¸€æ ·çš„"></a>1.1.2 åˆ›å»ºslaveä»èŠ‚ç‚¹æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œä¸¤ä¸ªä»èŠ‚ç‚¹é…ç½®æ–‡ä»¶å†…å®¹æ˜¯ä¸€æ ·çš„</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">port 6379</span><br><span class="line"></span><br><span class="line">logfile &quot;redis-slave.log&quot;</span><br><span class="line"></span><br><span class="line">dir /redis/data</span><br><span class="line"></span><br><span class="line">appendonly yes</span><br><span class="line"></span><br><span class="line">appendfilename appendonly.aof</span><br><span class="line"></span><br><span class="line">replicaof 192.168.100.1 6379</span><br><span class="line"></span><br><span class="line">masterauth 123456789</span><br><span class="line"></span><br><span class="line">requirepass 123456789</span><br></pre></td></tr></table></figure><p>:white_check_mark:ä»slaveä»èŠ‚ç‚¹æ–‡ä»¶å’Œmasterä¸»èŠ‚ç‚¹æ–‡ä»¶å°±å¤šäº†ä¸€è¡Œé…ç½® <strong>replicaof 192.168.100.1 6379</strong> å°†å†…å®¹masterä¸»èŠ‚ç‚¹æœåŠ¡å™¨IPå’Œç«¯å£ åˆ†åˆ«åœ¨å…¶ä½™ä¸¤å°slaveä»èŠ‚ç‚¹ç›¸åŒvimæ“ä½œ 192.168.100.2é…ç½®æ–‡ä»¶å‘½åä¸ºï¼šredis-slave.conf 192.168.100.3é…ç½®æ–‡ä»¶å‘½åä¸ºï¼šredis-slave.conf ä¸¤å°ä»èŠ‚ç‚¹æœåŠ¡å™¨é…ç½®æ–‡ä»¶ç›¸åŒå‘½åï¼Œè‡ªå·±ä¹Ÿå¯ä»¥ä¿®æ”¹ æ–‡ä»¶å‘½åå¯æ ¹æ®è‡ªå·±å¿ƒæƒ…ä¿®æ”¹ï¼Œå»ºè®®æ–¹ä¾¿å¥½è®°å¥½åŒºåˆ†</p><h3 id="1-2-åˆ›å»ºå®¹å™¨"><a href="#1-2-åˆ›å»ºå®¹å™¨" class="headerlink" title="1.2 åˆ›å»ºå®¹å™¨"></a>1.2 åˆ›å»ºå®¹å™¨</h3><p>å»ºè®®å…ˆä»masterä¸»èŠ‚ç‚¹æœåŠ¡å™¨åˆ›å»ºï¼Œä¾æ¬¡slaveä»èŠ‚ç‚¹åˆ›å»º</p><h4 id="1-2-1-åˆ›å»ºmasterä¸»èŠ‚ç‚¹å®¹å™¨"><a href="#1-2-1-åˆ›å»ºmasterä¸»èŠ‚ç‚¹å®¹å™¨" class="headerlink" title="1.2.1 åˆ›å»ºmasterä¸»èŠ‚ç‚¹å®¹å™¨"></a>1.2.1 åˆ›å»ºmasterä¸»èŠ‚ç‚¹å®¹å™¨</h4><p>å›åˆ°<strong>192.168.100.1</strong> masterä¸»èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œåˆ›å»ºä¸»èŠ‚ç‚¹å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=always -p 6379:6379 --name redis_master -v /redis/redis-master.conf:/etc/redis/redis.conf -v /redis/data:/data -d redis redis-server /etc/redis/redis.conf --appendonly yes</span><br></pre></td></tr></table></figure><p>å‘½ä»¤è§£é‡Š - â€“restart&#x3D;alwaysï¼šdockeræœåŠ¡é‡å¯æ—¶ï¼Œè¯¥å®¹å™¨ä¹Ÿä¼šè‡ªåŠ¨å¯åŠ¨ - -p 6379:6379ï¼šæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£,æ˜ å°„å‡ºä¸€ä¸ª6379ç«¯å£ï¼Œä¸¤ä¸ªç›¸åŒä¸å¥½åŒºåˆ†ï¼Œæ¯”å¦‚-p 6789:6379,å¯¹å¤–çš„ç«¯å£å°±æ˜¯6789ï¼Œä¹Ÿå°±æ˜¯ä½ ä½¿ç”¨å·¥å…·è¿æ¥RedisæœåŠ¡çš„éœ€è¦å¡«å†™çš„ç«¯å£ - â€“name redis_masterï¼šç»™å®¹å™¨èµ·ä¸ªåå­—ï¼Œè¿™é‡Œå°±å«redis_masterï¼Œå¯æ ¹æ®å¿ƒæƒ…ä¿®æ”¹ - -v &#x2F;redis&#x2F;redis-master.conf:&#x2F;etc&#x2F;redis&#x2F;redis.confï¼šæ–‡ä»¶æ˜ å°„ï¼Œå°†æœ¬æœº&#x2F;redis&#x2F;redis-master.confæ–‡ä»¶æ˜ å°„åˆ°å®¹å™¨çš„&#x2F;etc&#x2F;redis&#x2F;redis.confè¯¥ä½ç½® - -v &#x2F;redis&#x2F;data:&#x2F;dataï¼šåŒä¸Š - -dï¼šåå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID - â€“appendonly yes:å¼€å¯RedisæŒä¹…åŒ–</p><h4 id="1-2-2-åˆ›å»ºslaveä»èŠ‚ç‚¹å®¹å™¨ï¼Œä»èŠ‚ç‚¹å®¹å™¨å¯åŠ¨å‘½ä»¤ç›¸åŒï¼Œä¸¤å°ä»æœåŠ¡å™¨åˆ†åˆ«éƒ½è¦æ‰§è¡Œ"><a href="#1-2-2-åˆ›å»ºslaveä»èŠ‚ç‚¹å®¹å™¨ï¼Œä»èŠ‚ç‚¹å®¹å™¨å¯åŠ¨å‘½ä»¤ç›¸åŒï¼Œä¸¤å°ä»æœåŠ¡å™¨åˆ†åˆ«éƒ½è¦æ‰§è¡Œ" class="headerlink" title="1.2.2 åˆ›å»ºslaveä»èŠ‚ç‚¹å®¹å™¨ï¼Œä»èŠ‚ç‚¹å®¹å™¨å¯åŠ¨å‘½ä»¤ç›¸åŒï¼Œä¸¤å°ä»æœåŠ¡å™¨åˆ†åˆ«éƒ½è¦æ‰§è¡Œ"></a>1.2.2 åˆ›å»ºslaveä»èŠ‚ç‚¹å®¹å™¨ï¼Œä»èŠ‚ç‚¹å®¹å™¨å¯åŠ¨å‘½ä»¤ç›¸åŒï¼Œä¸¤å°ä»æœåŠ¡å™¨åˆ†åˆ«éƒ½è¦æ‰§è¡Œ</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=always -p 6379:6379 --name redis_slave -v /redis/redis-slave.conf:/etc/redis/redis.conf -v /redis/data:/data -d redis redis-server /etc/redis/redis.conf --appendonly yes</span><br></pre></td></tr></table></figure><h3 id="1-3-æŸ¥çœ‹å¹¶éªŒè¯ä¸»ä»å¤åˆ¶"><a href="#1-3-æŸ¥çœ‹å¹¶éªŒè¯ä¸»ä»å¤åˆ¶" class="headerlink" title="1.3 æŸ¥çœ‹å¹¶éªŒè¯ä¸»ä»å¤åˆ¶"></a>1.3 æŸ¥çœ‹å¹¶éªŒè¯ä¸»ä»å¤åˆ¶</h3><p>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p>è¿›å…¥masterä¸»èŠ‚ç‚¹å®¹å™¨æŸ¥çœ‹ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰§è¡Œ 1.è¿›å…¥Rediså®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it redis_master(æ›¿æ¢æˆä½ çš„å®¹å™¨å) bash</span><br></pre></td></tr></table></figure><p>2.åœ¨1çš„æ­¥éª¤æˆåŠŸè¿›å…¥å‰æï¼Œç»§ç»­è¾“å…¥ä¸‹é¢å‘½ä»¤è¿›å…¥RedisæœåŠ¡ï¼Œç”±äºæ˜¯åæ¥æ•´ç†çš„è¯¥æ–‡æ¡£ï¼Œå¹¶æœªæˆªå›¾</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">redis-cli</span><br></pre></td></tr></table></figure><p>3.çœ‹åˆ°127.0.0.1:6379&gt;è¿™ä¸ªå‡ºç°è¯´æ˜å·²ç»æˆåŠŸè¿‡è¿›å…¥RedisæœåŠ¡ï¼Œæ­¤æ—¶è¾“å…¥info</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt; info(è¿™é‡Œåªæœ‰infoæ˜¯ä½ è¾“å…¥çš„)</span><br></pre></td></tr></table></figure><p>ä¸å‡ºæ„å¤–ä¼šå‡ºç°æç¤ºï¼š**NOAUTH Authentication required.**å› ä¸ºæˆ‘ä»¬è®¾ç½®äº†å¯†ç ï¼Œæ­¤æ—¶è¾“å…¥è®¾ç½®çš„å¯†ç </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">auth 123456789</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä¹‹åå›è½¦å‡ºç°ï¼šOK å³æˆåŠŸè¿›å…¥ï¼Œæ­¤æ—¶è¾“å…¥å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æœ‰ä»èŠ‚ç‚¹è¿æ¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">info Replication</span><br></pre></td></tr></table></figure><p>å‡ºç°ä»¥ä¸‹è¡¨æ˜æˆåŠŸï¼Œæœ¬æ¥ä¸æƒ³å†è¿›å»æˆªå›¾äº†ï¼Œè¿˜æ˜¯æ¥ä¸€å¼ å§ï¼Œæœ€åå‡ºå…¥ä¸¤æ¬¡exité€€å‡º <img src="https://www.itze.cn/wp-content/uploads/2021/11/redis-master.png"> å¦‚æœè¿›å…¥çš„å®¹å™¨æ˜¯å…¶ä»–ä¸¤å°slaveä»èŠ‚ç‚¹æœåŠ¡å™¨å®¹å™¨ï¼Œroleä¼šæ˜¯ï¼šslave</p><h4 id="éªŒè¯ä¸»ä»å¤åˆ¶"><a href="#éªŒè¯ä¸»ä»å¤åˆ¶" class="headerlink" title="éªŒè¯ä¸»ä»å¤åˆ¶"></a>éªŒè¯ä¸»ä»å¤åˆ¶</h4><p>å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·è¿æ¥RedisæœåŠ¡ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè¿›å…¥Rediså®¹å™¨æµ‹è¯•ï¼Œè¿›è¡Œç®€å•æµ‹è¯•ï¼Œæ¯”å¦‚å†™æµ‹è¯•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">set name 123</span><br></pre></td></tr></table></figure><p>å†™å®Œä¹‹åæˆ‘ä»¬å»è¿æ¥å…¶ä»–ä¸¤å°ä»èŠ‚ç‚¹RedisæœåŠ¡ï¼Œä¼šå‘ç°å…¶ä»–ä¸¤å°å‡å·²å­˜åœ¨keyå€¼name!å…¶ä»–åˆ é™¤ã€ä¿®æ”¹è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼Œåšä¸»å·²æµ‹è¯•ï¼Œæ–‡ç« é‡Œä¸å†åšéªŒè¯ æµ‹è¯•è¿æ¥å…¶ä»–ä¸¤å°slaveä»èŠ‚ç‚¹æœåŠ¡å‘ç°å†™ä¸è¿›å»ï¼Œå› ä¸ºslaveä»èŠ‚ç‚¹åªæœ‰åªè¯»åŠŸèƒ½ï¼</p><h2 id="2-å“¨å…µæ¨¡å¼"><a href="#2-å“¨å…µæ¨¡å¼" class="headerlink" title="2.å“¨å…µæ¨¡å¼"></a>2.å“¨å…µæ¨¡å¼</h2><h3 id="2-1åˆ›å»ºsentinel-confé…ç½®æ–‡ä»¶"><a href="#2-1åˆ›å»ºsentinel-confé…ç½®æ–‡ä»¶" class="headerlink" title="2.1åˆ›å»ºsentinel.confé…ç½®æ–‡ä»¶"></a>2.1åˆ›å»ºsentinel.confé…ç½®æ–‡ä»¶</h3><p>å»ºè®®ä¸‰å°æœåŠ¡å™¨åˆ›å»ºçš„ä½ç½®å’Œredis-xx.confçš„é…ç½®æ–‡ä»¶æ”¾åˆ°ç›¸åŒä½ç½®ï¼ä¸è¦éšæ„åœ°æ–¹åˆ›å»ºï¼Œæœ€åæ‰¾ä¸åˆ°äº†ã€‚ åœ¨ä¸‰å°æœåŠ¡å™¨å„è‡ªåˆ›å»ºsentinel.confé…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ç›¸åŒï¼Œå¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">port 26379</span><br><span class="line"></span><br><span class="line">dir /tmp</span><br><span class="line"></span><br><span class="line">logfile &quot;sentinel.log&quot;</span><br><span class="line"></span><br><span class="line">sentinel monitor mymaster 192.168.100.1 6379 2</span><br><span class="line"></span><br><span class="line">sentinel down-after-milliseconds mymaster 10000</span><br><span class="line"></span><br><span class="line">sentinel failover-timeout mymaster 60000</span><br><span class="line"></span><br><span class="line">sentinel auth-pass mymaster 123456789</span><br></pre></td></tr></table></figure><p>ç¨å¾®è§£é‡Šå‡ ç‚¹ - sentinel monitor mymaster 192.168.100.1 6379 2 - mymasterï¼šåå­—å¯ä»¥è‡ªå®šï¼Œä½†æ˜¯ä¸€å®šè¦ç›¸åŒï¼Œä¸”è®°ä½è¿™ä¸ªåå­—ï¼Œä¸‹ç¯‡æ–‡ç« å’Œspringæ•´åˆéœ€è¦è¯¥å - 192.168.100.1 6379ï¼šæˆ‘ä»¬æ‰‹åŠ¨é€‰æ‹©çš„masterä¸»èŠ‚ç‚¹æœåŠ¡å™¨IPå’Œç«¯å£å· - 2ï¼šæœ€åé¢è¿™ä¸ª2ä»£è¡¨æœ‰ä¸¤å°èŠ‚ç‚¹éƒ½è®¤ä¸ºmasterä¸»èŠ‚ç‚¹æŒ‚æ‰ä¹‹åæ‰ä¼šä»ç°æœ‰çš„slaveä»èŠ‚ç‚¹ä¸­é€‰å‡ºä¸€ä¸ªæ–°çš„masterä¸»èŠ‚ç‚¹ - sentinel down-after-milliseconds mymaster 10000 - 10000ï¼šmasterä¸»èŠ‚ç‚¹æŒ‚æ‰10ç§’ä¹‹åå¼€å§‹æŠ•ç¥¨é€‰ä¸¾æ–°çš„masterä¸»èŠ‚ç‚¹ï¼Œé»˜è®¤æ˜¯30ç§’ï¼Œå•ä½ms</p><h3 id="2-2-åˆ›å»ºSentinelå®¹å™¨"><a href="#2-2-åˆ›å»ºSentinelå®¹å™¨" class="headerlink" title="2.2 åˆ›å»ºSentinelå®¹å™¨"></a>2.2 åˆ›å»ºSentinelå®¹å™¨</h3><p>ä¸‰å°æœåŠ¡å™¨å„è‡ªéƒ½è¦åˆ›å»ºï¼Œå®¹å™¨å‘½ä»¤ç›¸åŒï¼Œåˆ‡è®°ï¼Œç›¸åŒçš„å‰ææ˜¯sentinel.confé…ç½®æ–‡ä»¶ä½ç½®æ‰€åœ¨ä½ç½®å’Œæ–‡ä»¶åå‡ä¸€è‡´å¼€æ”¾çš„ç«¯å£å·ä¹Ÿä¸€è‡´ï¼Œå‘½ä»¤æˆ‘å°±ä¸å†è§£é‡Šäº†</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=always -p 26379:26379 --name redis_sentinel -v /redis/sentinel.conf:/etc/redis/sentinel.conf -v /redis/data:/data -d redis redis-sentinel /etc/redis/sentinel.conf</span><br></pre></td></tr></table></figure><h3 id="2-3-æµ‹è¯•å“¨å…µæ¨¡å¼"><a href="#2-3-æµ‹è¯•å“¨å…µæ¨¡å¼" class="headerlink" title="2.3 æµ‹è¯•å“¨å…µæ¨¡å¼"></a>2.3 æµ‹è¯•å“¨å…µæ¨¡å¼</h3><p>æµ‹è¯•å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ‰‹åŠ¨æ¨¡æ‹Ÿmasterä¸»èŠ‚ç‚¹å®•æœºï¼Œæ¯”å¦‚æˆ‘ä»¬æ‰‹åŠ¨æŠŠmasterä¸»èŠ‚ç‚¹å®¹å™¨åœæ‰ï¼Œçœ‹ä¸€ä¸‹Sentinelä¼šä¸ä¼šåœ¨æˆ‘ä»¬è®¾ç½®çš„æ—¶é—´é€‰å‡ºæ–°çš„masterä¸»èŠ‚ç‚¹ åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop redis_master(å®¹å™¨å)</span><br></pre></td></tr></table></figure><h3 id="2-4-éªŒè¯å“¨å…µæ¨¡å¼"><a href="#2-4-éªŒè¯å“¨å…µæ¨¡å¼" class="headerlink" title="2.4 éªŒè¯å“¨å…µæ¨¡å¼"></a>2.4 éªŒè¯å“¨å…µæ¨¡å¼</h3><p>éªŒè¯åŒæ ·å¾ˆç®€å•ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·è¿æ¥æ²¡æœ‰åœæ‰çš„RedisèŠ‚ç‚¹ï¼ŒæŸ¥çœ‹info Replicationä¿¡æ¯å³å¯ï¼Œæˆ–è€…å’Œä¸Šé¢çš„ç›¸åŒæ“ä½œè¿›å…¥Rediså®¹å™¨æŸ¥çœ‹ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> Redis </tag>
            
            <tag> Sentinel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerç¯å¢ƒä¸‹Mysqlè·³è¿‡å¯†ç éªŒè¯</title>
      <link href="/2021/11/04/docker%E7%8E%AF%E5%A2%83%E4%B8%8Bmysql%E8%B7%B3%E8%BF%87%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81/"/>
      <url>/2021/11/04/docker%E7%8E%AF%E5%A2%83%E4%B8%8Bmysql%E8%B7%B3%E8%BF%87%E5%AF%86%E7%A0%81%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>Mysqlç‰ˆæœ¬ï¼š8.0</li><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li></ul><h2 id="é€‚ç”¨åœºæ™¯"><a href="#é€‚ç”¨åœºæ™¯" class="headerlink" title="é€‚ç”¨åœºæ™¯"></a>é€‚ç”¨åœºæ™¯</h2><p>ä½¿ç”¨Dockeræ‹‰å–çš„Mysqlå¹¶å¯åŠ¨çš„Mysqlå®¹å™¨ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœéœ€è¦è·³è¿‡Mysqlå¯†ç éªŒè¯ï¼Œç½‘ä¸Šæµä¼ çš„æœ€å¤šçš„å°±æ˜¯åœ¨Mysqlçš„é…ç½®æ–‡ä»¶my.cnfä¸­æ·»åŠ ä¸€è¡Œä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªä»…ä»…æ˜¯åœ¨éDockerå®¹å™¨è¿è¡Œçš„Mysqlä½¿ç”¨ï¼Œå¦‚æœä½ çš„Mysqlä½¿ç”¨çš„Dockerå®¹å™¨æ‰§è¡Œçš„ï¼ŒæŒ‰ç…§ç½‘ä¸Šä¿®æ”¹å¹¶æ— ä»»ä½•ä½œç”¨ï¼Œç”šè‡³æ‰¾ä¸åˆ°my.cnfï¼ŒåºŸè¯ä¸å¤šè¯´çœ‹æ“ä½œ</p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><h3 id="1-æ‰¾åˆ°docker-cnf"><a href="#1-æ‰¾åˆ°docker-cnf" class="headerlink" title="1.æ‰¾åˆ°docker.cnf"></a>1.æ‰¾åˆ°docker.cnf</h3><p>æ‰§è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find / -name docker.cnf</span><br></pre></td></tr></table></figure><p>å¦‚æœå‡ºç°å¤šä¸ªï¼Œé€‰æ‹©å¸¦æœ‰<strong>merged</strong>è¿™ä¸ª <img src="https://www.itze.cn/wp-content/uploads/2021/11/find_docker.cnf_.png"></p><h3 id="2-ç¼–è¾‘docker-cnf"><a href="#2-ç¼–è¾‘docker-cnf" class="headerlink" title="2.ç¼–è¾‘docker.cnf"></a>2.ç¼–è¾‘docker.cnf</h3><p>ç´§æ¥ç€ä½¿ç”¨vimç¼–è¾‘<strong>docker.cnf</strong>æ–‡ä»¶,åœ¨æœ€åä¸€è¡Œæ·»åŠ <strong>skip-grant-tables</strong> ä¿å­˜å¹¶é€€å‡º æ‰§è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /ä½ çš„è·¯å¾„/docker.cnf</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/11/skip-grant-tables.png"></p><h3 id="3-é‡å¯Mysqlå®¹å™¨"><a href="#3-é‡å¯Mysqlå®¹å™¨" class="headerlink" title="3.é‡å¯Mysqlå®¹å™¨"></a>3.é‡å¯Mysqlå®¹å™¨</h3><p>æ‰§è¡Œå‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker restart mysql(æ”¹æˆä½ çš„mysqlå®¹å™¨å)</span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šå·²ç»å®Œæˆè·³è¿‡Mysqlå¯†ç éªŒè¯ï¼</strong></p><h3 id="4-éªŒè¯"><a href="#4-éªŒè¯" class="headerlink" title="4.éªŒè¯"></a>4.éªŒè¯</h3><p>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it mysql(æ”¹æˆä½ çš„Mysqlå®¹å™¨) bash</span><br></pre></td></tr></table></figure><p>è¿›å…¥Mysql,è¾“å…¥å®Œä»¥ä¸‹å‘½ä»¤ç›´æ¥å›è½¦å³å¯ï¼Œæ­å–œæˆåŠŸè¿›å…¥ï¼Œæ¥ä¸‹æ¥å°±ä¿®æ”¹å¯†ç å§</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹Mysqlå¯†ç "><a href="#ä¿®æ”¹Mysqlå¯†ç " class="headerlink" title="ä¿®æ”¹Mysqlå¯†ç "></a>ä¿®æ”¹Mysqlå¯†ç </h2><p>æ³¨æ„ï¼Œå¦‚æœæŒ‰ç…§æ­£å¸¸çš„ä¿®æ”¹å¯†ç ï¼Œä¼šæç¤ºä½ ï¼Œå¤§è‡´æ„æ€æ˜¯ä½ ç°åœ¨å¤„äºskip-grant-tablesï¼Œä¸èƒ½ä¿®æ”¹ï¼ŒåºŸè¯ä¸å¤šè¯´çœ‹æ“ä½œï¼Œè¿›å…¥Mysqlä¹‹åï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤ 1.é€‰æ‹©åº“</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure><p>2.å…ˆåˆ·æ–°æƒé™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>3.ä¿®æ”¹å¯†ç </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">SET PASSWORD FOR &#x27;root&#x27;@&#x27;%&#x27; = &#x27;123456ï¼ˆè¿™é‡Œæ”¹æˆçš„å¯†ç ï¼‰&#x27;;</span><br></pre></td></tr></table></figure><p>4.å†æ¬¡åˆ·æ–°æƒé™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p><strong>æå®šï¼</strong></p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p><strong>ä¿®æ”¹å®Œæˆå¯†ç ä¹‹åä¸è¦å¿˜è®°æŠŠdocker.cnfæ–‡ä»¶ä¸­çš„skip-grant-tablesåˆ é™¤ï¼ï¼ï¼ç„¶åé‡å¤ 3.é‡å¯Mysqlå®¹å™¨ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Docker </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>layuiåœ¨çº¿æ–‡æ¡£</title>
      <link href="/2021/10/11/layui%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3/"/>
      <url>/2021/10/11/layui%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> uncategorized </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>gitlabé™åˆ¶ç½‘æ®µè®¿é—®ï¼ˆç§æœ‰åŒ–éƒ¨ç½²ï¼‰</title>
      <link href="/2021/09/22/gitlab%E9%99%90%E5%88%B6%E7%BD%91%E6%AE%B5%E8%AE%BF%E9%97%AE%EF%BC%88%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2%EF%BC%89/"/>
      <url>/2021/09/22/gitlab%E9%99%90%E5%88%B6%E7%BD%91%E6%AE%B5%E8%AE%BF%E9%97%AE%EF%BC%88%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>gitlabç‰ˆæœ¬ï¼š14.x</li></ul><h2 id="è¦æ±‚"><a href="#è¦æ±‚" class="headerlink" title="è¦æ±‚"></a>è¦æ±‚</h2><p>gitlabåœ¨ç§æœ‰åŒ–éƒ¨ç½²ä¹‹åï¼Œè®¾ç½®äº†åŸŸåè®¿é—®ï¼Œé»˜è®¤åªè¦æœ‰ç½‘ç»œéƒ½å¯ä»¥è®¿é—®ï¼Œè¦æ±‚åªèƒ½éƒ¨åˆ†ç½‘ç»œIPæˆ–è€…æŒ‡å®šçš„IPç½‘æ®µæ‰èƒ½è®¿é—®</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>gitlabç§æœ‰åŒ–éƒ¨ç½²å¥½ä¹‹åï¼Œé»˜è®¤æ˜¯è‡ªå¸¦æœ‰Nginxï¼Œå°±é€šè¿‡è®¾ç½®Nginxçš„ç›¸å…³é…ç½®æ¥å®ç°ï¼Œæ³¨æ„è¿™é‡Œä¸èƒ½ç›´æ¥ä¿®æ”¹gitlabç»™æˆ‘ä»¬å®‰è£…çš„Nginx.confä¹‹ç±»çš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦ä¿®æ”¹&#x2F;etc&#x2F;gitlab&#x2F;gitlab.rbè¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åé‡æ–°é…ç½®ï¼Œgitlabä¼šå¸®æˆ‘ä»¬ä¿®æ”¹ç›¸å…³é…ç½® 1.æŸ¥çœ‹é»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨,é»˜è®¤é…ç½®æ–‡ä»¶åï¼š<strong>gitlab.rb</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ll /etc/gitlab/</span><br></pre></td></tr></table></figure><p>2.ä¿®æ”¹é…ç½®æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure><p>3.æ‰¾åˆ°ä¿®æ”¹éƒ¨åˆ†ï¼Œæ‰§è¡Œ2.ä¸­çš„å‘½ä»¤ä»¥åï¼ŒæŒ‰ä¸€ä¸‹é”®ç›˜ï¼š&#x2F; (æ–œæ ) ï¼Œç„¶åè¾“å…¥ï¼š<strong>custom_gitlab_server_config</strong> ç„¶åå›è½¦æ‰¾åˆ°å¦‚ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nginx[<span class="string">&#x27;custom_gitlab_server_config&#x27;</span>] = <span class="string">&quot;location ^~ /foo-namespace/bar-project/raw/ &#123;\n deny all;\n&#125;\n&quot;</span></span></span><br></pre></td></tr></table></figure><p>å»ºè®®ä¸è¦æ”¹å˜åŸå§‹å†…å®¹ï¼Œåœ¨è¿™ä¸ªä¸Šé¢æ·»åŠ æ–°çš„å†…å®¹ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nginx[&#x27;custom_gitlab_server_config&#x27;] = &quot;location ~* (.*)</span><br><span class="line">         &#123;</span><br><span class="line">                allow 192.168.1.1;</span><br><span class="line">                allow 192.168.3.0/24;</span><br><span class="line">                allow 192.168.0.0/16;</span><br><span class="line">                deny all;</span><br><span class="line">                proxy_cache off;</span><br><span class="line">                proxy_pass  http://gitlab-workhorse;</span><br><span class="line">                root   html;</span><br><span class="line">                index  index.html index.htm;</span><br><span class="line">         &#125;&quot;</span><br></pre></td></tr></table></figure><h3 id="è§£é‡Šä¸€ä¸‹"><a href="#è§£é‡Šä¸€ä¸‹" class="headerlink" title="è§£é‡Šä¸€ä¸‹"></a>è§£é‡Šä¸€ä¸‹</h3><ul><li>allow 192.168.1.1; ä»£è¡¨å…è®¸192.168.1.1ï¼Œè¿™ä¸ªIPè®¿é—®</li><li>allow 192.168.3.0&#x2F;24; ä»£è¡¨å…è®¸192.168.3.0~192.168.3.254ï¼Œè¿™ä¸ªIPæ®µè®¿é—®</li><li>allow 192.168.0.0&#x2F;16; ä»£è¡¨å…è®¸192.168.â€».â€»ï¼ˆä»£è¡¨æ˜Ÿå·ï¼Œshift+8ï¼‰ IPè®¿é—®</li><li>deny all; ä»£è¡¨é™¤ä»¥ä¸Šå…è®¸ä¹‹å¤–ï¼Œç¦æ­¢å…¶ä»–æ‰€æœ‰ç½‘ç»œè®¿é—®</li></ul><p>ä¸‹é¢è¿™å‡ è¡Œä¹Ÿæ”¾ä¸Šï¼Œå®˜æ–¹æ–‡æ¡£é‡Œæ˜¯è®©æ”¾ä¸Šï¼Œ<a href="https://docs.gitlab.com/omnibus/settings/nginx.html#inserting-custom-nginx-settings-into-the-gitlab-server-block" title="å®˜æ–¹æ–‡æ¡£åœ°å€">å®˜æ–¹æ–‡æ¡£åœ°å€</a> proxy_cache off; proxy_pass <a href="http://gitlab-workhorse/">http://gitlab-workhorse</a>; root html; index index.html index.htm; <strong>æ³¨æ„ï¼šè¿™ä¸ªé¡ºåºä¸èƒ½éšä¾¿å†™ï¼Œè¯»å–é¡ºåºä¼šä»ä¸Šå¾€ä¸‹ï¼Œå¦‚æœæŠŠdeny all;æ”¾åˆ°ç¬¬ä¸€è¡Œï¼Œåé¢çš„å°±ä¸èµ·ä½œç”¨äº†</strong> 4.æœ€åé‡æ–°é…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå¤„ç†ä¹‹åï¼Œå…¶ä»–ä¸å…è®¸è®¿é—®çš„IPè®¿é—®gitlabå°±ä¼šå‡ºç°403ï¼Œåªæœ‰å…è®¸è®¿é—®çš„IPæ‰èƒ½è®¿é—®äº†ã€‚</p><h2 id="å…³äºIPçš„å»ºè®®"><a href="#å…³äºIPçš„å»ºè®®" class="headerlink" title="å…³äºIPçš„å»ºè®®"></a>å…³äºIPçš„å»ºè®®</h2><p>åœ¨è·å–æƒ³è¦è®¿é—®çš„IPæ¨èä¸€ä¸ªç½‘ç«™ï¼š<a href="https://ip.cn/" title="https://ip.cn/">https://ip.cn/</a> åšä¸»åœ¨æµ‹è¯•ä»ç™¾åº¦ç›´æ¥è·å–çš„IPå’Œip138è·å–çš„IPæ”¾ä¸Šå»éƒ½ä¸è¡Œï¼Œç™¾èˆ¬è‹¦æ¼ï¼Œæœ€åä»è¿™ä¸ªç½‘ç«™è·å–çš„æœ¬æœºIPæ”¾ä¸Šå»æ‰è¡Œï¼</p><h2 id="å¦å¤–æé†’"><a href="#å¦å¤–æé†’" class="headerlink" title="å¦å¤–æé†’"></a>å¦å¤–æé†’</h2><p>å¦‚æœä½ çš„gitlabæœ‰ä½¿ç”¨åˆ°gitlabè‡ªå¸¦çš„CI&#x2F;DIè‡ªåŠ¨éƒ¨ç½²ï¼Œè¯·åŠ¡å¿…æŠŠè£…æœ‰gitlabçš„æœåŠ¡å™¨æœ¬èº«IPæ·»åŠ å…è®¸è®¿é—®ï¼Œä¸ç„¶ä½ ä¼šå‘ç°ï¼Œå’¦ï¼ŒRunneræ€ä¹ˆç¦»çº¿äº†ï¼Œå“ˆå“ˆå“ˆ</p>]]></content>
      
      
      <categories>
          
          <category> GitLab </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SourceTree3.2.6è·³è¿‡æ³¨å†Œå®‰è£…</title>
      <link href="/2021/09/17/sourcetree3-2-6%E8%B7%B3%E8%BF%87%E6%B3%A8%E5%86%8C%E5%AE%89%E8%A3%85/"/>
      <url>/2021/09/17/sourcetree3-2-6%E8%B7%B3%E8%BF%87%E6%B3%A8%E5%86%8C%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šWindows 10</li><li>SourceTreeç‰ˆæœ¬ï¼š3.2.6</li><li>Gitç‰ˆæœ¬ï¼š2.32.0</li></ul><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>ä½¿ç”¨SourceTreeï¼Œé¦–å…ˆè¦å®‰è£…å¥½Git Gitä¸‹è½½ï¼š<a href="https://www.git-scm.com/download" title="Gitå®˜æ–¹ä¸‹è½½">Gitå®˜æ–¹ä¸‹è½½</a> SourceTree3.2.6ä¸‹è½½ï¼š<a href="https://www.aliyundrive.com/s/YaPUrifE6Ta" title="https://www.aliyundrive.com/s/YaPUrifE6Ta">https://www.aliyundrive.com/s/YaPUrifE6Ta</a></p><h3 id="gitç”Ÿæˆsshå¯†é’¥"><a href="#gitç”Ÿæˆsshå¯†é’¥" class="headerlink" title="gitç”Ÿæˆsshå¯†é’¥"></a>gitç”Ÿæˆsshå¯†é’¥</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 2048 -C &quot;gitlabä¸­è´¦æˆ·çš„é‚®ç®±åœ°å€&quot;</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Sourcetree"><a href="#å®‰è£…Sourcetree" class="headerlink" title="å®‰è£…Sourcetree"></a>å®‰è£…Sourcetree</h3><ol><li>åŒå‡»ä¸‹è½½å¥½çš„<strong>SourceTreeSetup-3.2.6.exe</strong>æ–‡ä»¶ï¼Œå¼¹å‡ºå®‰è£…çª—å£ä¹‹åï¼Œå°†å…¶å…³é—­</li><li>åŒæ—¶æŒ‰é”®ç›˜ï¼šwindows+rï¼Œè°ƒå‡ºè¿è¡Œæ¡†ï¼Œè¾“å…¥ï¼š%LocalAppData%\Atlassian\SourceTree\</li><li>æ–°å»ºæ–‡ä»¶ï¼šaccounts.json</li></ol><p><img src="https://www.itze.cn/wp-content/uploads/2021/09/accounts.png"> accounts.jsonæ–‡ä»¶å†…å®¹ä¸ºä»¥ä¸‹å†…å®¹ï¼Œå…¨éƒ¨å¤åˆ¶è¿›å»ï¼ŒCtrl+Sä¿å­˜</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;$id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;$type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SourceTree.Api.Host.Identity.Model.IdentityAccount, SourceTree.Api.Host.Identity&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Authenticate&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;HostInstance&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;$id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;$type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SourceTree.Host.Atlassianaccount.AtlassianAccountInstance, SourceTree.Host.AtlassianAccount&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Host&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;$id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;$type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SourceTree.Host.Atlassianaccount.AtlassianAccountHost, SourceTree.Host.AtlassianAccount&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;Id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;atlassian account&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;BaseUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://id.atlassian.com/&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Credentials&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;$id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;$type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SourceTree.Model.BasicAuthCredentials, SourceTree.Api.Account&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;Email&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;IsDefault&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><ol start="4"><li>å†æ¬¡åŒæ—¶æŒ‰é”®ç›˜ï¼šwindows+rï¼Œè°ƒå‡ºè¿è¡Œæ¡†ï¼Œè¾“å…¥ï¼š%LocalAppData%\Atlassian\</li></ol><p><img src="https://www.itze.cn/wp-content/uploads/2021/09/sourceurl.png"> è¿›å…¥-3.2.6.3544ï¼Œæ‰¾åˆ°user.configæ–‡ä»¶ï¼Œå³é”®-ç¼–è¾‘ï¼ˆé€‰æ‹©æ‰“å¼€æ–¹å¼-è®°äº‹æœ¬ï¼‰åœ¨æœ€ä¸‹é¢æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œæ·»åŠ åˆ° &lt;&#x2F;SourceTree.Properties.Settings&gt; è¿™ä¸ªæ ‡ç­¾å†…</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&lt;setting name=<span class="string">&quot;AgreedToEULAVersion&quot;</span> serializeAs=<span class="string">&quot;String&quot;</span>&gt;</span><br><span class="line">    &lt;value&gt;<span class="number">20160201</span>&lt;/value&gt;</span><br><span class="line">&lt;/setting&gt;</span><br></pre></td></tr></table></figure><ol start="5"><li>å†æ¬¡åŒå‡»<strong>SourceTreeSetup-3.2.6.exe</strong>æ–‡ä»¶ï¼Œå¼¹å‡ºçª—å£ï¼Œé€‰æ‹©-æˆ‘ä¸æƒ³ä½¿ç”¨Mercurial</li></ol>]]></content>
      
      
      <categories>
          
          <category> GitLab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> SourceTree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³SSHè¿œç¨‹æ‰§è¡Œnohupä¸é€€å‡ºé—®é¢˜</title>
      <link href="/2021/09/15/%E8%A7%A3%E5%86%B3ssh%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8Cnohup%E4%B8%8D%E9%80%80%E5%87%BA%E9%97%AE%E9%A2%98/"/>
      <url>/2021/09/15/%E8%A7%A3%E5%86%B3ssh%E8%BF%9C%E7%A8%8B%E6%89%A7%E8%A1%8Cnohup%E4%B8%8D%E9%80%80%E5%87%BA%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><ul><li>æœåŠ¡å™¨Aï¼šCentOS_Aï¼Œå‡å¦‚IPï¼š1.1.1.1</li><li>æœåŠ¡å™¨Bï¼šCentOS_Bï¼Œå‡å¦‚IPï¼š2.2.2.2 è¦åœ¨æœåŠ¡å™¨Bä¸Šè¿œç¨‹æ‰§è¡Œå­˜æ”¾åœ¨æœåŠ¡å™¨Aä¸Šçš„test.shè„šæœ¬ å‡å¦‚test.shå†…å®¹å¦‚ä¸‹</li></ul><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/bash</span></span><br><span class="line">echo &quot;æµ‹è¯•&quot;</span><br><span class="line">nohup java -jar springboot.jar &amp;</span><br></pre></td></tr></table></figure><p>nohupæŒ‚èµ·ï¼Œè¿™ä¸ªå‘½ä»¤åœ¨æˆ‘ä»¬æ“ä½œçš„æœºå™¨ä¸Šï¼Œä¸€èˆ¬æ‰§è¡Œå®Œä¹‹åCtrl+Cé€€å‡ºï¼Œä½†æ˜¯æ”¾åˆ°è„šæœ¬é‡Œé¢ï¼Œæˆ–è€…è¿œç¨‹ç›´æ¥æ‰§è¡Œè¯¥å‘½ä»¤ä¹‹åä¼šä¸€ç›´åœç•™ï¼Œä¸ä¼šé€€å‡º</p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>å°†å‘½ä»¤ä¿®æ”¹ä»¥ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup java -jar springboot.jar &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="æ³¨"><a href="#æ³¨" class="headerlink" title="æ³¨"></a>æ³¨</h2><p>æœåŠ¡å™¨ä¹‹é—´å¦‚ä½•è¿›è¡Œå…å¯†ï¼Œè§æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/784.html" title="CentOSæœåŠ¡å™¨ä¹‹é—´å…å¯†ç™»é™†åŠä¼ è¾“">CentOSæœåŠ¡å™¨ä¹‹é—´å…å¯†ç™»é™†åŠä¼ è¾“</a></p><h3 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="æƒ…å†µä¸€"></a>æƒ…å†µä¸€</h3><p>åœ¨æœåŠ¡å™¨Aè¿œç¨‹æ‰§è¡ŒæœåŠ¡å™¨Bä¸Šçš„test.shè„šæœ¬å‘½ä»¤,ä¸€å®šè¦æ˜¯ç»å¯¹è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh root@2.2.2.2 &quot;sh /root/test.sh&quot;</span><br></pre></td></tr></table></figure><h3 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="æƒ…å†µäºŒ"></a>æƒ…å†µäºŒ</h3><p>åœ¨æœåŠ¡å™¨Aæ“ä½œå­˜æ”¾åœ¨æœåŠ¡å™¨Açš„test.shè„šæœ¬å†…å®¹ï¼Œæ‰§è¡Œtest.shåˆ°æœåŠ¡å™¨B,test.shçš„è·¯å¾„ä¹Ÿæ˜¯è¦ç»å¯¹è·¯å¾„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh root@2.2.2.2 &lt; /root/test.sh</span><br></pre></td></tr></table></figure><p>psï¼šä¸è¿‡åœ¨ç»æµ‹è¯•çš„æ—¶å€™æœ‰ä¸ªé—®é¢˜ï¼Œæµ‹è¯•æƒ…å†µä¸€çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œnohupè¿™æ¡å‘½ä»¤ï¼Œç›®å‰ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆ <em>å‚è€ƒï¼š<a href="https://blog.csdn.net/oneinmore/article/details/50073443">https://blog.csdn.net/oneinmore/article/details/50073443</a></em></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSæœåŠ¡å™¨ä¹‹é—´å…å¯†ç™»é™†åŠä¼ è¾“</title>
      <link href="/2021/09/14/centos%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86%E5%8F%8A%E4%BC%A0%E8%BE%93/"/>
      <url>/2021/09/14/centos%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B9%8B%E9%97%B4%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86%E5%8F%8A%E4%BC%A0%E8%BE%93/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><ul><li>æœåŠ¡å™¨Aï¼šCentOS_A,å‡å¦‚IPä¸ºï¼š1.1.1.1</li><li>æœåŠ¡å™¨Bï¼šCentOS_Bï¼Œå‡å¦‚IPä¸ºï¼š2.2.2.2 <strong>è¦æ±‚å®ç°æœåŠ¡å™¨Aå‘æœåŠ¡å™¨Bé€šè¿‡sshå…å¯†ç™»é™†åŠscpä¼ è¾“æ–‡ä»¶</strong></li></ul><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><h4 id="ä¸€ã€ç™»é™†æœåŠ¡å™¨Aï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆå¯†é’¥å¯¹"><a href="#ä¸€ã€ç™»é™†æœåŠ¡å™¨Aï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆå¯†é’¥å¯¹" class="headerlink" title="ä¸€ã€ç™»é™†æœåŠ¡å™¨Aï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆå¯†é’¥å¯¹"></a>ä¸€ã€ç™»é™†æœåŠ¡å™¨Aï¼Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆå¯†é’¥å¯¹</h4><p>ç”Ÿæˆç§˜é’¥å¯¹å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-keygen</span><br></pre></td></tr></table></figure><p><strong>è¯¥å‘½ä»¤ä¸€ç›´æŒ‰å›è½¦ï¼ˆEnterï¼‰å³å¯ï¼Œé»˜è®¤ç”Ÿæˆä½ç½®ä¸€èˆ¬æ˜¯ï¼š~&#x2F;.ssh&#x2F; å¦‚æœç”¨æˆ·æ˜¯érootä¸€èˆ¬ä½ç½®æ˜¯ï¼š&#x2F;home&#x2F;ä½ çš„å½“å‰ç”¨æˆ·å&#x2F;.ssh&#x2F;</strong> æŸ¥çœ‹éšè—æ–‡ä»¶å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ll -a</span><br></pre></td></tr></table></figure><p>æˆ–è€…æ˜¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls -a</span><br></pre></td></tr></table></figure><p>è¿›å…¥è¯¥è·¯å¾„ï¼Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd ~/.ssh/</span><br></pre></td></tr></table></figure><h4 id="äºŒã€ä¸‹è½½ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶ï¼šid-rsa-pub"><a href="#äºŒã€ä¸‹è½½ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶ï¼šid-rsa-pub" class="headerlink" title="äºŒã€ä¸‹è½½ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶ï¼šid_rsa.pub"></a>äºŒã€ä¸‹è½½ç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶ï¼šid_rsa.pub</h4><p>æ‰¾åˆ° <strong>id_rsa.pub</strong> è¿™ä¸ªæ–‡ä»¶ï¼Œç°å°†è¿™ä¸ªæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¦‚æœæ˜¯rootå¯ä»¥é€šè¿‡szå‘½ä»¤ä¸‹è½½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sz id_rsa.pub</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€ç™»é™†æœåŠ¡å™¨B"><a href="#ä¸‰ã€ç™»é™†æœåŠ¡å™¨B" class="headerlink" title="ä¸‰ã€ç™»é™†æœåŠ¡å™¨B"></a>ä¸‰ã€ç™»é™†æœåŠ¡å™¨B</h3><p>ç™»é™†æœåŠ¡å™¨Bï¼Œ åˆ‡æ¢è·¯å¾„,å¦‚æœæ˜¯rootç”¨æˆ·åˆ‡å…¥åˆ°è¯¥è·¯å¾„ï¼š&#x2F;root&#x2F;.ssh</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /root/.ssh</span><br></pre></td></tr></table></figure><p>è¯¥è·¯å¾„ä¸‹ä¼šæœ‰ä»¥ä¸‹æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">authorized_keys known_hosts</span><br></pre></td></tr></table></figure><p>å°†æ­¥éª¤äºŒä¸­çš„æœåŠ¡å™¨Aç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶ id_rsa.pub ä¸Šä¼ è‡³æœåŠ¡å™¨Bçš„è¯¥è·¯å¾„ï¼ˆ&#x2F;root&#x2F;.sshï¼‰ä¸‹ æ­¤æ—¶æœåŠ¡å™¨Bä¸­&#x2F;root&#x2F;.ssh è¯¥è·¯å¾„ä¸‹åº”è¯¥æœ‰ä»¥ä¸‹æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">authorized_keys  id_rsa.pub  known_hosts</span><br></pre></td></tr></table></figure><p>æœ€åä¸€æ­¥ï¼Œå°†æœåŠ¡å™¨Aç”Ÿæˆçš„å…¬é’¥æ–‡ä»¶id_rsa.pubè¿½åŠ è‡³æœåŠ¡å™¨Bçš„authorized_keysæ–‡ä»¶ è¿½åŠ å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure><h4 id="å¤§åŠŸå‘Šæˆï¼"><a href="#å¤§åŠŸå‘Šæˆï¼" class="headerlink" title="å¤§åŠŸå‘Šæˆï¼"></a>å¤§åŠŸå‘Šæˆï¼</h4><h2 id="å…å¯†ç™»é™†"><a href="#å…å¯†ç™»é™†" class="headerlink" title="å…å¯†ç™»é™†"></a>å…å¯†ç™»é™†</h2><p>é¦–å…ˆç™»é™†æœåŠ¡å™¨A æ­¤æ—¶ä½ å¯ä»¥åœ¨æœåŠ¡å™¨Aé€šè¿‡ssh root@æœåŠ¡å™¨Bçš„IP ç›´æ¥ç™»é™†æœåŠ¡å™¨B ä¾‹å¦‚ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh root@2.2.2.2</span><br></pre></td></tr></table></figure><h2 id="å…å¯†ä¼ è¾“æ–‡ä»¶"><a href="#å…å¯†ä¼ è¾“æ–‡ä»¶" class="headerlink" title="å…å¯†ä¼ è¾“æ–‡ä»¶"></a>å…å¯†ä¼ è¾“æ–‡ä»¶</h2><p>é¦–å…ˆç™»é™†æœåŠ¡å™¨A å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp /a.txt root@2.2.2.2:/abc.txt</span><br></pre></td></tr></table></figure><p>å‘½ä»¤è§£é‡Šï¼šå°†æœåŠ¡å™¨Açš„æ ¹è·¯å¾„ä¸‹a.txtæ–‡ä»¶ä¼ è¾“è‡³æœåŠ¡å™¨Bçš„æ ¹è·¯å¾„ä¸‹å¹¶ä¸”å‘½åä¸ºabc.txt</p><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>å¦‚æœç¬¬ä¸€æ¬¡å…å¯†ä¼ è¾“ä¼šå‡ºç°è®©ä½ ç¡®è®¤ä¿¡æ¯ï¼Œè¾“å…¥ï¼š<strong>yes</strong> å³å¯ å¦‚ä¸‹å›¾ <img src="https://www.itze.cn/wp-content/uploads/2021/09/ssh.png"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS ç£ç›˜åˆ†åŒº</title>
      <link href="/2021/08/13/centos-%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/"/>
      <url>/2021/08/13/centos-%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7.x</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>æŸ¥çœ‹ç£ç›˜</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/08/fdisk-l.png"> å¯ä»¥çœ‹å‡ºï¼Œä¸»è¦æœ‰ä¸¤å—ç£ç›˜ï¼Œvdaç£ç›˜ä¸‹æœ‰vda1åˆ†åŒºï¼Œè€Œç£ç›˜vdbæ²¡æœ‰åˆ†åŒºï¼Œç£ç›˜åå­—æ¯å°æœºå™¨å¯èƒ½ä¸ä¸€æ ·ï¼Œä½ çš„å¯èƒ½æ˜¯&#x2F;dev&#x2F;sdaã€&#x2F;dev&#x2F;sdbï¼Œæ ¹æ®å®é™…æƒ…å†µè€Œå®š ä¾‹å¦‚å¯¹&#x2F;dev&#x2F;vdbç£ç›˜åˆ†åŒºï¼Œåªåˆ†ä¸€ä¸ªä¸»åˆ†åŒº</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">fdisk /dev/vdb</span><br></pre></td></tr></table></figure><p>ç„¶åä¾æ¬¡è¾“å…¥ä¸€ä¸‹é¡ºåºï¼Œä¸æ”¾å›¾äº†ï¼Œå¦‚æœè¯¥ç£ç›˜å·²ç»æœ‰ä¸»åˆ†åŒºï¼Œå¯ä»¥æ·»åŠ æ‰©å±•åˆ†åŒºï¼Œå°†ç¬¬äºŒä¸ª<strong>p</strong>æ”¹æˆ<strong>e</strong> ï¼ˆ1ï¼‰n:æ·»åŠ  ï¼ˆ2ï¼‰p:ä¸»åˆ†åŒº ï¼ˆ3ï¼‰1:1ä¸ªåˆ†åŒº ï¼ˆ4ï¼‰å›è½¦ï¼šä»é»˜è®¤ä½ç½®å¼€å§‹ ï¼ˆ5ï¼‰å›è½¦ï¼šåˆ°é»˜è®¤ä½ç½®ç»“æŸ ï¼ˆ6ï¼‰p:æŸ¥çœ‹åˆ†åŒºå†…å®¹ ï¼ˆ7ï¼‰w:å†™å…¥ åˆ†åŒºå®Œæˆ,åˆ†åŒºåï¼š&#x2F;dev&#x2F;vdb1 ä¸é‡å¯ä½¿åˆ†åŒºç«‹å³ç”Ÿæ•ˆ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">partprobe /dev/vdb1</span><br></pre></td></tr></table></figure><p>æ ¼å¼åŒ–åˆšæ‰çš„åˆ†åŒºï¼Œè¿™é‡Œä½¿ç”¨ext4ç±»å‹,æ³¨æ„è¿™é‡Œæ˜¯å¯¹åˆšæ‰çš„åˆ†åŒºï¼Œè¿›è¡Œæ ¼å¼åŒ–ï¼Œä¸æ˜¯å¯¹ç£ç›˜ï¼ä¸è¦å†™æˆï¼š&#x2F;dev&#x2F;vdb</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkfs.ext4 /dev/vdb1</span><br></pre></td></tr></table></figure><p>åˆ†åŒºå¦‚æœæ¯”è¾ƒå¤§çš„è¯ï¼Œæ ¼å¼åŒ–å¯èƒ½æ—¶é—´ä¹…ä¸€ç‚¹ï¼Œç­‰å¾…å°±è¡Œäº†ï¼Œæ ¼å¼åŒ–å®Œæˆï¼Œå°±å¯ä»¥æŒ‚è½½ä½¿ç”¨äº† æŸ¥çœ‹ç£ç›˜åˆ†åŒºç»“æ„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">lsblk</span><br></pre></td></tr></table></figure><p>å¦‚å›¾ä¸­ï¼Œ&#x2F;dev&#x2F;vdaä¸‹æœ‰&#x2F;dev&#x2F;vda1åˆ†åŒº <img src="https://www.itze.cn/wp-content/uploads/2021/08/lsblk.png"> æŒ‚è½½</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mount /dev/vdb1 /tmp</span><br></pre></td></tr></table></figure><ul><li>mountï¼šæŒ‚è½½å‘½ä»¤</li><li>&#x2F;dev&#x2F;vdb1ï¼šå·²ç»æ ¼å¼åŒ–çš„åˆ†åŒº</li><li>&#x2F;tmpï¼šéœ€è¦æŒ‚è½½çš„åœ°æ–¹ï¼Œè¿™ä¸ªè·¯å¾„å¯ä»¥æ˜¯ä»»æ„è·¯å¾„ï¼Œå‰æå…ˆåˆ›å»ºå‡ºæ¥ï¼Œå¦‚æœæ˜¯å·²ç»å­˜åœ¨çš„æ–‡ä»¶å¤¹ï¼ŒæŒ‚è½½ä¹‹åä¼šæŠŠæ–‡ ä»¶å¤¹é‡Œé¢çš„å…¨éƒ¨è¦†ç›–æ‰ï¼Œåˆ‡è®°</li></ul><p>æŸ¥çœ‹ç£ç›˜æŒ‚è½½åŠä½¿ç”¨æƒ…å†µï¼Œä¾‹å¦‚å›¾ä¸­çš„å°† &#x2F;dev&#x2F;vda1 æŒ‚è½½åˆ°æ ¹ç›®å½• &#x2F; ä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">df -Th</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/08/%E6%8C%82%E8%BD%BD.png"></p><h2 id="æ°¸ä¹…ç”Ÿæ•ˆ"><a href="#æ°¸ä¹…ç”Ÿæ•ˆ" class="headerlink" title="æ°¸ä¹…ç”Ÿæ•ˆ"></a>æ°¸ä¹…ç”Ÿæ•ˆ</h2><p>æœ€åä½¿åˆšæ‰çš„åˆ†åŒºæ°¸ä¹…ç”Ÿæ•ˆï¼Œä¸ç„¶æœåŠ¡å™¨é‡å¯å°±ggäº† æŸ¥è¯¢å¯¹åº”çš„UUID,è®°ç€åˆšæ‰æ ¼å¼åŒ–åˆ†åŒºçš„UUID</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">blkid</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/08/blkid.png"> æ·»åŠ åˆ°&#x2F;etc&#x2F;fstab</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/fstab</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/08/fstab.png"> - UUID&#x3D;xï¼šæ ¼å¼åŒ–åˆ†åŒºå¯¹åº”çš„UUID - &#x2F;ï¼šæ ¼å¼åŒ–åˆ†åŒºæŒ‚è½½çš„è·¯å¾„ - ext4ï¼šæ ¼å¼åŒ–çš„æ–¹å¼ï¼ŒæŒ‰éœ€æ›´æ”¹ - defaultsï¼šé»˜è®¤è¿™ä¸ªå°±å¥½äº† - ç¬¬ä¸€ä¸ª1ï¼šè¡¨ç¤ºè¦å°†æ•´ä¸ªå†…å®¹å¤‡ä»½ï¼›ä¸º0çš„è¯ï¼Œè¡¨ç¤ºä¸å¤‡ä»½ - ç¬¬äºŒä¸ª1ï¼š1è¡¨ç¤ºæ£€æŸ¥ï¼Œå¦‚æœè¿™é‡Œå¡«0ï¼Œåˆ™ä¸æ£€æŸ¥ï¼Œå¦‚æœæŒ‚è½½ç‚¹ä¸º&#x2F;(å³æ ¹åˆ†åŒº)åˆ™å¿…é¡»ä¸º1 æ·»åŠ å¥½ä¹‹åä¿å­˜å³å¯</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7æ­å»ºGitLab</title>
      <link href="/2021/08/05/centos%E6%90%AD%E5%BB%BAgitlab/"/>
      <url>/2021/08/05/centos%E6%90%AD%E5%BB%BAgitlab/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 GitLabç‰ˆæœ¬ï¼š14.1.1</p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>æœåŠ¡å™¨ç•™å‡ºè¶³å¤Ÿç£ç›˜ç©ºé—´å’Œè¿è¡Œå†…å­˜ å»ºè®®ï¼š4Gä»¥ä¸Šç£ç›˜ç©ºé—´ï¼Œ4Gä»¥ä¸Šè¿è¡Œå†…å­˜</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ³¨æ„ï¼šå¦‚æœåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­å¡ä½ï¼Œä¸€èˆ¬æ˜¯å†…å­˜ä¸å¤Ÿ 1.å®‰è£…ç›¸å…³ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install curl policycoreutils openssh-server openssh-clients postfix</span><br></pre></td></tr></table></figure><p>2.é…ç½®yumä»“åº“gitlabé•œåƒæºï¼Œé»˜è®¤ä¼šæ‹‰å–æœ€é«˜ç‰ˆæœ¬ï¼Œé™„åŠ ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/" title="æ¸…åé•œåƒæºåœ°å€">æ¸…åé•œåƒæºåœ°å€</a></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh  sudo bash</span><br></pre></td></tr></table></figure><p>3.å¯åŠ¨postfixé‚®ä»¶æœåŠ¡ï¼Œå¹¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start postfix &amp;&amp; systemctl enable postfix</span><br></pre></td></tr></table></figure><p>4.å®‰è£…å…è´¹ç¤¾åŒºç‰ˆï¼Œgitlab-ceï¼šç¤¾åŒºç‰ˆï¼Œgitlab-eeï¼šä¼ä¸šç‰ˆ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y gitlab-ce</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…å®Œæˆ"><a href="#å®‰è£…å®Œæˆ" class="headerlink" title="å®‰è£…å®Œæˆ"></a>å®‰è£…å®Œæˆ</h2><p><img src="https://www.itze.cn/wp-content/uploads/2021/08/gitlab_succ.png"></p><h2 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h2><p>ä¸»è¦ä¿®æ”¹è®¿é—®IPå’Œç«¯å£ï¼Œå¦‚æœæœ‰åŸŸåå¯ä»¥ä½¿ç”¨åŸŸåï¼Œå‰æåŸŸåè¦è§£æåˆ°è¯¥æœåŠ¡å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/gitlab/gitlab.rb</span><br></pre></td></tr></table></figure><p>å°†ï¼šexternal_url â€˜<a href="http://127.0.0.1:8080&#39;">http://127.0.0.1:8080&#39;</a> åé¢æ”¹æˆä½ çš„è®¿é—®åœ°å€ï¼Œå¦‚æœæ˜¯127.0.0.1:8080,é‚£ä¹ˆè®¿é—®åœ°å€å°±æ˜¯ä½ çš„æœåŠ¡å™¨å¤–ç½‘ip+8080ç«¯å£å·ï¼Œä¾‹å¦‚æœåŠ¡å™¨å¤–ç½‘IPä¸ºï¼š123.123.123.123ï¼Œé‚£ä¹ˆè®¿é—®åœ°å€å°±æ˜¯<a href="http://123.123.123.123:8080/">http://123.123.123.123:8080</a> <img src="https://www.itze.cn/wp-content/uploads/2021/08/ip_port.png"> æ³¨æ„ï¼šä¿®æ”¹å®Œæˆä¹‹åè¦åœ¨é˜²ç«å¢™æ”¾è¡Œä½ çš„ç«¯å£å·ï¼Œå¦‚ä½•æ”¾è¡Œè§æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a> å¦‚æœæ”¾è¡Œä¹‹åè¿˜æ˜¯ä¸é€šï¼Œå»ºè®®å»æœåŠ¡å™¨æ§åˆ¶å°ï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ï¼Œå°±å»é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œé˜²ç«å¢™ä¹Ÿéœ€è¦æ·»åŠ æ”¾è¡Œ</p><h2 id="ä½¿é…ç½®ç”Ÿæ•ˆ"><a href="#ä½¿é…ç½®ç”Ÿæ•ˆ" class="headerlink" title="ä½¿é…ç½®ç”Ÿæ•ˆ"></a>ä½¿é…ç½®ç”Ÿæ•ˆ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¿‡ç¨‹ä¼šæœ‰ç‚¹æ…¢ï¼Œè€å¿ƒç­‰å¾…ï¼Œå¦‚æœè¯¥è¿‡ç¨‹ä¸­å‡ºç°Errorï¼Œè¯´æ˜é‡ç½®é…ç½®å¤±è´¥ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç° å¦‚æœåœ¨æ‰§è¡Œè¯¥å‘½ä»¤è¿‡ç¨‹ä¸­å‡ºç°äº†ç±»ä¼¼ï¼š<strong>ruby_block[wait for grafana service socket] action run</strong> è¿™ç§é”™è¯¯ï¼Œå¯ä»¥å°è¯•é‡å¯ä¸€ä¸‹gitlab-runsvdiræ‰§è¡Œä¸€ä¸‹è¯¥å‘½ä»¤ï¼Œç„¶åé‡æ–°æ‰§è¡Œä¸Šé¢çš„é‡ç½®å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart gitlab-runsvdir</span><br></pre></td></tr></table></figure><h2 id="é‡å¯Gitlab"><a href="#é‡å¯Gitlab" class="headerlink" title="é‡å¯Gitlab"></a>é‡å¯Gitlab</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure><p>é‡å¯å®Œæˆå»è®¿é—®å³å¯</p><h2 id="ç™»é™†"><a href="#ç™»é™†" class="headerlink" title="ç™»é™†"></a>ç™»é™†</h2><p>æ–°ç‰ˆæœ¬ç¬¬ä¸€æ¬¡ç™»é™†ï¼Œå¯èƒ½ä¸ä¼šå’Œç½‘ä¸Šè¯´çš„ä¼šå‡ºç°è®©ä½ å¼ºåˆ¶ä¿®æ”¹å¯†ç ï¼Œæˆ–è€…è¯´é»˜è®¤è´¦æˆ·å’Œå¯†ç æ˜¯ï¼šroot&#x2F;5iveL!fe å¦‚æœç™»å½•ä¸è¿›å»ï¼Œé€šè¿‡gitlabæ§åˆ¶å°ä¿®æ”¹å¯†ç </p><h2 id="é‡ç½®ç®¡ç†å‘˜å¯†ç "><a href="#é‡ç½®ç®¡ç†å‘˜å¯†ç " class="headerlink" title="é‡ç½®ç®¡ç†å‘˜å¯†ç "></a>é‡ç½®ç®¡ç†å‘˜å¯†ç </h2><p>1.è¿›å…¥gitlabæ§åˆ¶å°ï¼Œåœ¨å®‰è£…gitlabçš„æœåŠ¡å™¨å‘½ä»¤è¡Œè¾“å…¥</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-rails console -e production</span><br></pre></td></tr></table></figure><p>å‡ºç°ä»¥ä¸‹å†…å®¹è¯´æ˜å·²ç»æˆåŠŸè¿›å…¥gitlabæ§åˆ¶å° <img src="https://www.itze.cn/wp-content/uploads/2021/08/control.png"> æ‰§è¡Œå‘½ä»¤ï¼Œè¯´æ˜è¯¥ç”¨æˆ·ä¸ºroot</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">user = User.where(id: 1).first</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å¯†ç </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">user.password = &#x27;123456&#x27;</span><br></pre></td></tr></table></figure><p>ç¡®è®¤å¯†ç </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">user.password_confirmation = &#x27;123456&#x27;</span><br></pre></td></tr></table></figure><p>ä¿å­˜å¯†ç </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">user.save!</span><br></pre></td></tr></table></figure><p>é€€å‡ºæ§åˆ¶å°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exit</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ç”¨rootå’Œåˆšæ‰é‡ç½®çš„å¯†ç 123456å»ç™»å½•å³å¯</p><h2 id="gitlabç›¸å…³å‘½ä»¤"><a href="#gitlabç›¸å…³å‘½ä»¤" class="headerlink" title="gitlabç›¸å…³å‘½ä»¤"></a>gitlabç›¸å…³å‘½ä»¤</h2><p>æŸ¥çœ‹ç‰ˆæœ¬å·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat /opt/gitlab/embedded/service/gitlab-rails/VERSION</span><br></pre></td></tr></table></figure><p>é‡å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure><p>é‡ç½®é…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl reconfigure</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl status</span><br></pre></td></tr></table></figure><p>åœæ­¢</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gitlab-ctl stop</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> GitLab </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> GitLab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7å°†nginxæœåŠ¡æ·»åŠ å¼€æœºå¯åŠ¨</title>
      <link href="/2021/07/14/centos-7%E5%B0%86nginx%E6%9C%8D%E5%8A%A1%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/"/>
      <url>/2021/07/14/centos-7%E5%B0%86nginx%E6%9C%8D%E5%8A%A1%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7</p><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>ç›®å‰å®‰è£…nginxå¤§å¤šæœ‰ä¸¤ç§æ–¹å¼</p><h5 id="æ–¹å¼ä¸€"><a href="#æ–¹å¼ä¸€" class="headerlink" title="æ–¹å¼ä¸€"></a>æ–¹å¼ä¸€</h5><p>é€šè¿‡æ·»åŠ yumæºï¼Œç„¶åç›´æ¥é€šè¿‡yumå®‰è£…ï¼Œæ¨èä½¿ç”¨è¿‡è¿™ç”¨ï¼Œè¿™ç§æ–¹å¼å®‰è£…ä¼šå¸®ä½ æŠŠä¾èµ–ã€æœåŠ¡éƒ½å®‰è£…å¥½</p><h5 id="æ–¹å¼äºŒ"><a href="#æ–¹å¼äºŒ" class="headerlink" title="æ–¹å¼äºŒ"></a>æ–¹å¼äºŒ</h5><p>é€šè¿‡è‡ªå·±wegetä¸‹è½½ã€æˆ–è€…å°†å®‰è£…åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œæ‰‹åŠ¨ç¼–è¯‘å®‰è£…ï¼Œè¿™ç§æ–¹å¼ç¼ºç‚¹å°±æ˜¯ï¼Œè¦è‡ªå·±å®‰è£…ç¯å¢ƒä¾èµ–ï¼Œè€Œä¸”å®‰è£…å¥½ä¹‹åï¼Œé»˜è®¤æ˜¯æ‰¾ä¸åˆ°nginx.serviceæœåŠ¡</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>è¿™ç¯‡æ–‡ç« æ¯”è¾ƒé€‚ç”¨äºé€šè¿‡æ–¹å¼äºŒå®‰è£…ï¼Œå½“ç„¶é€šè¿‡æ–¹å¼ä¸€å®‰è£…çš„æ·»åŠ å¼€æœºå¯åŠ¨æ›´æ–¹ä¾¿ å¦‚æœé€šè¿‡æ–¹å¼ä¸€å®‰è£…ï¼Œåˆ™ç›´æ¥ä½¿ç”¨å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure><p>å¦‚æœé€šè¿‡æ–¹å¼äºŒå®‰è£…å°±è¦ç¨å¾®éº»çƒ¦ä¸€ç‚¹äº† 1.è·¯å¾„åˆ‡æ¢åˆ° <strong>&#x2F;lib&#x2F;systemd&#x2F;system</strong> è¯¥ç›®å½•ä¸‹ 2.ç¼–è¾‘åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ <strong>vim nginx.service</strong> æ·»åŠ ä»¥ä¸‹å†…å®¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=nginx - high performance web server</span><br><span class="line">Documentation=http://nginx.org/en/docs/</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[Service] </span><br><span class="line">Type=forking</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">applicationæ”¹æˆä½ çš„nginxå®‰è£…è·¯å¾„</span></span><br><span class="line">Type=forking</span><br><span class="line">ExecStartPre=/application/nginx/sbin/nginx -t -c /application/nginx/conf/nginx.conf</span><br><span class="line">ExecStart=/application/nginx/sbin/nginx -c /application/nginx/conf/nginx.conf</span><br><span class="line">ExecReload=/application/nginx/sbin/nginx -s reload</span><br><span class="line">ExecStop=/application/nginx/sbin/nginx -s stop</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install] </span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œæˆä¹‹åï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨systemctlæ“ä½œnginxäº† é‡è½½é…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl daemon-reload</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¼€æœºå¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure><p>ç›´æ¥å¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¼€æœºå·²ç»å¯åŠ¨çš„æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl list-unit-filesgrep enabled</span><br></pre></td></tr></table></figure><p>ç¦æ­¢å¼€æœºå¯åŠ¨æŸæœåŠ¡,ä»¥nginxä¸ºä¾‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl disable nginx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¾®ä¿¡Nativeæ”¯ä»˜æ‰«ç æ”¯ä»˜æ¡ˆä¾‹</title>
      <link href="/2021/07/13/java%E5%BE%AE%E4%BF%A1native%E6%94%AF%E4%BB%98%E6%89%AB%E7%A0%81%E6%94%AF%E4%BB%98%E6%A1%88%E4%BE%8B/"/>
      <url>/2021/07/13/java%E5%BE%AE%E4%BF%A1native%E6%94%AF%E4%BB%98%E6%89%AB%E7%A0%81%E6%94%AF%E4%BB%98%E6%A1%88%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>éœ€è¦ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜ä¸­Nativeæ¨¡å¼ï¼Œå®Œæˆæ‰«ç æ”¯ä»˜ï¼Œè¿™é‡Œåªè¯´ä»£ç å®ç°ï¼Œå…·ä½“æ€ä¹ˆç”³è¯·å¾®ä¿¡å•†æˆ·ç­‰ä¸€äº›è´¦æˆ·ï¼Œè‡ªå·±è§£å†³ NATIVEæ”¯ä»˜ï¼Œ<a href="https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=6_1" title="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>JaråŒ…ä¾èµ–</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- WeChat Pay --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.wechatpay-apiv3&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;wechatpay-apache-httpclient&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.2</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.wxpay&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;wxpay-sdk&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.0</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- è§£æxml --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.dom4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.1</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- ZXing äºŒç»´ç  --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;javase&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- é˜¿é‡Œå·´å·´ Fastjson --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.2</span><span class="number">.49</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p><strong>è°ƒç”¨æ–¹æ³•</strong>ï¼Œå…·ç±»åœ¨ä¸‹æ–¹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line"><span class="comment"> * å°†ç”»å¥½çš„äºŒç»´ç ï¼Œä»¥è¾“å‡ºæµè¾“å‡ºï¼Œä¸åšå­˜å‚¨ï¼Œè¾“å‡ºç»“æœå°±æ˜¯ä¸€å¼ äºŒç»´ç </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> jsonParam</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: gitlab@111.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;wxPay&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">wxPay</span><span class="params">(HttpServletResponse response)</span> &#123;</span><br><span class="line">    response.setHeader(<span class="string">&quot;Pragma&quot;</span>, <span class="string">&quot;No-cache&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;no-cache&quot;</span>);</span><br><span class="line">    response.setDateHeader(<span class="string">&quot;Expires&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    response.setContentType(<span class="string">&quot;image/jpeg&quot;</span>);</span><br><span class="line">    <span class="comment">//ä¼ å‚æ–¹å¼ï¼Œæ ¹æ®è‡ªå·±å®šä¹‰</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">out_trade_no</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">trade_fee</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">object</span> <span class="operator">=</span> WeChatPayUtil.goPay(body, out_trade_no, Integer.parseInt(trade_fee));</span><br><span class="line">        <span class="type">String</span> <span class="variable">return_code</span> <span class="operator">=</span> object.getString(<span class="string">&quot;return_code&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result_code</span> <span class="operator">=</span> object.getString(<span class="string">&quot;result_code&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (return_code.equals(WXPayConstants.SUCCESS) &amp;&amp; result_code.equals(WXPayConstants.SUCCESS)) &#123;</span><br><span class="line">            <span class="comment">//è·å–æ”¯ä»˜url</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">code_url</span> <span class="operator">=</span> object.getString(<span class="string">&quot;code_url&quot;</span>);</span><br><span class="line">            <span class="comment">//è½¬äºŒç»´ç </span></span><br><span class="line">            WeChatPayUtil.createQRCode(code_url, response.getOutputStream());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//é”™è¯¯å¼‚å¸¸å¤„ç†ï¼Œæ ¹æ®è‡ªå·±ä¸šåŠ¡è¡¥å……</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>WeChatPayUtilå·¥å…·ç±»</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.github.wxpay.sdk.WXPayConstants;</span><br><span class="line"><span class="keyword">import</span> com.github.wxpay.sdk.WXPayUtil;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.BarcodeFormat;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.EncodeHintType;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.MultiFormatWriter;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.client.j2se.MatrixToImageWriter;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.common.BitMatrix;</span><br><span class="line"><span class="keyword">import</span> com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Document;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentException;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.DocumentHelper;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.Element;</span><br><span class="line"><span class="keyword">import</span> org.dom4j.tree.DefaultElement;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.net.URLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created with IDEA</span></span><br><span class="line"><span class="comment"> * Author: www.itze.cn</span></span><br><span class="line"><span class="comment"> * Emailï¼šgitlab@111.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeChatPayUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–æœ¬æœºIP</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> UnknownHostException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getLocalIp</span><span class="params">()</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">localHost</span> <span class="operator">=</span> InetAddress.getLocalHost();</span><br><span class="line">        <span class="keyword">return</span> localHost.getHostAddress();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æå­—ç¬¦ä¸²å½¢å¼çš„XMLå†…å®¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> xmlContent</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title function_">xmlToJson</span><span class="params">(String xmlContent)</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">        <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> DocumentHelper.parseText(xmlContent);</span><br><span class="line">        <span class="type">Element</span> <span class="variable">rootElement</span> <span class="operator">=</span> document.getRootElement();</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> rootElement.elementIterator();</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            <span class="type">DefaultElement</span> <span class="variable">defaultElement</span> <span class="operator">=</span> (DefaultElement) iterator.next();</span><br><span class="line">            jsonObject.fluentPut(defaultElement.getName(), defaultElement.getStringValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> jsonObject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯·æ±‚å†…å®¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> body</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out_trade_no</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> trade_fee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> UnknownHostException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String <span class="title function_">xmlContent</span><span class="params">(String body, String out_trade_no, String trade_fee)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">appid</span> <span class="operator">=</span> <span class="string">&quot;æ”¹æˆä½ å¾®ä¿¡å•†æˆ·ç»‘å®šçš„APPID&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">mchid</span> <span class="operator">=</span> <span class="string">&quot;å•†æˆ·è´¦æˆ·åˆ†é…çš„APPID&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">notifyUrl</span> <span class="operator">=</span> <span class="string">&quot;å›è°ƒé€šçŸ¥åœ°å€ï¼Œä¸€å®šè¦å¤–ç½‘å¯ä»¥è®¿é—®&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;è‡ªå·±ç”Ÿæˆçš„APIç§é’¥&quot;</span>;</span><br><span class="line">        TreeMap&lt;String, String&gt; paramMap = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//æ·»åŠ å¿…é¡»è¯·æ±‚å‚æ•°ï¼Œé¢å¤–è¯·æ±‚å‚æ•°è¯¦æƒ…è§å®˜æ–¹æ–‡æ¡£</span></span><br><span class="line">        paramMap.put(<span class="string">&quot;appid&quot;</span>, appid);</span><br><span class="line">        paramMap.put(<span class="string">&quot;mch_id&quot;</span>, mchid);</span><br><span class="line">        paramMap.put(<span class="string">&quot;nonce_str&quot;</span>, WXPayUtil.generateNonceStr());</span><br><span class="line">        paramMap.put(<span class="string">&quot;body&quot;</span>, body);</span><br><span class="line">        paramMap.put(<span class="string">&quot;out_trade_no&quot;</span>, out_trade_no);</span><br><span class="line">        paramMap.put(<span class="string">&quot;total_fee&quot;</span>, trade_fee);<span class="comment">//è®¢å•é‡‘é¢ï¼Œå•ä½åˆ†ï¼Œä¸èƒ½å¸¦å°æ•°ç‚¹ï¼</span></span><br><span class="line">        paramMap.put(<span class="string">&quot;spbill_create_ip&quot;</span>, getLocalIp());</span><br><span class="line">        paramMap.put(<span class="string">&quot;notify_url&quot;</span>, notifyUrl);</span><br><span class="line">        paramMap.put(<span class="string">&quot;trade_type&quot;</span>, <span class="string">&quot;NATIVE&quot;</span>);</span><br><span class="line">        <span class="comment">//åŠ ç­¾</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">signature</span> <span class="operator">=</span> WXPayUtil.generateSignature(paramMap, key);</span><br><span class="line">        paramMap.put(<span class="string">&quot;sign&quot;</span>, signature);</span><br><span class="line">        <span class="comment">//è¯·æ±‚å†…å®¹</span></span><br><span class="line">        <span class="keyword">return</span> WXPayUtil.mapToXml(paramMap);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯·æ±‚ç»“æœ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> body</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> out_trade_no</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> trade_fee</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> UnknownHostException</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> DocumentException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title function_">goPay</span><span class="params">(String body, String out_trade_no, <span class="type">int</span> trade_fee)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sendContent</span> <span class="operator">=</span> xmlContent(body, out_trade_no, String.valueOf(trade_fee));</span><br><span class="line">        <span class="comment">//å‘é€è¯·æ±‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> sendPostData(WXPayConstants.UNIFIEDORDER_URL, sendContent, <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//è½¬æ¢è¯·æ±‚ç»“æœ</span></span><br><span class="line">        <span class="keyword">return</span> xmlToJson(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è°ƒç”¨å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> urlParam</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> contentType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sendPostData</span><span class="params">(String urlParam, String param, String contentType)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(urlParam);</span><br><span class="line">            <span class="type">URLConnection</span> <span class="variable">connection</span> <span class="operator">=</span> url.openConnection();</span><br><span class="line">            connection.setDoOutput(<span class="literal">true</span>);</span><br><span class="line">            connection.setConnectTimeout(<span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">            connection.setReadTimeout(<span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotBlank(contentType))</span><br><span class="line">                connection.setRequestProperty(<span class="string">&quot;content-type&quot;</span>, contentType);</span><br><span class="line">            <span class="type">OutputStreamWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(connection.getOutputStream(), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (param == <span class="literal">null</span>)</span><br><span class="line">                param = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            writer.write(param);</span><br><span class="line">            writer.flush();</span><br><span class="line">            writer.close();</span><br><span class="line">            <span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(connection.getInputStream(), <span class="string">&quot;utf-8&quot;</span>))) &#123;</span><br><span class="line">                <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">                <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">while</span> ((content = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                    builder.append(content);</span><br><span class="line">                    builder.append(<span class="string">&quot;\r\n&quot;</span>);<span class="comment">//å†™å…¥å›è½¦</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> builder.toString();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> content  äºŒç»´ç å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> outputStream è¾“å‡ºæµ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Email</span>: gitlab@111.com</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">createQRCode</span><span class="params">(String content, OutputStream outputStream)</span> &#123;</span><br><span class="line">        <span class="comment">//å®šä¹‰é•¿å®½</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">160</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">160</span>;</span><br><span class="line">        <span class="comment">//å®šä¹‰æ ¼å¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> <span class="string">&quot;jpg&quot;</span>;</span><br><span class="line">        <span class="comment">//å®šä¹‰äºŒç»´ç å‚æ•°</span></span><br><span class="line">        <span class="type">HashMap</span> <span class="variable">hashMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        hashMap.put(EncodeHintType.CHARACTER_SET, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * çº é”™èƒ½åŠ›</span></span><br><span class="line"><span class="comment">         * L:çº¦å¯çº é”™7%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">         * M:çº¦å¯çº é”™15%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">         * Q:çº¦å¯çº é”™25%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">         * H:çº¦å¯çº é”™30%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        hashMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.M);</span><br><span class="line">        <span class="comment">//è¾¹è·</span></span><br><span class="line">        hashMap.put(EncodeHintType.MARGIN, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">BitMatrix</span> <span class="variable">matrix</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiFormatWriter</span>()</span><br><span class="line">                    .encode(content, BarcodeFormat.QR_CODE, width, height, hashMap);</span><br><span class="line">            MatrixToImageWriter.writeToStream(matrix, format, outputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¾®ä¿¡æ”¯ä»˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ”¯ä»˜å®APIç”µè„‘ç½‘ç«™æ”¯ä»˜</title>
      <link href="/2021/07/13/java%E6%94%AF%E4%BB%98%E5%AE%9Dapi%E7%94%9F%E6%88%90%E6%94%AF%E4%BB%98%E9%93%BE%E6%8E%A5-form%E8%A1%A8%E5%8D%95/"/>
      <url>/2021/07/13/java%E6%94%AF%E4%BB%98%E5%AE%9Dapi%E7%94%9F%E6%88%90%E6%94%AF%E4%BB%98%E9%93%BE%E6%8E%A5-form%E8%A1%A8%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>è°ƒç”¨æ”¯ä»˜å®APIï¼Œç”Ÿæˆæ”¯ä»˜é“¾æ¥ï¼Œæˆ–è€…æ˜¯formè¡¨å•ï¼Œè¿”å›ç»™å‰ç«¯é¡µé¢ï¼Œè¿™é‡Œæ˜¯ç›´æ¥ç”Ÿæˆçš„æ”¯ä»˜é“¾æ¥</p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>JaråŒ…ä¾èµ–</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- AliPay Old --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alipay.sdk&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;alipay-sdk-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">4.12</span><span class="number">.4</span>.ALL&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Created with IDEA</span></span><br><span class="line"><span class="comment">     * Author: www.itze.cn</span></span><br><span class="line"><span class="comment">     * Emailï¼šgitlab@111.com</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createPayUrl</span><span class="params">(String orderNumber, String titleName, String amout, String orderDesc)</span> &#123;</span><br><span class="line">        <span class="comment">/** æ”¯ä»˜å®ç½‘å…³ **/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">URL</span> <span class="operator">=</span> <span class="string">&quot;æ”¯ä»˜å®ç½‘å…³&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/** åº”ç”¨idï¼Œå¦‚ä½•è·å–è¯·å‚è€ƒï¼šhttps://opensupport.alipay.com/support/helpcenter/190/201602493024 **/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">APP_ID</span> <span class="operator">=</span> <span class="string">&quot;æ”¹æˆä½ çš„AppID&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/** åº”ç”¨ç§é’¥ï¼Œå¦‚ä½•è·å–è¯·å‚è€ƒï¼šhttps://opensupport.alipay.com/support/helpcenter/207/201602469554 **/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">APP_PRIVATE_KEY</span> <span class="operator">=</span> <span class="string">&quot;æ”¹æˆä½ çš„åº”ç”¨ç§é’¥&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** æ”¯ä»˜å®å…¬é’¥ï¼Œå¦‚ä½•è·å–è¯·å‚è€ƒï¼šhttps://opensupport.alipay.com/support/helpcenter/207/201602487431 **/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ALIPAY_PUBLIC_KEY</span> <span class="operator">=</span> <span class="string">&quot;æ”¹æˆä½ çš„åº”ç”¨å…¬é’¥&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** åˆå§‹åŒ– **/</span></span><br><span class="line">        <span class="type">AlipayClient</span> <span class="variable">alipayClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultAlipayClient</span>(URL, APP_ID, APP_PRIVATE_KEY, <span class="string">&quot;json&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>, ALIPAY_PUBLIC_KEY, <span class="string">&quot;RSA2&quot;</span>);</span><br><span class="line">        <span class="comment">/** å®ä¾‹åŒ–å…·ä½“APIå¯¹åº”çš„requestç±»ï¼Œç±»åç§°å’Œæ¥å£åç§°å¯¹åº”,å½“å‰è°ƒç”¨æ¥å£åç§°ï¼šalipay.trade.page.payï¼ˆç”µè„‘ç½‘ç«™æ”¯ä»˜ï¼‰ **/</span></span><br><span class="line">        <span class="type">AlipayTradePagePayRequest</span> <span class="variable">alipayRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlipayTradePagePayRequest</span>();</span><br><span class="line">        <span class="comment">/** è®¾ç½®ä¸šåŠ¡å‚æ•°  **/</span></span><br><span class="line">        <span class="type">AlipayTradePagePayModel</span> <span class="variable">model</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlipayTradePagePayModel</span>();</span><br><span class="line">        <span class="comment">/** å•†æˆ·è®¢å•å·ï¼Œå•†æˆ·è‡ªå®šä¹‰ï¼Œéœ€ä¿è¯åœ¨å•†æˆ·ç«¯ä¸é‡å¤ï¼Œå¦‚ï¼š20200612000001 **/</span></span><br><span class="line">        model.setOutTradeNo(orderNumber);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** é”€å”®äº§å“ç ï¼Œå›ºå®šå€¼ï¼šFAST_INSTANT_TRADE_PAY **/</span></span><br><span class="line">        model.setProductCode(<span class="string">&quot;FAST_INSTANT_TRADE_PAY&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**è®¢å•æ ‡é¢˜ **/</span></span><br><span class="line">        model.setSubject(titleName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** è®¢å•é‡‘é¢ï¼Œç²¾ç¡®åˆ°å°æ•°ç‚¹åä¸¤ä½ **/</span></span><br><span class="line">        model.setTotalAmount(amout);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** è®¢å•æè¿° **/</span></span><br><span class="line">        model.setBody(orderDesc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** ä¸šåŠ¡æ‰©å±•å‚æ•° **/</span></span><br><span class="line">        <span class="comment">//ExtendParams extendParams = new ExtendParams();</span></span><br><span class="line">        <span class="comment">/** èŠ±å‘—åˆ†æœŸå‚æ•°ä¼ å€¼å‰æï¼šå¿…é¡»æœ‰è¯¥æ¥å£èŠ±å‘—æ”¶æ¬¾å‡†å…¥æ¡ä»¶ï¼Œä¸”éœ€ç­¾çº¦èŠ±å‘—åˆ†æœŸ **/</span></span><br><span class="line">        <span class="comment">/** æŒ‡å®šå¯é€‰æœŸæ•°ï¼Œåªæ”¯æŒ3/6/12æœŸï¼Œè¿˜æ¬¾æœŸæ•°è¶Šé•¿æ‰‹ç»­è´¹è¶Šé«˜ **/</span></span><br><span class="line">        <span class="comment">// extendParams.setHbFqNum(&quot;3&quot;);</span></span><br><span class="line">        <span class="comment">/** æŒ‡å®šèŠ±å‘—åˆ†æœŸæ‰‹ç»­è´¹æ‰¿æ‹…æ–¹å¼ï¼Œæ‰‹ç»­è´¹å¯ä»¥ç”±ç”¨æˆ·å…¨æ‰¿æ‹…ï¼ˆè¯¥å€¼ä¸º0ï¼‰ï¼Œä¹Ÿå¯ä»¥å•†æˆ·å…¨æ‰¿æ‹…ï¼ˆè¯¥å€¼ä¸º100ï¼‰ï¼Œä½†ä¸å¯ä»¥å…±åŒæ‰¿æ‹…ï¼Œå³ä¸å¯å–0å’Œ100å¤–çš„å…¶ä»–å€¼ã€‚ **/</span></span><br><span class="line">        <span class="comment">//extendParams.setHbFqSellerPercent(&quot;0&quot;);</span></span><br><span class="line">        <span class="comment">//model.setExtendParams(extendParams);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/** å°†ä¸šåŠ¡å‚æ•°ä¼ è‡³requestä¸­ **/</span></span><br><span class="line">        alipayRequest.setBizModel(model);</span><br><span class="line">        <span class="comment">/** æ³¨ï¼šæ”¯ä»˜ç»“æœä»¥å¼‚æ­¥é€šçŸ¥ä¸ºå‡†ï¼Œä¸èƒ½ä»¥åŒæ­¥è¿”å›ä¸ºå‡†ï¼Œå› ä¸ºå¦‚æœå®é™…æ”¯ä»˜æˆåŠŸï¼Œä½†å› ä¸ºå¤–åŠ›å› ç´ ï¼Œå¦‚æ–­ç½‘ã€æ–­ç”µç­‰å¯¼è‡´é¡µé¢æ²¡æœ‰è·³è½¬ï¼Œåˆ™æ— æ³•æ¥æ”¶åˆ°åŒæ­¥é€šçŸ¥ï¼›**/</span></span><br><span class="line">        <span class="comment">/** åŒæ­¥é€šçŸ¥åœ°å€ï¼Œä»¥httpæˆ–è€…httpså¼€å¤´ï¼Œæ”¯ä»˜å®Œæˆåè·³è½¬çš„åœ°å€ï¼Œç”¨äºç”¨æˆ·è§†è§‰æ„ŸçŸ¥æ”¯ä»˜å·²æˆåŠŸï¼Œä¼ å€¼å¤–ç½‘å¯ä»¥è®¿é—®çš„åœ°å€ï¼Œå¦‚æœåŒæ­¥æœªè·³è½¬å¯å‚è€ƒè¯¥æ–‡æ¡£è¿›è¡Œç¡®è®¤ï¼šhttps://opensupport.alipay.com/support/helpcenter/193/201602474937 **/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">returnUrl</span> <span class="operator">=</span> <span class="string">&quot;å¯ä»¥æ˜¯ä¸€ä¸ªè‡ªå·±çš„å¤–ç½‘å¯ä»¥è®¿é—®çš„é¡µé¢ï¼Œä¹Ÿå¯ä»¥ä¸ºç©ºï¼Œç”¨äºæ”¯ä»˜å®Œæˆåé¡µé¢è·³è½¬&quot;</span>;</span><br><span class="line"></span><br><span class="line">        alipayRequest.setReturnUrl(returnUrl);</span><br><span class="line">        <span class="comment">/** å¼‚æ­¥é€šçŸ¥åœ°å€ï¼Œä»¥httpæˆ–è€…httpså¼€å¤´ï¼Œå•†æˆ·å¤–ç½‘å¯ä»¥postè®¿é—®çš„å¼‚æ­¥åœ°å€ï¼Œç”¨äºæ¥æ”¶æ”¯ä»˜å®è¿”å›çš„æ”¯ä»˜ç»“æœï¼Œå¦‚æœæœªæ”¶åˆ°è¯¥é€šçŸ¥å¯å‚è€ƒè¯¥æ–‡æ¡£è¿›è¡Œç¡®è®¤ï¼šhttps://opensupport.alipay.com/support/helpcenter/193/201602475759 **/</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">notifyUrl</span> <span class="operator">=</span> <span class="string">&quot;å¼‚æ­¥é€šçŸ¥åœ°å€&quot;</span>;</span><br><span class="line"></span><br><span class="line">        alipayRequest.setNotifyUrl(notifyUrl);</span><br><span class="line">        <span class="comment">/** ç¬¬ä¸‰æ–¹è°ƒç”¨ï¼ˆæœåŠ¡å•†æ¨¡å¼ï¼‰ï¼Œä¼ å€¼app_auth_tokenåï¼Œä¼šæ”¶æ¬¾è‡³æˆæƒapp_auth_tokenå¯¹åº”å•†å®¶è´¦å·ï¼Œå¦‚ä½•è·ä¼ å€¼app_auth_tokenè¯·å‚è€ƒæ–‡æ¡£ï¼šhttps://opensupport.alipay.com/support/helpcenter/79/201602494631 **/</span></span><br><span class="line">        <span class="comment">//request.putOtherTextParam(&quot;app_auth_token&quot;, &quot;ä¼ å…¥è·å–åˆ°çš„app_auth_tokenå€¼&quot;);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">form</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">/** è°ƒç”¨SDKç”Ÿæˆè¡¨å•formè¡¨å• **/</span></span><br><span class="line"><span class="comment">//            form = alipayClient.pageExecute(alipayRequest).getBody();</span></span><br><span class="line">            <span class="comment">/** è°ƒç”¨SDKç”Ÿæˆæ”¯ä»˜é“¾æ¥ï¼Œå¯åœ¨æµè§ˆå™¨æ‰“å¼€é“¾æ¥è¿›å…¥æ”¯ä»˜é¡µé¢ **/</span></span><br><span class="line">            form = alipayClient.pageExecute(alipayRequest, <span class="string">&quot;GET&quot;</span>).getBody();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (AlipayApiException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** è·å–æ¥å£è°ƒç”¨ç»“æœï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå¯æ ¹æ®è¿”å›é”™è¯¯ä¿¡æ¯åˆ°è¯¥æ–‡æ¡£å¯»æ‰¾æ’æŸ¥æ–¹æ¡ˆï¼šhttps://opensupport.alipay.com/support/helpcenter/97 **/</span></span><br><span class="line"><span class="comment">//        System.out.println(form);</span></span><br><span class="line"><span class="comment">//        response.setContentType(&quot;text/html;charset=&quot; + &quot;utf-8&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/** ç›´æ¥å°†å®Œæ•´çš„è¡¨å•htmlè¾“å‡ºåˆ°é¡µé¢ **/</span></span><br><span class="line"><span class="comment">//        response.getWriter().write(form);</span></span><br><span class="line"><span class="comment">//        response.getWriter().flush();</span></span><br><span class="line">        <span class="keyword">return</span> form;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ”¯ä»˜å® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ”¯ä»˜å®å¼‚æ­¥é€šçŸ¥</title>
      <link href="/2021/07/13/java%E6%94%AF%E4%BB%98%E5%AE%9D%E5%BC%82%E6%AD%A5%E9%80%9A%E7%9F%A5/"/>
      <url>/2021/07/13/java%E6%94%AF%E4%BB%98%E5%AE%9D%E5%BC%82%E6%AD%A5%E9%80%9A%E7%9F%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>JaråŒ…ä¾èµ–</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- AliPay Old --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alipay.sdk&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;alipay-sdk-java&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">4.12</span><span class="number">.4</span>.ALL&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>æ”¯ä»˜å®APIï¼Œå¼‚æ­¥é€šçŸ¥ï¼š<a href="https://opendocs.alipay.com/support/01raw4" title="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£</a> è¯´åˆ°è¿™ä¸€ç‚¹ï¼Œæ”¯ä»˜å®è¿˜æ˜¯æ¯”è¾ƒå®åœ¨çš„ï¼Œè°ƒç”¨APIæ•´ä¸ªè¿‡ç¨‹ä¸èŠ±ä¸€åˆ†é’±ï¼Œè€Œä¸”æ–‡æ¡£è¯¦ç»†ï¼Œäººå·¥æœåŠ¡å¾ˆå¥½è”ç³»ï¼Œè¿™ç‚¹å¾®ä¿¡æ”¯ä»˜åº”è¯¥å­¦ä¹ ä¸€ä¸‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¯ä»˜å®å¼‚æ­¥é€šçŸ¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(value = &quot;aliPayCallBack&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">aliPayCallBack</span><span class="params">(HttpServletRequest request)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Map&lt;String, String[]&gt; requestParameterMap = request.getParameterMap();</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//å¼‚æ­¥éªŒç­¾</span></span><br><span class="line">    log.info(<span class="string">&quot;[æ”¯ä»˜_æ”¯ä»˜å®]å¼€å§‹å¼‚æ­¥éªŒç­¾&quot;</span>);</span><br><span class="line">    map = AliPayUtil.asyncSignVerify(requestParameterMap);</span><br><span class="line">    <span class="type">String</span> <span class="variable">notice</span> <span class="operator">=</span> <span class="string">&quot;fail&quot;</span>;</span><br><span class="line">    <span class="comment">//éªŒç­¾æˆåŠŸ</span></span><br><span class="line">    <span class="keyword">if</span> ((<span class="type">boolean</span>) map.get(<span class="string">&quot;succ&quot;</span>)) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;[æ”¯ä»˜_æ”¯ä»˜å®]éªŒç­¾æˆåŠŸ!&quot;</span>);</span><br><span class="line">        <span class="comment">//è·å–æ”¯ä»˜çŠ¶æ€</span></span><br><span class="line">        LinkedHashMap&lt;String, String&gt; linkedHashMap = (LinkedHashMap&lt;String, String&gt;) map.get(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">trade_status</span> <span class="operator">=</span> linkedHashMap.get(<span class="string">&quot;trade_status&quot;</span>);</span><br><span class="line">        <span class="keyword">switch</span> (trade_status) &#123;</span><br><span class="line">            <span class="comment">//ç­‰å¾…ä¹°å®¶ä»˜æ¬¾</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;WAIT_BUYER_PAY&quot;</span>:</span><br><span class="line">                <span class="comment">/**todo ä¸šåŠ¡å¤„ç†ï¼Œçœç•¥ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚**/</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">//æœªä»˜æ¬¾äº¤æ˜“è¶…æ—¶å…³é—­ï¼Œæˆ–æ”¯ä»˜å®Œæˆåå…¨é¢é€€æ¬¾ã€‚</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;TRADE_CLOSED&quot;</span>:</span><br><span class="line">                <span class="comment">/**todo ä¸šåŠ¡å¤„ç†ï¼Œçœç•¥ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚**/</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">//äº¤æ˜“ç»“æŸï¼Œä¸å¯é€€æ¬¾ã€‚</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;TRADE_FINISHED&quot;</span>:</span><br><span class="line">                <span class="comment">/**todo ä¸šåŠ¡å¤„ç†ï¼Œçœç•¥ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚**/</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">//æ›´æ–°è®¢å•å®Œæˆæ—¶é—´</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">//äº¤æ˜“æ”¯ä»˜æˆåŠŸã€‚</span></span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;TRADE_SUCCESS&quot;</span>:</span><br><span class="line">                <span class="comment">/**todo ä¸šåŠ¡å¤„ç†ï¼Œçœç•¥ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚**/</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                *æ³¨æ„å¼‚æ­¥é€šçŸ¥å¤„ç†å®Œæˆåï¼Œå¿…é¡»è¿”å›ç»™æ”¯ä»˜å®ï¼šsuccess è¿™å‡ ä¸ªå­—ç¬¦</span></span><br><span class="line"><span class="comment">                *æˆ–è€…HttpServletResponseè¾“å‡ºï¼Œè¯¦æƒ…çœ‹å®˜æ–¹æ–‡æ¡£</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                notice = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;[æ”¯ä»˜_æ”¯ä»˜å®]éªŒç­¾å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é»˜è®¤è¿”å›éªŒç­¾å¤±è´¥,æ”¯ä»˜å®ä¼šä»¥ä¸€å®šæ—¶é—´é—´éš”æŒç»­é€šçŸ¥</span></span><br><span class="line">    <span class="keyword">return</span> notice;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å·¥å…·ç±»-x2F-æ–¹æ³•"><a href="#å·¥å…·ç±»-x2F-æ–¹æ³•" class="headerlink" title="å·¥å…·ç±»&#x2F;æ–¹æ³•"></a>å·¥å…·ç±»&#x2F;æ–¹æ³•</h2><p>éªŒç­¾æ–¹æ³• AliPayUtil.asyncSignVerify() JaråŒ…ä¾èµ–ï¼Œä¸»è¦æ˜¯StringUtilsè¿™ä¸ªå·¥å…·ç±»çš„</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.4</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¼‚æ­¥éªŒç­¾</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> requestParameterMap</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> AlipayApiException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String, Object&gt; <span class="title function_">asyncSignVerify</span><span class="params">(Map&lt;String, String[]&gt; requestParameterMap)</span> </span><br><span class="line">        <span class="keyword">throws</span> AlipayApiException &#123;</span><br><span class="line">    <span class="comment">//ç¼–ç æ ¼å¼,ä¿®æ”¹æˆä½ è‡ªå·±çš„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">charset</span> <span class="operator">=</span> <span class="string">&quot;utf-8&quot;</span>;</span><br><span class="line">    <span class="comment">//æ”¯ä»˜å®å…¬é’¥,ä¿®æ”¹æˆä½ è‡ªå·±çš„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">alipaypublicKey</span> <span class="operator">=</span> <span class="string">&quot;æ”¯ä»˜å®å…¬é’¥&quot;</span>;</span><br><span class="line">    <span class="comment">//ç­¾åæ–¹å¼,ä¿®æ”¹æˆä½ è‡ªå·±çš„</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">sign_type</span> <span class="operator">=</span> <span class="string">&quot;RSA2&quot;</span>;</span><br><span class="line">    <span class="comment">//æ‹¼æ¥è¿”å›å†…å®¹</span></span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (Map.Entry&lt;String, String[]&gt; stringEntry : requestParameterMap.entrySet()) &#123;</span><br><span class="line">        builder.append(stringEntry.getKey()).append(<span class="string">&quot;=&quot;</span>).</span><br><span class="line">                append(StringUtils.removeEnd(</span><br><span class="line">                        StringUtils.removeStart(Arrays.toString(</span><br><span class="line">                                stringEntry.getValue()), <span class="string">&quot;[&quot;</span>), <span class="string">&quot;]&quot;</span>))</span><br><span class="line">                .append(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">String</span> <span class="variable">resultInfo</span> <span class="operator">=</span> StringUtils.removeEnd(builder.toString(), <span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    log.info(<span class="string">&quot;[æ”¯ä»˜_æ”¯ä»˜å®]å¾…éªŒç­¾å†…å®¹:&#123;&#125;&quot;</span>, resultInfo);</span><br><span class="line">    <span class="comment">//å¯¹å¾…ç­¾åå­—ç¬¦ä¸²æ•°æ®é€šè¿‡&amp;è¿›è¡Œæ‹†åˆ†</span></span><br><span class="line">    String[] temp = resultInfo.split(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">    LinkedHashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String, String&gt;();</span><br><span class="line">    <span class="comment">//æŠŠæ‹†åˆ†æ•°æ®æ”¾åœ¨mapé›†åˆå†…</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">        String[] arr = temp[i].split(<span class="string">&quot;=&quot;</span>, <span class="number">2</span>); <span class="comment">//é€šè¿‡&quot;=&quot;å·åˆ†å‰²æˆ2ä¸ªæ•°æ®</span></span><br><span class="line">        String[] tempAagin = <span class="keyword">new</span> <span class="title class_">String</span>[arr.length]; <span class="comment">//å†å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ç”¨æ¥æ¥æ”¶åˆ†å‰²åçš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line">            tempAagin[j] = arr[j];</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(tempAagin[<span class="number">0</span>], tempAagin[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">flg</span> <span class="operator">=</span> AlipaySignature.rsaCheckV1(map, alipaypublicKey, charset, sign_type);</span><br><span class="line">    HashMap&lt;String, Object&gt; objectHashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    objectHashMap.put(<span class="string">&quot;data&quot;</span>, map);</span><br><span class="line">    objectHashMap.put(<span class="string">&quot;succ&quot;</span>, flg);</span><br><span class="line">    <span class="keyword">return</span> objectHashMap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ”¯ä»˜å® </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¾®ä¿¡æ”¯ä»˜å›è°ƒé€šçŸ¥</title>
      <link href="/2021/07/12/java%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%9B%9E%E8%B0%83%E9%80%9A%E7%9F%A5/"/>
      <url>/2021/07/12/java%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E5%9B%9E%E8%B0%83%E9%80%9A%E7%9F%A5/</url>
      
        <content type="html"><![CDATA[<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- WeChat Pay --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.wechatpay-apiv3&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;wechatpay-apache-httpclient&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.2</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.wxpay&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;wxpay-sdk&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.0</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>å¾®ä¿¡æ”¯ä»˜ï¼Œæ”¯ä»˜ç»“æœé€šçŸ¥ï¼š<a href="https://pay.weixin.qq.com/wiki/doc/api/native.php?chapter=9_7&index=8" title="å®˜æ–¹åœ°å€">å®˜æ–¹åœ°å€</a> ä¸»è¦æ–¹æ³•ï¼Œå·¥å…·ç±»åœ¨ä¸‹æ–¹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¾®ä¿¡æ”¯ä»˜å›è°ƒé€šçŸ¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;wXCallBack&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">wXCallBack</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">ServletInputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    inputStream = request.getInputStream();</span><br><span class="line">    <span class="type">String</span> <span class="variable">notifyXml</span> <span class="operator">=</span> StreamUtil.inputStreamString(inputStream, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">//éªŒç­¾</span></span><br><span class="line">    <span class="keyword">if</span> (WXPayUtil.isSignatureValid(notifyXml, <span class="string">&quot;your key&quot;</span>)) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;[æ”¯ä»˜_å¾®ä¿¡æ”¯ä»˜]éªŒç­¾æˆåŠŸï¼&quot;</span>);</span><br><span class="line">        <span class="comment">//è§£æè¿”å›ç»“æœ</span></span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> WeChatPayUtil.xmlToJson(notifyXml);</span><br><span class="line">        <span class="type">String</span> <span class="variable">result_code</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;result_code&quot;</span>);</span><br><span class="line">        <span class="comment">//åˆ¤æ–­æ˜¯å¦æ”¯ä»˜æˆåŠŸ</span></span><br><span class="line">        <span class="keyword">if</span> (result_code.equals(WXPayConstants.SUCCESS)) &#123;</span><br><span class="line">            <span class="comment">/**todo å¤„ç†ä¸šåŠ¡ çœç•¥ï¼Œæ ¹æ®è‡ªå·±ä¸šåŠ¡è¡¥å…… **/</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//æ”¯ä»˜æˆåŠŸï¼Œå›ä¼ é€šçŸ¥å¾®ä¿¡å·²æ”¶åˆ°äº¤æ˜“æˆåŠŸé€šçŸ¥</span></span><br><span class="line">            HashMap&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            map.put(<span class="string">&quot;return_code&quot;</span>, <span class="string">&quot;SUCCESS&quot;</span>);</span><br><span class="line">            map.put(<span class="string">&quot;return_msg&quot;</span>, <span class="string">&quot;OK&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">resultXml</span> <span class="operator">=</span> WXPayUtil.mapToXml(map);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/xml&quot;</span>);</span><br><span class="line">            log.info(<span class="string">&quot;[æ”¯ä»˜_å¾®ä¿¡æ”¯ä»˜]é€šçŸ¥å·²å¤„ç†&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> resultXml;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¾®ä¿¡æ”¶åˆ°æ ¡éªŒå¤±è´¥çš„ç»“æœåï¼Œä¼šä»¥ä¸€å®šæ—¶é—´é—´éš”æŒç»­è°ƒç”¨è¯¥è¿”å›ç»“æœ</span></span><br><span class="line">    Map&lt;String, String&gt; returnMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    returnMap.put(<span class="string">&quot;return_code&quot;</span>, <span class="string">&quot;FAIL&quot;</span>);</span><br><span class="line">    returnMap.put(<span class="string">&quot;return_msg&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">returnXml</span> <span class="operator">=</span> WXPayUtil.mapToXml(returnMap);</span><br><span class="line">    log.info(<span class="string">&quot;[æ”¯ä»˜_å¾®ä¿¡æ”¯ä»˜]å¤„ç†å¤±è´¥ï¼&quot;</span>);</span><br><span class="line">    response.setContentType(<span class="string">&quot;text/xml&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> returnXml;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>StreamUtil</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created with IDEA</span></span><br><span class="line"><span class="comment"> * Author: www.itze.cn</span></span><br><span class="line"><span class="comment"> * Date: 2021-07-07</span></span><br><span class="line"><span class="comment"> * Emailï¼šgitlab@111.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">_buffer_size</span> <span class="operator">=</span> <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * InputStreamæµè½¬æ¢æˆStringå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> inStream InputStreamæµ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> encoding ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Stringå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">inputStreamString</span><span class="params">(InputStream inStream, String encoding)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">outStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (inStream != <span class="literal">null</span>) &#123;</span><br><span class="line">                outStream = <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">                <span class="type">byte</span>[] tempBytes = <span class="keyword">new</span> <span class="title class_">byte</span>[_buffer_size];</span><br><span class="line">                <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">while</span> ((count = inStream.read(tempBytes, <span class="number">0</span>, _buffer_size)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    outStream.write(tempBytes, <span class="number">0</span>, count);</span><br><span class="line">                &#125;</span><br><span class="line">                outStream.flush();</span><br><span class="line">                result = <span class="keyword">new</span> <span class="title class_">String</span>(outStream.toByteArray(), encoding);</span><br><span class="line">                outStream.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            result = <span class="literal">null</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (inStream != <span class="literal">null</span>) inStream.close();</span><br><span class="line">                <span class="keyword">if</span> (outStream != <span class="literal">null</span>) outStream.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>WeChatPayUtil.xmlToJson() éœ€è¦Jarä¾èµ–</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- è§£æxml --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.dom4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;dom4j&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.1</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£æå­—ç¬¦ä¸²å½¢å¼çš„XMLå†…å®¹</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> xmlContent</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@throws</span> DocumentException</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> JSONObject <span class="title function_">xmlToJson</span><span class="params">(String xmlContent)</span> <span class="keyword">throws</span> DocumentException &#123;</span><br><span class="line">    <span class="type">Document</span> <span class="variable">document</span> <span class="operator">=</span> DocumentHelper.parseText(xmlContent);</span><br><span class="line">    <span class="type">Element</span> <span class="variable">rootElement</span> <span class="operator">=</span> document.getRootElement();</span><br><span class="line">    <span class="type">Iterator</span> <span class="variable">iterator</span> <span class="operator">=</span> rootElement.elementIterator();</span><br><span class="line">    <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        <span class="type">DefaultElement</span> <span class="variable">defaultElement</span> <span class="operator">=</span> (DefaultElement) iterator.next();</span><br><span class="line">        jsonObject.fluentPut(defaultElement.getName(), defaultElement.getStringValue());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> jsonObject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>WXPayUtilã€WXPayConstantsè¿™ä¸¤ä¸ªæœ€ä¸Šæ–¹å¾®ä¿¡å®˜æ–¹ä¾èµ–ä¸­å¸¦æœ‰</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¾®ä¿¡æ”¯ä»˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡æ”¯ä»˜ï¼šå½“å‰å•†æˆ·å·æš‚ä¸æ”¯æŒå…³è”è¯¥ç±»å‹çš„AppID</title>
      <link href="/2021/07/12/%E5%BD%93%E5%89%8D%E5%95%86%E6%88%B7%E5%8F%B7%E6%9A%82%E4%B8%8D%E6%94%AF%E6%8C%81%E5%85%B3%E8%81%94%E8%AF%A5%E7%B1%BB%E5%9E%8B%E7%9A%84appid/"/>
      <url>/2021/07/12/%E5%BD%93%E5%89%8D%E5%95%86%E6%88%B7%E5%8F%B7%E6%9A%82%E4%B8%8D%E6%94%AF%E6%8C%81%E5%85%B3%E8%81%94%E8%AF%A5%E7%B1%BB%E5%9E%8B%E7%9A%84appid/</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>éœ€è¦ä½¿ç”¨PCç«¯æ‰«ç å¾®ä¿¡æ”¯ä»˜ï¼ŒæŸ¥é˜…å¾®ä¿¡æ”¯ä»˜APIæ–‡æ¡£ï¼Œç¬¦åˆéœ€æ±‚çš„æ˜¯Nativeæ”¯ä»˜æ¨¡å¼</p><h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><p>é¦–å…ˆåæ§½ä¸€ä¸‹å¾®ä¿¡æ”¯ä»˜ï¼Œæé‚£ä¹ˆå¤šè´¦å·å¹²å•¥ï¼Œ<a href="https://mp.weixin.qq.com/" title="å…¬ä¼—å·å¹³å°">å…¬ä¼—å·å¹³å°</a>ï¼Œ<a href="https://pay.weixin.qq.com/index.php/core/home/login" title="å•†æˆ·å¹³å°">å•†æˆ·å¹³å°</a>ï¼Œå¼€æ”¾å¹³å°ï¼Œè€Œä¸”æ¯ä¸ªè´¦æˆ·ä¸æƒ³é€šï¼Œå¼€é€šè´¦æˆ·æƒ³è¦ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜è®¤è¯è¿˜è¦èŠ±é’±ï¼Œä¸€ä¸ªè®¤è¯300å—ï¼Œè®¤è¯åˆ°æœ€åäº†ï¼Œç»‘å®šAppIDå»äº†ï¼Œæç¤ºä¸ªï¼šå½“å‰å•†æˆ·å·æš‚ä¸æ”¯æŒå…³è”è¯¥ç±»å‹çš„AppIDï¼ŒçœŸæ²¡è°äº†ï¼Œæ‰¾äººå·¥ä¹Ÿéš¾ï¼Œè¿™å¾ˆè…¾è®¯ <strong>1.éœ€è¦è®¤è¯çš„å…¬ä¼—å·è®¢é˜…å·æˆ–è€…æœåŠ¡å·æˆ–è€…åª’ä½“ç±»è®¢é˜…å·å…¬ä¼—å· 2.å¾®ä¿¡å•†æˆ·å¹³å°è´¦æˆ·</strong></p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>PCç½‘ç«™ï¼Œè¦å¼€é€šäºŒç»´ç æ‰«ç æ”¯ä»˜ï¼Œç”³è¯·ä½¿ç”¨NATIVEæ–¹å¼æ”¯ä»˜ï¼ŒæŒ‰ç…§æ–‡æ¡£å¼•å¯¼ï¼Œéœ€è¦å•†æˆ·IDå’Œappidç»‘å®šï¼Œç™»é™†å•†æˆ·å¹³å°æ·»åŠ appiç»‘å®šå¾®ä¿¡è®¤è¯çš„è®¢é˜…å·å…¬ä¼—å·appid ,æç¤ºï¼šå½“å‰å•†æˆ·å·æš‚ä¸æ”¯æŒå…³è”è¯¥ç±»å‹çš„AppIDï¼Œç„¶åå»å¾®ä¿¡å¼€æ”¾å¹³å°åˆèŠ±300å—è®¤è¯å¼€å‘è€…èµ„è´¨ï¼Œç”³è¯·ç½‘ç«™åº”ç”¨ï¼Œç»™å‡ºä¸€ä¸ªappidå»ç»‘å®šï¼Œè¿˜æ˜¯æç¤ºå½“å‰å•†æˆ·å·æš‚ä¸æ”¯æŒå…³è”è¯¥ç±»å‹çš„AppID</p><h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>PCç½‘ç«™ï¼Œéœ€è¦å¼€é€šæ‰«æäºŒç»´ç æ”¯ä»˜ ç”±äºæˆ‘ä»¬çš„å…¬ä¼—å·æ˜¯è®¤è¯çš„è®¢é˜…å·ï¼Œå¹¶ä¸æ˜¯æœåŠ¡å·ï¼Œè€Œä¸”ä¹Ÿä¸å±äºåª’ä½“ç±»å‹çš„è®¢é˜…å·ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ç»‘å®šå…¬ä¼—å·AppIDæç¤ºå¹¶æ”¯æŒï¼Œåæ¥å»<a href="https://open.weixin.qq.com/" title="å¼€æ”¾å¹³å°">å¼€æ”¾å¹³å°</a> æ³¨å†Œäº†è´¦æˆ·ï¼ŒåˆèŠ±äº†300å—è®¤è¯äº†å¼€å‘è€…èµ„è´¨è®¤è¯ï¼Œç”³è¯·å¼€é€šäº†ç½‘ç«™åº”ç”¨ï¼Œå¼€é€šä¹‹åï¼Œå‘ç°æœ‰å¾®ä¿¡æ”¯ä»˜èƒ½åŠ›ï¼Œæ‰“ç”µè¯é—®å®¢æœè¯´ç½‘ç«™åº”ç”¨ä¸æ”¯æŒå¾®ä¿¡æ”¯ä»˜ï¼Œæˆ‘å»ï¼Œä¸æ”¯æŒä½ æ”¾ç€å¹²å•¥ï¼Œ <img src="https://www.itze.cn/wp-content/uploads/2021/07/%E7%BD%91%E7%AB%99%E5%BA%94%E7%94%A8.png"></p><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>ç”±äºæˆ‘ä»¬æ˜¯è®¤è¯çš„å…¬ä¼—å·è®¢é˜…å·ï¼Œæ³¨æ„å…¬ä¼—å·è®¤è¯éœ€è¦èŠ±è´¹300å—ï¼Œç™»é™†<a href="https://mp.weixin.qq.com/" title="å¾®ä¿¡å…¬ä¼—å¹³å°">å¾®ä¿¡å…¬ä¼—å¹³å°</a> åœ¨é‡Œé¢ç”³è¯·æ³¨å†Œå¾®ä¿¡å°ç¨‹åºï¼Œç”±äºå…¬ä¼—å·å·²ç»è®¤è¯ï¼Œæ³¨å†Œå®Œæˆä¹‹åä¼šè‡ªåŠ¨å…³è”è®¤è¯ï¼Œä¸éœ€è¦å†èŠ±è´¹è®¤è¯ï¼æ³¨å†Œå®Œæˆå¾®ä¿¡å°ç¨‹åºä¹‹åä¼šæœ‰<strong>AppID</strong> è¿™ä¸ªå°ç¨‹åºå¯ä»¥ä¸ç”¨å‘å¸ƒï¼Œä¸ç”¨å¼€å‘ï¼Œæˆ‘ä»¬åªè¦ä»–çš„AppID ç„¶åå»<a href="https://pay.weixin.qq.com/index.php/core/home/login" title="å¾®ä¿¡å•†æˆ·å¹³å°">å¾®ä¿¡å•†æˆ·å¹³å°</a> äº§å“ä¸­å¿ƒ-å¼€é€šNaviteæ”¯ä»˜ ç„¶åç»‘å®šå¼€é€šè®¤è¯çš„å¾®ä¿¡å°ç¨‹åºAppID,å‘èµ·æˆæƒç»‘å®šï¼Œç„¶åå»ç™»é™†å¾®ä¿¡å°ç¨‹åºåå°ï¼Œç¡®è®¤æ¥å—ç»‘å®šå³å¯ï¼ <strong>äº§å“ä¸­å¿ƒ-å¼€é€šNative</strong> <img src="https://www.itze.cn/wp-content/uploads/2021/07/Navite.png"> <strong>ç»‘å®šAppID</strong> <img src="https://www.itze.cn/wp-content/uploads/2021/07/%E7%BB%91%E5%AE%9AAppID.png"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å¾®ä¿¡æ”¯ä»˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡éªŒè¯ç è£‚å¼€é—®é¢˜</title>
      <link href="/2021/06/30/%E8%AE%B0%E4%B8%80%E6%AC%A1%E9%AA%8C%E8%AF%81%E7%A0%81%E8%A3%82%E5%BC%80%E9%97%AE%E9%A2%98/"/>
      <url>/2021/06/30/%E8%AE%B0%E4%B8%80%E6%AC%A1%E9%AA%8C%E8%AF%81%E7%A0%81%E8%A3%82%E5%BC%80%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>æ•°æ®åº“ï¼šMsql 8.0</li><li>Dockerç‰ˆæœ¬ï¼š20.10</li></ul><h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ç”Ÿäº§ç¯å¢ƒã€é¢„å‘ç¯å¢ƒã€æ‰€æœ‰éªŒè¯ç éƒ½è£‚å¼€</p><h3 id="åˆ†æåŠè§£å†³"><a href="#åˆ†æåŠè§£å†³" class="headerlink" title="åˆ†æåŠè§£å†³"></a>åˆ†æåŠè§£å†³</h3><p>å‘ç°è¯·æ±‚éªŒè¯ç çš„æ¥å£çŠ¶æ€ä¸€ç›´åœ¨pendingï¼Œæƒ³åˆ°éªŒè¯ç æ˜¯è¦å¾€æ•°æ®åº“ä¸­å†™å…¥å­˜å‚¨ï¼Œä½¿ç”¨navicatè¿æ¥æ•°æ®åº“å‘ç°ï¼Œæ­£å¸¸è¿æ¥ï¼ŒXShellè¿æ¥æœåŠ¡å™¨ï¼Œç”±äºæ•°æ®åº“ä½¿ç”¨dockerè¿è¡Œ æŸ¥çœ‹åœ¨è¿è¡Œå®¹å™¨åŠå¤§å°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -s</span><br></pre></td></tr></table></figure><p>åœ¨æ­£å¸¸è¿è¡Œï¼Œå¿ƒæƒ³é‡å¯ä¸€ä¸‹dokcerä¸­æ•°æ®åº“å®¹å™¨ï¼Œäºæ˜¯é‡å¯å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker restart å®¹å™¨åç§°</span><br></pre></td></tr></table></figure><p>é‡å¯ä¹‹åå‘ç°navicatéƒ½è¿æ¥ä¸ä¸Šäº†ï¼Œæœ¬æ¥è¿˜èƒ½è¿æ¥ï¼Œä½¿ç”¨telnetå‘½ä»¤pingä¸€ä¸‹æœåŠ¡å™¨æ•°æ®åº“ç«¯å£ï¼Œå‘ç°pingé€šï¼Œå›åˆ°æœåŠ¡å™¨ï¼Œå°è¯•é‡å¯docker</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure><p>dockeré‡å¯ä¹‹åï¼Œç”±äºåˆ›å»ºå®¹å™¨æ—¶è®¾ç½®äº†dockeré‡å¯ä¼šè‡ªåŠ¨å¯åŠ¨ï¼ŒæŸ¥çœ‹å‘ç°æ•°æ®åº“å®¹å™¨æ­£å¸¸å¯åŠ¨ï¼Œå†æ¬¡pingç«¯å£ï¼Œå‘ç°ä»ç„¶pingä¸é€šï¼Œæœ‰ç‚¹ç€æ€¥äº†ï¼Œè‡ªå·±è§‚å¯Ÿå‘ç°åœ¨è¿è¡Œå®¹å™¨çš„PORTSåˆ—ä¸ºç©ºï¼ä¹Ÿå°±æ˜¯è¯´dockerå¯åŠ¨å®¹å™¨ä¹‹åå¹¶æ²¡æœ‰æ˜ å°„ç«¯å£ï¼Œäºæ˜¯å»ç½‘ä¸Šæœç´¢ï¼ŒæŸ¥çœ‹docker å®¹å™¨çš„ç½‘ç»œé…ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker inspect  å®¹å™¨åæˆ–å®¹å™¨idgrep IPAddress</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸­ï¼šIPAddress ä¸ºç©ºï¼æœç„¶dockerç½‘ç»œé…ç½®å‡ºç°äº†é—®é¢˜ <img src="https://www.itze.cn/wp-content/uploads/2021/06/%E6%AD%A3%E5%B8%B8.png"> æŸ¥çœ‹dockerçš„è™šæ‹Ÿç½‘ç»œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœæ­£å¸¸ <img src="https://www.itze.cn/wp-content/uploads/2021/06/docker_network_ls.png"></p><h2 id="é‡ç½®dockerç½‘ç»œ"><a href="#é‡ç½®dockerç½‘ç»œ" class="headerlink" title="é‡ç½®dockerç½‘ç»œ"></a>é‡ç½®dockerç½‘ç»œ</h2><p>åœæ­¢dockeræœåŠ¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure><p>å…³é—­dockerç›¸å…³ç½‘å¡è®¾å¤‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ip link set docker0 down</span><br></pre></td></tr></table></figure><p>åˆ é™¤ docker0æ¡¥æ¥è®¾å¤‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">brctl delbr docker0</span><br></pre></td></tr></table></figure><p>å¦‚æœæç¤ºï¼šbrctl command not fount å®‰è£…brctl</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install bridge-utils -y</span><br></pre></td></tr></table></figure><p>æœ€åå†æ¬¡å¯åŠ¨dockeræœåŠ¡ï¼Œç„¶åå¯åŠ¨ä½ çš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><p>è®¿é—®å‘ç°ï¼Œæ•°æ®åº“æ­£å¸¸è¿æ¥ï¼ŒéªŒè¯ç æ­£å¸¸å‡ºæ¥ï¼Œä½†æ˜¯ï¼æ²¡è¿‡ä¸¤åˆ†é’Ÿï¼Œå‰ç«¯å°±å‘ŠçŸ¥éªŒè¯ç åˆæ²¡äº†ï¼Œæƒ³äº†æƒ³ä¸åº”å•Šï¼ŒæŸ¥çœ‹æœåŠ¡å™¨ç£ç›˜å†…å­˜å‘ç°ç£ç›˜å†…å­˜ä½¿ç”¨ç‡100%ï¼åº”è¯¥æ˜¯ç£ç›˜å†…å­˜ä¸å¤Ÿå†™ä¸è¿›å»å§ï¼Œ æŸ¥çœ‹æœåŠ¡å™¨ç£ç›˜å†…å­˜</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹å¤§æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">du -sh *</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æŒ‡å®šè·¯å¾„ä¸‹æ–‡ä»¶å¤§å°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">du -h /root</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°å‡ ä¸ªæ— ç”¨çš„å¤§æ–‡ä»¶ï¼Œåˆ é™¤ä¹‹åå‘ç°éªŒè¯ç æ¢å¤æ­£å¸¸ï¼Œåç»­æ”¹è¿›å¯ä»¥æŠŠéªŒè¯ç ç¼“å­˜åˆ°Redisä¸­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Java </tag>
            
            <tag> Docker </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>com.mathworks.toolbox.javabuilder.MWException: An error occurred while initializing the component.</title>
      <link href="/2021/06/18/com-mathworks-toolbox-javabuilder-mwexception-an-error-occurred-while-initializing-the-component/"/>
      <url>/2021/06/18/com-mathworks-toolbox-javabuilder-mwexception-an-error-occurred-while-initializing-the-component/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>JDKç‰ˆæœ¬ï¼š1.8.281</li><li>Matlab Runtimeç‰ˆæœ¬ï¼š2019a</li></ul><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>Javaè°ƒç”¨Matlabç”Ÿæˆçš„JaråŒ…ï¼Œå‡ºç°é”™è¯¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">com.mathworks.toolbox.javabuilder.MWException: An error occurred <span class="keyword">while</span> initializing the component.</span><br></pre></td></tr></table></figure><p>ç¯å¢ƒé”™è¯¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Bundle#<span class="number">11</span> start filed: libXt.so<span class="number">.6</span>: cannot open shared object file: No such file or directory</span><br></pre></td></tr></table></figure><p>å…·ä½“ä¸‹å›¾ <img src="https://www.itze.cn/wp-content/uploads/2021/06/ERROE.png"></p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>å¦‚æœä½ çš„åŒæ ·å‡ºç°äº†ä¸Šé¢è¯´çš„ï¼š<strong>ç¯å¢ƒé”™è¯¯</strong>ï¼Œå‡ºç°å…³é”®å­—ï¼šlibXt.so.6ï¼Œæœç´¢åŒä¸€å°æ­£å¸¸èƒ½æ­£å¸¸è¿è¡Œçš„æœºå™¨ï¼Œå‘ç°æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè€Œè¿™å°å‡ºé—®é¢˜çš„å´æ²¡æœ‰ï¼Œè¯´æ˜ç¼ºå°‘è¿™ç±»æ–‡ä»¶ï¼Œäºæ˜¯å»æœèµ„æºï¼Œæ¨èä¸€ä¸ªç½‘ç«™ï¼š<a href="https://pkgs.org/" title="https://pkgs.org">https://pkgs.org</a> <img src="https://www.itze.cn/wp-content/uploads/2021/06/paks.png"> é€‰æ‹©å®‰è£…æ–¹å¼ï¼ŒCentosæ¨èyumæ–¹å¼å®‰è£…ï¼ŒUbuntuçš„aptåº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„ <img src="https://www.itze.cn/wp-content/uploads/2021/06/yum.png"> å®‰è£…å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install libXt</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆé—®é¢˜è§£å†³</p><h3 id="åç»­é—®é¢˜"><a href="#åç»­é—®é¢˜" class="headerlink" title="åç»­é—®é¢˜"></a>åç»­é—®é¢˜</h3><p>ç®€å•çš„Matlabç”Ÿæˆçš„JaråŒ…å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å‘ç°ç”Ÿæˆçš„JaråŒ…æœ‰æ¶‰åŠåˆ°æ·±åº¦å­¦ä¹ çš„å´ä¾ç„¶å‡ºç°é—®é¢˜,å¤§è‡´æ„æ€æ˜¯å†Matlabä¸­å†™çš„æ–¹æ³•å‡½æ•°ï¼šalgoMethod æ²¡æœ‰å®šä¹‰</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">com.mathworks.toolbox.javabuilder.MWException: Undefined function <span class="string">&#x27;algoMethod&#x27;</span> <span class="keyword">for</span> input arguments of type <span class="string">&#x27;uint8&#x27;</span>.</span><br></pre></td></tr></table></figure><h3 id="åç»­é—®é¢˜è§£å†³åŠæ³•"><a href="#åç»­é—®é¢˜è§£å†³åŠæ³•" class="headerlink" title="åç»­é—®é¢˜è§£å†³åŠæ³•"></a>åç»­é—®é¢˜è§£å†³åŠæ³•</h3><p>è¿™ä¸ªåç»­é—®é¢˜çš„è§£å†³æ˜¯åŒäº‹å¯¹æ¯”äº†æ­£å¸¸èƒ½è¿è¡Œæœºå™¨çš„MatlabRuntimeï¼Œæ‰€æœ‰å‚æ•°ã€ç¯å¢ƒéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä»‹äºä¸Šä¸€ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•ï¼Œè€ƒè™‘åˆ°åº”è¯¥ä¹Ÿæ˜¯ç³»ç»Ÿç¯å¢ƒé—®é¢˜ï¼Œå¯¹æ¯”å‘ç°å‡ºé—®é¢˜çš„æœºå™¨lib64æ–‡ä»¶å¤¹ä¸­æ¯”æ­£å¸¸çš„å°‘äº†å‡ ä¸ªæ–‡ä»¶ï¼Œç”±äºä¸¤å°æœºå™¨ç³»ç»Ÿéƒ½æ˜¯CentOS 7.6,äºæ˜¯æŠŠæ­£å¸¸é‚£å°æœºå™¨çš„lib64æ•´ä¸ªæ–‡ä»¶å¤¹æ‰“åŒ…ï¼Œè®°å¾—å…ˆå¤‡ä»½ä¸€ä»½ï¼Œç„¶åä¸Šä¼ åˆ°å‡ºé”™è¯¯é—®é¢˜çš„æœºå™¨ï¼Œå…ˆæŠŠé”™è¯¯çš„è¿™å°æœºå™¨lib64ä¹Ÿå¤‡ä»½ä¸€ä»½ï¼Œç„¶åè§£å‹è¦†ç›–åŸæœ‰lib64æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘ç°é—®é¢˜è§£å†³äº†~</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Linux </category>
          
          <category> MATLAB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> CentOS </tag>
            
            <tag> Java </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlè®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´</title>
      <link href="/2021/05/26/mysql%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/"/>
      <url>/2021/05/26/mysql%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><p>Mysqlç‰ˆæœ¬ï¼š8.0 æ“ä½œç³»ç»Ÿï¼šCentos 7</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>ç¼–è¾‘mysqlçš„é…ç½®æ–‡ä»¶ï¼Œä½ç½®ï¼š&#x2F;etc&#x2F;my.cnf å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/my.cnf</span><br></pre></td></tr></table></figure><p>æ·»åŠ ä»¥ä¸‹è®¾ç½® æ—¶é—´å•ä½æ˜¯ç§’ï¼Œ2592000ç§’&#x3D;30å¤©ï¼Œé»˜è®¤8å°æ—¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wait_timeout=2592000</span><br><span class="line"></span><br><span class="line">interactive_timeout=2592000</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/05/mysqld.png"> é‡å¯mysqlæœåŠ¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯dockerè¿è¡Œçš„mysqlå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker restart mysql_name</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">show variables like &#x27;%timeout%&#x27;;</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2021/05/timeout.png"></p>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸‹ï¼‰</title>
      <link href="/2021/05/20/java%E6%95%B4%E5%90%88redis%E5%8F%8A%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88%E4%B8%8B%EF%BC%89/"/>
      <url>/2021/05/20/java%E6%95%B4%E5%90%88redis%E5%8F%8A%E5%BA%8F%E5%88%97%E5%8C%96%EF%BC%88%E4%B8%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="æ¥Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸Šï¼‰"><a href="#æ¥Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸Šï¼‰" class="headerlink" title="æ¥Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸Šï¼‰"></a><a href="https://www.itze.cn/java/635.html" title="æ¥Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸Šï¼‰">æ¥Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸Šï¼‰</a></h2><p>RedisConfig.javaåºåˆ—åŒ–é…ç½®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.support.spring.GenericFastJsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created with IDEA</span></span><br><span class="line"><span class="comment"> * Author: www.itze.cn</span></span><br><span class="line"><span class="comment"> * Date: 2021-05-18</span></span><br><span class="line"><span class="comment"> * Emailï¼šgitlab@111.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">redisConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®åºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">     * keyè®¾ç½®Stringç±»å‹åºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">     * valueè®¾ç½®é˜¿é‡Œçš„FastJsonåºåˆ—åŒ–</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate <span class="title function_">redisTemplateInit</span><span class="params">()</span> &#123;</span><br><span class="line">        redisTemplate.setKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        redisTemplate.setValueSerializer(<span class="keyword">new</span> <span class="title class_">GenericFastJsonRedisSerializer</span>());</span><br><span class="line">        redisTemplate.setHashKeySerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        redisTemplate.setHashValueSerializer(<span class="keyword">new</span> <span class="title class_">GenericFastJsonRedisSerializer</span>());</span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>é‡ç‚¹ï¼ï¼ï¼åœ¨applicationContext.xmlä¸Šä¸‹æ–‡é…ç½®ä¸­å¼•å…¥application-redis.xml</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;import resource=&quot;classpath:redis/application-redis.xml&quot;/&gt;</span><br></pre></td></tr></table></figure><h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>å¦‚æœapplication-redis.xmlé…ç½®æ–‡ä»¶ä¸­ï¼Œæ ‡æ³¨&lt;â€“ !!!è¿™æ®µä»£ç å¯ä»¥åˆ é™¤ï¼ï¼ï¼â€“&gt;é‡Œé¢åŒ…å«çš„ä»£ç å’ŒRedisConfig.javaåŒæ—¶å­˜åœ¨ï¼ŒSpringå°†ä¼šä»¥RedisConfig.javaä¸ºé«˜ä¼˜å…ˆçº§ä½¿ç”¨è¿‡ï¼Œå¦‚æœé…ç½®äº†RedisConfig.javaï¼Œè®°å¾—åœ¨application-redis.xmlä¸­å¼•å…¥ï¼Œæœ¬æ–‡åœ¨xmlæ–‡ä»¶ä¸­æœ€ä¸‹é¢ï¼Œxmlä¸­æ³¨é‡Šå¯åˆ é™¤çš„ä»£ç å¯æœ‰å¯æ— </p><h2 id="è¡¥å……è¯´æ˜"><a href="#è¡¥å……è¯´æ˜" class="headerlink" title="è¡¥å……è¯´æ˜"></a>è¡¥å……è¯´æ˜</h2><p>é’ˆå¯¹SpringBooté¡¹ç›®ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯SpringBooté¡¹ç›®åªéœ€è¦åœ¨RedisConfig.javaç±»çš„ä¸Šé¢åŠ ä¸Š**@Configuration** æ³¨è§£å³å¯ï¼Œæ— éœ€é…ç½®æ–‡ä»¶ï¼ŒSpringBootå¯åŠ¨æ—¶ä¼šæ‰«æé…ç½®ç±»æ³¨è§£</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
          <category> Spring </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ•´åˆRedisåŠåºåˆ—åŒ–ï¼ˆä¸Šï¼‰</title>
      <link href="/2021/05/19/java%E6%95%B4%E5%90%88redis%E5%8F%8A%E5%BA%8F%E5%88%97%E5%8C%96/"/>
      <url>/2021/05/19/java%E6%95%B4%E5%90%88redis%E5%8F%8A%E5%BA%8F%E5%88%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>é¡¹ç›®ä½¿ç”¨çš„æ˜¯SSMæ¡†æ¶ï¼Œåœ¨å¼•å…¥Redisä¹‹åéœ€è¦å¯¹Redisä¸­æ•°æ®ç±»å‹ç»“æ„ç±»å‹è¿›è¡Œåºåˆ—åŒ–ï¼Œå¦‚æœä¸è¿›è¡Œåºåˆ—åŒ–ï¼Œé‚£ä¹ˆåªèƒ½å­˜å‚¨Stringç±»å‹ï¼Œå¦‚æœå­˜å‚¨å…¶ä»–ç±»å‹å°†ä¼šå‡ºç°ï¼š<strong>canâ€™t cast to String</strong> é”™è¯¯ï¼Œ Spring-data-Redisä¸­æä¾›çš„æœ‰StringRedisSerializerã€JdkSerializationRedisSerializeråºåˆ—åŒ–æ–¹å¼ - StringRedisSerializerï¼šä¸€èˆ¬æ˜¯å¯¹keyè¿›è¡Œåºåˆ—åŒ– - JdkSerializationRedisSerializerï¼šä¸€èˆ¬æ˜¯å¯¹valueè¿›è¡Œåºåˆ—åŒ–</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>ç»è¿‡æµ‹è¯•ä½¿ç”¨åœ¨SSMæ¡†æ¶ä¸­å¼•å…¥Redisï¼Œä»¥xmlé…ç½®æ–‡ä»¶çš„æ–¹å¼å¯¹Redisæ•°æ®ç±»å‹ç»“æ„è¿›è¡Œåºåˆ—åŒ–ï¼Œå¦‚æœkeyã€valueéƒ½æ˜¯ä»¥StringRedisSerializerè¿™ç§æ–¹å¼åºåˆ—åŒ–ï¼Œé‚£ä¹ˆvalueä¹Ÿåªèƒ½æ˜¯Stringç±»å‹ï¼Œå¦‚æœå°†valueæ”¹ä¸ºJdkSerializationRedisSerializeråºåˆ—åŒ–ï¼Œä¸å½±å“æ­£å¸¸ä½¿ç”¨get&#x2F;setï¼Œä½†æ˜¯å¦‚æœåœ¨Rediså¯è§†åŒ–çª—å£å·¥å…·é‡Œã€å¦‚RDM(Redis Desktop Manager)ã€Another Redis Desktop Manager å¯è§†åŒ–å·¥å…·ä¸­æŸ¥çœ‹ä¼šå‡ºç°ä¹±ç é—®é¢˜</p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>keyå€¼ä½¿ç”¨é˜¿é‡Œçš„FastJsonè¿›è¡Œåºåˆ—åŒ–</p><h2 id="å®Œæ•´æµç¨‹"><a href="#å®Œæ•´æµç¨‹" class="headerlink" title="å®Œæ•´æµç¨‹"></a>å®Œæ•´æµç¨‹</h2><p>æ•´åˆRediså®Œæ•´æµç¨‹</p><h3 id="æ·»åŠ Mavenä¾èµ–"><a href="#æ·»åŠ Mavenä¾èµ–" class="headerlink" title="æ·»åŠ Mavenä¾èµ–"></a>æ·»åŠ Mavenä¾èµ–</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-data-redis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.3</span><span class="number">.0</span>.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- redis ä¾èµ– --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;redis.clients&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;jedis&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.4</span><span class="number">.2</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;!-- é˜¿é‡Œå·´å·´ Fastjson --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">1.2</span><span class="number">.49</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šè¿™ä¸¤ä¸ªJaråŒ…çš„ç‰ˆæœ¬å·å¦‚æœä½¿ç”¨è¿‡é«˜å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜</strong></p><h3 id="Redisé…ç½®æ–‡ä»¶"><a href="#Redisé…ç½®æ–‡ä»¶" class="headerlink" title="Redisé…ç½®æ–‡ä»¶"></a>Redisé…ç½®æ–‡ä»¶</h3><p>redis.propertiesæ•°æ®é…ç½®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#Redis</span><br><span class="line">redis.addr = <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">redis.port = <span class="number">12345</span></span><br><span class="line">redis.auth = <span class="number">123456</span></span><br><span class="line">#æœ€å¤§ç©ºé—²æ•°(é»˜è®¤:<span class="number">8</span>)</span><br><span class="line">redis.maxIdle=<span class="number">300</span></span><br><span class="line">#å½“è¿æ¥æ± èµ„æºè€—å°½æ—¶,è°ƒç”¨è€…æœ€å¤§é˜»å¡æ—¶é—´,è¶…æ—¶å°†æŠ›å‡ºå¼‚å¸¸.å•ä½:æ¯«ç§’,é»˜è®¤:-<span class="number">1</span>,è¡¨ç¤ºæ°¸ä¸è¶…æ—¶.</span><br><span class="line">redis.maxWait=<span class="number">1000</span></span><br><span class="line">#æœ€å¤§è¿æ¥æ•°(é»˜è®¤:<span class="number">8</span>)</span><br><span class="line">redis.maxTotal=<span class="number">500</span></span><br><span class="line">#æŒ‡æ˜æ˜¯å¦åœ¨ä»æ± ä¸­å–å‡ºè¿æ¥å‰è¿›è¡Œæ£€éªŒ,å¦‚æœæ£€éªŒå¤±è´¥,åˆ™ä»æ± ä¸­å»é™¤è¿æ¥å¹¶å°è¯•å–å‡ºå¦ä¸€ä¸ª (é»˜è®¤:<span class="literal">false</span>)</span><br><span class="line">redis.testOnBorrow=<span class="literal">true</span></span><br><span class="line">redis.testOnReturn=<span class="literal">true</span></span><br><span class="line">redis.testWhileIdle=<span class="literal">true</span></span><br><span class="line">redis.blockWhenExhausted=<span class="literal">false</span></span><br><span class="line">redis.numTestsPerEvictionRun=<span class="number">1024</span></span><br><span class="line">redis.timeBetweenEvictionRunsMillis=<span class="number">30000</span></span><br><span class="line">redis.minEvictableIdleTimeMillis=<span class="number">1800000</span></span><br><span class="line">redis.maxActive = <span class="number">1024</span></span><br><span class="line">redis.timeOut = <span class="number">10000</span></span><br></pre></td></tr></table></figure><p>application-redis.xmlé…ç½®æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;</span><br><span class="line">            http://www.springframework.org/schema/beans</span><br><span class="line">            http://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">            http://www.springframework.org/schema/context</span><br><span class="line">            http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</span><br><span class="line">    &lt;!--æ‰«æredisé…ç½®æ–‡ä»¶--&gt;</span><br><span class="line">    &lt;context:property-placeholder ignore-unresolvable=&quot;true&quot; location=&quot;classpath:properties/redis.properties&quot;/&gt;</span><br><span class="line">    &lt;!--è®¾ç½®è¿æ¥æ± --&gt;</span><br><span class="line">    &lt;bean id=&quot;poolConfig&quot; class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt;</span><br><span class="line">        &lt;!-- æœ€å¤§ç©ºé—²è¿æ¥æ•° --&gt;</span><br><span class="line">        &lt;property name=&quot;maxIdle&quot; value=&quot;$&#123;redis.maxIdle&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- æœ€å¤§è¿æ¥æ•° --&gt;</span><br><span class="line">        &lt;property name=&quot;maxTotal&quot; value=&quot;$&#123;redis.maxTotal&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- æ¯æ¬¡é‡Šæ”¾è¿æ¥çš„æœ€å¤§æ•°ç›® --&gt;</span><br><span class="line">        &lt;property name=&quot;numTestsPerEvictionRun&quot; value=&quot;$&#123;redis.numTestsPerEvictionRun&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- é‡Šæ”¾è¿æ¥çš„æ‰«æé—´éš”ï¼ˆæ¯«ç§’ï¼‰ --&gt;</span><br><span class="line">        &lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;$&#123;redis.timeBetweenEvictionRunsMillis&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- è¿æ¥æœ€å°ç©ºé—²æ—¶é—´ --&gt;</span><br><span class="line">        &lt;property name=&quot;minEvictableIdleTimeMillis&quot; value=&quot;$&#123;redis.minEvictableIdleTimeMillis&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- è·å–è¿æ¥æ—¶çš„æœ€å¤§ç­‰å¾…æ¯«ç§’æ•°,å°äºé›¶:é˜»å¡ä¸ç¡®å®šçš„æ—¶é—´,é»˜è®¤-1 --&gt;</span><br><span class="line">        &lt;property name=&quot;maxWaitMillis&quot; value=&quot;$&#123;redis.maxWait&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- åœ¨è·å–è¿æ¥çš„æ—¶å€™æ£€æŸ¥æœ‰æ•ˆæ€§, é»˜è®¤false --&gt;</span><br><span class="line">        &lt;property name=&quot;testOnBorrow&quot; value=&quot;$&#123;redis.testOnBorrow&#125;&quot;/&gt;</span><br><span class="line">        &lt;property name=&quot;testOnReturn&quot; value=&quot;$&#123;redis.testOnReturn&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- åœ¨ç©ºé—²æ—¶æ£€æŸ¥æœ‰æ•ˆæ€§, é»˜è®¤false --&gt;</span><br><span class="line">        &lt;property name=&quot;testWhileIdle&quot; value=&quot;$&#123;redis.testWhileIdle&#125;&quot;/&gt;</span><br><span class="line">        &lt;!-- è¿æ¥è€—å°½æ—¶æ˜¯å¦é˜»å¡, falseæŠ¥å¼‚å¸¸,tureé˜»å¡ç›´åˆ°è¶…æ—¶, é»˜è®¤true --&gt;</span><br><span class="line">        &lt;property name=&quot;blockWhenExhausted&quot; value=&quot;$&#123;redis.blockWhenExhausted&#125;&quot;/&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!--Springæ•´åˆJedis,è®¾ç½®è¿æ¥å±æ€§--&gt;</span><br><span class="line">    &lt;bean id=&quot;connectionFactory&quot; class=&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;</span><br><span class="line">          p:hostName=&quot;$&#123;redis.addr&#125;&quot;</span><br><span class="line">          p:port=&quot;$&#123;redis.port&#125;&quot;</span><br><span class="line">          p:password=&quot;$&#123;redis.auth&#125;&quot;</span><br><span class="line">          p:pool-config-ref=&quot;poolConfig&quot;</span><br><span class="line">          p:timeout=&quot;100000&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;bean id=&quot;redisTemplate&quot;</span><br><span class="line">          class=&quot;org.springframework.data.redis.core.StringRedisTemplate&quot;&gt;</span><br><span class="line">        &lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot;/&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- ï¼ï¼ï¼è¿™æ®µä»£ç å¯ä»¥åˆ é™¤ å¼€å§‹ï¼ï¼ï¼--&gt;</span><br><span class="line">        &lt;!-- å¦‚æœä¸é…ç½®Serializerï¼Œé‚£ä¹ˆå­˜å‚¨çš„æ—¶å€™åªèƒ½ä½¿ç”¨Stringï¼Œå¦‚æœç”¨å¯¹è±¡ç±»å‹å­˜å‚¨ï¼Œé‚£ä¹ˆä¼šæç¤ºé”™è¯¯ can&#x27;t cast to Stringï¼ï¼ï¼--&gt;</span><br><span class="line">        &lt;property name=&quot;keySerializer&quot;&gt;</span><br><span class="line">            &lt;!--å¯¹keyçš„é»˜è®¤åºåˆ—åŒ–å™¨ã€‚é»˜è®¤å€¼æ˜¯StringSerializer--&gt;</span><br><span class="line">            &lt;bean class=&quot;org.springframework.data.redis.serializer.StringRedisSerializer&quot;/&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;!--æ˜¯å¯¹valueçš„é»˜è®¤åºåˆ—åŒ–å™¨ï¼Œé»˜è®¤å€¼æ˜¯å–è‡ªDefaultSerializerçš„JdkSerializationRedisSerializerã€‚--&gt;</span><br><span class="line">        &lt;property name=&quot;valueSerializer&quot;&gt;</span><br><span class="line">            &lt;bean class=&quot;org.springframework.data.redis.serializer.JdkSerializationRedisSerializer&quot;/&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;!--å­˜å‚¨Mapæ—¶keyéœ€è¦çš„åºåˆ—åŒ–é…ç½®--&gt;</span><br><span class="line">        &lt;property name=&quot;hashKeySerializer&quot;&gt;</span><br><span class="line">            &lt;bean class=&quot;org.springframework.data.redis.serializer.StringRedisSerializer&quot;/&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;!--å­˜å‚¨Mapæ—¶valueéœ€è¦çš„åºåˆ—åŒ–é…ç½®--&gt;</span><br><span class="line">        &lt;property name=&quot;hashValueSerializer&quot;&gt;</span><br><span class="line">            &lt;bean class=&quot;org.springframework.data.redis.serializer.JdkSerializationRedisSerializer&quot;/&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">        &lt;!-- ï¼ï¼ï¼è¿™æ®µä»£ç å¯ä»¥åˆ é™¤ ç»“æŸï¼ï¼ï¼--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!--é…ç½®rediså·¥å…·ç±»bean--&gt;</span><br><span class="line">    &lt;bean id=&quot;redisUtils&quot; class=&quot;com.beyondtech.common.redis.RedisUtils&quot;&gt;&lt;/bean&gt;</span><br><span class="line">    &lt;!-- é…ç½®redisTempåºåˆ—åŒ–ç±»bean --&gt;</span><br><span class="line">    &lt;bean id=&quot;redisConfig&quot; class=&quot;com.beyondtech.common.configuration.redisConfig&quot;&gt;&lt;/bean&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
          <category> Spring </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Redis </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springbootæ‰“æˆJaråŒ…åŠå¼•ç”¨ç¬¬ä¸‰æ–¹JaråŒ…</title>
      <link href="/2021/03/26/springboot%E6%89%93%E6%88%90jar%E5%8C%85%E5%8F%8A%E5%BC%95%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9jar%E5%8C%85/"/>
      <url>/2021/03/26/springboot%E6%89%93%E6%88%90jar%E5%8C%85%E5%8F%8A%E5%BC%95%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9jar%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h2 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h2><p>å…ˆå‰åœ¨ç½‘ä¸Šæœç´¢ä¸€ä¸‹ï¼Œé‡åˆ°Springbootæ‰“åŒ…åŒ…å«ç¬¬ä¸‰æ–¹JaråŒ…çš„æ—¶å€™çš„é—®é¢˜çš„ä¸åŒæƒ…å†µè¿˜æŒºå¤šçš„</p><h3 id="èƒ½æ‰“æˆjaråŒ…"><a href="#èƒ½æ‰“æˆjaråŒ…" class="headerlink" title="èƒ½æ‰“æˆjaråŒ…"></a>èƒ½æ‰“æˆjaråŒ…</h3><p>èƒ½æ­£å¸¸æ‰“åŒ…å®Œæˆçš„æƒ…å†µä¸‹ï¼Œé€šè¿‡java -jar xxx.jarè¿è¡Œä¹‹åï¼Œé‡åˆ°çš„æƒ…å†µä¸€èˆ¬æœ‰ä¸‹é¢ä¸¤ç±» 1.æ²¡æœ‰ä¸»æ¸…å•å±æ€§ 2.ClassNotFoundï¼Œæ‰¾ä¸åˆ°å¼•ç”¨ç¬¬ä¸‰æ–¹JaråŒ…ä¸­ç±»æ–¹æ³•</p><h3 id="ä¸èƒ½æ‰“æˆJaråŒ…"><a href="#ä¸èƒ½æ‰“æˆJaråŒ…" class="headerlink" title="ä¸èƒ½æ‰“æˆJaråŒ…"></a>ä¸èƒ½æ‰“æˆJaråŒ…</h3><p>ä¸èƒ½æ­£å¸¸æ‰“åŒ…çš„æƒ…å†µä¸‹ï¼Œæ‰“åŒ…çš„æ—¶å€™å°±ä¼šé‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æ‰“åŒ…çš„æ—¶å€™ï¼Œä¹‹å‰è¾“å‡ºè¿‡çš„JaråŒ…è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œæ¯”å¦‚ä½ é€šè¿‡å‹ç¼©åŒ…æ­£åœ¨é¢„è§ˆè¿™ä¸ªJaråŒ…ï¼Œ</p><h2 id="æ“ä½œ"><a href="#æ“ä½œ" class="headerlink" title="æ“ä½œ"></a>æ“ä½œ</h2><p>å…ˆçœ‹ä¸‹å·¥ç¨‹ç›®å½• <img src="https://www.itze.cn/wp-content/uploads/2021/03/%E5%B7%A5%E7%A8%8B%E7%9B%AE%E5%BD%95.png"> 1.åœ¨resourcesä¸‹å»ºç«‹libæ–‡ä»¶å¤¹ï¼Œå°†éœ€è¦ç”¨çš„ç¬¬ä¸‰æ–¹JaråŒ…æ”¾å…¥ï¼Œè®°å¾—åœ¨Libraryæ­£å¸¸å¼•å…¥ 2.ä¿®æ”¹pomæ–‡ä»¶ï¼Œåœ¨pomæ–‡ä»¶ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹Jarä¾èµ–å’Œé…ç½®ï¼Œæ·»åŠ ä¿®æ”¹å¦‚ä¸‹ æ·»åŠ åˆ°dependenciesæ ‡ç­¾é‡Œé¢</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- ç¬¬ä¸‰æ–¹JaråŒ…--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;it.download&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;download&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;system&lt;/scope&gt;</span><br><span class="line">    &lt;systemPath&gt;$&#123;project.basedir&#125;/src/main/resources/lib/download.jar&lt;/systemPath&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">                &lt;includeSystemScope&gt;<span class="literal">true</span>&lt;/includeSystemScope&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä¿®æ”¹å®Œæˆä¹‹åï¼Œå…ˆcleanæ¸…ç†ä¸€ä¸‹ï¼Œå¦‚æœå›¾ä¸­1çš„cleanä¸èƒ½æ­£å¸¸æ¸…ç†å®Œæˆï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–ç¨‹åºæ­£åœ¨å ç”¨ä¹‹å‰è¾“å‡ºçš„JaråŒ…ï¼Œå¦‚æœ‰å…³æ‰ï¼Œæ¸…ç†å®Œä¹‹åå†åŒå‡»packageæ‰§è¡Œæ‰“åŒ… <img src="https://www.itze.cn/wp-content/uploads/2021/03/12.png"></p><h3 id="æ‰“åŒ…å®Œæˆ"><a href="#æ‰“åŒ…å®Œæˆ" class="headerlink" title="æ‰“åŒ…å®Œæˆ"></a>æ‰“åŒ…å®Œæˆ</h3><p>æ‰“åŒ…å®Œæˆä¹‹åæ£€æŸ¥è¾“å‡ºçš„JaråŒ…ä¸­æ—¶å€™åŒ…å«ç¬¬ä¸‰æ–¹JaråŒ…ï¼Œå¦‚å›¾downloadå°±æ˜¯ <img src="https://www.itze.cn/wp-content/uploads/2021/03/jar%E5%8C%85%E5%AE%8C%E6%88%90%E5%9B%BE.png"> ç…§ç€è¿™ä¸ªåšä¸€èˆ¬æƒ…å†µéƒ½èƒ½è§£å†³</p><h3 id="é™„ä¸Šå®Œæ•´POMæ–‡ä»¶"><a href="#é™„ä¸Šå®Œæ•´POMæ–‡ä»¶" class="headerlink" title="é™„ä¸Šå®Œæ•´POMæ–‡ä»¶"></a>é™„ä¸Šå®Œæ•´POMæ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;modelVersion&gt;<span class="number">4.0</span><span class="number">.0</span>&lt;/modelVersion&gt;</span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;<span class="number">2.4</span><span class="number">.4</span>&lt;/version&gt;</span><br><span class="line">        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;groupId&gt;com.example&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;test&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;name&gt;test&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;Demo project <span class="keyword">for</span> Spring Boot&lt;/description&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;<span class="number">1.8</span>&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;net.coobird&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;thumbnailator&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">0.4</span><span class="number">.13</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;fastjson&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.2</span><span class="number">.49</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">1.4</span><span class="number">.9</span>&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- ç¬¬ä¸‰æ–¹JaråŒ…--&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;it.download&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;download&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;<span class="number">0.0</span><span class="number">.1</span>&lt;/version&gt;</span><br><span class="line">            &lt;scope&gt;system&lt;/scope&gt;</span><br><span class="line">            &lt;systemPath&gt;$&#123;project.basedir&#125;/src/main/resources/lib/download.jar&lt;/systemPath&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;includeSystemScope&gt;<span class="literal">true</span>&lt;/includeSystemScope&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSæ·»åŠ å¼€æœºé‡å¯è‡ªå¯åŠ¨è„šæœ¬</title>
      <link href="/2021/03/03/centos%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E9%87%8D%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC/"/>
      <url>/2021/03/03/centos%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E9%87%8D%E5%90%AF%E8%87%AA%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS</li><li>è¿™é‡Œä»¥å¼€å¯é‡å¯è‡ªå¯åŠ¨tomcatæœåŠ¡ä¸ºä¾‹</li></ul><h3 id="1-å‡†å¤‡autoStart-shè„šæœ¬"><a href="#1-å‡†å¤‡autoStart-shè„šæœ¬" class="headerlink" title="1.å‡†å¤‡autoStart.shè„šæœ¬"></a>1.å‡†å¤‡autoStart.shè„šæœ¬</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">chkconfig: 2345 80 90</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">description:å¼€æœºè‡ªå¯è„šæœ¬</span></span><br><span class="line">echo &quot;###############å¼€æœºè‡ªå¯è„šæœ¬###############&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ä»¥åå°æŒ‚èµ·çš„æ–¹å¼æ‰§è¡Œ</span></span><br><span class="line">nohup /root/tomcat/bin/start.sh &amp;</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„ï¼šè„šæœ¬å‰ä¸‰è¡Œä¸€å®šè¦æœ‰ï¼Œä¸ç„¶ä¼šå‡ºç°â€œautoStart-shä¸æ”¯æŒchkconfigâ€"><a href="#æ³¨æ„ï¼šè„šæœ¬å‰ä¸‰è¡Œä¸€å®šè¦æœ‰ï¼Œä¸ç„¶ä¼šå‡ºç°â€œautoStart-shä¸æ”¯æŒchkconfigâ€" class="headerlink" title="æ³¨æ„ï¼šè„šæœ¬å‰ä¸‰è¡Œä¸€å®šè¦æœ‰ï¼Œä¸ç„¶ä¼šå‡ºç°â€œautoStart.shä¸æ”¯æŒchkconfigâ€"></a>æ³¨æ„ï¼šè„šæœ¬å‰ä¸‰è¡Œä¸€å®šè¦æœ‰ï¼Œä¸ç„¶ä¼šå‡ºç°â€œautoStart.shä¸æ”¯æŒchkconfigâ€</h4><h4 id="ç¬¬äºŒè¡Œchkconfig-2345-80-90-ä¸è¦éšä¾¿å¡«å†™ï¼Œè§„åˆ™å»ç½‘ä¸ŠæŸ¥ä¸€ä¸‹"><a href="#ç¬¬äºŒè¡Œchkconfig-2345-80-90-ä¸è¦éšä¾¿å¡«å†™ï¼Œè§„åˆ™å»ç½‘ä¸ŠæŸ¥ä¸€ä¸‹" class="headerlink" title="ç¬¬äºŒè¡Œchkconfig:2345 80 90 ä¸è¦éšä¾¿å¡«å†™ï¼Œè§„åˆ™å»ç½‘ä¸ŠæŸ¥ä¸€ä¸‹"></a>ç¬¬äºŒè¡Œchkconfig:2345 80 90 ä¸è¦éšä¾¿å¡«å†™ï¼Œè§„åˆ™å»ç½‘ä¸ŠæŸ¥ä¸€ä¸‹</h4><h3 id="2-å°†start-shè„šæœ¬æ”¾åˆ°æœåŠ¡å™¨-x2F-etc-x2F-rc-d-x2F-init-d-x2F-ç›®å½•ä¸‹"><a href="#2-å°†start-shè„šæœ¬æ”¾åˆ°æœåŠ¡å™¨-x2F-etc-x2F-rc-d-x2F-init-d-x2F-ç›®å½•ä¸‹" class="headerlink" title="2.å°†start.shè„šæœ¬æ”¾åˆ°æœåŠ¡å™¨&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;ç›®å½•ä¸‹"></a>2.å°†start.shè„šæœ¬æ”¾åˆ°æœåŠ¡å™¨&#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;ç›®å½•ä¸‹</h3><h3 id="3-æ·»åŠ è„šæœ¬æƒé™"><a href="#3-æ·»åŠ è„šæœ¬æƒé™" class="headerlink" title="3.æ·»åŠ è„šæœ¬æƒé™"></a>3.æ·»åŠ è„šæœ¬æƒé™</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /etc/rc.d/init.d/</span><br><span class="line">chmod +x autoStart.sh</span><br></pre></td></tr></table></figure><h3 id="4-æ·»åŠ è„šæœ¬åˆ°å¼€æœºæœåŠ¡"><a href="#4-æ·»åŠ è„šæœ¬åˆ°å¼€æœºæœåŠ¡" class="headerlink" title="4.æ·»åŠ è„šæœ¬åˆ°å¼€æœºæœåŠ¡"></a>4.æ·»åŠ è„šæœ¬åˆ°å¼€æœºæœåŠ¡</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chkconfig --add autoStart.sh</span><br><span class="line">chkconfig autoStart.sh on</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¼€æœºå¯åŠ¨æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">chkconfig --list</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OkHttpå¿½ç•¥SSLè¯ä¹¦éªŒè¯</title>
      <link href="/2021/02/24/okhttp%E5%BF%BD%E7%95%A5ssl%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81/"/>
      <url>/2021/02/24/okhttp%E5%BF%BD%E7%95%A5ssl%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p>è‡ªç­¾çš„SSLè¯ä¹¦ä¸å—ä¿¡ä»»ï¼Œå¯é€šè¿‡å°†è¯¥è¯ä¹¦æ·»åŠ è‡³JDKå¯†é’¥åº“ï¼Œ<a href="http://www.itwps.com/0e51/74ff" title="jdkä¿¡ä»»è‡ªç­¾è¯ä¹¦">jdkä¿¡ä»»è‡ªç­¾è¯ä¹¦</a>ï¼Œå¦‚æœè¿™ç§æ–¹æ³•è¡Œä¸é€šï¼Œå¯å°è¯•è¯¥æ–¹å¼</p><h3 id="ä½¿ç”¨ä»£ç "><a href="#ä½¿ç”¨ä»£ç " class="headerlink" title="ä½¿ç”¨ä»£ç "></a>ä½¿ç”¨ä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created with IDEA</span></span><br><span class="line"><span class="comment"> * Author: www.itze.cn</span></span><br><span class="line"><span class="comment"> * Date: 2021-02-24</span></span><br><span class="line"><span class="comment"> * Emailï¼šgitlab@111.com</span></span><br><span class="line"><span class="comment"> * okhttpå¿½ç•¥æ‰€æœ‰SSLè¯ä¹¦è®¤è¯</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> OkHttpClient <span class="title function_">getUnsafeOkHttpClient</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> TrustManager[] trustAllCerts = <span class="keyword">new</span> <span class="title class_">TrustManager</span>[]&#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">X509TrustManager</span>() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkClientTrusted</span><span class="params">(java.security.cert.X509Certificate[] chain, String authType)</span> &#123;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkServerTrusted</span><span class="params">(java.security.cert.X509Certificate[] chain, String authType)</span> &#123;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">public</span> java.security.cert.X509Certificate[] getAcceptedIssuers() &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">java</span>.security.cert.X509Certificate[]&#123;&#125;;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">SSLContext</span> <span class="variable">sslContext</span> <span class="operator">=</span> SSLContext.getInstance(<span class="string">&quot;SSL&quot;</span>);</span><br><span class="line">        sslContext.init(<span class="literal">null</span>, trustAllCerts, <span class="keyword">new</span> <span class="title class_">java</span>.security.SecureRandom());</span><br><span class="line">        <span class="keyword">final</span> javax.net.ssl.<span class="type">SSLSocketFactory</span> <span class="variable">sslSocketFactory</span> <span class="operator">=</span> sslContext.getSocketFactory();</span><br><span class="line">        OkHttpClient.<span class="type">Builder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OkHttpClient</span>.Builder();</span><br><span class="line">        builder.sslSocketFactory(sslSocketFactory,(X509TrustManager)(trustAllCerts[<span class="number">0</span>]));</span><br><span class="line">        builder.hostnameVerifier(<span class="keyword">new</span> <span class="title class_">HostnameVerifier</span>() &#123;</span><br><span class="line">            <span class="comment">//è¿™é‡Œå­˜æ”¾ä¸éœ€è¦å¿½ç•¥SSLè¯ä¹¦çš„åŸŸåï¼Œä¸ºç©ºå³å¿½ç•¥æ‰€æœ‰è¯ä¹¦</span></span><br><span class="line">            String[]ssls = &#123;&#125;;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">verify</span><span class="params">(String hostname, SSLSession session)</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (TextUtils.isEmpty(hostname)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> !Arrays.asList(ssls).contains(hostname);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="type">OkHttpClient</span> <span class="variable">okHttpClient</span> <span class="operator">=</span> builder.connectTimeout(<span class="number">10</span>, TimeUnit.MINUTES).</span><br><span class="line">            writeTimeout(<span class="number">10</span>, TimeUnit.MINUTES).readTimeout(<span class="number">10</span>, TimeUnit.MINUTES).retryOnConnectionFailure(<span class="literal">true</span>).build();</span><br><span class="line">        <span class="keyword">return</span> okHttpClient;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å°†åŸæ¥çš„</span></span><br><span class="line"><span class="type">OkHttpClient</span> <span class="variable">okHttpClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OkHttpClient</span>();</span><br><span class="line"><span class="comment">//æ›¿æ¢ä¸º</span></span><br><span class="line"><span class="type">OkHttpClient</span> <span class="variable">okHttpClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Test</span>().getUnsafeOkHttpClient();  <span class="comment">//Testä¸ºç±»åï¼Œè‹¥ä¸ºé™æ€æ–¹æ³•ç›´æ¥ç±»å.æ–¹æ³•åè°ƒç”¨å³å¯</span></span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šä»£ç æ¥è‡ªäº’è”ç½‘ï¼Œç¨åšä¿®æ”¹ï¼Œä¾µå‘ŠçŸ¥</em></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> OkHttp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå¸¸ç”¨å‘½ä»¤[æ›´æ–°]</title>
      <link href="/2021/01/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/"/>
      <url>/2021/01/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%95%BF%E6%9C%9F%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<p>ä¼ é€é—¨ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a> æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps -aux</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æŸä¸ªè¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œï¼Œjavaä¸ºä¾‹ï¼Œå¯æŸ¥çœ‹åˆ°PID</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ps -efgrep java</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ç«¯å£å·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netstat -anltp</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æŸä¸ªç«¯å£å·çš„åº”ç”¨æ˜¯å¦åœ¨è¿è¡Œï¼Œå¯æŸ¥çœ‹åˆ°è¯¥ä»»åŠ¡çš„PID</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netstat -anltpgrep 8080</span><br></pre></td></tr></table></figure><p>ç»“æŸæ‰æŸä»»åŠ¡è¿›ç¨‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kill -9 pidå·</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡è¿›ç¨‹å ç”¨èµ„æºæƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æŸä¸ªè¿›ç¨‹å ç”¨èµ„æºçš„æƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">top -p PIDå·</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç£ç›˜å®¹é‡çš„ä½¿ç”¨æƒ…å†µ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">df -h</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰è·¯å¾„ä¸‹å¤§æ–‡ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">du -sh *</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æŒ‡å®šè·¯å¾„ä¸‹æ–‡ä»¶å¤§å°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">du -h /root</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹a.txtæ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat a.txt</span><br></pre></td></tr></table></figure><p>å¸¦è¡Œå·çš„æŸ¥çœ‹a.txtæ–‡ä»¶å†…å®¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat -n a.txt</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹a.txtæ–‡ä»¶çš„æœ€å20è¡Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tail -n 20 a.txt</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¼€æœºå·²ç»å¯åŠ¨çš„æœåŠ¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl list-unit-filesgrep enabled</span><br></pre></td></tr></table></figure><p>ç¦æ­¢å¼€æœºå¯åŠ¨æŸæœåŠ¡,ä»¥nginxä¸ºä¾‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl disable nginx</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaGCåƒåœ¾å›æ”¶æœºåˆ¶</title>
      <link href="/2021/01/14/javagc%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/"/>
      <url>/2021/01/14/javagc%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="å¦‚ä½•ç¡®å®šåƒåœ¾å›æ”¶"><a href="#å¦‚ä½•ç¡®å®šåƒåœ¾å›æ”¶" class="headerlink" title="å¦‚ä½•ç¡®å®šåƒåœ¾å›æ”¶"></a>å¦‚ä½•ç¡®å®šåƒåœ¾å›æ”¶</h3><h4 id="å¼•ç”¨è®¡æ•°ç®—æ³•"><a href="#å¼•ç”¨è®¡æ•°ç®—æ³•" class="headerlink" title="å¼•ç”¨è®¡æ•°ç®—æ³•"></a>å¼•ç”¨è®¡æ•°ç®—æ³•</h4><p>ç»™ä½¿ç”¨çš„æ¯ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯æ¬¡å¼•ç”¨ï¼Œè®¡æ•°å™¨åŠ 1ï¼Œå¤±å»å¼•ç”¨ï¼Œè®¡æ•°å™¨å‡1ï¼Œé‚£ä¹ˆå½“è®¡æ•°å™¨ä¸€æ®µæ—¶é—´ä¿æŒä¸º0çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«å›æ”¶ ç¼ºç‚¹ï¼šå½“ä¸¤ä¸ªå¯¹è±¡ç›¸äº’å¼•ç”¨çš„æ—¶å€™ï¼Œç”±äºæ˜¯ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤ç›¸äº’å¼•ç”¨ï¼Œå·²ç»æ²¡æœ‰å…¶ä»–å¼•ç”¨å­˜åœ¨ï¼Œæ­¤æ—¶è®¡æ•°å™¨éƒ½æ˜¯1ï¼Œä½†æ˜¯å¹¶ä¸ä¼šè¢«å›æ”¶</p><h4 id="å¯è¾¾æ€§åˆ†æç®—æ³•"><a href="#å¯è¾¾æ€§åˆ†æç®—æ³•" class="headerlink" title="å¯è¾¾æ€§åˆ†æç®—æ³•"></a>å¯è¾¾æ€§åˆ†æç®—æ³•</h4><p>ç¨‹åºæŠŠæˆ‘ä»¬æ‰€æœ‰çš„å¼•ç”¨å…³ç³»çœ‹ä½œä¸€å¼ å›¾ï¼Œä»ä¸€ä¸ªèŠ‚ç‚¹çš„GC ROOTå¼€å§‹åˆ†æå¼•ç”¨ï¼Œæ‰¾åˆ°å¼•ç”¨ï¼Œç„¶åç»§ç»­å¯»æ‰¾è¯¥å¼•ç”¨èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œç›´åˆ°æ‰¾åˆ°æ‰€æœ‰çš„å¼•ç”¨ï¼Œé‚£ä¹ˆæ²¡æœ‰è¢«å¼•ç”¨çš„èŠ‚ç‚¹ï¼Œå°±æ˜¯æ— ç”¨çš„èŠ‚ç‚¹</p><h5 id="ç›®å‰Javaä¸­å¯ä½œä¸ºGC-ROOTçš„å¯¹è±¡"><a href="#ç›®å‰Javaä¸­å¯ä½œä¸ºGC-ROOTçš„å¯¹è±¡" class="headerlink" title="ç›®å‰Javaä¸­å¯ä½œä¸ºGC ROOTçš„å¯¹è±¡"></a>ç›®å‰Javaä¸­å¯ä½œä¸ºGC ROOTçš„å¯¹è±¡</h5><ul><li>javaè™šæ‹Ÿæœºæ ˆä¸­çš„å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­çš„ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ã€‚ ï¼ˆä¸€èˆ¬æŒ‡è¢«staticä¿®é¥°çš„å¯¹è±¡ï¼ŒåŠ è½½ç±»çš„æ—¶å€™å°±åŠ è½½åˆ°å†…å­˜ä¸­ï¼‰</li><li>æ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„JNIï¼ˆnativeæ–¹æ³•ï¼‰å¼•ç”¨çš„å¯¹è±¡</li></ul><h3 id="GCå¤„ç†åƒåœ¾ç®—æ³•"><a href="#GCå¤„ç†åƒåœ¾ç®—æ³•" class="headerlink" title="GCå¤„ç†åƒåœ¾ç®—æ³•"></a>GCå¤„ç†åƒåœ¾ç®—æ³•</h3><h4 id="æ ‡è®°-æ¸…é™¤"><a href="#æ ‡è®°-æ¸…é™¤" class="headerlink" title="æ ‡è®°-æ¸…é™¤"></a>æ ‡è®°-æ¸…é™¤</h4><p>åˆ†ä¸ºæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªé˜¶æ®µå¤„ç†å†…å­˜ä¸­çš„å¯¹è±¡ï¼Œæ•ˆç‡ä¸é«˜</p><h4 id="å¤åˆ¶ç®—æ³•"><a href="#å¤åˆ¶ç®—æ³•" class="headerlink" title="å¤åˆ¶ç®—æ³•"></a>å¤åˆ¶ç®—æ³•</h4><p>å°†å¯ç”¨å†…å­˜æŒ‰ç…§å®¹é‡åˆ†ä¸ºå¤§å°ç›¸åŒçš„ä¸¤å—ï¼Œä½¿ç”¨çš„æ—¶å€™åªä½¿ç”¨å…¶ä¸­ä¸€å—åŒºåŸŸï¼Œå½“è¯¥åŒºåŸŸå†…å­˜æ»¡äº†çš„æ—¶å€™ï¼Œå°±å°†è¯¥å—å†…å®¹ä¸­æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—å®¹é‡åŒºåŸŸï¼Œç„¶åæ¸…ç†ä¹‹å‰ç”¨è¿‡çš„é‚£å—å†…å­˜ç©ºé—´ï¼Œå½¼æ­¤äº¤æ¢ä¸¤å—å†…å­˜åŒºï¼Œå®Œæˆåƒåœ¾æ”¶é›†</p><h4 id="æ ‡è®°-æ•´ç†ï¼ˆæ ‡è®°-å‹ç¼©ï¼‰"><a href="#æ ‡è®°-æ•´ç†ï¼ˆæ ‡è®°-å‹ç¼©ï¼‰" class="headerlink" title="æ ‡è®°-æ•´ç†ï¼ˆæ ‡è®°-å‹ç¼©ï¼‰"></a>æ ‡è®°-æ•´ç†ï¼ˆæ ‡è®°-å‹ç¼©ï¼‰</h4><p>åœ¨æ ‡è®°-æ¸…é™¤çš„åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œå°†æ´»ç€çš„å¯¹è±¡å‹ç¼©åˆ°å†…å­˜çš„ä¸€ç«¯ï¼Œç„¶åæ¸…ç†é™¤è¯¥ç«¯è¾¹ç•Œä¹‹å¤–çš„å†…å­˜åŒºåŸŸ</p><h4 id="åˆ†åŒºç®—æ³•"><a href="#åˆ†åŒºç®—æ³•" class="headerlink" title="åˆ†åŒºç®—æ³•"></a>åˆ†åŒºç®—æ³•</h4><p>å°†æ•´ä¸ªå†…å­˜ç©ºé—´åˆ†ä¸ºNä¸ªè¿ç»­ä¸åŒçš„å†…å­˜åŒºåŸŸï¼Œæ¯ä¸ªå•ç‹¬ä½¿ç”¨ï¼Œç‹¬ç«‹å›æ”¶ï¼Œå°é¢—ç²’åº¦æ§åˆ¶</p><h3 id="GCç®—æ³•ä¼˜ç•¥è¯„ä¼°"><a href="#GCç®—æ³•ä¼˜ç•¥è¯„ä¼°" class="headerlink" title="GCç®—æ³•ä¼˜ç•¥è¯„ä¼°"></a>GCç®—æ³•ä¼˜ç•¥è¯„ä¼°</h3><p>ååº¦é‡ï¼ˆThroughputï¼‰ï¼Œååé‡è¶Šå¤§è¶Šå¥½ åœé¡¿æ—¶é—´ï¼ˆpasue timeï¼‰ï¼Œæš‚åœæ—¶é—´è¶ŠçŸ­è¶Šå¥½</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> GC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…è°ˆSpringBeanç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2021/01/14/%E6%B5%85%E8%B0%88springbean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/2021/01/14/%E6%B5%85%E8%B0%88springbean%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="SpringBeanç”Ÿå‘½å‘¨æœŸ"><a href="#SpringBeanç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="SpringBeanç”Ÿå‘½å‘¨æœŸ"></a>SpringBeanç”Ÿå‘½å‘¨æœŸ</h3><ul><li>SpringBeanç”Ÿå‘½å‘¨æœŸçš„å››ä¸ªé˜¶æ®µ</li><li>å®ä¾‹åŒ–ï¼šcreateBeanInstance(beanName, mbd, args)</li><li>å±æ€§èµ‹å€¼ï¼špopulateBean(beanName, mbd, instanceWrapper)</li><li>åˆå§‹åŒ–ï¼šinitializeBean(beanName, exposedObject, mbd)</li><li>é”€æ¯ï¼šå¦‚æœ Bean å®ç°äº† DisposableBean æ¥å£ï¼Œåˆ™ Spring ä¼šè°ƒç”¨ destory() æ–¹æ³•å°† Spring ä¸­çš„ Bean é”€æ¯ï¼›å¦‚æœåœ¨é…ç½®æ–‡ä»¶ä¸­é€šè¿‡ destory-method å±æ€§æŒ‡å®šäº† Bean çš„é”€æ¯æ–¹æ³•ï¼Œåˆ™ Spring å°†è°ƒç”¨è¯¥æ–¹æ³•å¯¹ Bean è¿›è¡Œé”€æ¯ã€‚</li></ul><h3 id="doCreateBeanæ–¹æ³•æºç "><a href="#doCreateBeanæ–¹æ³•æºç " class="headerlink" title="doCreateBeanæ–¹æ³•æºç "></a>doCreateBeanæ–¹æ³•æºç </h3><p>åœ¨SpringBeanæºç ä¸­çš„doCreateBeanæ–¹æ³•ä¸­èƒ½æœ‰ä½“ç°ï¼Œè¯¥æ–¹æ³•ä¾æ¬¡è°ƒç”¨createBeanInstanceã€populateBeanã€initializeBeanæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> Object <span class="title function_">doCreateBean</span><span class="params">(String beanName, RootBeanDefinition mbd, <span class="meta">@Nullable</span> Object[] args)</span> <span class="keyword">throws</span> BeanCreationException &#123;</span><br><span class="line">    <span class="type">BeanWrapper</span> <span class="variable">instanceWrapper</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (mbd.isSingleton()) &#123;</span><br><span class="line">        instanceWrapper = (BeanWrapper)<span class="built_in">this</span>.factoryBeanInstanceCache.remove(beanName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (instanceWrapper == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">//å®ä¾‹åŒ–</span></span><br><span class="line">        instanceWrapper = <span class="built_in">this</span>.createBeanInstance(beanName, mbd, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Object</span> <span class="variable">bean</span> <span class="operator">=</span> instanceWrapper.getWrappedInstance();</span><br><span class="line">    Class&lt;?&gt; beanType = instanceWrapper.getWrappedClass();</span><br><span class="line">    <span class="keyword">if</span> (beanType != NullBean.class) &#123;</span><br><span class="line">        mbd.resolvedTargetType = beanType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">synchronized</span>(mbd.postProcessingLock) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!mbd.postProcessed) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.applyMergedBeanDefinitionPostProcessors(mbd, beanType, beanName);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable var17) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BeanCreationException</span>(mbd.getResourceDescription(), beanName, <span class="string">&quot;Post-processing of merged bean definition failed&quot;</span>, var17);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            mbd.postProcessed = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">earlySingletonExposure</span> <span class="operator">=</span> mbd.isSingleton() &amp;&amp; <span class="built_in">this</span>.allowCircularReferences &amp;&amp; <span class="built_in">this</span>.isSingletonCurrentlyInCreation(beanName);</span><br><span class="line">    <span class="keyword">if</span> (earlySingletonExposure) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.logger.isTraceEnabled()) &#123;</span><br><span class="line">            <span class="built_in">this</span>.logger.trace(<span class="string">&quot;Eagerly caching bean &#x27;&quot;</span> + beanName + <span class="string">&quot;&#x27; to allow for resolving potential circular references&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.addSingletonFactory(beanName, () -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.getEarlyBeanReference(beanName, mbd, bean);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">Object</span> <span class="variable">exposedObject</span> <span class="operator">=</span> bean;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//å±æ€§èµ‹å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.populateBean(beanName, mbd, instanceWrapper);</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">        exposedObject = <span class="built_in">this</span>.initializeBean(beanName, exposedObject, mbd);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable var18) &#123;</span><br><span class="line">        <span class="keyword">if</span> (var18 <span class="keyword">instanceof</span> BeanCreationException &amp;&amp; beanName.equals(((BeanCreationException)var18).getBeanName())) &#123;</span><br><span class="line">            <span class="keyword">throw</span> (BeanCreationException)var18;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BeanCreationException</span>(mbd.getResourceDescription(), beanName, <span class="string">&quot;Initialization of bean failed&quot;</span>, var18);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (earlySingletonExposure) &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">earlySingletonReference</span> <span class="operator">=</span> <span class="built_in">this</span>.getSingleton(beanName, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (earlySingletonReference != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (exposedObject == bean) &#123;</span><br><span class="line">                exposedObject = earlySingletonReference;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!<span class="built_in">this</span>.allowRawInjectionDespiteWrapping &amp;&amp; <span class="built_in">this</span>.hasDependentBean(beanName)) &#123;</span><br><span class="line">                String[] dependentBeans = <span class="built_in">this</span>.getDependentBeans(beanName);</span><br><span class="line">                Set&lt;String&gt; actualDependentBeans = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>(dependentBeans.length);</span><br><span class="line">                String[] var12 = dependentBeans;</span><br><span class="line">                <span class="type">int</span> <span class="variable">var13</span> <span class="operator">=</span> dependentBeans.length;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var14</span> <span class="operator">=</span> <span class="number">0</span>; var14 &lt; var13; ++var14) &#123;</span><br><span class="line">                    <span class="type">String</span> <span class="variable">dependentBean</span> <span class="operator">=</span> var12[var14];</span><br><span class="line">                    <span class="keyword">if</span> (!<span class="built_in">this</span>.removeSingletonIfCreatedForTypeCheckOnly(dependentBean)) &#123;</span><br><span class="line">                        actualDependentBeans.add(dependentBean);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (!actualDependentBeans.isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BeanCurrentlyInCreationException</span>(beanName, <span class="string">&quot;Bean with name &#x27;&quot;</span> + beanName + <span class="string">&quot;&#x27; has been injected into other beans [&quot;</span> + StringUtils.collectionToCommaDelimitedString(actualDependentBeans) + <span class="string">&quot;] in its raw version as part of a circular reference, but has eventually been wrapped. This means that said other beans do not use the final version of the bean. This is often the result of over-eager type matching - consider using &#x27;getBeanNamesOfType&#x27; with the &#x27;allowEagerInit&#x27; flag turned off, for example.&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.registerDisposableBeanIfNecessary(beanName, bean, mbd);</span><br><span class="line">        <span class="keyword">return</span> exposedObject;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (BeanDefinitionValidationException var16) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BeanCreationException</span>(mbd.getResourceDescription(), beanName, <span class="string">&quot;Invalid destruction signature&quot;</span>, var16);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>doCreateBeanæ–¹æ³•ä½äºSpringBeanæºç çš„AbstractAutowireCapableBeanFactoryæ–¹æ³•ä¸­ï¼Œå…·ä½“ä½ç½®å¦‚ä¸‹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è¿›è¡Œæ›´æ·±ä¸€æ­¥äº†è§£</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…RabbitMQ</title>
      <link href="/2021/01/11/centos%E5%AE%89%E8%A3%85rabbitmq/"/>
      <url>/2021/01/11/centos%E5%AE%89%E8%A3%85rabbitmq/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li></ul><h3 id="å®‰è£…å‡†å¤‡"><a href="#å®‰è£…å‡†å¤‡" class="headerlink" title="å®‰è£…å‡†å¤‡"></a>å®‰è£…å‡†å¤‡</h3><ul><li>RabbitMQåŸºäºErlangå¼€å‘ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…Erlangç¯å¢ƒ</li><li>Erlangå®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://www.erlang.org/downloads" title="https://www.erlang.org/downloads">https://www.erlang.org/downloads</a></li><li>RabbitMQå®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://www.rabbitmq.com/download.html" title="https://www.rabbitmq.com/download.html">https://www.rabbitmq.com/download.html</a></li><li>ä¸‹è½½å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œæä¾›ä¸€ä¸ªåˆ†äº«é“¾æ¥åŒ…å«Erlangå’ŒRabbitMQ</li><li>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1Tmv7b0Dm8SRRF-cfYogzkw" title="https://pan.baidu.com/s/1Tmv7b0Dm8SRRF-cfYogzkw">https://pan.baidu.com/s/1Tmv7b0Dm8SRRF-cfYogzkw</a></li><li>æå–ç ï¼šitze</li><li>ä¸‹è½½å®Œä¹‹åä¸Šä¼ è‡³LinuxæœåŠ¡å™¨</li></ul><h3 id="Erlangå®‰è£…"><a href="#Erlangå®‰è£…" class="headerlink" title="Erlangå®‰è£…"></a>Erlangå®‰è£…</h3><p>å®‰è£…ä¾èµ–</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum -y install gcc glibc-devel make ncurses-devel openssl-devel xmlto perl wget gtk2-devel binutils-devel</span><br></pre></td></tr></table></figure><p>wgetæ–¹å¼ä¸‹è½½ï¼Œä¸‹è½½å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œå¯ç”¨ä¸Šé¢æä¾›çš„åˆ†äº«é“¾æ¥ï¼Œç‰ˆæœ¬ç›¸åŒå’Œè¿™ä¸ªç›¸åŒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://erlang.org/download/otp_src_22.0.tar.gz</span><br></pre></td></tr></table></figure><p>è§£å‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf otp_src_22.0.tar.gz</span><br></pre></td></tr></table></figure><p>ç§»åŠ¨æ–‡ä»¶ï¼Œè¿™ä¸ªè²Œä¼¼å’Œå®ƒé»˜è®¤çš„å®‰è£…ä½ç½®æœ‰å…³ç³»</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv otp_src_22.0 /usr/local/</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /usr/local/otp_src_22.0/</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–‡ä»¶å¤¹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir ../Erlang</span><br></pre></td></tr></table></figure><p>é…ç½®å®‰è£…ç›®å½•ï¼Œå¦‚æœå‡ºç°é…ç½®è­¦å‘Šä¸è¦ç®¡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/local/Erlang</span><br></pre></td></tr></table></figure><p>å®‰è£…</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &#x27;export PATH=$PATH:/usr/local/Erlang/bin&#x27; &gt;&gt; /etc/profile</span><br></pre></td></tr></table></figure><p>åˆ·æ–°ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯Erlang"><a href="#éªŒè¯Erlang" class="headerlink" title="éªŒè¯Erlang"></a>éªŒè¯Erlang</h4><p>å‡ºç°ç‰ˆæœ¬å·å³å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">erl -version</span><br></pre></td></tr></table></figure><h3 id="RabbitMQå®‰è£…"><a href="#RabbitMQå®‰è£…" class="headerlink" title="RabbitMQå®‰è£…"></a>RabbitMQå®‰è£…</h3><p>wgetæ–¹å¼ä¸‹è½½ï¼Œä¸‹è½½ä¼šæ¯”è¾ƒæ…¢ï¼Œå»ºè®®ä½¿ç”¨ä¸Šé¢åˆ†äº«é“¾æ¥ä¸‹è½½åä¸Šä¼ è‡³æœåŠ¡å™¨æ–¹å¼</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.7.15/rabbitmq-server-generic-unix-3.7.15.tar.xz</span><br></pre></td></tr></table></figure><p>å®‰è£…XZå·¥å…·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y xz</span><br></pre></td></tr></table></figure><p>è§£å‹ï¼Œæ³¨æ„æ­¤æ—¶åº”åˆ‡æ¢è‡³å‹ç¼©åŒ…ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/bin/xz -d rabbitmq-server-generic-unix-3.7.15.tar.xz</span><br></pre></td></tr></table></figure><p>å†æ¬¡è§£å‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -xvf rabbitmq-server-generic-unix-3.7.15.tar</span><br></pre></td></tr></table></figure><p>è¿ç§»ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv rabbitmq_server-3.7.15/ /usr/local/</span><br></pre></td></tr></table></figure><p>é‡å‘½å</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv /usr/local/rabbitmq_server-3.7.15  Rabbitmq</span><br></pre></td></tr></table></figure><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo &#x27;export PATH=$PATH:/usr/local/Rabbitmq/sbin&#x27; &gt;&gt; /etc/profile</span><br></pre></td></tr></table></figure><p>åˆ·æ–°ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶ç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /etc/rabbitmq</span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmq-server -detached</span><br></pre></td></tr></table></figure><p>æŒ‚åå°å¯åŠ¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nohup rabbitmq-server -detached &amp;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl status</span><br></pre></td></tr></table></figure><p>åœæ­¢</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl stop</span><br></pre></td></tr></table></figure><p>æ·»åŠ webæ’ä»¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmq-plugins enable rabbitmq_management</span><br></pre></td></tr></table></figure><p>ç«¯å£å¼€æ”¾ï¼Œå¦‚æœä½ å¼€äº†é˜²ç«å¢™ï¼Œè¯·æ”¾è¡Œ5672å’Œ15672ç«¯å£ï¼Œå…·ä½“é˜²ç«å¢™æ“ä½œçœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a></p><h4 id="RabbitMQé¡µé¢è®¿é—®"><a href="#RabbitMQé¡µé¢è®¿é—®" class="headerlink" title="RabbitMQé¡µé¢è®¿é—®"></a>RabbitMQé¡µé¢è®¿é—®</h4><ul><li>å®‰è£…å®Œæˆé»˜è®¤å¼€å¯è´¦æˆ·å¯†ç éƒ½æ˜¯guestï¼Œä½†æ˜¯è¿™è´¦æˆ·åªèƒ½å®‰è£…RabbitMQçš„é‚£å°æœºå™¨ç™»é™†ï¼Œå»ºè®®åˆ é™¤è¯¥è´¦æˆ·ï¼Œæ·»åŠ æ–°è´¦æˆ·</li><li>è®¿é—®åœ°å€ï¼š<a href="http://192.168.6.73:15672/">http://192.168.06.73:15672</a> è¿™çš„é‡ŒIPå°±æ˜¯å®‰è£…RabbitMQé‚£å°æœºå™¨æœåŠ¡å™¨IPåœ°å€</li></ul><h4 id="RabbitMQè´¦æˆ·ç®¡ç†"><a href="#RabbitMQè´¦æˆ·ç®¡ç†" class="headerlink" title="RabbitMQè´¦æˆ·ç®¡ç†"></a>RabbitMQè´¦æˆ·ç®¡ç†</h4><p>æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl list_users</span><br></pre></td></tr></table></figure><p>æ·»åŠ è´¦æˆ·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl add_user admin 123456</span><br></pre></td></tr></table></figure><p>é…ç½®æƒé™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl set_permissions -p &quot;/&quot; admin &quot;.*&quot; &quot;.*&quot; &quot;.*&quot;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹è´¦æˆ·æƒé™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl list_user_permissions admin</span><br></pre></td></tr></table></figure><p>è®¾ç½®tagsæ ‡ç­¾,ä¹Ÿå°±æ˜¯ç”¨æˆ·ç»„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl set_user_tags admin administrator</span><br></pre></td></tr></table></figure><p>åˆ é™¤guesté»˜è®¤è´¦æˆ·</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rabbitmqctl delete_user guest</span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šæœ¬æ–‡ç« æœ‰å‚è€ƒç½‘ç»œåé¦ˆæˆåŠŸç‡è¾ƒé«˜çš„æ–‡ç« ï¼Œä¾µå‘ŠçŸ¥</em></p>]]></content>
      
      
      <categories>
          
          <category> RabbitMQ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> RabbitMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°ä¸€ä»£æ„å»ºå·¥å…·Gradleçš„å®‰è£…ï¼ˆWindow/Linuxï¼‰</title>
      <link href="/2021/01/07/%E6%96%B0%E4%B8%80%E4%BB%A3%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7gradle%E7%9A%84%E5%AE%89%E8%A3%85%EF%BC%88window-linux%EF%BC%89/"/>
      <url>/2021/01/07/%E6%96%B0%E4%B8%80%E4%BB%A3%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7gradle%E7%9A%84%E5%AE%89%E8%A3%85%EF%BC%88window-linux%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="Windowsç¯å¢ƒ"><a href="#Windowsç¯å¢ƒ" class="headerlink" title="Windowsç¯å¢ƒ"></a>Windowsç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šWindow 10</li><li>Java Versionï¼š1.8</li></ul><h3 id="Linxuç¯å¢ƒ"><a href="#Linxuç¯å¢ƒ" class="headerlink" title="Linxuç¯å¢ƒ"></a>Linxuç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Java Versionï¼š1.8</li></ul><h3 id="å®‰è£…å‡†å¤‡"><a href="#å®‰è£…å‡†å¤‡" class="headerlink" title="å®‰è£…å‡†å¤‡"></a>å®‰è£…å‡†å¤‡</h3><ul><li>å®‰è£…ä½¿ç”¨Gradleä¹‹å‰éœ€è¦æå‰å®‰è£…JDKç¯å¢ƒ</li><li>Linuxå®‰è£…JDKçœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/java/504.html" title="Linuxå®‰è£…jdkç¯å¢ƒ">Linuxå®‰è£…jdkç¯å¢ƒ</a></li><li>windowsè‡ªè¡Œç™¾åº¦</li></ul><h4 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><p>Gradleå®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://gradle.org/next-steps/?version=6.7.1&format=bin" title="Gradle-6.7.1-bin">Gradle-6.7.1-bin</a></p><h3 id="Windowså®‰è£…"><a href="#Windowså®‰è£…" class="headerlink" title="Windowså®‰è£…"></a>Windowså®‰è£…</h3><p>å°†ä¸‹è½½çš„Gradleå®‰è£…åŒ…è§£å‹å‡ºæ¥ï¼Œè§£å‹ä½ç½®å¯ä»¥æ˜¯ä»»æ„ä½ç½®ï¼Œå°½é‡é¿å…å‡ºç°ä¸­æ–‡è·¯å¾„ï¼Œç„¶åé…ç½®ç¯å¢ƒå˜é‡ï¼Œæˆ‘çš„ç”µè„‘å³é”®å±æ€§-é«˜çº§ç³»ç»Ÿè®¾ç½®-ç¯å¢ƒå˜é‡-ç³»ç»Ÿå˜é‡- æ–°å»ºå¦‚å›¾ <img src="https://www.itze.cn/wp-content/uploads/2021/01/gradle_win%E5%8F%98%E9%87%8F.png"> åœ¨ç³»ç»Ÿå˜é‡ä¸­Pathä¸­æ·»åŠ å¦‚ä¸‹å›¾ï¼Œç„¶åéªŒè¯ <img src="https://www.itze.cn/wp-content/uploads/2021/01/gradle%E5%AE%89%E8%A3%85.png"></p><h4 id="WindowséªŒè¯"><a href="#WindowséªŒè¯" class="headerlink" title="WindowséªŒè¯"></a>WindowséªŒè¯</h4><p><img src="https://www.itze.cn/wp-content/uploads/2021/01/gradle_win.png"></p><h3 id="Linuxå®‰è£…"><a href="#Linuxå®‰è£…" class="headerlink" title="Linuxå®‰è£…"></a>Linuxå®‰è£…</h3><p>å°†ä¸‹è½½çš„Gradleå®‰è£…åŒ…ä¸Šä¼ è‡³LinuxæœåŠ¡å™¨è§£å‹ è§£å‹å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip gradle-6.7.1-bin.zip</span><br></pre></td></tr></table></figure><p>æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>åœ¨æœ€åé¢æ·»åŠ ä¸€è¡Œ,æŠŠåé¢çš„æ”¹æˆä½ çš„è§£å‹è·¯å¾„ï¼Œæ³¨æ„è¦åˆ°binåŠç›®å½•</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=$PATH:/Gradle/gradle-6.7.1/bin</span><br></pre></td></tr></table></figure><h4 id="LinuxéªŒè¯"><a href="#LinuxéªŒè¯" class="headerlink" title="LinuxéªŒè¯"></a>LinuxéªŒè¯</h4><p><img src="https://www.itze.cn/wp-content/uploads/2021/01/gradle_linux.png"></p>]]></content>
      
      
      <categories>
          
          <category> Gradle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Gradle </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeré…ç½®RedisæŒä¹…åŒ–</title>
      <link href="/2021/01/04/docker%E9%85%8D%E7%BD%AEredis%E6%8C%81%E4%B9%85%E5%8C%96/"/>
      <url>/2021/01/04/docker%E9%85%8D%E7%BD%AEredis%E6%8C%81%E4%B9%85%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p>ä½¿ç”¨Dockeræ‹‰å–çš„Redisï¼Œä»dockerä¸­å¯åŠ¨rediså®¹å™¨ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰é…ç½®æ–‡ä»¶çš„</p><h3 id="æŒä¹…åŒ–"><a href="#æŒä¹…åŒ–" class="headerlink" title="æŒä¹…åŒ–"></a>æŒä¹…åŒ–</h3><ul><li>RDBï¼šæŒ‰ç…§ä¸€å®šçš„æ—¶é—´é—´éš”å®šæ—¶ä»¥å¿«ç…§çš„å½¢å¼ä¿å­˜ï¼Œä¹Ÿå¯ä¸»åŠ¨è§¦å‘</li><li>AOFï¼šä»¥è®°å½•æ—¥å¿—çš„æ–¹å¼è¿›è¡Œä¿å­˜</li><li>RedisæŒä¹…åŒ–æ–¹å¼ï¼Œç›®å‰æœ‰RDBå’ŒAOFï¼Œé»˜è®¤çš„æ˜¯RDBï¼Œå…·ä½“æ¯ç§çš„ä¿å­˜&#x2F;å®ç°&#x2F;è§¦å‘æœºåˆ¶ï¼Œä»¥åŠä¼˜ç¼ºç‚¹ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œè¿™é‡Œåªä»‹ç»å¦‚ä½•ä½¿ç”¨Dockeræ–¹å¼å¯åŠ¨Redisé…ç½®æŒä¹…åŒ–ï¼Œdockerå®‰è£…redisçœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/528.html" title="Dockerå®‰è£…Redis">Dockerå®‰è£…Redis</a></li></ul><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><ol><li>å»å®˜ç½‘ä¸‹è½½Reidsä¸­redis.confçš„é…ç½®æ–‡ä»¶ï¼Œæ€»ä¹‹æƒ³åŠæ³•æ‰¾ä¸€ä»½redis.confçš„é…ç½®æ–‡ä»¶</li><li>åˆ›å»ºæ–‡ä»¶å¤¹&#x2F;root&#x2F;rediså’Œ&#x2F;root&#x2F;redis&#x2F;dataç”¨æ¥å­˜æ”¾æ•°æ®ï¼Œå¯ä»¥æ˜¯å…¶ä»–ä½ç½®</li><li>&#x2F;dataå’Œ&#x2F;etc&#x2F;redisè¿™ä¸¤ä¸ªç›®å½•æœ€å¥½ä¹Ÿè‡ªå·±æ‰‹åŠ¨åˆ›å»º</li></ol><h4 id="é…ç½®æ–‡ä»¶ä¿®æ”¹"><a href="#é…ç½®æ–‡ä»¶ä¿®æ”¹" class="headerlink" title="é…ç½®æ–‡ä»¶ä¿®æ”¹"></a>é…ç½®æ–‡ä»¶ä¿®æ”¹</h4><p>æ³¨é‡Šæ‰bindï¼Œä¸ç„¶åªèƒ½å®‰è£…Redisæœ¬æœºè®¿é—®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">bind</span> 127.0.0.1</span></span><br></pre></td></tr></table></figure><p>å¼€å¯AOFæŒä¹…åŒ–</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">appendonly yes</span><br></pre></td></tr></table></figure><p>å†™å…¥æœºåˆ¶</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ¯æ¬¡æœ‰ä¿®æ”¹å°±ç«‹åˆ»å†™å…¥</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">appendfsync always</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">æ¯ç§’é’Ÿå†™å…¥ä¸€æ¬¡ï¼ˆæ¨èè¯¥æ–¹å¼ï¼‰</span></span><br><span class="line">appendfsync everysec</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">è®©Redisè‡ªåŠ¨åˆ¤æ–­</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">appendfsync no</span></span><br></pre></td></tr></table></figure><p>ä¿å­˜æ–‡ä»¶çš„åå­—ï¼Œé»˜è®¤å³å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">appendfilename &quot;appendonly.aof&quot;</span><br></pre></td></tr></table></figure><p>ä¿å­˜æ•°æ®çš„ä½ç½®</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">å½“å‰ç›®å½•ï¼Œå¯é€‰æ‹©å…¶ä»–ç›®å½•</span></span><br><span class="line">dir ./</span><br></pre></td></tr></table></figure><p>é…ç½®è¿æ¥å¯†ç </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">requirepass pwd123456</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=always -p 6379:6379 --name docker_redis -v /root/redis/redis.conf:/etc/redis/redis.conf -v /root/redis/data:/data -d redis redis-server /etc/redis/redis.conf --appendonly yes</span><br></pre></td></tr></table></figure><ul><li>runï¼šè¿è¡Œ</li><li>â€“restart&#x3D;alwaysï¼šå½“dockeré‡å¯æ—¶ï¼Œè¯¥å®¹å™¨ä¹Ÿä¼šé‡æ–°å¯åŠ¨</li><li>-d redisï¼šåå°è¿è¡Œredisé•œåƒ</li><li>-pï¼šæ˜ å°„ç«¯å£å·ï¼Œå®¹å™¨å†…éƒ¨å’ŒæœåŠ¡å™¨å†…éƒ¨å…³è”</li><li>--appendonly yesï¼šæŒä¹…åŒ–</li><li>â€“name docker_redisï¼šå¯åŠ¨ä¸€ä¸ªrediså¹¶è®¾ç½®dockerå®¹å™¨åç§°ä¸ºdocker_redis</li><li>-v &#x2F;root&#x2F;redis&#x2F;redis.conf:&#x2F;etc&#x2F;redis&#x2F;redis.confï¼šå°†æœåŠ¡å™¨ä¸­redis.confæ–‡ä»¶æ˜ å°„åˆ°dockerä¸­</li><li>-v &#x2F;root&#x2F;redis&#x2F;data:&#x2F;dataï¼šåŒä¸Š</li><li>redis-server &#x2F;etc&#x2F;redis&#x2F;redis.confï¼šä»¥åŠ è½½é…ç½®æ–‡ä»¶æ–¹å¼å¯åŠ¨</li></ul><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>è¿è¡Œè¿‡ä¹‹åï¼Œé‡å¯RedisæœåŠ¡ï¼Œå°†ä¼šåœ¨&#x2F;root&#x2F;redis&#x2F;dataæ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¿å­˜çš„æ–‡ä»¶ <img src="https://www.itze.cn/wp-content/uploads/2021/01/redis.png"></p>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisç›¸å…³ç‰¹æ€§-å¤šæ•°æ®åº“åŠkeyå¸¸ç”¨æ“ä½œ</title>
      <link href="/2020/12/31/redis%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7-%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8Akey%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
      <url>/2020/12/31/redis%E7%9B%B8%E5%85%B3%E7%89%B9%E6%80%A7-%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%8Akey%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="Rediså¤šæ•°æ®åº“ç‰¹æ€§"><a href="#Rediså¤šæ•°æ®åº“ç‰¹æ€§" class="headerlink" title="Rediså¤šæ•°æ®åº“ç‰¹æ€§"></a>Rediså¤šæ•°æ®åº“ç‰¹æ€§</h3><p>ä¸€ä¸ªRedisæœ€å¤šå¯è¿æ¥16ä¸ªæ•°æ®åº“ï¼Œä¸‹æ ‡ä»0-15ï¼Œé»˜è®¤è¿æ¥çš„æ˜¯ä¸‹æ ‡0 å·æ•°æ®åº“</p><h3 id="Demoä»£ç "><a href="#Demoä»£ç " class="headerlink" title="Demoä»£ç "></a>Demoä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Transaction;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisKeyDemo</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Jedisè¿æ¥æ± è¿æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title function_">getJedisByPool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">jedisPoolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">30</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å¤§ç©ºé—²æ•°</span></span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//è·å–è¿æ¥æ± </span></span><br><span class="line">        <span class="type">JedisPool</span> <span class="variable">jedisPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(jedisPoolConfig, <span class="string">&quot;192.168.06.37&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redis keyå¸¸ç”¨æ“ä½œ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">keysMethod</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisKeyDemo.getJedisByPool();</span><br><span class="line">        jedis.keys(<span class="string">&quot;*&quot;</span>);<span class="comment">//æŸ¥çœ‹æ‰€æœ‰key</span></span><br><span class="line">        jedis.keys(<span class="string">&quot;set?&quot;</span>);<span class="comment">//æŸ¥çœ‹æ‰€æœ‰ä»¥setå¼€å¤´çš„keyï¼Œeg:sete/set1</span></span><br><span class="line">        jedis.del(<span class="string">&quot;set1&quot;</span>,<span class="string">&quot;aw&quot;</span>);<span class="comment">//åˆ é™¤æŒ‡å®škey</span></span><br><span class="line">        jedis.exists(<span class="string">&quot;set1&quot;</span>);<span class="comment">//åˆ¤æ–­æŒ‡å®škeyæ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        jedis.rename(<span class="string">&quot;oldKeyName&quot;</span>,<span class="string">&quot;newKeyName&quot;</span>);<span class="comment">//é‡å‘½åkeyåå­—</span></span><br><span class="line">        jedis.expire(<span class="string">&quot;set1&quot;</span>,<span class="number">10</span>);<span class="comment">//è®¾ç½®keyå€¼è¿‡æœŸäº‹ä»¶ï¼Œå•ä½ç§’</span></span><br><span class="line">        jedis.ttl(<span class="string">&quot;set1&quot;</span>);<span class="comment">//æŸ¥çœ‹keyå€¼æœ‰æ•ˆæœŸå‰©ä½™æ—¶é—´ï¼Œæ²¡æœ‰è®¾ç½®åˆ™è¿”å›-1</span></span><br><span class="line">        jedis.type(<span class="string">&quot;set1&quot;</span>);<span class="comment">//è·å–æŒ‡å®škeyçš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redisç›¸å…³ç‰¹æ€§</span></span><br><span class="line"><span class="comment">     * å¤šæ•°æ®åº“</span></span><br><span class="line"><span class="comment">     * ä¸€ä¸ªRedisæœ€å¤šå¯è¿æ¥16ä¸ªæ•°æ®åº“ï¼Œä¸‹æ ‡ä»0-15</span></span><br><span class="line"><span class="comment">     * é»˜è®¤è¿æ¥çš„æ˜¯ä¸‹æ ‡0 å·æ•°æ®åº“</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dataBase</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisKeyDemo.getJedisByPool();</span><br><span class="line">        jedis.select(<span class="number">1</span>);<span class="comment">//åˆ‡æ¢æ•°æ®åº“ï¼Œé€‰å–1å·æ•°æ®åº“ï¼Œé»˜è®¤0å·æ•°æ®åº“</span></span><br><span class="line">        jedis.move(<span class="string">&quot;hello&quot;</span>,<span class="number">1</span>);<span class="comment">//å°†keyå€¼helloç§»åˆ°1å·æ•°æ®åº“</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * äº‹ç‰©ç›¸å…³æ“ä½œ</span></span><br><span class="line"><span class="comment">         * multi:å¼€å¯ä¸€ä¸ªäº‹ç‰©</span></span><br><span class="line"><span class="comment">         * åœ¨æ­¤ä¹‹åçš„å‘½ä»¤éƒ½å°†è¢«æ”¾åˆ°é˜Ÿåˆ—å½“ä¸­ç›´åˆ°execçš„æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">         * exec:æäº¤</span></span><br><span class="line"><span class="comment">         * discardï¼šå›æ»š</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.set(<span class="string">&quot;sw&quot;</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">multi</span> <span class="operator">=</span> jedis.multi();<span class="comment">//å¼€å¯äº‹ç‰©</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * swå¢åŠ 1ï¼Œæ³¨æ„ï¼Œè¿™é‡Œåªæ˜¯æ”¾å…¥é˜Ÿåˆ—</span></span><br><span class="line"><span class="comment">         * æ­¤æ—¶å¦‚æœå»è¿æ¥Reidsï¼Œget swè¿™ä¸ªkeyï¼Œè¿”å›ç»“æœä»æ˜¯1ï¼Œ</span></span><br><span class="line"><span class="comment">         * åº”ä¸ºå½“å‰äº‹ç‰©å¹¶æ²¡æœ‰æäº¤</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.incr(<span class="string">&quot;sw&quot;</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æäº¤äº‹ç‰©</span></span><br><span class="line"><span class="comment">         * æ‰§è¡Œè¿‡execä¹‹åå†å»è¿æ¥Redisï¼Œget swï¼Œè¿”å›ç»“æœæ‰æ˜¯2</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        multi.exec();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * *************************************************</span></span><br><span class="line"><span class="comment">         * å›æ»šæ“ä½œ</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.set(<span class="string">&quot;a1&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">        <span class="type">Transaction</span> <span class="variable">multi1</span> <span class="operator">=</span> jedis.multi();<span class="comment">//å¼€å¯äº‹ç‰©</span></span><br><span class="line">        jedis.set(<span class="string">&quot;a1&quot;</span>,<span class="string">&quot;tom&quot;</span>);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ­£å¸¸æƒ…å†µè¿™é‡Œæäº¤äº‹ç‰©ä¹‹åa1å°†å˜ä¸ºtom</span></span><br><span class="line"><span class="comment">         * æ‰§è¡Œå›æ»šæ“ä½œï¼Œä¹‹åget a1 ä»ä¸ºjack</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        multi.discard();<span class="comment">//å›æ»š</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisåŸºæœ¬æ•°æ®ç»“æ„ç±»å‹åŠæ–¹æ³•</title>
      <link href="/2020/12/25/redis%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2020/12/25/redis%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h3 id="RedisåŸºæœ¬æ•°æ®ç»“æ„ç±»å‹"><a href="#RedisåŸºæœ¬æ•°æ®ç»“æ„ç±»å‹" class="headerlink" title="RedisåŸºæœ¬æ•°æ®ç»“æ„ç±»å‹"></a>RedisåŸºæœ¬æ•°æ®ç»“æ„ç±»å‹</h3><ul><li>string</li><li>hash</li><li>list</li><li>set</li><li>zset</li></ul><h4 id="Demoä»£ç "><a href="#Demoä»£ç " class="headerlink" title="Demoä»£ç "></a>Demoä»£ç </h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.ListPosition;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisDemo</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Jedisè¿æ¥æ± è¿æ¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title function_">getJedisByPool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">jedisPoolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">30</span>);</span><br><span class="line">        <span class="comment">//è®¾ç½®æœ€å¤§ç©ºé—²æ•°</span></span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//è·å–è¿æ¥æ± </span></span><br><span class="line">        <span class="type">JedisPool</span> <span class="variable">jedisPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(jedisPoolConfig, <span class="string">&quot;192.168.06.37&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redisæ•°æ®ç»“æ„-String</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">redisStringType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisDemo.getJedisByPool();</span><br><span class="line">        jedis.set(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;123&quot;</span>);<span class="comment">//è®¾ç½®å­—ç¬¦ä¸²ç±»å‹key,value</span></span><br><span class="line">        jedis.get(<span class="string">&quot;test&quot;</span>);<span class="comment">//è·å–å­—ç¬¦ä¸²ç±»å‹value</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * ä»¥ä¸‹æœ‰å…³å¢å‡çš„åªå¯¹valueæ•°å­—ç±»çš„æœ‰ç”¨</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.incr(<span class="string">&quot;test&quot;</span>);<span class="comment">//å°†keyå€¼ä¸ºï¼štestçš„valueå€¼åŠ 1</span></span><br><span class="line">        jedis.decr(<span class="string">&quot;test&quot;</span>);<span class="comment">//å°†keyå€¼ä¸ºï¼štestçš„valueå€¼å‡1</span></span><br><span class="line">        jedis.incrBy(<span class="string">&quot;test&quot;</span>, <span class="number">10</span>);<span class="comment">//å°†keyå€¼ä¸ºï¼štestçš„valueå€¼åŠ 10</span></span><br><span class="line">        jedis.decrBy(<span class="string">&quot;test&quot;</span>, <span class="number">5</span>);<span class="comment">//å°†keyå€¼ä¸ºï¼štestçš„valueå€¼åŠ 5</span></span><br><span class="line">        jedis.append(<span class="string">&quot;test&quot;</span>, <span class="string">&quot;hello&quot;</span>);<span class="comment">//åœ¨keyå€¼ä¸ºï¼štestçš„valueå€¼åé¢æ‹¼æ¥ï¼šhello</span></span><br><span class="line">        jedis.exists(<span class="string">&quot;test&quot;</span>);<span class="comment">//åˆ¤æ–­testçš„keyå€¼æ˜¯å¦</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redisæ•°æ®ç»“æ„-Hash</span></span><br><span class="line"><span class="comment">     * å­˜å‚¨å½¢å¼ä¸ºï¼škey value,å…¶ä¸­valueä¸ºé”®å€¼å¯¹å½¢å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">redisHashType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisDemo.getJedisByPool();</span><br><span class="line">        Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;xiaoming&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;sex&quot;</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        jedis.hset(<span class="string">&quot;user&quot;</span>, map);<span class="comment">//å¯ä»¥ç›´æ¥å­˜å…¥map</span></span><br><span class="line">        jedis.hset(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;18&quot;</span>);</span><br><span class="line">        jedis.hget(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;name&quot;</span>);<span class="comment">//è·å–userä¸­nameé”®å€¼å¯¹</span></span><br><span class="line">        jedis.hgetAll(<span class="string">&quot;user&quot;</span>);<span class="comment">//è·å–userä¸­æ‰€æœ‰çš„é”®å€¼å¯¹ä¿¡æ¯</span></span><br><span class="line">        jedis.hincrBy(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="number">2</span>);<span class="comment">//å°†ageåŠ 2</span></span><br><span class="line">        jedis.hkeys(<span class="string">&quot;user&quot;</span>);<span class="comment">//æŸ¥çœ‹userä¸­æ‰€æœ‰çš„keyå€¼ï¼Œname/sex/age</span></span><br><span class="line">        jedis.hvals(<span class="string">&quot;user&quot;</span>);<span class="comment">//æŸ¥çœ‹userä¸­æ‰€æœ‰çš„valueå€¼ï¼Œxiaoming...</span></span><br><span class="line">        jedis.hlen(<span class="string">&quot;user&quot;</span>);<span class="comment">//è·å–userä¸­é”®å€¼å¯¹çš„ä¸ªæ•°</span></span><br><span class="line">        jedis.hdel(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;age&quot;</span>);<span class="comment">//åˆ é™¤ageé”®å€¼å¯¹</span></span><br><span class="line">        jedis.hexists(<span class="string">&quot;user&quot;</span>, <span class="string">&quot;age&quot;</span>);<span class="comment">//åˆ¤æ–­userä¸­æ˜¯å¦å­˜åœ¨keyå€¼ä¸ºageçš„é”®å€¼å¯¹</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redisæ•°æ®ç»“æ„-List</span></span><br><span class="line"><span class="comment">     * åŒå‘é“¾è¡¨ç»“æ„,ä»é“¾è¡¨çš„ä¸¤å¤´æ’å…¥ã€åˆ é™¤å…ƒç´ ä¼šæ¯”è¾ƒé«˜æ•ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">redisListType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisDemo.getJedisByPool();</span><br><span class="line">        jedis.lpush(<span class="string">&quot;list1&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);<span class="comment">//å°†a/b/cä»å·¦ä¾§(é“¾è¡¨çš„å‰)å‹å…¥list1ä¸­</span></span><br><span class="line">        jedis.rpush(<span class="string">&quot;list2&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);<span class="comment">//å°†a/b/cä»å³ä¾§(é“¾è¡¨çš„å)å‹å…¥list2ä¸­</span></span><br><span class="line">        jedis.lset(<span class="string">&quot;list1&quot;</span>, <span class="number">1</span>, <span class="string">&quot;123&quot;</span>);<span class="comment">//å°†ä¸‹æ ‡1çš„bæ›´æ”¹ä¸º123</span></span><br><span class="line">        jedis.lrange(<span class="string">&quot;list&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);<span class="comment">//æŸ¥çœ‹listä¸­å…ƒç´ ï¼Œ-1ä»£è¡¨æœ€åä¸€ä¸ª</span></span><br><span class="line">        jedis.linsert(<span class="string">&quot;list&quot;</span>, ListPosition.BEFORE, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;x&quot;</span>);<span class="comment">//åœ¨å…ƒç´ açš„å‰é¢æ’å…¥x</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * lrem</span></span><br><span class="line"><span class="comment">         * keyï¼šlist</span></span><br><span class="line"><span class="comment">         * count:2,ä»£è¡¨ä»å‰å‘åéå†åˆ é™¤å‰ä¸¤ä¸ªaå…ƒç´ </span></span><br><span class="line"><span class="comment">         * count:0,ä»£è¡¨åˆ é™¤listä¸­æ‰€æœ‰aå…ƒç´ </span></span><br><span class="line"><span class="comment">         * count:-1,ä»£è¡¨ä»åå¾€å‰éå†åˆ é™¤ï¼Œä»åå¾€å‰æ•°ï¼Œç¬¬ä¸€ä¸ªaå…ƒç´ </span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.lrem(<span class="string">&quot;list1&quot;</span>, <span class="number">2</span>, <span class="string">&quot;a&quot;</span>);</span><br><span class="line">        jedis.llen(<span class="string">&quot;list1&quot;</span>);<span class="comment">//æŸ¥çœ‹listä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">        jedis.lpop(<span class="string">&quot;list1&quot;</span>);<span class="comment">//å°†ç¬¬ä¸€ä¸ªå…ƒç´ å¼¹å‡ºæ¥ï¼Œå¼¹å‡ºä¹‹ålist1ä¸­å°†ä¸å­˜åœ¨è¯¥å…ƒç´ </span></span><br><span class="line">        jedis.lpushx(<span class="string">&quot;list1&quot;</span>, <span class="string">&quot;w&quot;</span>);<span class="comment">//ä»…å½“list1å­˜åœ¨æ—¶åœ¨å¤´éƒ¨æ’å…¥w</span></span><br><span class="line">        jedis.rpoplpush(<span class="string">&quot;lsit1&quot;</span>, <span class="string">&quot;list2&quot;</span>);<span class="comment">//å°†lsit1çš„å°¾éƒ¨æœ€åä¸€ä¸ªå…ƒç´ å¼¹å‡ºï¼Œå¹¶å‹å…¥list2çš„å¤´éƒ¨ç¬¬ä¸€ä¸ªä½ç½®</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redisæ•°æ®ç»“æ„-Set</span></span><br><span class="line"><span class="comment">     * ä¸å…è®¸å…ƒç´ é‡å¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">redisSetType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisDemo.getJedisByPool();</span><br><span class="line">        jedis.sadd(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;123&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>);<span class="comment">//æ·»åŠ ä¸€ä¸ªseté›†åˆ</span></span><br><span class="line">        jedis.sadd(<span class="string">&quot;set2&quot;</span>, <span class="string">&quot;12&quot;</span>, <span class="string">&quot;x&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;a&quot;</span>);<span class="comment">//æ·»åŠ ä¸€ä¸ªseté›†åˆ</span></span><br><span class="line">        jedis.srem(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;123&quot;</span>);<span class="comment">//åˆ é™¤set1é›†åˆä¸­çš„123å…ƒç´ </span></span><br><span class="line">        jedis.sismember(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;123&quot;</span>);<span class="comment">//åˆ¤æ–­set1é›†åˆä¸­123å…ƒç´ æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å·®é›†è¿ç®—</span></span><br><span class="line"><span class="comment">         * æ¯”è¾ƒä¸¤ä¸ªé›†åˆä¸­çš„å·®é›†ï¼Œå’Œkyesæ”¾ç½®çš„é¡ºåºæœ‰å…³ç³»</span></span><br><span class="line"><span class="comment">         * set1:1,2,3/set2:2,3,4,5</span></span><br><span class="line"><span class="comment">         * egï¼šjesit.sdiff(&quot;set1&quot;,&quot;set2&quot;)</span></span><br><span class="line"><span class="comment">         * ç»“æœï¼š1</span></span><br><span class="line"><span class="comment">         * ä¼šè¿”å›set1ä¸­å“ªäº›å…ƒç´ æ˜¯set2é›†åˆä¸­æ²¡æœ‰çš„</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.sdiff(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);<span class="comment">//å·®é›†è¿ç®—</span></span><br><span class="line">        jedis.sdiffstore(<span class="string">&quot;set3&quot;</span>, <span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);<span class="comment">//å°†set1é›†åˆå’Œset2é›†åˆ,å·®é›†å­˜åˆ°set3é›†åˆä¸­</span></span><br><span class="line">        jedis.sinter(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);<span class="comment">//äº¤é›†è¿ç®—ï¼Œè¿”å›ä¸¤é›†åˆä¸­å…±æœ‰çš„å…ƒç´ </span></span><br><span class="line">        jedis.sinterstore(<span class="string">&quot;set4&quot;</span>, <span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);<span class="comment">//å°†set1å’Œset2å…±æœ‰çš„å…ƒç´ å­˜å…¥set4é›†åˆä¸­</span></span><br><span class="line">        jedis.sunion(<span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);<span class="comment">//å¹¶é›†è¿ç®—ï¼Œè¿”å›ä¸¤ä¸ªé›†åˆæ‰€æœ‰çš„å…ƒç´ ï¼Œseté›†åˆä¼šè‡ªåŠ¨å»é‡</span></span><br><span class="line">        jedis.sunionstore(<span class="string">&quot;set5&quot;</span>, <span class="string">&quot;set1&quot;</span>, <span class="string">&quot;set2&quot;</span>);<span class="comment">//å°†set1å’Œset2é›†åˆä¸­æ‰€æœ‰å…ƒç´ ï¼Œå­˜å…¥set5é›†åˆ</span></span><br><span class="line">        jedis.smembers(<span class="string">&quot;set1&quot;</span>);<span class="comment">//æŸ¥çœ‹set1é›†åˆä¸­æœ‰å“ªäº›å…ƒç´ </span></span><br><span class="line">        jedis.scard(<span class="string">&quot;set1&quot;</span>);<span class="comment">//è¿”å›set1é›†åˆä¸­å…ƒç´ æ•°é‡</span></span><br><span class="line">        jedis.srandmember(<span class="string">&quot;set1&quot;</span>);<span class="comment">//éšæœºè¿”å›set1é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Redisæ•°æ®ç»“æ„ sorted-Set</span></span><br><span class="line"><span class="comment">     * ä¸å…è®¸å…ƒç´ é‡å¤</span></span><br><span class="line"><span class="comment">     * æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªåˆ†æ•°å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sortedSetType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> RedisDemo.getJedisByPool();</span><br><span class="line">        Map&lt;String, Double&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;ls&quot;</span>, <span class="number">100.0</span>);</span><br><span class="line">        map.put(<span class="string">&quot;ww&quot;</span>, <span class="number">99.0</span>);</span><br><span class="line">        map.put(<span class="string">&quot;w2&quot;</span>, <span class="number">50.0</span>);</span><br><span class="line">        map.put(<span class="string">&quot;w1&quot;</span>, <span class="number">69.0</span>);</span><br><span class="line">        map.put(<span class="string">&quot;w3&quot;</span>, <span class="number">64.0</span>);</span><br><span class="line">        jedis.zadd(<span class="string">&quot;sortedSet1&quot;</span>, <span class="number">80</span>, <span class="string">&quot;zs&quot;</span>);<span class="comment">//æ·»åŠ å…ƒç´ ï¼Œè¿”å›æ–°æ·»åŠ å…ƒç´ çš„ä¸ªæ•°ï¼Œæ³¨æ„æ˜¯æ–°æ·»åŠ æˆåŠŸçš„</span></span><br><span class="line">        jedis.zadd(<span class="string">&quot;sortedSet1&quot;</span>, <span class="number">100</span>, <span class="string">&quot;zs&quot;</span>);<span class="comment">//å¦‚æœå†æ¬¡æ·»åŠ zsçš„åˆ†å€¼æ•°å°†ä¼šæ›´æ–°æˆ100</span></span><br><span class="line">        jedis.zadd(<span class="string">&quot;sortedSet1&quot;</span>, map);<span class="comment">//æ·»åŠ å…ƒç´ ï¼Œæ”¯æŒmapé”®å€¼å¯¹å½¢å¼</span></span><br><span class="line">        jedis.zscore(<span class="string">&quot;sortedSet1&quot;</span>, <span class="string">&quot;zs&quot;</span>);<span class="comment">//è·å–sortedSet1é›†åˆä¸­zsçš„åˆ†æ•°ï¼Œè¿”å›ç»“æœ100</span></span><br><span class="line">        jedis.zcard(<span class="string">&quot;sortedSet1&quot;</span>);<span class="comment">//è·å–sortedSet1é›†åˆæˆå‘˜çš„æ•°é‡</span></span><br><span class="line">        jedis.zrem(<span class="string">&quot;sortedSet1&quot;</span>, <span class="string">&quot;zs&quot;</span>);<span class="comment">//åˆ é™¤sortedSet1é›†åˆä¸­zså…ƒç´ </span></span><br><span class="line">        jedis.zrange(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//æŸ¥è¯¢èŒƒå›´ï¼Œè¿”å›ä¸‹æ ‡0-1ä¹Ÿå°±æ˜¯å‰2ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æŸ¥è¯¢èŒƒå›´å¹¶æŒ‰ç…§åˆ†æ•°å€¼ä»å°åˆ°å¤§æ’åˆ—ï¼Œ</span></span><br><span class="line"><span class="comment">         * è¿”å›ç»“æœSet&lt;Tuple&gt;ï¼Œ</span></span><br><span class="line"><span class="comment">         * éå†å¾—åˆ°Tupleç±»å‹ï¼Œ</span></span><br><span class="line"><span class="comment">         * getScoreï¼šåˆ†æ•°å€¼ï¼Œ</span></span><br><span class="line"><span class="comment">         * getElement:å…ƒç´ å</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.zrangeWithScores(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">0</span>,-<span class="number">1</span>);<span class="comment">//-1å³æœ€åä¸€ä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§åˆ†æ•°å€¼ä»å°å¤§åˆ°</span></span><br><span class="line">        jedis.zrevrangeWithScores(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">0</span>,-<span class="number">1</span>);<span class="comment">//æŒ‰ç…§åˆ†æ•°å€¼ä»å¤§åˆ°å°</span></span><br><span class="line">        jedis.zrangeByScore(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">60.0</span>,<span class="number">99.0</span>);<span class="comment">//æŒ‰ç…§åˆ†æ•°å€¼èŒƒå›´æŸ¥æ‰¾å…ƒç´ åï¼Œeg:60.0æœ€å°å€¼ï¼Œ99.0æœ€å¤§å€¼ï¼ŒåŒ…å«è¾¹ç•Œ</span></span><br><span class="line">        jedis.zremrangeByRank(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">0</span>,<span class="number">1</span>);<span class="comment">//æŒ‰ç…§èŒƒå›´åˆ é™¤ï¼Œå³åˆ é™¤ä¸‹æ ‡0-1çš„å‰ä¸¤ä¸ª</span></span><br><span class="line">        jedis.zremrangeByScore(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">0</span>,<span class="number">60</span>);<span class="comment">//æŒ‰ç…§åˆ†æ•°å€¼èŒƒå›´åˆ é™¤ï¼Œå³åˆ é™¤å¤§äºç­‰äº0å°äºç­‰äº60çš„å…ƒç´ </span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * zrangeByScoreWithScores</span></span><br><span class="line"><span class="comment">         * æŒ‰ç…§åˆ†æ•°å€¼ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line"><span class="comment">         * æŒ‰ç…§åˆ†æ•°å€¼èŒƒå›´20.0-90.0</span></span><br><span class="line"><span class="comment">         * å¹¶ä¸”é™åˆ¶åªè¦0,3 å‰3ä¸ªå…ƒç´ ï¼Œå°±å¦‚SQLä¸­çš„limitæ•ˆæœä¸€æ ·</span></span><br><span class="line"><span class="comment">         * zrevrangeByScoreWithScores</span></span><br><span class="line"><span class="comment">         * æŒ‰ç…§åˆ†æ•°å€¼ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line"><span class="comment">         * *********************************************************************</span></span><br><span class="line"><span class="comment">         * æ³¨æ„ï¼šzrangeByScoreWithScoresï¼Œä»å°åˆ°å¤§çš„æ’åˆ—</span></span><br><span class="line"><span class="comment">         * keyå€¼sortedSet1åé¢ç¬¬ä¸€ä¸ªæ˜¯æœ€å°åˆ†æ•°å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯æœ€å¤§åˆ†æ•°å€¼</span></span><br><span class="line"><span class="comment">         * zrevrangeByScoreWithScoresï¼Œä»å¤§åˆ°å°çš„æ’åˆ—</span></span><br><span class="line"><span class="comment">         * keyå€¼sortedSet1åé¢ç¬¬ä¸€ä¸ªæ˜¯æœ€å¤§åˆ†æ•°å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯æœ€å°åˆ†æ•°å€¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        jedis.zrangeByScoreWithScores(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">20.0</span>,<span class="number">90.0</span>,<span class="number">0</span>,<span class="number">3</span>);<span class="comment">//ä»å°åˆ°å¤§</span></span><br><span class="line">        jedis.zrevrangeByScoreWithScores(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">90.0</span>,<span class="number">20.0</span>,<span class="number">0</span>,<span class="number">3</span>);<span class="comment">//ä»å¤§åˆ°å°</span></span><br><span class="line">        jedis.zincrby(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">30.0</span>,<span class="string">&quot;w3&quot;</span>);<span class="comment">//å¢åŠ æŒ‡å®šå…ƒç´ åˆ†æ•°å€¼ï¼Œegï¼šw3åˆ†æ•°å€¼åœ¨åŸæœ‰åŸºç¡€å¢åŠ 30</span></span><br><span class="line">        jedis.zcount(<span class="string">&quot;sortedSet1&quot;</span>,<span class="number">60.0</span>,<span class="number">100.0</span>);<span class="comment">//è·å–æŒ‡å®šåˆ†æ•°å€¼èŒƒå›´å…ƒç´ çš„ä¸ªæ•°ï¼Œeg:å¤§äºç­‰äº60å°äºç­‰äº100çš„å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…Redis</title>
      <link href="/2020/12/24/docker%E5%AE%89%E8%A3%85redis/"/>
      <url>/2020/12/24/docker%E5%AE%89%E8%A3%85redis/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Dockerç‰ˆæœ¬ï¼šDocker version 19.03.1</li></ul><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>dockeræœ‰å…³å¸¸ç”¨å‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/docker/512.html" title="Dockerå¸¸ç”¨å‘½ä»¤[æŒç»­æ›´æ–°]">Dockerå¸¸ç”¨å‘½ä»¤[æŒç»­æ›´æ–°]</a> æ‹‰å–é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull redis</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‹‰å–çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h3><p>è¿è¡Œå®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -itd --name docker_reids -p 6379:6379 redis</span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it docker_reids /bin/bash</span><br></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨ä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ <img src="https://www.itze.cn/wp-content/uploads/2020/12/redis.png"> dockerå®‰è£…ä¸œè¥¿å¤§è‡´éƒ½æ˜¯è¿™ä¸ªæµç¨‹</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå¸¸ç”¨å‘½ä»¤[æ›´æ–°]</title>
      <link href="/2020/12/14/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"/>
      <url>/2020/12/14/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p><strong>ä»¥ä¸‹æœ‰å…³é•œåƒæ“ä½œï¼Œå‡å·²mysqlä¸ºä¾‹</strong> æœç´¢é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure><p>æ‹‰å–é•œåƒï¼Œé»˜è®¤æœ€é«˜ç‰ˆæœ¬</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure><p>æ‹‰å–æŒ‡å®šç‰ˆæœ¬å·çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·²ç»æ‹‰å–çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p>åˆ é™¤é•œåƒï¼ˆéœ€è¦å…ˆåˆ é™¤è¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨ï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rmi é•œåƒID</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker start å®¹å™¨ID</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æœ€è¿‘åˆ›å»ºçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -l</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹åˆ›å»ºçš„å®¹å™¨åŒ…æ‹¬æœªå¯åŠ¨çš„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><p>åœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop å®¹å™¨ID</span><br></pre></td></tr></table></figure><p>åˆ é™¤å·²ç»åˆ›å»ºçš„å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker rm å®¹å™¨ID</span><br></pre></td></tr></table></figure><p>é‡å¯å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker restart å®¹å™¨ID</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºè¿è¡Œå®¹å™¨æ€»æ–‡ä»¶å¤§å°</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps -s</span><br></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it å®¹å™¨ID/å®¹å™¨åç§° /bin/bash</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockerå®‰è£…Mysql</title>
      <link href="/2020/12/14/docker%E5%AE%89%E8%A3%85mysql/"/>
      <url>/2020/12/14/docker%E5%AE%89%E8%A3%85mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Dockerç‰ˆæœ¬ï¼š20.10.0</li></ul><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>æå‰å¼€æ”¾å¥½mysqléœ€è¦ç”¨åˆ°çš„ç«¯å£å·ï¼Œæœ‰çš„è¿˜éœ€è¦å»æœåŠ¡å™¨çš„æ§åˆ¶ä¸­å¿ƒæ·»åŠ æ”¾è¡Œç«¯å£å·ï¼ŒCentOS 7æœ‰å…³å¼€æ”¾ç«¯å£å·çš„æ“ä½œå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a></p><h3 id="æ‹‰å–é•œåƒ-é»˜è®¤æ‹‰å–æœ€é«˜ç‰ˆæœ¬-ç›®å‰åº”è¯¥æ˜¯mysql-8"><a href="#æ‹‰å–é•œåƒ-é»˜è®¤æ‹‰å–æœ€é«˜ç‰ˆæœ¬-ç›®å‰åº”è¯¥æ˜¯mysql-8" class="headerlink" title="æ‹‰å–é•œåƒ,é»˜è®¤æ‹‰å–æœ€é«˜ç‰ˆæœ¬,ç›®å‰åº”è¯¥æ˜¯mysql 8"></a>æ‹‰å–é•œåƒ,é»˜è®¤æ‹‰å–æœ€é«˜ç‰ˆæœ¬,ç›®å‰åº”è¯¥æ˜¯mysql 8</h3><p>Dockerå¸¸ç”¨çš„æ“ä½œå‘½ä»¤å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/docker/512.html" title="Dockerå¸¸ç”¨å‘½ä»¤[æŒç»­æ›´æ–°]">Dockerå¸¸ç”¨å‘½ä»¤[æŒç»­æ›´æ–°]</a></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure><h3 id="æ‹‰å–æŒ‡å®šç‰ˆæœ¬"><a href="#æ‹‰å–æŒ‡å®šç‰ˆæœ¬" class="headerlink" title="æ‹‰å–æŒ‡å®šç‰ˆæœ¬"></a>æ‹‰å–æŒ‡å®šç‰ˆæœ¬</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run --restart=always -d -p 3306:3306 --privileged=true -v /docker/mysql/conf/my.cnf:/etc/my.cnf -v /docker/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name docker_mysql mysql</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><ul><li>runï¼šè¿è¡Œ</li><li>--restart&#x3D;alwaysï¼šå½“dockeré‡å¯æ—¶ï¼Œè¯¥å®¹å™¨ä¹Ÿä¼šé‡æ–°å¯åŠ¨</li><li>-dï¼šåå°è¿è¡Œ</li><li>-pï¼šæ˜ å°„ç«¯å£å·ï¼Œå®¹å™¨å†…éƒ¨å’ŒæœåŠ¡å™¨å†…éƒ¨å…³è”</li><li>--privileged&#x3D;trueï¼šè®¾ç½®å…è®¸rootç”¨æˆ·ç™»é™†</li><li>-v &#x2F;docker&#x2F;mysql&#x2F;conf&#x2F;my.cnf:&#x2F;etc&#x2F;my.cnfï¼šå°†æœåŠ¡å™¨ä¸­çš„my.cnfé…ç½®æ˜ å°„åˆ°dockerä¸­çš„&#x2F;docker&#x2F;mysql&#x2F;conf&#x2F;my.cnfé…ç½®</li><li>-v &#x2F;docker&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysqlï¼šåŒä¸Š,æ˜ å°„æ•°æ®åº“çš„æ•°æ®ç›®å½•, é¿å…ä»¥ådockeråˆ é™¤é‡æ–°è¿è¡ŒMySQLå®¹å™¨æ—¶æ•°æ®ä¸¢å¤±</li><li>-e MYSQL_ROOT_PASSWORD&#x3D;123456ï¼šè®¾ç½®rootè´¦æˆ·å¯†ç ä¸º123456</li><li>--name docker_mysql mysqlï¼šå¯åŠ¨ä¸€ä¸ªmysqlå¹¶è®¾ç½®dockerå®¹å™¨åç§°ä¸ºdocker_mysql</li></ul><h3 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec -it docker_mysqlï¼ˆdockerå®¹å™¨åç§°ï¼‰ bash</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥mysql"><a href="#è¿æ¥mysql" class="headerlink" title="è¿æ¥mysql"></a>è¿æ¥mysql</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºç”¨æˆ·"><a href="#åˆ›å»ºç”¨æˆ·" class="headerlink" title="åˆ›å»ºç”¨æˆ·"></a>åˆ›å»ºç”¨æˆ·</h3><p>åˆ›å»ºä¸€ä¸ªtestè´¦æˆ·å¯†ç ä¸º123456ï¼Œå¹¶ä¸”å…è®¸è¿œç¨‹ç™»é™†ï¼Œå¦‚æœæƒ³è¦testè´¦æˆ·åªèƒ½å®‰è£…mysqlçš„è¿™å°æœºå™¨ç™»é™†ï¼Œå°±æŠŠâ€™%â€™æ”¹æˆâ€™localhostâ€™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">CREATE USER &#x27;test&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure><h3 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h3><p>æˆäºˆtestè´¦æˆ·æ‰€æœ‰æƒé™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">grant all on *.* to &#x27;test&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><h3 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h3><p>å¦‚æœå®‰è£…çš„æ˜¯mysql8,éœ€è¦æ›´æ”¹åŠ å¯†æ–¹å¼æ‰èƒ½ä½¿ç”¨Navicatå·¥å…·è¿œç¨‹è¿æ¥,æ‰€æœ‰éœ€è¦è¿œç¨‹è¿æ¥çš„è´¦æˆ·éƒ½è¦æ›´æ”¹ï¼Œå¦‚æœä¸æ˜¯mysql8ï¼Œæ¯”å¦‚mysql5.7æ˜¯ä¸éœ€è¦çš„</p><h4 id="æ›´æ”¹åŠ å¯†æ–¹å¼"><a href="#æ›´æ”¹åŠ å¯†æ–¹å¼" class="headerlink" title="æ›´æ”¹åŠ å¯†æ–¹å¼"></a>æ›´æ”¹åŠ å¯†æ–¹å¼</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ALTER USER &#x27;test&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;123456&#x27; PASSWORD EXPIRE NEVER;</span><br></pre></td></tr></table></figure><h4 id="æ›´æ–°å¯†ç "><a href="#æ›´æ–°å¯†ç " class="headerlink" title="æ›´æ–°å¯†ç "></a>æ›´æ–°å¯†ç </h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ALTER USER &#x27;test&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br></pre></td></tr></table></figure><h4 id="åˆ·æ–°æƒé™"><a href="#åˆ·æ–°æƒé™" class="headerlink" title="åˆ·æ–°æƒé™"></a>åˆ·æ–°æƒé™</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><h4 id="é€€å‡º"><a href="#é€€å‡º" class="headerlink" title="é€€å‡º"></a>é€€å‡º</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">exit;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸¤éï¼Œç¬¬ä¸€æ¬¡é€€å‡ºmysqlï¼Œç¬¬äºŒæ¬¡é€€å‡ºdockerå®¹å™¨</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå®‰è£…Matlab Runtimeè¿è¡Œç¯å¢ƒ</title>
      <link href="/2020/12/14/linux%E5%AE%89%E8%A3%85matlab-runtime%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/"/>
      <url>/2020/12/14/linux%E5%AE%89%E8%A3%85matlab-runtime%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>ä¸‹è½½å‹ç¼©åŒ…ï¼Œå®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://ww2.mathworks.cn/products/compiler/matlab-runtime.html" title="https://ww2.mathworks.cn/products/compiler/matlab-runtime.html">https://ww2.mathworks.cn/products/compiler/matlab-runtime.html</a> ä¸‹è½½å¥½ä¹‹åå°†å‹ç¼©åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è§£å‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">unzip   ä½ çš„å‹ç¼©åŒ…å.zip</span><br></pre></td></tr></table></figure><p>å®˜æ–¹é™é»˜å®‰è£…</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./install -mode silent -agreeToLicense yes</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½ä¹‹åæœ€åä¼šæœ‰ä¸€ä¸ªLD_LIBRARY_PATHçš„è·¯å¾„ï¼Œå¤åˆ¶ä¸‹æ¥ï¼Œæ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>å¯ä»¥åœ¨æœ«å°¾å¤„æ·»åŠ </p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=/usr/local/MATLAB/MATLAB_Runtime/#ç­‰äºå·åé¢æ”¹æˆä½ çš„å®‰è£…åçš„è·¯å¾„</span><br></pre></td></tr></table></figure><p>åˆ·æ–°ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> MATLAB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå®‰è£…jdkç¯å¢ƒ</title>
      <link href="/2020/12/14/linux%E5%AE%89%E8%A3%85jdk%E7%8E%AF%E5%A2%83/"/>
      <url>/2020/12/14/linux%E5%AE%89%E8%A3%85jdk%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>æå‰ä¸‹è½½å¥½jdkå‹ç¼©åŒ…ï¼Œæˆ‘çš„ä¸‹è½½åœ°å€ï¼šé“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1RJSJmWFnsKBhZvpBDidlSQ" title="https://pan.baidu.com/s/1RJSJmWFnsKBhZvpBDidlSQ">https://pan.baidu.com/s/1RJSJmWFnsKBhZvpBDidlSQ</a> æå–ç ï¼šitze Oracleå®˜æ–¹ä¸‹è½½åœ°å€ï¼Œéœ€è¦ç™»é™†è´¦æˆ·æ‰èƒ½ä¸‹è½½ <a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html" title="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a> ä¸‹è½½å¥½ä¹‹åï¼Œå°†å‹ç¼©åŒ…ä¸Šä¼ è‡³æœåŠ¡å™¨</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è§£å‹ä¸‹è½½ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„å‹ç¼©åŒ…</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">tar -xvf jdk-8u241-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><p>é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p>åœ¨æœ€ä¸‹é¢æ·»åŠ ä»¥ä¸‹å†…å®¹</p><h3 id="é‡è¦"><a href="#é‡è¦" class="headerlink" title="é‡è¦!!!"></a>é‡è¦!!!</h3><p><strong>ä¸‹é¢ä»£ç ä¸­æ‰€æœ‰å¸¦{}çš„å‰é¢å¤åˆ¶ä¹‹ååŠ ä¸Šï¼Œä¾‹å¦‚${JAVA_HOME}</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export JAVA_HOME=/root/Java/jdk1.8.0_241 #ä½ çš„å‹ç¼©åŒ…è§£å‹å‡ºæ¥çš„è·¯å¾„</span><br><span class="line">export JRE_HOME=$&#123;JAVA_HOME&#125;/jre</span><br><span class="line">export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure><p>åˆ·æ–°ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>éªŒè¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/12/javaVersion.png"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Java </tag>
            
            <tag> JDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOSå®‰è£…Docker</title>
      <link href="/2020/12/11/linux%E5%AE%89%E8%A3%85docker/"/>
      <url>/2020/12/11/linux%E5%AE%89%E8%A3%85docker/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><p>æ“ä½œç³»ç»Ÿï¼šCentOS 7 å†…æ ¸ç‰ˆæœ¬ï¼š3.10.0-1062.12.1.el7.x86_64</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><ol><li>ä½¿ç”¨å‘½ä»¤uname -ræŸ¥çœ‹ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ï¼Œæ®è¯´è¦3.10åŠä»¥ä¸Š</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><ol start="2"><li>æ›´æ–°yumæºè‡³æœ€æ–°</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><ol start="3"><li>å®‰è£…è½¯ä»¶åŒ…</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure><ol start="4"><li>è®¾ç½®yumæº</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure><ol start="5"><li>å®‰è£…dockerï¼Œé»˜è®¤å®‰è£…æœ€é«˜ç‰ˆæœ¬</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install docker-ce</span><br></pre></td></tr></table></figure><ol start="6"><li>å¯åŠ¨docker</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><ol start="7"><li>æŸ¥çœ‹dockerçŠ¶æ€</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure><ol start="8"><li>æ·»åŠ å¼€æœºå¯åŠ¨</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure><ol start="9"><li>éªŒè¯docker</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure><p>å‡ºç°ç‰ˆæœ¬å·å³å®‰è£…æˆåŠŸ æ³¨ï¼šæœ¬ç¯‡æ–‡ç« æœ‰å‚è€ƒç½‘ç»œåé¦ˆæˆåŠŸç‡è¾ƒé«˜çš„æ–‡ç« </p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CRITICAL:yum.cli:Config Error: Error accessing file for config file:///etc/yum.conf</title>
      <link href="/2020/12/11/criticalyum-cliconfig-error-error-accessing-file-for-config-file-etc-yum-conf/"/>
      <url>/2020/12/11/criticalyum-cliconfig-error-error-accessing-file-for-config-file-etc-yum-conf/</url>
      
        <content type="html"><![CDATA[<h3 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šCentOS 7</li><li>Pythonç‰ˆæœ¬ï¼šPython 2.7.5</li></ul><h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p>ç»ä¸¤æ¬¡æµ‹è¯•ï¼Œé€ æˆè¿™ä¸ªé”™è¯¯çš„åŸå› ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸Šè£…å®ŒMatlabï¼ˆç‰ˆæœ¬ï¼šMATLAB_Runtime_R2019aï¼‰ä¹‹åï¼Œä½¿ç”¨ä»»ä½•æœ‰å…³yumçš„å‘½ä»¤éƒ½ä¼šæŠ¥ï¼š<strong>CRITICAL:yum.cli:Config Error: Error accessing file for config file:&#x2F;&#x2F;&#x2F;etc&#x2F;yum.conf</strong> è¿™ä¸ªé”™</p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>å…ˆè¯´ä¸€ä¸‹ç½‘ç»œä¸Šå‡ºç°çš„æœ€å¤šçš„ä¸€ç§åŠæ³•ï¼Œå®é™…æµ‹è¯•è¿™ç§æŠŠæ³•å¯¹æˆ‘è¿™ç§æƒ…å†µå¹¶æ²¡æœ‰ç”¨ï¼Œè¿è¡Œåˆ°æœ€åä¸€æ­¥ä¸€æ ·æŠ¥åŒæ ·çš„é”™è¯¯ï¼Œæˆ–è®¸å¯¹ä½ ä»¬æœ‰ç”¨ä¸å¦¨å¯ä»¥å…ˆè¯•è¯•è¿™ç§æ–¹æ³•ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget http://yum.baseurl.org/download/3.2/yum-3.2.28.tar.gz</span><br><span class="line">tar xvf yum-3.2.28.tar.gz</span><br><span class="line">cd yum-3.2.28</span><br><span class="line">touch /etc/yum.conf</span><br><span class="line">./yummain.py install yum</span><br></pre></td></tr></table></figure><p>æˆ‘æœ€åè§£å†³çš„æŠŠæ³•æ˜¯ï¼Œå…ˆæŠŠMatlabå¸è½½ï¼Œç„¶åå¸è½½é‡è£…yum</p><h4 id="å¸è½½Matlab"><a href="#å¸è½½Matlab" class="headerlink" title="å¸è½½Matlab"></a>å¸è½½Matlab</h4><p>ç›´æ¥åˆ é™¤è¯¥è·¯å¾„ä¸‹çš„MATLABæ–‡ä»¶å¤¹å³å¯</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm -rf /usr/local/MATLAB</span><br></pre></td></tr></table></figure><h4 id="å¸è½½yum"><a href="#å¸è½½yum" class="headerlink" title="å¸è½½yum"></a>å¸è½½yum</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -qagrep yumxargs rpm -e --nodeps</span><br></pre></td></tr></table></figure><h3 id="ä¸‹è½½yumåŒ…"><a href="#ä¸‹è½½yumåŒ…" class="headerlink" title="ä¸‹è½½yumåŒ…"></a>ä¸‹è½½yumåŒ…</h3><p>yumä¸‹è½½åœ°å€ï¼š<a href="http://yum.baseurl.org/wiki/releases.html" title="http://yum.baseurl.org/wiki/releases.html">http://yum.baseurl.org/wiki/releases.html</a> <img src="https://www.itze.cn/wp-content/uploads/2020/12/yum.png"> å»ºè®®é€‰æ‹©æœ€æ–°ç‰ˆçš„ç¨³å®šç‰ˆä¸‹è½½ï¼Œä¸‹è½½å®Œæˆä¹‹åä¸Šä¼ è‡³æœåŠ¡å™¨ï¼Œä½¿ç”¨wgetä¹Ÿå¯ä»¥ï¼Œæ›´æ–¹ä¾¿ä¸€ç‚¹ ä¸‹é¢çš„æ­¥éª¤å°±å’Œç½‘ç»œä¸Šæµä¼ çš„æœ€å¤šçš„æ–¹å¼å¾ˆç›¸ä¼¼äº†</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar xvf yum-3.4.3.tar.gz</span><br><span class="line">cd yum-3.4.3</span><br><span class="line">touch /etc/yum.conf</span><br><span class="line">./yummain.py install yum</span><br></pre></td></tr></table></figure><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šæŠ¥é”™ï¼ŒæŠ¥ä¸€äº›Pytonæœ‰å…³çš„é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘çš„Pyhonç‰ˆæœ¬æ˜¯Python 2.7.5ï¼Œ æŠ¥é”™å¦‚ä¸‹ï¼š<strong>No module named sqlitecachec</strong> è§£å†³åŠæ³•æ‰§è¡Œå®‰è£…å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rpm -ivh http://mirror.centos.org/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm --force</span><br></pre></td></tr></table></figure><p>ç„¶åå†æ¬¡è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./yummain.py install yum</span><br></pre></td></tr></table></figure><p>æœ€åè¯´ä¸€ä¸‹ï¼Œè¿™é‡Œyumçš„é—®é¢˜è§£å†³äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è§£å†³MatlabRuntimeå’Œyumå…±å­˜çš„é—®é¢˜ï¼Œåç»­æœ‰ç ”ç©¶å†åšæ›´æ–°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Matlab </tag>
            
            <tag> yum </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-é€šè¿‡æ³¨è§£æ³¨å…¥Beançš„å‡ ç§æ–¹å¼(äºŒ)</title>
      <link href="/2020/12/01/srping-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%B3%A8%E5%85%A5bean%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%E4%BA%8C/"/>
      <url>/2020/12/01/srping-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%B3%A8%E5%85%A5bean%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F%E4%BA%8C/</url>
      
        <content type="html"><![CDATA[<h4 id="Springé€šè¿‡æ³¨è§£æ³¨å…¥Bean-è¿™é‡Œè®°å½•ä¸€ä¸‹æ³¨å…¥Listã€Mapã€Stringç±»å‹çš„æ³¨å…¥"><a href="#Springé€šè¿‡æ³¨è§£æ³¨å…¥Bean-è¿™é‡Œè®°å½•ä¸€ä¸‹æ³¨å…¥Listã€Mapã€Stringç±»å‹çš„æ³¨å…¥" class="headerlink" title="Springé€šè¿‡æ³¨è§£æ³¨å…¥Bean,è¿™é‡Œè®°å½•ä¸€ä¸‹æ³¨å…¥Listã€Mapã€Stringç±»å‹çš„æ³¨å…¥"></a>Springé€šè¿‡æ³¨è§£æ³¨å…¥Bean,è¿™é‡Œè®°å½•ä¸€ä¸‹æ³¨å…¥Listã€Mapã€Stringç±»å‹çš„æ³¨å…¥</h4><p>MyBean.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Listç±»å‹æ³¨å…¥æ–¹å¼</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;testList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setList</span><span class="params">(List&lt;String&gt; list)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Mapç±»å‹æ³¨å…¥</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String,Integer&gt; initMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Integer&gt; <span class="title function_">getInitMap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> initMap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;springMap&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setInitMap</span><span class="params">(Map&lt;String, Integer&gt; initMap)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.initMap = initMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç®€å•æ•°æ®ç±»å‹</span></span><br><span class="line">    <span class="keyword">private</span> String string;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> string;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;111&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setString</span><span class="params">(String string)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.string = string;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šä¸‹æ–‡ç¯å¢ƒBeanConfig.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;com.example.demo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanConfig</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœéœ€è¦æœ‰Listéœ€è¦æ³¨å…¥ï¼ŒSpringä¼šæœ‰é™è€ƒè™‘ç¬¬äºŒä¸ªStringç±»å‹</span></span><br><span class="line"><span class="comment">     * å¦‚æœåŒæ—¶å­˜åœ¨å°±æ˜¯éœ€è¦æ³¨å…¥listéœ€è¦æ·»åŠ BeanId</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">testList</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list.add(<span class="string">&quot;List&quot;</span>);</span><br><span class="line">        list.add(<span class="string">&quot;ç±»å‹&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(&quot;springMap&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, Integer&gt; <span class="title function_">initMap</span><span class="params">()</span> &#123;</span><br><span class="line">        Map&lt;String, Integer&gt; hashMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(<span class="string">&quot;aaa&quot;</span>, <span class="number">123</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;bbb&quot;</span>, <span class="number">456</span>);</span><br><span class="line">        hashMap.put(<span class="string">&quot;ccc&quot;</span>, <span class="number">777</span>);</span><br><span class="line">        <span class="keyword">return</span> hashMap;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Order</span>æ³¨è§£ç±»å‹int ä¸éœ€è¦ä»ä¸‹æ ‡0å¼€å§‹</span></span><br><span class="line"><span class="comment">     * ä¸éœ€è¦è¿ç»­</span></span><br><span class="line"><span class="comment">     * å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Order(60)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">string1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;123&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Order(50)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">string2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;456&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//Mapç±»å‹ä½¿ç”¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">integer1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">888</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">integer2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">999</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç Test.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.example.demo.spring.BeanConfig;</span><br><span class="line"><span class="keyword">import</span> com.example.demo.spring.MyBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/10/14 11:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–Springä¸Šä¸‹æ–‡</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(BeanConfig.class);</span><br><span class="line">        <span class="type">MyBean</span> <span class="variable">myBean</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;myBean&quot;</span>, MyBean.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;myBean = &quot;</span> + myBean);</span><br><span class="line">        <span class="comment">//Listç±»å‹</span></span><br><span class="line">        <span class="keyword">for</span> (String s : myBean.getList()) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Mapç±»å‹</span></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : myBean.getInitMap().entrySet()) &#123;</span><br><span class="line">            System.out.println(entry.getKey());</span><br><span class="line">            System.out.println(<span class="string">&quot;value:&quot;</span> + entry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Stringç±»å‹</span></span><br><span class="line">        System.out.println(myBean.getString());</span><br><span class="line">        <span class="comment">//å†…éƒ¨æ¥å£</span></span><br><span class="line">        <span class="type">List</span> <span class="variable">testList</span> <span class="operator">=</span> myBean.getContext().getBean(<span class="string">&quot;testList&quot;</span>, List.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;======================&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object o : testList) &#123;</span><br><span class="line">            System.out.println(o);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="comment">         * myBean = com.example.demo.spring.MyBean@62da83ed</span></span><br><span class="line"><span class="comment">         * List</span></span><br><span class="line"><span class="comment">         * ç±»å‹</span></span><br><span class="line"><span class="comment">         * aaa</span></span><br><span class="line"><span class="comment">         * value:123</span></span><br><span class="line"><span class="comment">         * ccc</span></span><br><span class="line"><span class="comment">         * value:777</span></span><br><span class="line"><span class="comment">         * bbb</span></span><br><span class="line"><span class="comment">         * value:456</span></span><br><span class="line"><span class="comment">         * 111</span></span><br><span class="line"><span class="comment">         * ======================</span></span><br><span class="line"><span class="comment">         * List</span></span><br><span class="line"><span class="comment">         * ç±»å‹</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><h4 id="æ³¨å…¥Listç±»å‹"><a href="#æ³¨å…¥Listç±»å‹" class="headerlink" title="æ³¨å…¥Listç±»å‹"></a>æ³¨å…¥Listç±»å‹</h4><ol><li>åœ¨MyBean.javaä¸­ç”ŸæˆListçš„Setã€Getæ–¹æ³•ï¼Œåœ¨Setæ–¹æ³•ä¸Šä½¿ç”¨@Autowiredæ³¨è§£ï¼Œå‘Šè¯‰Springä¸Šä¸‹æ–‡ç¯å¢ƒä¸­éœ€è¦ä¸€ä¸ªListç±»å‹çš„Bean</li><li>åœ¨BeanConfig.javaä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ç”ŸæˆListç±»å‹çš„Bean,å³åˆ›å»ºè¿”å›å€¼ä¸ºListçš„æ–¹æ³•å¹¶åœ¨æ–¹æ³•ä¸Šæ–¹ä½¿ç”¨@Beanï¼Œå°†è¯¥æ–¹æ³•äº¤ç”±Springç®¡ç†</li><li>åœ¨Test.javaè·å–ä¸Šä¸‹æ–‡ç¯å¢ƒåé€šè¿‡getList()æ–¹æ³•è·å–æ³¨å…¥çš„List&gt;&gt;éå†æ‰“å°è¾“å‡ºï¼ŒListä¸­å…ƒç´ çš„é¡ºåºå³ä¸ºæ·»åŠ æ—¶çš„é¡ºåº</li></ol><h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><ul><li>å¦‚æœåœ¨BeanConfig.javaä¸Šä¸‹æ–‡ç¯å¢ƒä¸­åŒæ—¶å­˜åœ¨Listç±»å‹çš„Beanå’Œä¸æ³¨å…¥çš„List<String>æ³›å‹ç›¸åŒBeanï¼ˆä¹Ÿå°±æ˜¯è¿”å›ç»“æœä¸ºStringç±»å‹çš„æ–¹æ³•çš„Beanï¼‰ï¼ŒSpringä¼šä¼˜å…ˆè€ƒè™‘ä¸æ³¨å…¥Listç±»å‹æ³›å‹ç›¸åŒçš„Stringç±»å‹çš„Beanï¼Œå¹¶ä¸”å°†è¯¥Stringç±»å‹çš„Beançš„è¿”å›å€¼æ”¾åˆ°Listä¸­ï¼Œå› è€ŒTest.javaæµ‹è¯•ä»£ç è¾“å‡ºç»“æœå°±æ˜¯è¯¥Stringç±»å‹çš„Beançš„è¿”å›å€¼ã€‚</li><li>å¦‚æœä½¿ç”¨ä¸æ³›å‹ç›¸åŒBeanæ³¨å…¥ï¼Œä½¿ç”¨@Orderæ§åˆ¶é¡ºåºï¼Œ@Orderæ³¨è§£çš„å€¼ä¸ºintç±»å‹ï¼Œå€¼ä¸éœ€è¦çº¦æŸä»ä¸‹æ ‡0å¼€å§‹ï¼Œä¸éœ€è¦è¿ç»­ï¼Œä¾‹å¦‚ï¼š@Order(10)ã€@Order(20)ï¼Œ@Order(10)æ³¨è§£ä¸‹çš„å€¼å°±ä¼šæ’åœ¨å‰é¢</li><li>å¦‚æœéœ€è¦BeanConfig.javaä¸Šä¸‹æ–‡ç¯å¢ƒä¸­éœ€è¦åŒæ—¶å­˜åœ¨ä¸Šé¢ä¸¤ç§æƒ…å†µï¼Œé‚£ä¹ˆåˆæƒ³ä½¿ç”¨Listç±»å‹çš„Beanï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åœ¨MyBean.javaæ³¨å…¥æ—¶ï¼ŒæŒ‡å®šBeanï¼Œéœ€è¦ä½¿ç”¨@Qualifier(value &#x3D; â€œtestListâ€),å…¶ä¸­valueå€¼ä¸ºBeançš„IDï¼Œ@Beané»˜è®¤å€¼ä¸ºæ–¹æ³•åï¼Œä¹Ÿå¯ä»¥æŒ‡å®šï¼Œä¾‹å¦‚ï¼š@Bean(â€œitzeâ€),é‚£ä¹ˆä½¿ç”¨è¿™ä¸ªBeanå°±æ˜¯@Qualifier(value &#x3D; â€œitzeâ€)</li></ul><h4 id="æ³¨å…¥Mapç±»å‹"><a href="#æ³¨å…¥Mapç±»å‹" class="headerlink" title="æ³¨å…¥Mapç±»å‹"></a>æ³¨å…¥Mapç±»å‹</h4><p>å’Œæ³¨å…¥Listç±»å‹çš„å¤§å·®ä¸å·® 1. åœ¨MyBean.javaä¸­ç”ŸæˆMapçš„Setã€Getæ–¹æ³•ï¼Œåœ¨Setæ–¹æ³•ä¸Šä½¿ç”¨@Autowiredæ³¨è§£ï¼Œå‘Šè¯‰Springä¸Šä¸‹æ–‡ç¯å¢ƒä¸­éœ€è¦ä¸€ä¸ªMapç±»å‹çš„Bean 2. åœ¨BeanConfig.javaä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ç”ŸæˆMapç±»å‹çš„Bean,å³åˆ›å»ºè¿”å›å€¼ä¸ºMapçš„æ–¹æ³•å¹¶åœ¨æ–¹æ³•ä¸Šæ–¹ä½¿ç”¨@Beanï¼Œå°†è¯¥æ–¹æ³•äº¤ç”±Springç®¡ç† 3. åœ¨Test.javaè·å–ä¸Šä¸‹æ–‡ç¯å¢ƒåé€šè¿‡getInitMap()æ–¹æ³•è·å–æ³¨å…¥çš„Map&gt;&gt;éå†æ‰“å°è¾“å‡º</p><h4 id="æ³¨æ„-1"><a href="#æ³¨æ„-1" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h4><p>å’ŒListè§„åˆ™ä¹Ÿæ˜¯å¤§å·®ä¸å·® - å¦‚æœBeanConfig.javaä¸Šä¸‹æ–‡ç¯å¢ƒä¸­åŒæ—¶å­˜åœ¨Mapç±»å‹çš„Beanå’Œä¸æ³¨å…¥Map&lt;String,Integer&gt;ç±»å‹æ³›å‹valueç±»å‹ç›¸åŒçš„Bean(ä¹Ÿå°±æ˜¯è¿”å›å€¼ä¸ºIntegerç±»å‹çš„æ–¹æ³•ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ äº†@Beanæ³¨è§£)ï¼ŒSpringä¼šä¼˜å…ˆè€ƒè™‘è¿”å›å€¼ä¸æ³¨å…¥æ³›å‹ä¸­valueç±»å‹ç›¸åŒçš„Beanï¼Œå¹¶å°†è¯¥Beançš„IDä½œä¸ºMapçš„Key,è¯¥Beançš„è¿”å›å€¼ä½œä¸ºMapçš„Valueï¼Œå› è€ŒTest.javaæµ‹è¯•ä»£ç è¾“å‡ºMapéå†çš„ç»“æœå°±æ˜¯è¯¥Integerç±»å‹æ–¹æ³•å&gt;&gt;&gt;Key,è¿”å›å€¼&gt;&gt;&gt;Value - å¦‚æœBeanConfig.javaä¸Šä¸‹æ–‡ç¯å¢ƒä¸­åŒæ—¶å­˜åœ¨ä¸¤ç§ç±»å‹ï¼Œåˆæƒ³ä½¿ç”¨Mapç±»å‹çš„Beanï¼ŒåŒæ ·æ–¹æ³•æ³¨å…¥æ—¶ä½¿ç”¨@Qualifier(value &#x3D; â€œBeanIDâ€)æŒ‡å®šBeançš„ID</p><h4 id="æ³¨å…¥Stringç±»å‹"><a href="#æ³¨å…¥Stringç±»å‹" class="headerlink" title="æ³¨å…¥Stringç±»å‹"></a>æ³¨å…¥Stringç±»å‹</h4><ol><li>åŒæ ·åœ¨MyBean.javaä¸­ç”ŸæˆStringçš„Setã€Getæ–¹æ³•ï¼Œåœ¨Setæ–¹æ³•ä¸Šä½¿ç”¨@Value(â€œ213â€)æ³¨è§£</li><li>åœ¨Test.javaæµ‹è¯•ä»£ç ä¸­ï¼Œè·å–ä¸Šä¸‹æ–‡ç¯å¢ƒä¹‹åç›´æ¥é€šè¿‡getString()è·å–â€213â€</li></ol>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Spring </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SVNä»“åº“ä»Windowsè¿ç§»è‡³Linux(CentOS 7)</title>
      <link href="/2020/11/24/svn%E4%BB%93%E5%BA%93%E4%BB%8Ewindows%E8%BF%81%E7%A7%BB%E8%87%B3linuxcentos-7/"/>
      <url>/2020/11/24/svn%E4%BB%93%E5%BA%93%E4%BB%8Ewindows%E8%BF%81%E7%A7%BB%E8%87%B3linuxcentos-7/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p><strong>SVNä»“åº“éœ€è¦ä»Windows 10æ“ä½œç³»ç»Ÿæ•´ä½“è¿ç§»è‡³Linux CentOS 7 æ“ä½œç³»ç»Ÿ</strong></p><h3 id="è¿ç§»å‡†å¤‡"><a href="#è¿ç§»å‡†å¤‡" class="headerlink" title="è¿ç§»å‡†å¤‡"></a>è¿ç§»å‡†å¤‡</h3><ul><li>éœ€è¦å…ˆåœ¨Linuxé‚£å°æ“ä½œç³»ç»Ÿçš„æœåŠ¡å™¨ä¸Šå®‰è£…SVNï¼Œå…·ä½“å®‰è£…æ•™ç¨‹çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/460.html" title="Linuxï¼ˆCentOS 7ï¼‰å®‰è£…SVNè¯¦è§£">Linuxï¼ˆCentOS 7ï¼‰å®‰è£…SVNè¯¦è§£</a></li><li>å®‰è£…å®Œæˆä»¥åæ–°å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œä»“åº“åæœ€å¥½å’Œéœ€è¦è¿ç§»çš„ä»“åº“åå­—å¯¹åº”</li></ul><h3 id="æ“ä½œè¿‡ç¨‹"><a href="#æ“ä½œè¿‡ç¨‹" class="headerlink" title="æ“ä½œè¿‡ç¨‹"></a>æ“ä½œè¿‡ç¨‹</h3><p><strong>Windowså¹³å°SVNç®¡ç†ä½¿ç”¨çš„æ˜¯VisualSVNï¼Œæ¯”å¦‚ä½ çš„ä»“åº“è·¯å¾„ä½ç½®ï¼šD:\svn\AProject,ï¼ˆAProjectæ˜¯é¡¹ç›®ä»“åº“åç§°ï¼‰ï¼Œåˆ©ç”¨svnadminï¼ŒLinuxæ“ä½œç³»ç»Ÿéœ€è¦çš„æ˜¯.dumpç»“å°¾çš„æ–‡ä»¶ä¸æ˜¯ç”¨VisualSVNå¤‡ä»½å‡ºæ¥çš„.vsvn.bakç»“å°¾æ–‡ä»¶ï¼Œä¸‹é¢å¼€å§‹æ“ä½œå‘½ä»¤</strong></p><h4 id="å¯¼å‡º"><a href="#å¯¼å‡º" class="headerlink" title="å¯¼å‡º"></a>å¯¼å‡º</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnadmin dump AProject &gt; D:\AProject.dump</span><br></pre></td></tr></table></figure><p>D:\AProject.dump çš„æ„æ€æ˜¯æ–°çš„æ–‡ä»¶å¯¼å‡ºåˆ°Dç›˜ä¸‹ï¼Œæ–‡ä»¶åä¸ºAProject.dump å¯¼å‡ºæ˜¯æ—¶é—´å’Œä»“åº“å¤§å°æœ‰å…³ï¼Œè¿™æ ·æ˜¯æ‰€æœ‰Versionç‰ˆæœ¬å·éƒ½ä¼šå¯¼å‡ºæ¥ï¼Œå¦‚æœåªéœ€è¦å¯¼å‡ºæŒ‡å®šç‰ˆæœ¬</p><h4 id="å¯¼å‡ºæŒ‡å®šç‰ˆæœ¬å·"><a href="#å¯¼å‡ºæŒ‡å®šç‰ˆæœ¬å·" class="headerlink" title="å¯¼å‡ºæŒ‡å®šç‰ˆæœ¬å·"></a>å¯¼å‡ºæŒ‡å®šç‰ˆæœ¬å·</h4><p>å¯¼å‡ºVersionç‰ˆæœ¬å·ä¸º20çš„æ‰€æœ‰AProjectä»“åº“ä¸‹çš„æ–‡ä»¶ï¼Œå¯¼å‡ºåˆ°Dç›˜ï¼Œå‘½åä¸ºAProject.dump</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnadmin dump AProject -r 20 &gt; D:\AProject.dump</span><br></pre></td></tr></table></figure><p>å¯¼å‡ºVersionç‰ˆæœ¬å·100-200ä¹‹é—´çš„</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnadmin dump AProject -r 100:200 &gt; D:\AProject.dump</span><br></pre></td></tr></table></figure><p>å¯¼å‡ºå®Œæˆä¹‹åæŠŠå¯¼å‡ºçš„AProject.dumpä¸Šä¼ åˆ°æœåŠ¡å™¨</p><h4 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h4><p>æœ€å¥½æå‰åˆ›å»ºå¥½ä¸€ä¸ªå’Œéœ€è¦è¿ç§»çš„SVNåº“åå­—ä¸€æ ·çš„ä»“åº“&#x2F;svn&#x2F;AProject ï¼ŒAProjectä¸ºLinuxæ–°å»ºçš„ä»“åº“ï¼Œè¿™é‡Œæ¨¡æ‹ŸæŠŠä¹‹å‰å¯¼å‡ºçš„AProject.dumpæ–‡ä»¶ä¸Šä¼ åˆ°äº†æœåŠ¡å™¨&#x2F;svnä¸‹</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnadmin load /svn/AProject &lt; /svn/AProject.dump</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä½ç½®ç®—æ˜¯SVNåº“è¿ç§»å®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯é…ç½®è´¦æˆ·å’Œæƒé™</p><h3 id="è´¦æˆ·å’Œæƒé™"><a href="#è´¦æˆ·å’Œæƒé™" class="headerlink" title="è´¦æˆ·å’Œæƒé™"></a>è´¦æˆ·å’Œæƒé™</h3><p>ç”±äºWindowsæ“ä½œç³»ç»Ÿä¸ŠSVNä½¿ç”¨VisualSVNæœ¬åœ°å¯†ç å­˜å‚¨ä¸ºåŠ å¯†çš„å¯†æ–‡ï¼Œè€ŒLinuxæ“ä½œç³»ç»Ÿä¸ŠSVNè´¦æˆ·å­˜å‚¨ä¸ºæ˜æ–‡ï¼Œè¿™é‡Œå”¯ä¸€éº»çƒ¦çš„ä¸€ç‚¹æ˜¯éœ€è¦å°†å¯†æ–‡æ›¿æ¢æˆæ˜æ–‡</p><h4 id="Windowsæ“ä½œç³»ç»ŸVisualSVNç®¡ç†çš„è´¦æˆ·å­˜å‚¨ä½ç½®"><a href="#Windowsæ“ä½œç³»ç»ŸVisualSVNç®¡ç†çš„è´¦æˆ·å­˜å‚¨ä½ç½®" class="headerlink" title="Windowsæ“ä½œç³»ç»ŸVisualSVNç®¡ç†çš„è´¦æˆ·å­˜å‚¨ä½ç½®"></a>Windowsæ“ä½œç³»ç»ŸVisualSVNç®¡ç†çš„è´¦æˆ·å­˜å‚¨ä½ç½®</h4><ul><li>è´¦æˆ·å’Œå¯†ç åœ¨å’Œé¡¹ç›®ä»“åº“åŒçº§è·¯å¾„ä¸‹æ–‡ä»¶åä¸ºï¼šhtpasswdï¼Œå³é”®-æ‰“å¼€æ–¹å¼å¯ä»¥ç”¨è®°äº‹æœ¬ï¼Œå¯ä»¥ä½¿ç”¨NotePad++</li><li>ç»„ç®¡ç†ä¿¡æ¯åœ¨åŒçº§è·¯å¾„ä¸‹æ–‡ä»¶åä¸ºï¼šgroups.conf,æ‰“å¼€æ–¹å¼åŒä¸Š</li><li>æƒé™åˆ†é…æ–‡ä»¶ä½ç½®ï¼ŒSVNä»“åº“ç›®å½•çš„ä¸‹ä¸€çº§é‡Œé¢ï¼Œå¦‚åœ¨ï¼šD:\AProjecté‡Œé¢æ‰¾åˆ°confæ–‡ä»¶åŒå‡»è¿›å…¥æ‰¾åˆ°æ–‡ä»¶åä¸ºï¼šVisualSVN-SvnAuthz.iniè¿™ä¸ªå°±æ˜¯ï¼Œå¦‚å›¾ä¿®æ”¹ <img src="https://www.itze.cn/wp-content/uploads/2020/11/code.png"></li></ul><h3 id="é…ç½®æ–°SVNä»“åº“è´¦æˆ·å’Œæƒé™"><a href="#é…ç½®æ–°SVNä»“åº“è´¦æˆ·å’Œæƒé™" class="headerlink" title="é…ç½®æ–°SVNä»“åº“è´¦æˆ·å’Œæƒé™"></a>é…ç½®æ–°SVNä»“åº“è´¦æˆ·å’Œæƒé™</h3><p>æŠŠä¸Šé¢æ‰¾åˆ°çš„è´¦æˆ·å’Œå¯†ç ï¼Œè¿˜æœ‰æƒé™æ–‡ä»¶ï¼ŒæŒ‰ç…§è¿™ç¯‡æ–‡ç« é‡Œé¢çš„è®¾ç½®å»ä¿®æ”¹æˆä¸€æ ·çš„å³å¯<a href="https://www.itze.cn/linux/460.html" title="Linuxï¼ˆCentOS 7ï¼‰å®‰è£…SVNè¯¦è§£">Linuxï¼ˆCentOS 7ï¼‰å®‰è£…SVNè¯¦è§£</a> æœ€åé…ç½®å®Œæ¯•ä¸è¦å¿˜äº†é‡å¯SVNæœåŠ¡!</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SVN </tag>
            
            <tag> Windwos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxï¼ˆCentOS 7ï¼‰å®‰è£…SVNè¯¦è§£</title>
      <link href="/2020/11/23/linux%EF%BC%88centos-7%EF%BC%89%E5%AE%89%E8%A3%85svn%E8%AF%A6%E8%A7%A3/"/>
      <url>/2020/11/23/linux%EF%BC%88centos-7%EF%BC%89%E5%AE%89%E8%A3%85svn%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h3 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h3><ul><li>æ“ä½œç³»ç»Ÿï¼šLinux(CentOS 7)</li><li>éœ€è¦æå‰å¼€æ”¾3690ç«¯å£ï¼ŒCentOSå¦‚ä½•å¼€æ”¾ç«¯å£å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.itze.cn/linux/468.html" title="CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£">CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</a></li></ul><h3 id="å®‰è£…å‘½ä»¤"><a href="#å®‰è£…å‘½ä»¤" class="headerlink" title="å®‰è£…å‘½ä»¤"></a>å®‰è£…å‘½ä»¤</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install -y subversion</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…è¿‡ç¨‹"><a href="#å®‰è£…è¿‡ç¨‹" class="headerlink" title="å®‰è£…è¿‡ç¨‹"></a>å®‰è£…è¿‡ç¨‹</h3><p><strong>SVNå®‰è£…å®Œæˆä¹‹åé»˜è®¤çš„ä»“åº“è·¯å¾„æ˜¯ï¼š&#x2F;var&#x2F;svn é€šè¿‡å‘½ä»¤</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/svnserve</span><br></pre></td></tr></table></figure><p><strong>ä¿®æ”¹ä½ç½®ï¼šOPTIONS&#x3D;â€-r &#x2F;var&#x2F;svnâ€ï¼Œä¿®æ”¹å…¶ä¸­çš„&#x2F;var&#x2F;svnå°±å¯ä»¥äº†ï¼Œé»˜è®¤å³å¯ï¼</strong></p><h3 id="ä»“åº“åˆ›å»º"><a href="#ä»“åº“åˆ›å»º" class="headerlink" title="ä»“åº“åˆ›å»º"></a>ä»“åº“åˆ›å»º</h3><p><strong>æ³¨æ„ï¼šè¿™é‡Œå¦‚æœä¸Šé¢çš„é»˜è®¤ä½ç½®(&#x2F;var&#x2F;svn)æ²¡æœ‰æ›´æ”¹ï¼Œå°±æŠŠé¡¹ç›®ä»“åº“åˆ›å»ºåˆ°é»˜è®¤ä½ç½®ä¸‹é¢ï¼Œå¦‚æœä¿®æ”¹äº†ï¼Œå°±åˆ›å»ºåˆ°ä½ ä¿®æ”¹çš„è·¯å¾„ä¸‹</strong></p><h4 id="åˆ›å»ºç¤ºä¾‹"><a href="#åˆ›å»ºç¤ºä¾‹" class="headerlink" title="åˆ›å»ºç¤ºä¾‹"></a>åˆ›å»ºç¤ºä¾‹</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir -p /var/svn/svntest</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">svnadmin create /var/svn/svntest</span><br></pre></td></tr></table></figure><p><strong>æ‰§è¡Œå®Œä¸Šé¢ä¸¤ä¸ªå‘½ä»¤ä¹‹åï¼ŒæŸ¥çœ‹ä¸€ä¸‹ï¼Œå‘½ä»¤</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ll /var/svn/svntest</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹ç»“æœæˆªå›¾ï¼š</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/11/svn.png"></p><h3 id="é…ç½®ä»“åº“ç”¨æˆ·åŠæƒé™"><a href="#é…ç½®ä»“åº“ç”¨æˆ·åŠæƒé™" class="headerlink" title="é…ç½®ä»“åº“ç”¨æˆ·åŠæƒé™"></a>é…ç½®ä»“åº“ç”¨æˆ·åŠæƒé™</h3><p><strong>å½“å‰ä½ç½®ï¼š&#x2F;var&#x2F;svn&#x2F;svntest</strong></p><h4 id="é…ç½®è´¦å·"><a href="#é…ç½®è´¦å·" class="headerlink" title="é…ç½®è´¦å·"></a>é…ç½®è´¦å·</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim conf/passwd</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/11/svnuser.png"> <strong>æ ¼å¼ï¼šç”¨æˆ·å &#x3D; å¯†ç  ï¼Œç”¨æˆ·åå‰é¢ä¸èƒ½æœ‰ç©ºæ ¼ï¼</strong></p><h4 id="é…ç½®æƒé™"><a href="#é…ç½®æƒé™" class="headerlink" title="é…ç½®æƒé™"></a>é…ç½®æƒé™</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim conf/authz</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/11/svnauth.png"></p><h4 id="æœ€åé…ç½®svnserve"><a href="#æœ€åé…ç½®svnserve" class="headerlink" title="æœ€åé…ç½®svnserve"></a>æœ€åé…ç½®svnserve</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim conf/svnserve.conf</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/11/svnauthz2-1.png"></p><h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><p><strong>å¯åŠ¨</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start svnserve</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹çŠ¶æ€</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status svnserve</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/11/svnactive.png"> <strong>æˆ–è€…æŸ¥çœ‹SVNé»˜è®¤ç«¯å£3690æ˜¯å¦åœ¨ç›‘å¬</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">netstat -anltpgrep 3690</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/11/svnlisten.png"> <strong>æ·»åŠ å¼€æœºå¯åŠ¨</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable svnserve</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æ‰€æœ‰å¼€æœºå¯åŠ¨é¡¹</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl list-unit-files</span><br></pre></td></tr></table></figure><p><strong>ç­›é€‰æŸ¥çœ‹-åªæŸ¥çœ‹å¯åŠ¨çš„</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl list-unit-filesgrep enabled</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥SVN"><a href="#è¿æ¥SVN" class="headerlink" title="è¿æ¥SVN"></a>è¿æ¥SVN</h3><p><strong>Windowsä½¿ç”¨</strong><a href="https://tortoisesvn.net/downloads.html" title="TortoiseSVNï¼ˆç‚¹å‡»å»ä¸‹è½½ï¼‰">TortoiseSVNï¼ˆç‚¹å‡»å»ä¸‹è½½ï¼‰</a> <strong>éšä¾¿æ‰¾ä¸ªç©ºæ–‡ä»¶å¤¹ç©ºä½ç½®å³é”®-SVN Checkout</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/11/svncheckout.png"> <strong>svnåœ°å€è¾“å…¥ï¼šsvn:&#x2F;&#x2F;ip&#x2F;é¡¹ç›®ä»“åº“å å¦‚ï¼šsvn:&#x2F;&#x2F;127.0.0.1&#x2F;test</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/11/svncheckout-1.png"> <img src="https://www.itze.cn/wp-content/uploads/2020/11/svnok.png"> <img src="https://www.itze.cn/wp-content/uploads/2020/11/username-1.png"> <img src="https://www.itze.cn/wp-content/uploads/2020/11/Finished.png"></p><h4 id="å¤§åŠŸå‘Šæˆï¼"><a href="#å¤§åŠŸå‘Šæˆï¼" class="headerlink" title="å¤§åŠŸå‘Šæˆï¼"></a>å¤§åŠŸå‘Šæˆï¼</h4>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SVN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7 å¼€å¯é˜²ç«å¢™åŠå¼€æ”¾æŒ‡å®šç«¯å£</title>
      <link href="/2020/11/23/centos-7-%E5%BC%80%E5%90%AF%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8A%E5%BC%80%E6%94%BE%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3/"/>
      <url>/2020/11/23/centos-7-%E5%BC%80%E5%90%AF%E9%98%B2%E7%81%AB%E5%A2%99%E5%8F%8A%E5%BC%80%E6%94%BE%E6%8C%87%E5%AE%9A%E7%AB%AF%E5%8F%A3/</url>
      
        <content type="html"><![CDATA[<p>æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status firewalld</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start firewalld</span><br></pre></td></tr></table></figure><p>åœæ­¢æŸé¡¹æœåŠ¡ï¼Œè¿™é‡Œä¸¾ä¾‹åœæ­¢é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹é˜²ç«å¢™å·²ç»å¼€æ”¾çš„ç«¯å£</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --list-port</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¼€æ”¾æŒ‡å®šé˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=è¿™é‡Œæ˜¯éœ€è¦å¼€å¯çš„ç«¯å£å·/tcp --permanent</span><br></pre></td></tr></table></figure><p>é‡æ–°åŠ è½½é˜²ç«å¢™</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-é€šè¿‡æ³¨è§£æ³¨å…¥Beançš„å‡ ç§æ–¹å¼ï¼ˆä¸€ï¼‰</title>
      <link href="/2020/11/19/srping-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%B3%A8%E5%85%A5bean%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/"/>
      <url>/2020/11/19/srping-%E9%80%9A%E8%BF%87%E6%B3%A8%E8%A7%A3%E6%B3%A8%E5%85%A5bean%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="ç”¨åˆ°çš„æ³¨è§£"><a href="#ç”¨åˆ°çš„æ³¨è§£" class="headerlink" title="ç”¨åˆ°çš„æ³¨è§£"></a>ç”¨åˆ°çš„æ³¨è§£</h3><ul><li>@Configuration ï¼šå®šä¹‰é…ç½®ç±»ï¼Œä»£æ›¿äº†xmlæ–‡ä»¶</li><li>@ComponentScan(value &#x3D; â€œcom.aaâ€) ï¼šåŒ…æ‰«æï¼ŒSpringä¼šè‡ªåŠ¨æ‰«æcom.aaåŒçº§ä»¥åŠå­ç±»åŒ…ä¸‹çš„æ‰€æœ‰ç±»</li><li>@Component : å£°æ˜æŠŠè¯¥ç±»äº¤ç”±Springï¼Œç”±Springæ¥å¸®ä½ å®Œæˆå®ä¾‹åŒ–</li><li>@Autowired : æ³¨å…¥ï¼ŒSpringå®Œæˆè‡ªåŠ¨è£…é…</li></ul><h3 id="é€šè¿‡æ„é€ å‡½æ•°-x2F-Setæ–¹æ³•-x2F-Autowiredæ–¹å¼"><a href="#é€šè¿‡æ„é€ å‡½æ•°-x2F-Setæ–¹æ³•-x2F-Autowiredæ–¹å¼" class="headerlink" title="é€šè¿‡æ„é€ å‡½æ•°&#x2F;Setæ–¹æ³•&#x2F;@Autowiredæ–¹å¼"></a>é€šè¿‡æ„é€ å‡½æ•°&#x2F;Setæ–¹æ³•&#x2F;@Autowiredæ–¹å¼</h3><p>AnotherBean.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnotherBean</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>MyBean.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> AnotherBean anotherBean1;</span><br><span class="line">    <span class="keyword">private</span> AnotherBean anotherBean2;</span><br><span class="line">    <span class="comment">//ä½¿ç”¨@Autowiredæ³¨å…¥</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AnotherBean anotherBean3;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡æ„é€ æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBean</span><span class="params">(AnotherBean anotherBean1)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.anotherBean1 = anotherBean1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é€šè¿‡Setæ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAnotherBean2</span><span class="params">(AnotherBean anotherBean2)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.anotherBean2 = anotherBean2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;MyBean&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;anotherBean1=&quot;</span> + anotherBean1 +</span><br><span class="line">                <span class="string">&quot;, anotherBean2=&quot;</span> + anotherBean2 +</span><br><span class="line">                <span class="string">&quot;, anotherBean3=&quot;</span> + anotherBean3 +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>BeanConfig.java</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;com.example.demo&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–Springä¸Šä¸‹æ–‡</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">applicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(BeanConfig.class);</span><br><span class="line">        <span class="type">MyBean</span> <span class="variable">myBean</span> <span class="operator">=</span> applicationContext.getBean(<span class="string">&quot;myBean&quot;</span>, MyBean.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;myBean = &quot;</span> + myBean);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æ‰§è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment">         * myBean = MyBean&#123;anotherBean1=com.example.demo.spring.AnotherBean@2ca47471,</span></span><br><span class="line"><span class="comment">         *                 anotherBean2=com.example.demo.spring.AnotherBean@2ca47471,</span></span><br><span class="line"><span class="comment">         *                 anotherBean3=com.example.demo.spring.AnotherBean@2ca47471&#125;</span></span><br><span class="line"><span class="comment">         * è¿™é‡ŒanotherBean1ã€anotherBean2ã€anotherBean3çš„å†…å®¹æ—¶ç›¸åŒï¼Œè¯´æ˜æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œ</span></span><br><span class="line"><span class="comment">         * è§£é‡Šä¸€ä¸‹ï¼Œè¿™æ ·æ˜¯å› ä¸ºåœ¨AnotherBeançš„ç±»ä¸Šä½¿ç”¨<span class="doctag">@Component</span>æ³¨è§£ï¼Œé»˜è®¤ä¸ºå•åˆ©æ¨¡å¼ï¼Œæ‰€ä»¥æ— è®ºè°ä½¿ç”¨å®ƒéƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> Spring </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBootæ‰“åŒ…:Failed to execute goal org.apache.maven.plugins</title>
      <link href="/2020/11/18/springboot%E6%89%93%E5%8C%85failed-to-execute-goal-org-apache-maven-pluginsmaven-resources-plugin3-2-0%EF%BC%8Ccaused-by-org-apache-maven-plugin-mojoexecutionexception-input-length-1/"/>
      <url>/2020/11/18/springboot%E6%89%93%E5%8C%85failed-to-execute-goal-org-apache-maven-pluginsmaven-resources-plugin3-2-0%EF%BC%8Ccaused-by-org-apache-maven-plugin-mojoexecutionexception-input-length-1/</url>
      
        <content type="html"><![CDATA[<h3 id="å…ˆè´´è¯¦ç»†é”™è¯¯"><a href="#å…ˆè´´è¯¦ç»†é”™è¯¯" class="headerlink" title="å…ˆè´´è¯¦ç»†é”™è¯¯"></a>å…ˆè´´è¯¦ç»†é”™è¯¯</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">[INFO] Error stacktraces are turned on.</span><br><span class="line">[INFO] Scanning <span class="keyword">for</span> projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------------&lt; cn.itze &gt;----------------------</span><br><span class="line">[INFO] Building itze <span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:<span class="number">3.2</span><span class="number">.0</span>:resources (<span class="keyword">default</span>-resources) @ itze ---</span><br><span class="line">[INFO] Using <span class="string">&#x27;UTF-8&#x27;</span> encoding to copy filtered resources.</span><br><span class="line">[INFO] Using <span class="string">&#x27;UTF-8&#x27;</span> encoding to copy filtered properties files.</span><br><span class="line">[INFO] Copying <span class="number">4</span> resources</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  <span class="number">1.518</span> s</span><br><span class="line">[INFO] Finished at: <span class="number">2020</span>-<span class="number">11</span>-18T10:<span class="number">04</span>:<span class="number">36</span>+08:<span class="number">00</span></span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:<span class="number">3.2</span><span class="number">.0</span>:resources (<span class="keyword">default</span>-resources) on project itze: <span class="type">Input</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">1</span> -&gt; [Help <span class="number">1</span>]</span><br><span class="line">org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:<span class="number">3.2</span><span class="number">.0</span>:resources (<span class="keyword">default</span>-resources) on project itze: <span class="type">Input</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">215</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">81</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:<span class="number">56</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:<span class="number">128</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">305</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">192</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:<span class="number">105</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:<span class="number">957</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:<span class="number">289</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.main (MavenCli.java:<span class="number">193</span>)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">    at java.lang.reflect.Method.invoke (Method.java:<span class="number">498</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:<span class="number">282</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:<span class="number">225</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:<span class="number">406</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:<span class="number">347</span>)</span><br><span class="line">Caused by: org.apache.maven.plugin.MojoExecutionException: <span class="type">Input</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:<span class="number">362</span>)</span><br><span class="line">    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:<span class="number">137</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">210</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">81</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:<span class="number">56</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:<span class="number">128</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">305</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">192</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:<span class="number">105</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:<span class="number">957</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:<span class="number">289</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.main (MavenCli.java:<span class="number">193</span>)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">    at java.lang.reflect.Method.invoke (Method.java:<span class="number">498</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:<span class="number">282</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:<span class="number">225</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:<span class="number">406</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:<span class="number">347</span>)</span><br><span class="line">Caused by: org.apache.maven.shared.filtering.MavenFilteringException: <span class="type">Input</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile (DefaultMavenFileFilter.java:<span class="number">113</span>)</span><br><span class="line">    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources (DefaultMavenResourcesFiltering.java:<span class="number">262</span>)</span><br><span class="line">    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:<span class="number">356</span>)</span><br><span class="line">    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:<span class="number">137</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">210</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">81</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:<span class="number">56</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:<span class="number">128</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">305</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">192</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:<span class="number">105</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:<span class="number">957</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:<span class="number">289</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.main (MavenCli.java:<span class="number">193</span>)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">    at java.lang.reflect.Method.invoke (Method.java:<span class="number">498</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:<span class="number">282</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:<span class="number">225</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:<span class="number">406</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:<span class="number">347</span>)</span><br><span class="line">Caused by: java.nio.charset.MalformedInputException: <span class="type">Input</span> <span class="variable">length</span> <span class="operator">=</span> <span class="number">1</span></span><br><span class="line">    at java.nio.charset.CoderResult.throwException (CoderResult.java:<span class="number">281</span>)</span><br><span class="line">    at sun.nio.cs.StreamDecoder.implRead (StreamDecoder.java:<span class="number">339</span>)</span><br><span class="line">    at sun.nio.cs.StreamDecoder.read (StreamDecoder.java:<span class="number">178</span>)</span><br><span class="line">    at java.io.InputStreamReader.read (InputStreamReader.java:<span class="number">184</span>)</span><br><span class="line">    at java.io.BufferedReader.read1 (BufferedReader.java:<span class="number">210</span>)</span><br><span class="line">    at java.io.BufferedReader.read (BufferedReader.java:<span class="number">286</span>)</span><br><span class="line">    at java.io.BufferedReader.fill (BufferedReader.java:<span class="number">161</span>)</span><br><span class="line">    at java.io.BufferedReader.read (BufferedReader.java:<span class="number">182</span>)</span><br><span class="line">    at org.apache.maven.shared.filtering.BoundedReader.read (BoundedReader.java:<span class="number">85</span>)</span><br><span class="line">    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read (MultiDelimiterInterpolatorFilterReaderLineEnding.java:<span class="number">235</span>)</span><br><span class="line">    at org.apache.maven.shared.filtering.MultiDelimiterInterpolatorFilterReaderLineEnding.read (MultiDelimiterInterpolatorFilterReaderLineEnding.java:<span class="number">197</span>)</span><br><span class="line">    at java.io.Reader.read (Reader.java:<span class="number">100</span>)</span><br><span class="line">    at org.apache.maven.shared.utils.io.FileUtils.copyFile (FileUtils.java:<span class="number">1931</span>)</span><br><span class="line">    at org.apache.maven.shared.filtering.DefaultMavenFileFilter.copyFile (DefaultMavenFileFilter.java:<span class="number">98</span>)</span><br><span class="line">    at org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering.filterResources (DefaultMavenResourcesFiltering.java:<span class="number">262</span>)</span><br><span class="line">    at org.apache.maven.plugins.resources.ResourcesMojo.execute (ResourcesMojo.java:<span class="number">356</span>)</span><br><span class="line">    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:<span class="number">137</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">210</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">156</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:<span class="number">148</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">117</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:<span class="number">81</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:<span class="number">56</span>)</span><br><span class="line">    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:<span class="number">128</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">305</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:<span class="number">192</span>)</span><br><span class="line">    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:<span class="number">105</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:<span class="number">957</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:<span class="number">289</span>)</span><br><span class="line">    at org.apache.maven.cli.MavenCli.main (MavenCli.java:<span class="number">193</span>)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)</span><br><span class="line">    at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">    at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">    at java.lang.reflect.Method.invoke (Method.java:<span class="number">498</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:<span class="number">282</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:<span class="number">225</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:<span class="number">406</span>)</span><br><span class="line">    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:<span class="number">347</span>)</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] Re-run Maven using the -X <span class="keyword">switch</span> to enable full debug logging.</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class="line">[ERROR] [Help <span class="number">1</span>] http:<span class="comment">//cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</span></span><br></pre></td></tr></table></figure><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p><strong>ä¿®æ”¹ç‰ˆæœ¬ï¼Œåœ¨pomæ–‡ä»¶æœ€ä¸‹é¢çš„æ’ä»¶é‡Œæ·»åŠ ä¿®æ”¹ç‰ˆæœ¬å†…å®¹</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br><span class="line">&lt;!-- ä¿®æ”¹ç‰ˆæœ¬ --&gt;</span><br><span class="line">&lt;plugin&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.4</span><span class="number">.3</span>&lt;/version&gt;</span><br><span class="line">&lt;/plugin&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBooté¡¹ç›®JaråŒ…è¿è¡Œæ²¡æœ‰ä¸»æ¸…å•å±æ€§</title>
      <link href="/2020/11/17/springboot%E9%A1%B9%E7%9B%AEjar%E5%8C%85%E8%BF%90%E8%A1%8C%E6%B2%A1%E6%9C%89%E4%B8%BB%E6%B8%85%E5%8D%95%E5%B1%9E%E6%80%A7/"/>
      <url>/2020/11/17/springboot%E9%A1%B9%E7%9B%AEjar%E5%8C%85%E8%BF%90%E8%A1%8C%E6%B2%A1%E6%9C%89%E4%B8%BB%E6%B8%85%E5%8D%95%E5%B1%9E%E6%80%A7/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p><strong>SpringBooté¡¹ç›®æ‰“æˆJarä¹‹åé€šè¿‡å‘½ä»¤è¡Œè¿è¡Œï¼ŒæŠ¥é”™ï¼šæ²¡æœ‰ä¸»æ¸…å•å±æ€§</strong></p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p><strong>é¦–å…ˆç¡®ä¿POMæ–‡ä»¶ä¸­æœ‰ä»¥ä¸‹æ’ä»¶</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure><p><strong>ç„¶åå¦‚æœä½¿ç”¨å‘½ä»¤æ‰“åŒ…ï¼Œåˆ™ä½¿ç”¨æ‰“åŒ…å‘½ä»¤ï¼šmvn install -Dmaven.test.skip&#x3D;true è§£é‡Šä¸€ä¸‹ï¼Œ-Dmaven.test.skip&#x3D;true è¿™å¥è¯çš„æ„æ€æ˜¯è·³è¿‡æµ‹è¯•éªŒè¯ï¼Œå¯åŠ å¯ä¸åŠ ï¼Œä¸åŠ ç¼©çŸ­æ‰“åŒ…æ—¶é—´</strong></p><hr><h2 id="æ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤æ‰“åŒ…éœ€è¦æå‰æŠŠè·¯å¾„åˆ‡æ¢åˆ°è¯¥é¡¹ç›®çš„POMæ–‡ä»¶åŒçº§è·¯å¾„ï¼ä¸ç„¶ä¼šæŠ¥æ‰¾ä¸åˆ°POMæ–‡ä»¶"><a href="#æ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤æ‰“åŒ…éœ€è¦æå‰æŠŠè·¯å¾„åˆ‡æ¢åˆ°è¯¥é¡¹ç›®çš„POMæ–‡ä»¶åŒçº§è·¯å¾„ï¼ä¸ç„¶ä¼šæŠ¥æ‰¾ä¸åˆ°POMæ–‡ä»¶" class="headerlink" title="æ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤æ‰“åŒ…éœ€è¦æå‰æŠŠè·¯å¾„åˆ‡æ¢åˆ°è¯¥é¡¹ç›®çš„POMæ–‡ä»¶åŒçº§è·¯å¾„ï¼ä¸ç„¶ä¼šæŠ¥æ‰¾ä¸åˆ°POMæ–‡ä»¶"></a><strong>æ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤æ‰“åŒ…éœ€è¦æå‰æŠŠè·¯å¾„åˆ‡æ¢åˆ°è¯¥é¡¹ç›®çš„POMæ–‡ä»¶åŒçº§è·¯å¾„ï¼ä¸ç„¶ä¼šæŠ¥æ‰¾ä¸åˆ°POMæ–‡ä»¶</strong></h2><p>è¯´ä¸€ä¸‹æˆ‘çš„é”™è¯¯åŸå› ï¼Œåˆšå¼€å§‹æŠ¥é”™ï¼Œä¹Ÿæ˜¯å„ç§ç½‘ä¸ŠæŸ¥ï¼Œä¹ŸçœŸçš„æ˜¯ä»€ä¹ˆæ ·çš„éƒ½æœ‰ï¼Œä¸èƒ½è¯´è°å¯¹è°é”™ï¼Œæˆ‘åˆšå¼€å§‹æ˜¯å› ä¸ºä½¿ç”¨çš„æ‰“åŒ…å‘½ä»¤æ˜¯ï¼šmvn source:jar -Dmaven.test.skip&#x3D;true æ¢æˆä¸Šé¢é‚£ä¸ªå‘½ä»¤å°±å¯ä»¥äº†ï¼Œä¸è¿‡æ‰“å‡ºæ¥çš„åŒ…ä¹Ÿå˜å¤§äº†ä¸å°‘ï¼Œæœ‰ä¸€ç‚¹å¾ˆè´¹è§£çš„æ˜¯æˆ‘è¿™é‡Œæœ‰çš„SpringBooté¡¹ç›®ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å°±å¯ä»¥æ‰“åŒ…å¯åŠ¨ï¼Œå¯¹æ¯”äº†é…ç½®ä¹Ÿä¸€æ ·ï¼Œå…ˆè®°å½•ä¸€ä¸‹å§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springboot@Autowiredæ³¨å…¥ä¸ºNull</title>
      <link href="/2020/11/17/springbootautowired%E6%B3%A8%E5%85%A5%E4%B8%BAnull/"/>
      <url>/2020/11/17/springbootautowired%E6%B3%A8%E5%85%A5%E4%B8%BAnull/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="headerlink" title="åœºæ™¯"></a>åœºæ™¯</h3><p><strong>SpringBooté¡¹ç›®ï¼Œåœ¨è·å–resourcesä¸­application.propertiesé…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹æ—¶ï¼Œä½¿ç”¨æ³¨å…¥Environmentæ–¹æ³•è·å–ï¼Œå¯åŠ¨é¡¹ç›®ä¹‹åå‘ç°æ³¨å…¥çš„Environmentä¸€ç›´ä¸ºnull</strong></p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p><strong>ç»è¿‡ä¸€æ®µæ—¶é—´æŸ¥é˜…ï¼Œæœ€ç»ˆä½¿ç”¨@PostConstructæ³¨è§£è§£å†³</strong></p><h4 id="PostConstruct"><a href="#PostConstruct" class="headerlink" title="@PostConstruct"></a>@PostConstruct</h4><p><strong>@PostConstructç”¨äºä¿®é¥°éé™æ€çš„voidæ–¹æ³•ï¼Œè¢«è¯¥æ³¨è§£ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æœåŠ¡å™¨åŠ è½½Servletçš„æ—¶å€™åŠ è½½æ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡</strong> <strong>googleç¿»è¯‘å®˜æ–¹APIä¸€æ®µè§£é‡Šï¼šPostConstructæ‰¹æ³¨ç”¨äºéœ€è¦ä¾èµ–æ³¨å…¥å®Œæˆä»¥æ‰§è¡Œä»»ä½•åˆå§‹åŒ–ä¹‹åè¦æ‰§è¡Œçš„æ–¹æ³•ä¸Šã€‚å¿…é¡»åœ¨ç±»æŠ•å…¥ä½¿ç”¨ä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ã€‚æ‰€æœ‰æ”¯æŒä¾èµ–æ³¨å…¥çš„ç±»éƒ½å¿…é¡»æ”¯æŒè¯¥æ³¨é‡Šã€‚å³ä½¿è¯¥ç±»ä¸è¦æ±‚æ³¨å…¥ä»»ä½•èµ„æºï¼Œä¹Ÿå¿…é¡»è°ƒç”¨ç”¨PostConstructæ³¨é‡Šçš„æ–¹æ³•ã€‚æ­¤æ³¨é‡Šåªèƒ½æ³¨é‡Šä¸€ç§æ–¹æ³•</strong>ã€‚</p><h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.Environment;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: gitlab@111.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//@Componentæ³¨å…¥Beanï¼Œäº¤ç”±Springç®¡ç†</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment environment;<span class="comment">//é»˜è®¤è·å–çš„æ˜¯application.properties</span></span><br><span class="line">    <span class="comment">//è¿™é‡Œä¸€å®šè¦æ˜¯static</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Test test;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        test=<span class="built_in">this</span>;</span><br><span class="line">        test.environment=<span class="built_in">this</span>.environment;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">read</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(test.environment.getProperty(<span class="string">&quot;server.port&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šè¿™é‡Œæµ‹è¯•ä¸èƒ½åœ¨mainæ–¹æ³•ä¸­ç›´æ¥è°ƒç”¨æµ‹è¯•ï¼Œéœ€è¦å¯åŠ¨é¡¹ç›®ä¹‹åè°ƒç”¨ï¼Œå¦åˆ™ä»ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
          <category> SpringBoot </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸ¥çœ‹è‡ªç­¾SSLè¯ä¹¦ä¿¡æ¯</title>
      <link href="/2020/11/06/%E6%9F%A5%E7%9C%8B%E8%87%AA%E7%AD%BEssl%E8%AF%81%E4%B9%A6%E4%BF%A1%E6%81%AF/"/>
      <url>/2020/11/06/%E6%9F%A5%E7%9C%8B%E8%87%AA%E7%AD%BEssl%E8%AF%81%E4%B9%A6%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">keytool -list -v -keystore you.keyStroe</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> keytool </tag>
            
            <tag> SSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDKä¿¡ä»»è‡ªç­¾è¯ä¹¦</title>
      <link href="/2020/11/03/jdk%E4%BF%A1%E4%BB%BB%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/"/>
      <url>/2020/11/03/jdk%E4%BF%A1%E4%BB%BB%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6/</url>
      
        <content type="html"><![CDATA[<h4 id="è‡ªç­¾è¯ä¹¦éæœºæ„åŠæ³•ï¼Œä¸åœ¨jdkä¿¡ä»»çš„åˆ—è¡¨"><a href="#è‡ªç­¾è¯ä¹¦éæœºæ„åŠæ³•ï¼Œä¸åœ¨jdkä¿¡ä»»çš„åˆ—è¡¨" class="headerlink" title="è‡ªç­¾è¯ä¹¦éæœºæ„åŠæ³•ï¼Œä¸åœ¨jdkä¿¡ä»»çš„åˆ—è¡¨"></a>è‡ªç­¾è¯ä¹¦éæœºæ„åŠæ³•ï¼Œä¸åœ¨jdkä¿¡ä»»çš„åˆ—è¡¨</h4><h3 id="cacerts"><a href="#cacerts" class="headerlink" title="cacerts"></a>cacerts</h3><p><strong>æ‰¾åˆ°cacertsæ–‡ä»¶æ‰€åœ¨ç›®å½•è·¯å¾„ï¼Œjdk_home(jdkä½ç½®è·¯å¾„)&#x2F;jdk1.8.0_231&#x2F;jre&#x2F;lib&#x2F;security å¦‚æœæ˜¯windowç³»ç»Ÿæ–œæ æ˜¯â€œ\â€åˆ°cacertsæ–‡ä»¶æ‰€åœ¨è·¯å¾„ä½ç½®ï¼ŒLinuxå°±cdåˆ°æ­¤ä½ç½®ï¼ŒWindowså°±cmdåˆ°æ­¤ä½ç½®</strong> <strong>cacertsæ–‡ä»¶æ‰€åœ¨è·¯å¾„ä½ç½®ï¼š</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/11/jdk.png"></p><h3 id="å¯¼å…¥è¯ä¹¦"><a href="#å¯¼å…¥è¯ä¹¦" class="headerlink" title="å¯¼å…¥è¯ä¹¦"></a>å¯¼å…¥è¯ä¹¦</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">keytool -<span class="keyword">import</span> -v -trustcacerts -alias base64sslï¼ˆå¦èµ·åˆ«åï¼‰ -file /ä½ çš„è·¯å¾„/base64ssl.cerï¼ˆè¦å¯¼å…¥çš„è¯ä¹¦ï¼‰ -storepass changeit -keystore cacerts</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šè¿™é‡Œæ˜¯.ceræ–‡ä»¶</strong></p><h3 id="æŸ¥çœ‹jdkå·²ç»ä¿¡ä»»çš„è¯ä¹¦"><a href="#æŸ¥çœ‹jdkå·²ç»ä¿¡ä»»çš„è¯ä¹¦" class="headerlink" title="æŸ¥çœ‹jdkå·²ç»ä¿¡ä»»çš„è¯ä¹¦"></a>æŸ¥çœ‹jdkå·²ç»ä¿¡ä»»çš„è¯ä¹¦</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">keytool -list -keystore cacerts -storepass changeit</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤å·²ç»å¯¼å…¥çš„è¯ä¹¦"><a href="#åˆ é™¤å·²ç»å¯¼å…¥çš„è¯ä¹¦" class="headerlink" title="åˆ é™¤å·²ç»å¯¼å…¥çš„è¯ä¹¦"></a>åˆ é™¤å·²ç»å¯¼å…¥çš„è¯ä¹¦</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">keytool -delete -alias <span class="title function_">ssl64</span><span class="params">(è¯ä¹¦å¯¼å…¥æ—¶çš„åˆ«å)</span> -keystore cacerts  -storepass changeit</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JDK </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlå»é™¤å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦åŠvarcharè½¬int</title>
      <link href="/2020/10/29/mysql%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E5%8F%8Avarchar%E8%BD%ACint/"/>
      <url>/2020/10/29/mysql%E5%8E%BB%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6%E5%8F%8Avarchar%E8%BD%ACint/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯æè¿°"><a href="#åœºæ™¯æè¿°" class="headerlink" title="åœºæ™¯æè¿°"></a>åœºæ™¯æè¿°</h3><p><strong>Mysqlä¸­æœ‰varcharç±»å‹å­—æ®µï¼Œå¹¶ä¸”ä¸ºï¼š123,456 å½¢å¼ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œæ’åºï¼Œå¹¶æ ¹æ®æ¡ä»¶ç­›é€‰å‡ºå‰5æ¡</strong></p><h3 id="æ¨¡æ‹Ÿè¡¨æ•°æ®"><a href="#æ¨¡æ‹Ÿè¡¨æ•°æ®" class="headerlink" title="æ¨¡æ‹Ÿè¡¨æ•°æ®"></a>æ¨¡æ‹Ÿè¡¨æ•°æ®</h3><p><strong>è¡¨åï¼štable_a</strong></p><p>t_id(int)</p><p>t_year(int)</p><p>t_value(varchar)</p><p>1</p><p>2019</p><p>123,456</p><h3 id="Mysqlå»é™¤å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šç¬¦å·"><a href="#Mysqlå»é™¤å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šç¬¦å·" class="headerlink" title="Mysqlå»é™¤å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šç¬¦å·"></a>Mysqlå»é™¤å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šç¬¦å·</h3><p><strong>ä½¿ç”¨åˆ°çš„å‡½æ•°ï¼šREPLACE(str,from_str,to_str)</strong></p><h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><ul><li>strï¼šéœ€è¦æ“ä½œçš„å­—æ®µ</li><li>from_strï¼šå­—æ®µä¸­çš„ç‰¹æ®Šç¬¦å·</li><li>to_strï¼šéœ€è¦æ›¿æ¢æˆä»€ä¹ˆæ ·</li></ul><p><strong>è¿™é‡ŒæŠŠt_valueå€¼ä¸ºï¼š123,456ä¸­çš„â€ï¼Œâ€ å»æ‰ï¼Œä¹Ÿå°±æ˜¯æ›¿æ¢æˆç©ºã€‚</strong> SQLï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> REPLACE(t_value,&quot;ï¼Œ&quot;,&quot;&quot;) <span class="keyword">FROM</span> table_a;</span><br></pre></td></tr></table></figure><h3 id="Mysqlä¸­varcharè½¬int"><a href="#Mysqlä¸­varcharè½¬int" class="headerlink" title="Mysqlä¸­varcharè½¬int"></a>Mysqlä¸­varcharè½¬int</h3><p><strong>ä½¿ç”¨åˆ°çš„å‡½æ•°ï¼š CAST(Filed AS UNSIGNED INTEGER)</strong></p><h4 id="ç”¨æ³•-1"><a href="#ç”¨æ³•-1" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><ul><li>Filedï¼šä¸ºéœ€è¦è½¬æ¢çš„å­—æ®µå</li></ul><p><strong>è¿™é‡Œéœ€è¦å…ˆæŠŠt_valueä¸­çš„â€ï¼Œâ€å»æ‰ç„¶åå†è½¬æˆint</strong> SQLï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CAST</span>(REPLACE(t_value,&quot;ï¼Œ&quot;,&quot;&quot;) <span class="keyword">AS</span> UNSIGNED <span class="type">INTEGER</span>) <span class="keyword">FROM</span> table_a;</span><br></pre></td></tr></table></figure><h3 id="æ€»ä½“å®ç°"><a href="#æ€»ä½“å®ç°" class="headerlink" title="æ€»ä½“å®ç°"></a>æ€»ä½“å®ç°</h3><p><strong>éœ€æ±‚ï¼šå¯¹table_aè¡¨ä¸­çš„t_year&#x3D;2019çš„æ•°æ®æŒ‰ç…§t_valueå­—æ®µä»å¤§åˆ°å°æ’åºå¹¶ä¸”åªå»å‰5æ¡</strong> SQLï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_a <span class="keyword">WHERE</span> t_year <span class="operator">=</span> <span class="number">2019</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">CAST</span>(REPLACE(t_value,&quot;ï¼Œ&quot;,&quot;&quot;) <span class="keyword">AS</span> UNSIGNED <span class="type">INTEGER</span>) <span class="keyword">DESC</span> LIMIT <span class="number">5</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSONArrayæ ¹æ®JSONObjectæŸkeyå€¼æ’åº</title>
      <link href="/2020/10/27/jsonarray%E6%A0%B9%E6%8D%AEjsonobject%E6%9F%90key%E5%80%BC%E6%8E%92%E5%BA%8F/"/>
      <url>/2020/10/27/jsonarray%E6%A0%B9%E6%8D%AEjsonobject%E6%9F%90key%E5%80%BC%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> * getStringï¼šå­—æ®µç±»å‹ï¼Œ</span></span><br><span class="line"><span class="comment"> * keyï¼šJSONObjectçš„keyå€¼</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONArray</span>();</span><br><span class="line"><span class="comment">//å‡åº</span></span><br><span class="line">jsonArray.sort(Comparator.comparing(obj-&gt;((JSONObject)obj).getString(<span class="string">&quot;key&quot;</span>)));</span><br><span class="line"><span class="comment">//é™åº</span></span><br><span class="line">jsonArray.sort(Comparator.comparing(obj-&gt;((JSONObject)obj).getString(<span class="string">&quot;key&quot;</span>)).reversed());</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JSONArray </tag>
            
            <tag> JSONObject </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TomcatæœåŠ¡å®‰å…¨é…ç½®åŠæ€§èƒ½ä¼˜åŒ–</title>
      <link href="/2020/10/22/tomcat%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E5%8F%8A%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
      <url>/2020/10/22/tomcat%E6%9C%8D%E5%8A%A1%E5%AE%89%E5%85%A8%E9%85%8D%E7%BD%AE%E5%8F%8A%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h3 id="Tomcatå†…å­˜æº¢å‡º"><a href="#Tomcatå†…å­˜æº¢å‡º" class="headerlink" title="Tomcatå†…å­˜æº¢å‡º"></a>Tomcatå†…å­˜æº¢å‡º</h3><h4 id="å¸¸è§çš„æº¢å‡ºå¼‚å¸¸åŠå¯¼è‡´åŸå› "><a href="#å¸¸è§çš„æº¢å‡ºå¼‚å¸¸åŠå¯¼è‡´åŸå› " class="headerlink" title="å¸¸è§çš„æº¢å‡ºå¼‚å¸¸åŠå¯¼è‡´åŸå› "></a>å¸¸è§çš„æº¢å‡ºå¼‚å¸¸åŠå¯¼è‡´åŸå› </h4><ul><li>OutOfMemoryError:Java heap space å¼‚å¸¸ï¼Œé€šå¸¸æ˜¯å †å†…å­˜æ»¡äº†ï¼Œå †å†…å­˜é»˜è®¤ä½¿ç”¨æœ€å¤§æ˜¯ç³»ç»Ÿçš„4åˆ†ä¹‹1ï¼Œæœ€å°64åˆ†ä¹‹1</li><li>OutOfMemoryError:PermGen space å¼‚å¸¸ï¼Œé€šå¸¸æ˜¯é™æ€å†…å­˜åŒºæ»¡äº†ï¼ŒJdk8ä»¥ä¸Šæ²¡äº†</li><li>StackOverflowErrorå¼‚å¸¸ï¼Œé€šå¸¸æ ˆå†…å­˜æ»¡äº†ï¼Œé€šå¸¸æ˜¯æ­»å¾ªç¯ï¼Œé€’å½’å¯¼è‡´</li></ul><h3 id="å†…å­˜é…ç½®"><a href="#å†…å­˜é…ç½®" class="headerlink" title="å†…å­˜é…ç½®"></a>å†…å­˜é…ç½®</h3><p><strong>ä¿®æ”¹ç¼–è¾‘tomcatçš„Binæ–‡ä»¶å¤¹ä¸­catalinaæ–‡ä»¶ï¼ŒæœåŠ¡å™¨æ˜¯Windowså°±ä¿®æ”¹.batçš„ï¼Œæ˜¯Linuxå°±ä¿®æ”¹.shåœ¨ç¬¬äºŒè¡ŒåŠ å…¥ï¼ŒWindowsçš„å»æ‰å‰é¢çš„set</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set JAVA_OPTS=&quot;-server -Xms256m -Xmx512m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=256m&quot;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹é»˜è®¤8005ç«¯å£"><a href="#ä¿®æ”¹é»˜è®¤8005ç«¯å£" class="headerlink" title="ä¿®æ”¹é»˜è®¤8005ç«¯å£"></a>ä¿®æ”¹é»˜è®¤8005ç«¯å£</h3><p><strong>ä¿®æ”¹ç¼–è¾‘tomcatä¸­confæ–‡ä»¶å¤¹ä¸­server.xmlé…ç½®æ–‡ä»¶ï¼ŒæŠŠå¦‚å›¾ä¸­çš„ç«¯å£å·æˆ–SHUTDOWN</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/shutdown.png"> <strong>è‡³äºä¸ºä»€ä¹ˆä¿®æ”¹è¿™ä¸ªï¼Œè¿™æ˜¯ä¸€ä¸ªå®‰å…¨é…ç½®é¡¹ï¼Œé»˜è®¤çš„æƒ…å†µä¸‹ï¼Œå¦‚æœçŸ¥é“è¿œç¨‹tomcatæœåŠ¡å™¨çš„IPï¼Œå¯ä»¥åœ¨æœ¬åœ°é€šè¿‡telnetå‘½ä»¤ç›´æ¥æŠŠè¿œç¨‹tomcatå…³æ‰ï¼Œäº²æµ‹å¾ˆææ€–ã€‚</strong></p><h3 id="ä¿®æ”¹-x2F-éšè—ç‰ˆæœ¬å·"><a href="#ä¿®æ”¹-x2F-éšè—ç‰ˆæœ¬å·" class="headerlink" title="ä¿®æ”¹&#x2F;éšè—ç‰ˆæœ¬å·"></a>ä¿®æ”¹&#x2F;éšè—ç‰ˆæœ¬å·</h3><p><strong>ä¿®æ”¹æˆ–è€…éšè—ç‰ˆæœ¬å·ï¼Œå¯ä»¥é¿å…é’ˆå¯¹ç‰ˆæœ¬æ”»å‡»é£é™© ä¿®æ”¹tomcatçš„libæ–‡ä»¶å¤¹ä¸‹çš„catalina.jaråŒ…ï¼Œå³é”®é€‰æ‹©ä½¿ç”¨å‹ç¼©å·¥å…·æ‰“å¼€ï¼Œä¿®æ”¹å¦‚å›¾ä½ç½®</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/catalina.png"></p><h3 id="ä¿®æ”¹ç¦ç”¨ç®¡ç†é¡µé¢"><a href="#ä¿®æ”¹ç¦ç”¨ç®¡ç†é¡µé¢" class="headerlink" title="ä¿®æ”¹ç¦ç”¨ç®¡ç†é¡µé¢"></a>ä¿®æ”¹ç¦ç”¨ç®¡ç†é¡µé¢</h3><p><strong>å°†tomcat-webapps-ROOTæ–‡ä»¶å¤¹é‡å‘½åå…¶å®ƒåå­—ï¼Œç„¶åæ–°å»ºä¸€ä¸ªç©ºçš„ROOTæ–‡ä»¶å¤¹ï¼Œtomcaté»˜è®¤ip:portè®¿é—®çš„åœ°å€å°±æ˜¯ROOTæ–‡ä»¶å¤¹</strong></p><h3 id="è‡ªå®šä¹‰é”™è¯¯é¡µ"><a href="#è‡ªå®šä¹‰é”™è¯¯é¡µ" class="headerlink" title="è‡ªå®šä¹‰é”™è¯¯é¡µ"></a>è‡ªå®šä¹‰é”™è¯¯é¡µ</h3><p><strong>æ–°å»ºä¸€ä¸ªé”™è¯¯çš„htmlé¡µé¢ï¼Œæ”¾åˆ°ç©ºçš„ROOTæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åä¿®æ”¹confæ–‡ä»¶å¤¹ä¸­çš„web.xmlé…ç½®æ–‡ä»¶åœ¨æœ€ä¸‹é¢åŠ å…¥ä»¥ä¸‹ä»£ç ï¼Œå…¶ä¸­error.htmlæ˜¯ä½ è‡ªå®šä¹‰çš„éœ€è¦æ˜¾ç¤ºçš„é”™è¯¯é¡µé¢</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">  &lt;!-- é”™è¯¯é¡µ --&gt;</span><br><span class="line"> &lt;error-page&gt;</span><br><span class="line">  &lt;error-code&gt;400&lt;/error-code&gt;</span><br><span class="line">  &lt;location&gt;/error.html&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br><span class="line">&lt;error-page&gt;</span><br><span class="line">  &lt;error-code&gt;404&lt;/error-code&gt;</span><br><span class="line">  &lt;location&gt;/error.html&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br><span class="line">&lt;error-page&gt;</span><br><span class="line">  &lt;error-code&gt;500&lt;/error-code&gt;</span><br><span class="line">  &lt;location&gt;/error.html&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br></pre></td></tr></table></figure><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2.png"></p><h3 id="å¯ç”¨Cookieçš„HttpOnly"><a href="#å¯ç”¨Cookieçš„HttpOnly" class="headerlink" title="å¯ç”¨Cookieçš„HttpOnly"></a>å¯ç”¨Cookieçš„HttpOnly</h3><p><strong>å¯ç”¨Cookieçš„HttpOnlyï¼Œjsè„šæœ¬å°±æ— æ³•è·å–åˆ°Cookieä¿¡æ¯ï¼Œé˜²æ­¢Xss-è·¨ç«™è„šæœ¬æ”»å‡» ä¿®æ”¹tomcatçš„confæ–‡ä»¶å¤¹ä¸‹çš„context.xmlæ–‡ä»¶ï¼Œåœ¨å¦‚å›¾ä½ç½®æ·»åŠ ï¼šuseHttpOnly&#x3D;â€trueâ€</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/HttpOnly.png"></p>]]></content>
      
      
      <categories>
          
          <category> Tomcat </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxé…ç½®404é”™è¯¯é¡µé¢è·³è½¬</title>
      <link href="/2020/10/21/nginx%E9%85%8D%E7%BD%AE404%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC/"/>
      <url>/2020/10/21/nginx%E9%85%8D%E7%BD%AE404%E9%94%99%E8%AF%AF%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server&#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        server_name www.itze.cn;</span><br><span class="line">        index index.html;</span><br><span class="line">        root /nginx/html/web;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">                root   html;</span><br><span class="line">                index  index.html index.htm;</span><br><span class="line"></span><br><span class="line">                proxy_intercept_errors on;     #å¼€å¯æ‹¦æˆª404ç­‰é”™è¯¯</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #é…ç½®é”™è¯¯é¡µé¢è·³è½¬</span><br><span class="line">        error_page 404  /404.html;</span><br><span class="line">            location =  /404.html &#123;</span><br><span class="line">            root /nginx/error;   #è¿™é‡Œæ˜¯404æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„ï¼ï¼ï¼</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nginx </tag>
            
            <tag> 404 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xshellï¼šéœ€è¦Xmanagerè½¯ä»¶æ¥å¤„ç†X11è½¬å‘è¯·æ±‚</title>
      <link href="/2020/10/21/xshell%EF%BC%9A%E9%9C%80%E8%A6%81xmanager%E8%BD%AF%E4%BB%B6%E6%9D%A5%E5%A4%84%E7%90%86x11%E8%BD%AC%E5%8F%91%E8%AF%B7%E6%B1%82/"/>
      <url>/2020/10/21/xshell%EF%BC%9A%E9%9C%80%E8%A6%81xmanager%E8%BD%AF%E4%BB%B6%E6%9D%A5%E5%A4%84%E7%90%86x11%E8%BD%AC%E5%8F%91%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<h3 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h3><p><strong>ä¸€ä¸ªé¡µé¢éªŒè¯ç å›¾ç‰‡å‡ºä¸æ¥ï¼ŒXshllæŠ¥éœ€è¦Xmanagerè½¯ä»¶æ¥å¤„ç†X11è½¬å‘è¯·æ±‚å¼¹æ¡†</strong></p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p><strong>ä¸¤ä¸ªè§£å†³åŠæ³•</strong> 1. å»ä¸‹è½½Xmanagerè¯•ç”¨ç‰ˆ 2. åœ¨Xshellè¿æ¥ä¼šè¯ä¸­è®¾ç½®ï¼Œåœ¨æ‰€æœ‰ä¼šè¯é€‰æ‹©éœ€è¦è®¾ç½®çš„è¿æ¥-å³é”®å±æ€§-éš§é“-å–æ¶ˆè½¬å‘è¯·æ±‚å¯¹å‹¾ï¼Œå¦‚ä¸‹å›¾ <img src="https://www.itze.cn/wp-content/uploads/2020/10/Xshell%E8%BF%9E%E6%8E%A5%E4%BC%9A%E8%AF%9D.png"> <img src="https://www.itze.cn/wp-content/uploads/2020/10/Xshell%E9%9A%A7%E9%81%93%E5%B1%9E%E6%80%A7.png"></p>]]></content>
      
      
      <categories>
          
          <category> Xshell </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Xmanager </tag>
            
            <tag> Xshell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹-å®ˆæŠ¤çº¿ç¨‹</title>
      <link href="/2020/10/19/java%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B/"/>
      <url>/2020/10/19/java%E5%A4%9A%E7%BA%BF%E7%A8%8B-%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="å®ˆæŠ¤çº¿ç¨‹æ³¨æ„äº‹é¡¹"><a href="#å®ˆæŠ¤çº¿ç¨‹æ³¨æ„äº‹é¡¹" class="headerlink" title="å®ˆæŠ¤çº¿ç¨‹æ³¨æ„äº‹é¡¹"></a>å®ˆæŠ¤çº¿ç¨‹æ³¨æ„äº‹é¡¹</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B.png"> <em>æ³¨ï¼šå›¾ç‰‡æ¥è‡ªç½‘ç»œ(è‹¥ä¾µåˆ™åˆ )</em> <strong>å®ˆæŠ¤çº¿ç¨‹ç‰¹ç‚¹ï¼šä¸€æ—¦æ‰€æœ‰ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéšJVMä¸€èµ·ç»“æŸã€‚</strong> <strong>ç”¨ä»£ç æ¥è¯æ˜ç¬¬ä¸‰æ¡æ‰€è¯´ï¼Œä¸æ˜¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½å¯ä»¥åˆ†é…ç»™å®ˆæŠ¤çº¿ç¨‹æ¥æ‰§è¡Œã€‚</strong></p><h3 id="åœºæ™¯æè¿°"><a href="#åœºæ™¯æè¿°" class="headerlink" title="åœºæ™¯æè¿°"></a>åœºæ™¯æè¿°</h3><p><strong>æŠŠä¸€ä¸ªæ­£åœ¨å‘æ–‡ä»¶ä¸­æ‰§è¡Œå†™å…¥æ“ä½œçš„çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ï¼Œåœ¨å†™å…¥è¿‡ç¨‹ä¸­ç»“æŸç”¨æˆ·ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆè¯¥å®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šéšä¹‹ç»“æŸã€‚</strong></p><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread3</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:&quot;</span> + File.separator + <span class="string">&quot;word.txt&quot;</span>);</span><br><span class="line">        <span class="keyword">while</span> (count &lt; <span class="number">99</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">OutputStreamWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(file, <span class="literal">true</span>));</span><br><span class="line">                writer.write(<span class="string">&quot;word: &quot;</span> + count+<span class="string">&quot;\r\n&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;å†™å…¥word: &quot;</span> + count);</span><br><span class="line">                writer.close();</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadAndRunnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥ä¸»çº¿ç¨‹ï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyThread3</span>());</span><br><span class="line">        <span class="comment">//è®¾ç½®å®ˆæŠ¤çº¿ç¨‹</span></span><br><span class="line">        thread.setDaemon(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//å¯åŠ¨çº¿ç¨‹</span></span><br><span class="line">        thread.start();</span><br><span class="line">        <span class="comment">//åœ¨æ§åˆ¶å°è¾“å…¥ä»»æ„é€€å‡ºä¸»çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in).next();</span><br><span class="line">        System.out.println(<span class="string">&quot;ç»“æŸä¸»çº¿ç¨‹ï¼š&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ§åˆ¶å°è¾“å…¥æ‰§è¡Œç»“æœ"><a href="#æ§åˆ¶å°è¾“å…¥æ‰§è¡Œç»“æœ" class="headerlink" title="æ§åˆ¶å°è¾“å…¥æ‰§è¡Œç»“æœ"></a>æ§åˆ¶å°è¾“å…¥æ‰§è¡Œç»“æœ</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B%E7%BB%93%E6%9E%9C.png"> <strong>å½“åœ¨æ§åˆ¶å°è¾“å…¥aaaæ—¶ç»“æŸäº†ä¸»çº¿ç¨‹</strong></p><h3 id="æ–‡ä»¶å†™å…¥ç»“æœ"><a href="#æ–‡ä»¶å†™å…¥ç»“æœ" class="headerlink" title="æ–‡ä»¶å†™å…¥ç»“æœ"></a>æ–‡ä»¶å†™å…¥ç»“æœ</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B%E5%86%99%E5%87%BA%E7%BB%93%E6%9E%9C.png"> <strong>æ–‡ä»¶å†™å…¥åˆ°word:3æ—¶ç»“æŸäº†ï¼Œè¯æ˜äº†å½“ç”¨æˆ·çº¿ç¨‹éƒ½ç»“æŸä¹‹åï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šéšJVMç»“æŸå·¥ä½œã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å®ˆæŠ¤çº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¤šçº¿ç¨‹åŸºæœ¬ä½¿ç”¨åŠæ¨¡æ‹Ÿè´­ç¥¨</title>
      <link href="/2020/10/19/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%8F%8A%E6%A8%A1%E6%8B%9F%E8%B4%AD%E7%A5%A8/"/>
      <url>/2020/10/19/java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%8F%8A%E6%A8%A1%E6%8B%9F%E8%B4%AD%E7%A5%A8/</url>
      
        <content type="html"><![CDATA[<h3 id="Javaä¸­å®ç°å¤šçº¿ç¨‹çš„æ–¹æ³•çš„ä¸¤ç§æ–¹å¼"><a href="#Javaä¸­å®ç°å¤šçº¿ç¨‹çš„æ–¹æ³•çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="Javaä¸­å®ç°å¤šçº¿ç¨‹çš„æ–¹æ³•çš„ä¸¤ç§æ–¹å¼"></a>Javaä¸­å®ç°å¤šçº¿ç¨‹çš„æ–¹æ³•çš„ä¸¤ç§æ–¹å¼</h3><ul><li>ç»§æ‰¿Threadç±»</li><li>å®ç°Runnableæ¥å£</li></ul><p>ç”±äºJavaæ˜¯å•ç»§æ‰¿å¤šå®ç°ï¼Œå› æ­¤ç¬¬ä¸€ç§ç»§æ‰¿Threadç±»ä¼šç”¨ä¸€å®šå±€é™æ€§</p><h3 id="çº¿ç¨‹çš„ç”Ÿå­˜å‘¨æœŸ"><a href="#çº¿ç¨‹çš„ç”Ÿå­˜å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹çš„ç”Ÿå­˜å‘¨æœŸ"></a>çº¿ç¨‹çš„ç”Ÿå­˜å‘¨æœŸ</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png"> <em>æ³¨ï¼šå›¾ç‰‡æ¥è‡ªç½‘ç»œ(è‹¥ä¾µåˆ™åˆ )</em></p><h3 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><ul><li>åˆ›å»ºï¼šå½“new Thread()æ—¶åˆ™çº¿ç¨‹è¢«åˆ›å»º</li><li>å°±ç»ªï¼šå½“è°ƒç”¨start()æ–¹æ³•æ—¶çº¿ç¨‹å¤„äºå°±ç»ªçŠ¶æ€ï¼Œæ­¤æ—¶çš„çº¿ç¨‹å¹¶ä¸ä¸€å®šæ˜¯å·²ç»è¢«æ‰§è¡Œï¼Œæ­¤æ—¶CPUæœ‰å¯èƒ½æ­£åœ¨æ‰§è¡Œå…¶ ä»–çº¿ç¨‹</li><li>è¿è¡Œï¼šçº¿ç¨‹è·å–åˆ°CPUèµ„æºæ‰§è¡ŒRun()æ–¹æ³•é‡Œé¢çš„ä»£ç ï¼Œè¿›å…¥è¿è¡ŒçŠ¶æ€</li><li>ç»ˆæ­¢ï¼šRun()æ–¹æ³•ä¸­ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œç»ˆæ­¢çº¿ç¨‹ã€‚</li><li>é˜»å¡çŠ¶æ€ï¼šé˜»å¡çš„æƒ…å†µï¼Œå¦‚æœåœ¨Run()æ–¹æ³•ä¸­åŠ å…¥äº†wait()&#x2F;join()&#x2F;sleep()ç­‰æ–¹æ³•ï¼Œæ­¤æ—¶çº¿ç¨‹å¤„äºé˜»å¡çŠ¶æ€ï¼Œ å°†è®©å‡ºCPUèµ„æºç»™å…¶ä»–çº¿ç¨‹ï¼Œåœ¨è¯¥çº¿ç¨‹è¢«å”¤é†’ä¹‹åå°†å†æ¬¡è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…æœ‰ç©ºé—²çš„CPUèµ„æºã€‚</li></ul><p><strong>Runnableçš„ä»£ç å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹ï¼ˆThreadå®ä¾‹ï¼‰å…±äº«ï¼Œé€‚åˆå¤šä¸ªçº¿ç¨‹å¤„ç†åŒä¸€èµ„æºçš„é—®é¢˜ï¼Œè€Œç»§æ‰¿Threadç±»ä¸ä¼šï¼Œç”¨ä¸¤ç§æ–¹å¼å†™ä¸ªä¾‹å­è¯æ˜ä¸€ä¸‹</strong></p><h3 id="ä½¿ç”¨ç»§æ‰¿Threadç±»"><a href="#ä½¿ç”¨ç»§æ‰¿Threadç±»" class="headerlink" title="ä½¿ç”¨ç»§æ‰¿Threadç±»"></a>ä½¿ç”¨ç»§æ‰¿Threadç±»</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">3</span>;<span class="comment">//å‰©ä½™ç¥¨æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            number--; <span class="comment">//å‡è®¾æ¯æ¬¡æ‰§è¡Œå‡å°‘ä¸€å¼ ç¥¨æ•°</span></span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å‰©ä½™ç¥¨æ•°ï¼š&quot;</span> + number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadAndRunnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»º3ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="type">MyThread</span> <span class="variable">myThread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line">        <span class="comment">//å¯åŠ¨</span></span><br><span class="line">        myThread1.start();</span><br><span class="line">        myThread2.start();</span><br><span class="line">        myThread3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»§æ‰¿Threadç±»æ‰§è¡Œç»“æœ</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/Thread.png"></p><h3 id="ä½¿ç”¨å®ç°Runnableæ¥å£"><a href="#ä½¿ç”¨å®ç°Runnableæ¥å£" class="headerlink" title="ä½¿ç”¨å®ç°Runnableæ¥å£"></a>ä½¿ç”¨å®ç°Runnableæ¥å£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread2</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">3</span>;<span class="comment">//å‰©ä½™ç¥¨æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            number--;</span><br><span class="line">            System.out.println(<span class="string">&quot;çº¿ç¨‹åï¼š&quot;</span> + Thread.currentThread().getName() + <span class="string">&quot;å‰©ä½™ç¥¨æ•°ï¼š&quot;</span> + number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadAndRunnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»º3ä¸ªçº¿ç¨‹</span></span><br><span class="line">        <span class="type">MyThread2</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread2</span>();</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(thread);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(thread);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">thread3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(thread);</span><br><span class="line">        <span class="comment">//å¯åŠ¨</span></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">        thread3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å®ç°Runnableæ¥å£æ‰§è¡Œç»“æœ</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/Runnable.png"> <strong>æ³¨ï¼šçº¿ç¨‹çš„å¯åŠ¨é¡ºåºå¹¶ä¸ä¸€å®šæ˜¯çº¿ç¨‹çš„æ‰§è¡Œé¡ºåºï¼è¦çœ‹å“ªä¸ªçº¿ç¨‹ä¼˜å…ˆæŠ¢å åˆ°CPUèµ„æºï¼</strong> <strong>ç”±ä¸¤è€…çš„æ‰§è¡Œç»“æœå¯ä»¥è¯æ˜ä¸Šé¢çš„ç»“æœï¼ŒRunnableçš„ä»£ç å¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹ï¼ˆThreadå®ä¾‹ï¼‰å…±äº«ï¼Œç»§æ‰¿Threadç±»çš„æ–¹å¼æ¯ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œäº†3æ¬¡ï¼Œå®ç°Runnableæ¥å£çš„æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œäº†3æ¬¡ã€‚è¿™é‡Œä¸è€ƒè™‘åŒæ­¥ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Runnable </tag>
            
            <tag> Thread </tag>
            
            <tag> å¤šçº¿ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaç”Ÿæˆ/è§£æäºŒç»´ç -ZXingçš„ä½¿ç”¨</title>
      <link href="/2020/10/15/java%E7%94%9F%E6%88%90-j%E8%A7%A3%E6%9E%90%E4%BA%8C%E7%BB%B4%E7%A0%81-zxing%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/10/15/java%E7%94%9F%E6%88%90-j%E8%A7%A3%E6%9E%90%E4%BA%8C%E7%BB%B4%E7%A0%81-zxing%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><strong>Javaç”ŸæˆäºŒç»´ç å¸¸ç”¨çš„ä¸¤ç§æ–¹å¼ï¼š</strong> - Googleçš„ZXing - Densoå…¬å¸çš„QRCode è‡³äºä¸¤è€…çš„åŒºåˆ«è‡ªè¡Œç™¾åº¦ï¼Œè¿™é‡Œä»‹ç»ä½¿ç”¨<strong>ZXing</strong>ç”Ÿæˆè§£æäºŒç»´ç </p><h3 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h3><p><strong>æ·»åŠ ZXingä¾èµ–JaråŒ…</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!--ZXing äºŒç»´ç  --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;javase&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">3.3</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h3 id="ZXingç”ŸæˆäºŒç»´ç "><a href="#ZXingç”ŸæˆäºŒç»´ç " class="headerlink" title="ZXingç”ŸæˆäºŒç»´ç "></a>ZXingç”ŸæˆäºŒç»´ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> content  äºŒç»´ç å†…å®¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destPath äºŒç»´ç ä¿å­˜çš„è·¯å¾„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/10/15 14:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">createQRCode</span><span class="params">(String content, File destPath)</span> &#123;</span><br><span class="line">    <span class="comment">//å®šä¹‰é•¿å®½</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">width</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">height</span> <span class="operator">=</span> <span class="number">300</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰æ ¼å¼</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">format</span> <span class="operator">=</span> <span class="string">&quot;png&quot;</span>;</span><br><span class="line">    <span class="comment">//å®šä¹‰äºŒç»´ç å‚æ•°</span></span><br><span class="line">    <span class="type">HashMap</span> <span class="variable">hashMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">    hashMap.put(EncodeHintType.CHARACTER_SET, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çº é”™èƒ½åŠ›</span></span><br><span class="line"><span class="comment">     * L:çº¦å¯çº é”™7%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">     * M:çº¦å¯çº é”™15%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">     * Q:çº¦å¯çº é”™25%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">     * H:çº¦å¯çº é”™30%çš„æ•°æ®ç å­—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    hashMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.M);</span><br><span class="line">    <span class="comment">//è¾¹è·</span></span><br><span class="line">    hashMap.put(EncodeHintType.MARGIN, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">BitMatrix</span> <span class="variable">matrix</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiFormatWriter</span>()</span><br><span class="line">                .encode(content, BarcodeFormat.QR_CODE, width, height, hashMap);</span><br><span class="line">        MatrixToImageWriter.writeToPath(matrix, format, destPath.toPath());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ZXingè§£æäºŒç»´ç "><a href="#ZXingè§£æäºŒç»´ç " class="headerlink" title="ZXingè§£æäºŒç»´ç "></a>ZXingè§£æäºŒç»´ç </h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destPath éœ€è¦è§£æçš„äºŒç»´ç è·¯å¾„</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/10/15 14:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readQRCode</span><span class="params">(File destPath)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">BufferedImage</span> <span class="variable">read</span> <span class="operator">=</span> ImageIO.read(destPath);</span><br><span class="line">        <span class="type">BinaryBitmap</span> <span class="variable">binaryBitmap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BinaryBitmap</span></span><br><span class="line">                (<span class="keyword">new</span> <span class="title class_">HybridBinarizer</span>(<span class="keyword">new</span> <span class="title class_">BufferedImageLuminanceSource</span>(read)));</span><br><span class="line">        <span class="type">HashMap</span> <span class="variable">hashMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        hashMap.put(EncodeHintType.CHARACTER_SET, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MultiFormatReader</span>().decode(binaryBitmap, hashMap);</span><br><span class="line">        System.out.println(<span class="string">&quot;äºŒç»´ç æ ¼å¼ï¼š&quot;</span> + result.getBarcodeFormat());</span><br><span class="line">        System.out.println(<span class="string">&quot;äºŒç»´ç å†…å®¹ï¼š&quot;</span> + result.getText());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//ç”ŸæˆäºŒç»´ç </span></span><br><span class="line">    <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> <span class="string">&quot;https://www.itze.cn&quot;</span>;</span><br><span class="line">    <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\123.png&quot;</span>);</span><br><span class="line">    createQRCode(content, file);</span><br><span class="line">    <span class="comment">//è§£æäºŒç»´ç </span></span><br><span class="line">    readQRCode(file);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è§£æç»“æœ"><a href="#è§£æç»“æœ" class="headerlink" title="è§£æç»“æœ"></a>è§£æç»“æœ</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/%E4%BA%8C%E7%BB%B4%E7%A0%81%E8%A7%A3%E6%9E%90%E7%BB%93%E6%9E%9C.png"> è§£æå…¶ä»–çš„äºŒç»´ç ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå®æµ‹è§£æå¾®ä¿¡ä¸ªäººäºŒç»´ç ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> ZXing </tag>
            
            <tag> ç”Ÿæˆ/è§£æäºŒç»´ç  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaè‡ªå®šä¹‰æ³¨è§£åŠè§£ææ³¨è§£</title>
      <link href="/2020/10/14/java%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E5%8F%8A%E8%A7%A3%E6%9E%90%E6%B3%A8%E8%A7%A3/"/>
      <url>/2020/10/14/java%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3%E5%8F%8A%E8%A7%A3%E6%9E%90%E6%B3%A8%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h3 id="è‡ªå®šä¹‰æ³¨è§£"><a href="#è‡ªå®šä¹‰æ³¨è§£" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£"></a>è‡ªå®šä¹‰æ³¨è§£</h3><h5 id="ç±»åï¼šDesc"><a href="#ç±»åï¼šDesc" class="headerlink" title="ç±»åï¼šDesc"></a>ç±»åï¼šDesc</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/09/13 14:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Target</span>:æ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼ŒMETHODï¼šä½œç”¨åœ¨æ–¹æ³•ä¸Šï¼ŒTYPEï¼šä½œç”¨åœ¨ç±»ä¸Š</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Retention</span>ï¼šæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ŒRUNTIMEï¼šè¿è¡Œæ—¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Inherited</span>ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»,åªèƒ½è§£æåˆ°ç±»å±‚ï¼Œæ–¹æ³•å±‚è§£æä¸åˆ°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD,ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Desc &#123;</span><br><span class="line">    <span class="comment">//æˆå‘˜ç»„æˆå¿…é¡»æ˜¯æ— å‚/æ— å¼‚å¸¸</span></span><br><span class="line">    String <span class="title function_">value</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="æ³¨è§£ä½¿ç”¨"><a href="#æ³¨è§£ä½¿ç”¨" class="headerlink" title="æ³¨è§£ä½¿ç”¨"></a>æ³¨è§£ä½¿ç”¨</h3><h5 id="ç±»åï¼šDescMethod"><a href="#ç±»åï¼šDescMethod" class="headerlink" title="ç±»åï¼šDescMethod"></a>ç±»åï¼šDescMethod</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/09/13 15:20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Desc(value = &quot;This is DescMethod Class&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DescMethod</span> &#123;</span><br><span class="line">    <span class="meta">@Desc(value = &quot;This is A Method&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">A</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">    <span class="meta">@Desc(value = &quot;This is B Method&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">B</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è§£ææ³¨è§£"><a href="#è§£ææ³¨è§£" class="headerlink" title="è§£ææ³¨è§£"></a>è§£ææ³¨è§£</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£ææ³¨è§£</span></span><br><span class="line"><span class="comment">     * è·å–ç±»ä¸Šçš„æ³¨è§£å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Class&lt;DescMethod&gt; methodClass = DescMethod.class;</span><br><span class="line">    <span class="type">boolean</span> <span class="variable">classAnnotationPresent</span> <span class="operator">=</span> methodClass.isAnnotationPresent(Desc.class);</span><br><span class="line">    <span class="comment">//å¦‚æœDescMethod.classä¸­å­˜åœ¨@Descæ³¨è§£</span></span><br><span class="line">    <span class="keyword">if</span> (classAnnotationPresent) &#123;</span><br><span class="line">        <span class="comment">//è·å–@Descæ³¨è§£</span></span><br><span class="line">        <span class="type">Desc</span> <span class="variable">annotation</span> <span class="operator">=</span> methodClass.getDeclaredAnnotation(Desc.class);</span><br><span class="line">        <span class="comment">//å¾—åˆ°@Descæ³¨è§£ä¸­çš„å†…å®¹</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> annotation.value();</span><br><span class="line">        System.out.println(desc);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£ææ³¨è§£</span></span><br><span class="line"><span class="comment">     * è·å–ç±»ä¸­æ–¹æ³•ä¸Šçš„æ³¨è§£å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//è·å–ç±»ä¸­æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line">    Method[] methods = methodClass.getDeclaredMethods();</span><br><span class="line">    <span class="keyword">for</span> (Method method : methods</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">methodAnnotationPresent</span> <span class="operator">=</span> method.isAnnotationPresent(Desc.class);</span><br><span class="line">        <span class="comment">//å¦‚æœè¯¥æ–¹æ³•ä¸Šå­˜åœ¨@Descæ³¨è§£</span></span><br><span class="line">        <span class="keyword">if</span> (methodAnnotationPresent) &#123;</span><br><span class="line">            <span class="comment">//è·å–@Descæ³¨è§£</span></span><br><span class="line">            <span class="type">Desc</span> <span class="variable">annotation</span> <span class="operator">=</span> method.getDeclaredAnnotation(Desc.class);</span><br><span class="line">            <span class="comment">//å¾—åˆ°è¯¥æ–¹æ³•ä¸Š@Descæ³¨è§£çš„å†…å®¹</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">desc</span> <span class="operator">=</span> annotation.value();</span><br><span class="line">            System.out.println(desc);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œç»“æœ"><a href="#æ‰§è¡Œç»“æœ" class="headerlink" title="æ‰§è¡Œç»“æœ"></a>æ‰§è¡Œç»“æœ</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/result.png"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Annotation </tag>
            
            <tag> æ³¨è§£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Twitter4J-æ“ä½œTwitteré…ç½®</title>
      <link href="/2020/10/13/twitter4j-java%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/10/13/twitter4j-java%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<p><strong>å¼€å‘è¯­è¨€ï¼šJava æ“ä½œç³»ç»Ÿï¼šwindow10 å¼€å‘å·¥å…·ï¼šIDEA JDKç‰ˆæœ¬ï¼š1.8</strong></p><h3 id="å‰æœŸå‡†å¤‡"><a href="#å‰æœŸå‡†å¤‡" class="headerlink" title="å‰æœŸå‡†å¤‡"></a>å‰æœŸå‡†å¤‡</h3><p><strong>éœ€è¦ç¿»å¢™ï¼Œé¦–å…ˆåœ¨Twitterç”³è¯·ä¸€ä¸ªå¼€å‘è€…è´¦å·ï¼Œç„¶ååœ¨å¼€å‘è€…ä¸­å¿ƒåˆ›å»ºä¸€ä¸ªproject Twitterå¼€å‘è€…åœ°å€ï¼š<a href="https://developer.twitter.com/en" title="https://developer.twitter.com/en">https://developer.twitter.com/en</a> è‡ªå·±æƒ³åŠæ³•é€šè¿‡ç”³è¯· åˆ›å»ºProjectä¹‹åï¼Œé¦–å…ˆæŒ‰ç…§å¦‚ä¸‹å›¾è®¾ç½®æƒé™</strong></p><h4 id="è®¾ç½®æƒé™"><a href="#è®¾ç½®æƒé™" class="headerlink" title="è®¾ç½®æƒé™"></a>è®¾ç½®æƒé™</h4><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/redwrite.png" alt="TwitterAuth"> <strong>ç¬¬äºŒæ­¥è®¾ç½®ï¼Œæ‰¾åˆ°keys and tokens ä¿å­˜è¿™å››ä¸ªå¯†é’¥å€¼</strong></p><h4 id="è®¾ç½®å¯†é’¥"><a href="#è®¾ç½®å¯†é’¥" class="headerlink" title="è®¾ç½®å¯†é’¥"></a>è®¾ç½®å¯†é’¥</h4><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/key.png" alt="Twitter-Key"> <strong>API key API key secret ä¸‹é¢è¿™ä¸¤ä¸ªä¿å­˜ä¸‹æ¥ï¼Œè²Œä¼¼æ¯æ¬¡ç”Ÿæˆåªèƒ½çœ‹åˆ°ä¸€æ¬¡ Access Token Access secret Token</strong></p><h3 id="Twitter4J"><a href="#Twitter4J" class="headerlink" title="Twitter4J"></a>Twitter4J</h3><p><strong>Twitter4Jå®˜ç½‘ï¼š</strong><a href="http://twitter4j.org/en/index.html" title="http://twitter4j.org/en/index.html">http://twitter4j.org/en/index.html</a> <img src="https://www.itze.cn/wp-content/uploads/2020/10/twitter4japi.png" alt="Twitter4J"></p><h4 id="é…ç½®Twitter4Jä¾èµ–"><a href="#é…ç½®Twitter4Jä¾èµ–" class="headerlink" title="é…ç½®Twitter4Jä¾èµ–"></a>é…ç½®Twitter4Jä¾èµ–</h4><p><strong>é…ç½®Twitter4Jä¾èµ–JaråŒ…ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©Mavené…ç½®</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!-- Twitter4j --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.twitter4j&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;twitter4j-core&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">4.0</span><span class="number">.7</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="é…ç½®å¯†é’¥"><a href="#é…ç½®å¯†é’¥" class="headerlink" title="é…ç½®å¯†é’¥"></a>é…ç½®å¯†é’¥</h4><p><strong>ä½¿ç”¨Twitter4Jæ“ä½œTwitteré…ç½®,éšæ„é€‰æ‹©ä¸€ç§æ–¹å¼å³å¯ï¼Œè¿™é‡Œé€‰æ‹©ç¬¬äºŒç§</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/twitter4jpeihiz.png" alt="Twitter4Jpeizhi"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> twitter4j.Twitter;</span><br><span class="line"><span class="keyword">import</span> twitter4j.TwitterFactory;</span><br><span class="line"><span class="keyword">import</span> twitter4j.conf.ConfigurationBuilder;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/9/30 15:57</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetTwitterConfig</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Twitter <span class="title function_">getNewInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ConfigurationBuilder</span> <span class="variable">cb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConfigurationBuilder</span>();</span><br><span class="line">        cb.setDebugEnabled(<span class="literal">true</span>)</span><br><span class="line">                .setOAuthConsumerKey(<span class="string">&quot;API Key&quot;</span>)</span><br><span class="line">                .setOAuthConsumerSecret(<span class="string">&quot;API Key Secret&quot;</span>)</span><br><span class="line">                .setOAuthAccessToken(<span class="string">&quot;Access Token&quot;</span>)</span><br><span class="line">                .setOAuthAccessTokenSecret(<span class="string">&quot;Access Token Secret&quot;</span>)</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * è®¾ç½®ä»£ç†</span></span><br><span class="line"><span class="comment">                 * 1.å¦‚æœä½ æœ¬åœ°ä½¿ç”¨äº†ä»£ç†è½¯ä»¶ç¿»å¢™äº†ï¼ŒHttpProxyHostä¸€èˆ¬æ˜¯127.0.0.1</span></span><br><span class="line"><span class="comment">                 *   HttpProxyPortæŸ¥çœ‹httpä»£ç†ç«¯å£å¤šå°‘å³å¯</span></span><br><span class="line"><span class="comment">                 * 2.å¦‚æœé¡¹ç›®æ”¾åˆ°æµ·å¤–æœåŠ¡å™¨è¿è¡Œï¼Œè¿™é‡Œä¸éœ€è¦è®¾ç½®ä¹Ÿå¯ä»¥</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                .setHttpProxyHost(<span class="string">&quot;127.0.0.1&quot;</span>)</span><br><span class="line">                .setHttpProxyPort(<span class="number">1234</span>);</span><br><span class="line">        <span class="type">TwitterFactory</span> <span class="variable">tf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TwitterFactory</span>(cb.build());</span><br><span class="line">        <span class="type">Twitter</span> <span class="variable">twitter</span> <span class="operator">=</span> tf.getInstance();</span><br><span class="line">        <span class="keyword">return</span> twitter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Twitter4Jæ“ä½œTwitter"><a href="#Twitter4Jæ“ä½œTwitter" class="headerlink" title="Twitter4Jæ“ä½œTwitter"></a>Twitter4Jæ“ä½œTwitter</h3><p><strong>Twitter4Jå®˜ç½‘ç¤ºä¾‹</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/10/tuiwen.png"> <strong>å‘å¸ƒæ¨æ–‡æµ‹è¯•</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> TwitterException &#123;</span><br><span class="line">    <span class="type">Twitter</span> <span class="variable">twitter</span> <span class="operator">=</span> GetTwitterConfig.getNewInstance();</span><br><span class="line">    twitter.updateStatus(<span class="string">&quot;hello word&quot;</span>);<span class="comment">//å‘å¸ƒæ¨æ–‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><p><img src="https://www.itze.cn/wp-content/uploads/2020/10/helloword.png"> å…¶ä½™çš„å¯ä»¥è‡ªè¡Œè¿›è¡Œæµ‹è¯•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Twitter </tag>
            
            <tag> Twitter4J </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java-å­—ç¬¦æµé€è¡Œè¯»å–/å†™å…¥æ–‡ä»¶</title>
      <link href="/2020/09/28/java-%E5%AD%97%E7%AC%A6%E6%B5%81%E9%80%90%E8%A1%8C%E8%AF%BB%E5%8F%96-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6/"/>
      <url>/2020/09/28/java-%E5%AD%97%E7%AC%A6%E6%B5%81%E9%80%90%E8%A1%8C%E8%AF%BB%E5%8F%96-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­—ç¬¦æµï¼Œæ¯æ¬¡è¯»å–/å†™å…¥ä¸€è¡Œ</span></span><br><span class="line"><span class="comment"> * BufferedReader/PrintWriter</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/9/28 10:29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> srcFile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destFile</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">brAndpw</span><span class="params">(String srcFile,String destFile)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">FileReader</span>(srcFile));</span><br><span class="line">        <span class="comment">//å‚æ•°è¯´æ˜ï¼Œç¬¬äºŒä¸ªtrueæ—¶ï¼Œå†™å…¥çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œå°±ä¸éœ€è¦åˆ·æ–°äº†</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile), <span class="literal">true</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//è¯»å–ï¼Œæ¯æ¬¡è¯»å–ä¸€è¡Œ</span></span><br><span class="line">        <span class="keyword">while</span> ((str=reader.readLine())!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//å†™å…¥ï¼Œprintlnï¼šå†™å…¥å¹¶è‡ªåŠ¨æ¢è¡Œï¼Œprint:å†™å…¥ä½†æ˜¯ä¸æ‰§è¡Œæ¢è¡Œ</span></span><br><span class="line">            writer.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        reader.close();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">srcFile</span> <span class="operator">=</span> <span class="string">&quot;D:\\newCountry.txt&quot;</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">destFile</span> <span class="operator">=</span> <span class="string">&quot;D:\\newCountry2.txt&quot;</span>;</span><br><span class="line">    brAndpw(srcFile,destFile);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> å­—ç¬¦æµ </tag>
            
            <tag> BufferedReader </tag>
            
            <tag> PrintWriter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java-å­—ç¬¦æµè¯»å–/å†™å…¥æ–‡ä»¶å†…å®¹</title>
      <link href="/2020/09/27/java-%E5%AD%97%E7%AC%A6%E6%B5%81%E8%AF%BB%E5%8F%96-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9/"/>
      <url>/2020/09/27/java-%E5%AD%97%E7%AC%A6%E6%B5%81%E8%AF%BB%E5%8F%96-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å­—ç¬¦æµï¼Œè¯»å–æ–‡ä»¶å¹¶å†™å…¥åˆ°æ–°æ–‡ä»¶ä¸­</span></span><br><span class="line"><span class="comment"> * è¯»å–æ ¼å¼txt,xml...éƒ½å¯ä»¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> srcFile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destFile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/9/27 9:12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">readCharsAndWrite</span><span class="params">(File srcFile, File destFile)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!srcFile.exists()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;åŸæ–‡ä»¶ï¼š&quot;</span> + srcFile + <span class="string">&quot;ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!srcFile.isFile()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(srcFile + <span class="string">&quot;ä¸æ˜¯æ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * å‚æ•°è¯´æ˜ï¼Œnew InputStreamReader(args,args2)</span></span><br><span class="line"><span class="comment">         * ç¬¬ä¸€ä¸ªå‚æ•°argsæ˜¯new FileInputStream(åŸæ–‡ä»¶è·¯å¾„)</span></span><br><span class="line"><span class="comment">         * ç¬¬äºŒä¸ªå‚æ•°args2æ˜¯ä»¥ä»€ä¹ˆç¼–ç æ ¼å¼è¯»å–è¯¥æ–‡ä»¶,å¯ä»¥ä¸å†™</span></span><br><span class="line"><span class="comment">         *      é»˜è®¤è¯»å–ä¸ºé¡¹ç›®çš„ç¼–ç æ ¼å¼ï¼Œå¦‚æœé¡¹ç¼–ç æ ¼å¼ä¸ºgbkåˆ™ä»¥è¯¥æ–¹å¼è¯»å–</span></span><br><span class="line"><span class="comment">         *      å»ºè®®è®¾ç½®è¦è¯»å–æ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼Œä»¥é˜²ä¹±ç ï¼</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">InputStreamReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">OutputStreamWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile));</span><br><span class="line">        <span class="comment">//è¯»å–åŸæ–‡ä»¶å†…å®¹,è¯»å–å­—ç¬¦æµç”¨char[],å­—èŠ‚æµç”¨byte[]</span></span><br><span class="line">        <span class="type">char</span>[] chars = <span class="keyword">new</span> <span class="title class_">char</span>[<span class="number">10</span> * <span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span> ((b = reader.read(chars, <span class="number">0</span>, chars.length)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//å†™å…¥åˆ°æ–°æ–‡ä»¶ä¸­</span></span><br><span class="line">            writer.write(chars, <span class="number">0</span>, b);</span><br><span class="line">            writer.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­</span></span><br><span class="line">        reader.close();</span><br><span class="line">        writer.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    readCharsAndWrite(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\context.xml&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\context2.xml&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> FileInputStream </tag>
            
            <tag> FileOutputStream </tag>
            
            <tag> InputStreamReader </tag>
            
            <tag> OutputStreamWriter </tag>
            
            <tag> å­—ç¬¦æµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java-å®ç°æ–‡ä»¶æ‹·è´çš„ä¸‰ç§æ–¹å¼</title>
      <link href="/2020/09/25/java-%E5%AD%97%E8%8A%82%E6%B5%81%E8%AF%BB%E5%86%99%E5%AE%9E%E7%8E%B0%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6/"/>
      <url>/2020/09/25/java-%E5%AD%97%E8%8A%82%E6%B5%81%E8%AF%BB%E5%86%99%E5%AE%9E%E7%8E%B0%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶æ‹·è´ï¼Œåˆ©ç”¨å­—èŠ‚æµæ‰¹é‡è¯»å–å®ç°å¤åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/9/24 10:29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> srcFile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destFile</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFile</span><span class="params">(File srcFile, File destFile)</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­åŸæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (!srcFile.exists()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;æºæ–‡ä»¶ï¼š&quot;</span> + srcFile + <span class="string">&quot;ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­åŸæ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (!srcFile.isFile()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(srcFile + <span class="string">&quot;ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile);</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¯»å–åŸæ–‡ä»¶ï¼Œä»¥å­—èŠ‚æµçš„å½¢å¼è¯»åˆ°byteæ•°ç»„ï¼Œ1024ä¸ªå­—èŠ‚=1KB</span></span><br><span class="line"><span class="comment">         * å¾ªç¯è¯»å–</span></span><br><span class="line"><span class="comment">         * in.read()è¯»åˆ°bytesæ•°ç»„ä¸­ï¼Œä½ç½®ä»0-bytes.length</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">10</span> * <span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> b;  <span class="comment">//bä¸ºè¯»å–åˆ°çš„å­—èŠ‚é•¿åº¦</span></span><br><span class="line">        <span class="keyword">while</span> ((b = in.read(bytes, <span class="number">0</span>, bytes.length)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//å†™å…¥</span></span><br><span class="line">            out.write(bytes, <span class="number">0</span>, b);</span><br><span class="line">            out.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å…³é—­</span></span><br><span class="line">        in.close();</span><br><span class="line">        out.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶æ‹·è´ï¼Œåˆ©ç”¨å¸¦ç¼“å†²åŒºçš„å­—èŠ‚æµ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span>: 2020/9/24 10:29</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> srcFile</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> destFile</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">copyFileByBuffer</span><span class="params">(File srcFile,File destFile)</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­åŸæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">if</span> (!srcFile.exists()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;æºæ–‡ä»¶ï¼š&quot;</span> + srcFile + <span class="string">&quot;ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ¤æ–­åŸæ–‡ä»¶æ˜¯å¦ä¸ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (!srcFile.isFile()) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(srcFile + <span class="string">&quot;ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(srcFile));</span><br><span class="line">        <span class="type">BufferedOutputStream</span> <span class="variable">bos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(destFile));</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="keyword">while</span> ((b=bis.read())!=-<span class="number">1</span>)&#123;</span><br><span class="line">            bos.write(b);</span><br><span class="line">            bos.flush();<span class="comment">//åˆ·æ–°ç¼“å†²åŒºï¼Œåˆ©ç”¨å¸¦ç¼“å†²åŒºçš„ä¸€å®šè¦åˆ·æ–°ç¼“å†²åŒºï¼Œä¸ç„¶æ— æ³•å†™å…¥</span></span><br><span class="line">        &#125;</span><br><span class="line">        bis.close();</span><br><span class="line">        bos.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    copyFile(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\D.zip&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\a.zip&quot;</span>));  <span class="comment">//è€—æ—¶ï¼š29æ¯«ç§’</span></span><br><span class="line">    copyFileByBuffer(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\D.zip&quot;</span>), <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\a.zip&quot;</span>));  <span class="comment">//è€—æ—¶ï¼š42900æ¯«ç§’</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    System.out.println(<span class="string">&quot;è€—æ—¶ï¼š&quot;</span>+(end-start)+<span class="string">&quot;æ¯«ç§’&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¬¬ä¸‰ç§æ‹·è´çš„æ–¹æ³•å°±æ˜¯ï¼Œå³ä¸å¸¦ç¼“å†²åŒºï¼Œä¹Ÿä¸ä½¿ç”¨æ‰¹é‡è¯»å–ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„è¯»å–ï¼Œè¿™ç§æ–¹å¼æ•ˆç‡æ˜¯æœ€ä½çš„ï¼Œæˆ‘å°±ä¸æ‹¿å®ä¾‹æµ‹è¯•äº†ã€‚-laughing"><a href="#ç¬¬ä¸‰ç§æ‹·è´çš„æ–¹æ³•å°±æ˜¯ï¼Œå³ä¸å¸¦ç¼“å†²åŒºï¼Œä¹Ÿä¸ä½¿ç”¨æ‰¹é‡è¯»å–ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„è¯»å–ï¼Œè¿™ç§æ–¹å¼æ•ˆç‡æ˜¯æœ€ä½çš„ï¼Œæˆ‘å°±ä¸æ‹¿å®ä¾‹æµ‹è¯•äº†ã€‚-laughing" class="headerlink" title="ç¬¬ä¸‰ç§æ‹·è´çš„æ–¹æ³•å°±æ˜¯ï¼Œå³ä¸å¸¦ç¼“å†²åŒºï¼Œä¹Ÿä¸ä½¿ç”¨æ‰¹é‡è¯»å–ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„è¯»å–ï¼Œè¿™ç§æ–¹å¼æ•ˆç‡æ˜¯æœ€ä½çš„ï¼Œæˆ‘å°±ä¸æ‹¿å®ä¾‹æµ‹è¯•äº†ã€‚:laughing:"></a>ç¬¬ä¸‰ç§æ‹·è´çš„æ–¹æ³•å°±æ˜¯ï¼Œå³ä¸å¸¦ç¼“å†²åŒºï¼Œä¹Ÿä¸ä½¿ç”¨æ‰¹é‡è¯»å–ï¼Œå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªå­—èŠ‚çš„è¯»å–ï¼Œè¿™ç§æ–¹å¼æ•ˆç‡æ˜¯æœ€ä½çš„ï¼Œæˆ‘å°±ä¸æ‹¿å®ä¾‹æµ‹è¯•äº†ã€‚:laughing:</h4><h4 id="å®é™…æµ‹è¯•æ‹·è´åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡å­—èŠ‚æµçš„æ‰¹é‡è¯»å–çš„æ–¹å¼é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚"><a href="#å®é™…æµ‹è¯•æ‹·è´åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡å­—èŠ‚æµçš„æ‰¹é‡è¯»å–çš„æ–¹å¼é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚" class="headerlink" title="å®é™…æµ‹è¯•æ‹·è´åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡å­—èŠ‚æµçš„æ‰¹é‡è¯»å–çš„æ–¹å¼é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚"></a>å®é™…æµ‹è¯•æ‹·è´åŒä¸€ä¸ªæ–‡ä»¶ï¼Œé€šè¿‡å­—èŠ‚æµçš„æ‰¹é‡è¯»å–çš„æ–¹å¼é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚</h4>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> FileInputStream </tag>
            
            <tag> FileOutputStream </tag>
            
            <tag> I/Oæµ </tag>
            
            <tag> å¤åˆ¶æ–‡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—èŠ‚æµ-æ–‡ä»¶è¾“å…¥æµFileInputStream[åŸºæœ¬ä½¿ç”¨]</title>
      <link href="/2020/09/24/%E5%AD%97%E8%8A%82%E6%B5%81-%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5%E6%B5%81fileinputstream%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/09/24/%E5%AD%97%E8%8A%82%E6%B5%81-%E6%96%87%E4%BB%B6%E8%BE%93%E5%85%A5%E6%B5%81fileinputstream%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span>: 2020/9/24 10:29</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åæ¯10ä¸ªå­—èŠ‚æ¢è¡Œ</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printHex</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">        <span class="type">int</span> b;</span><br><span class="line">        <span class="type">int</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æŠŠæ–‡ä»¶ä½œä¸ºå­—èŠ‚æµæ“ä½œ</span></span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(fileName);</span><br><span class="line">            <span class="keyword">while</span> ((b = fis.read()) != -<span class="number">1</span>) &#123;  <span class="comment">//æ¯æ¬¡åªè¯»ä¸€ä¸ªå­—èŠ‚</span></span><br><span class="line">                <span class="comment">//ä»¥16è¿›åˆ¶</span></span><br><span class="line">                System.out.print(Integer.toHexString(b) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (a++ % <span class="number">10</span> == <span class="number">0</span>) &#123;  <span class="comment">//æ¯10ä¸ªå­—èŠ‚æ¢è¡Œ</span></span><br><span class="line">                    System.out.println();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†ä¸€ä¸ªæ–‡ä»¶è¯»åˆ°byteæ•°ç»„ä¸­</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printHexByByteArrays</span><span class="params">(String fileName)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//æŠŠæ–‡ä»¶ä½œä¸ºå­—èŠ‚æµæ“ä½œ</span></span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(fileName);</span><br><span class="line">            <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">10</span> * <span class="number">1024</span>]; <span class="comment">//1024ä¸ªå­—èŠ‚=1KB 10*1024=10KB</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//æŠŠæ–‡ä»¶è¯»åˆ°byteæ•°ç»„ä¸­ï¼Œå¹¶ä¸”æ”¾å…¥ä»0-bytes.lengthçš„ä½ç½®ï¼Œè¿”å›å€¼readä¸ºè¯»åˆ°çš„å­—èŠ‚ä¸ªæ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">read</span> <span class="operator">=</span> fis.read(bytes, <span class="number">0</span>, bytes.length);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; read; j++) &#123;  <span class="comment">//è¿™é‡Œåªéå†è¯»åˆ°ä¸ªå­—èŠ‚ä¸ªæ•°</span></span><br><span class="line">                System.out.print(Integer.toHexString(bytes[j]) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (i++ % <span class="number">10</span> == <span class="number">0</span>) &#123;   <span class="comment">//æ¯10ä¸ªå­—èŠ‚æ¢è¡Œ</span></span><br><span class="line">                    System.out.println();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å½“æ•°ç»„ä¸å¤Ÿå¤§çš„æ—¶å€™ä¸€æ¬¡æ€§æ— æ³•è¯»å®Œï¼Œä½¿ç”¨å¾ªç¯å»è¯»</span></span><br><span class="line">            <span class="type">int</span> readBteys;</span><br><span class="line">            <span class="keyword">while</span> ((readBteys = fis.read(bytes, <span class="number">0</span>, bytes.length)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; readBteys; j++) &#123;</span><br><span class="line">                    System.out.print(Integer.toHexString(bytes[j]) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (i++ % <span class="number">10</span> == <span class="number">0</span>) &#123;  <span class="comment">//æ¯10ä¸ªå­—èŠ‚æ¢è¡Œ</span></span><br><span class="line">                        System.out.println();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> FileInputStream </tag>
            
            <tag> å­—èŠ‚æµ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java-é€šè¿‡åå°„äº†è§£é›†åˆæ³›å‹çš„æœ¬è´¨</title>
      <link href="/2020/09/21/java-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E4%BA%86%E8%A7%A3%E9%9B%86%E5%90%88%E6%B3%9B%E5%9E%8B%E7%9A%84%E6%9C%AC%E8%B4%A8/"/>
      <url>/2020/09/21/java-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E4%BA%86%E8%A7%A3%E9%9B%86%E5%90%88%E6%B3%9B%E5%9E%8B%E7%9A%84%E6%9C%AC%E8%B4%A8/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassDemo3</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span>: 2020/9/21 13:47</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ArrayList</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;String&gt; list2 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        list2.add(<span class="string">&quot;hello&quot;</span>);  <span class="comment">//è¿™é‡Œæ³›å‹çº¦æŸç±»å‹ä¸ºString,æ‰€æœ‰è¿™æ·»åŠ  &quot;hello&quot; æ²¡é—®é¢˜</span></span><br><span class="line"><span class="comment">//        strings.add(100);    è¿™é‡Œæ·»åŠ intç±»å‹å°±ä¼šæŠ¥ç±»å‹é”™è¯¯</span></span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">ArrayList</span>&gt; c1 = list.getClass();</span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">ArrayList</span>&gt; c2 = list2.getClass();</span><br><span class="line">        System.out.println(c1);<span class="comment">// class java.util.ArrayList</span></span><br><span class="line">        System.out.println(c2); <span class="comment">//class java.util.ArrayList</span></span><br><span class="line">        System.out.println(c1 == c2); <span class="comment">//true</span></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * c1 == c2 æ‰§è¡Œç»“æœä¸ºtrue è¯´æ˜æ³›å‹ç¼–è¯‘ä¹‹åæ˜¯å»æ³›å‹åŒ–çš„</span></span><br><span class="line"><span class="comment">         * æ³›å‹çš„ä½œç”¨å¯ä»¥ç†è§£ä¸ºï¼›Javaä¸­æ³›å‹çš„å­˜åœ¨æ˜¯ä¸ºäº†é˜²æ­¢è¾“å…¥é”™è¯¯ï¼Œä¸”åªåœ¨ç¼–è¯‘é˜¶æ®µæœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">         * **************************************************************************</span></span><br><span class="line"><span class="comment">         * ä¸Šé¢çš„ä¾‹å­ list2ä¸­ï¼Œæ³›å‹ä¸ºStringï¼Œç›´æ¥æ·»åŠ strings.add(100); ç¼–è¯‘æŠ¥é”™</span></span><br><span class="line"><span class="comment">         * åå°„éƒ½æ˜¯å‘ç”Ÿåœ¨ç¼–è¯‘ä¹‹åçš„æ“ä½œ,åˆ©ç”¨åå°„çš„è¿™ä¸€ä½œç”¨ï¼Œè¯æ˜æ³›å‹åœ¨ç¼–è¯‘ä¹‹åæ—¶å»æ³›å‹åŒ–çš„</span></span><br><span class="line"><span class="comment">         * åˆ©ç”¨åå°„ç»•è¿‡ç¼–è¯‘ï¼Œå®ç°list2 ä¹Ÿèƒ½æ‰§è¡Œadd(100)</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;list2æ·»åŠ 100ä¹‹å‰å…ƒç´ ä¸ªæ•°ï¼š&quot;</span> + list2.size());  <span class="comment">// 1</span></span><br><span class="line">            <span class="comment">//ä½¿ç”¨æ–¹æ³•åå°„ addä¸ºlist2çš„æ–¹æ³• Object.class ä¸ºå‚æ•°ç±»å‹</span></span><br><span class="line">            <span class="type">Method</span> <span class="variable">c2Method</span> <span class="operator">=</span> c2.getMethod(<span class="string">&quot;add&quot;</span>, Object.class);</span><br><span class="line">            c2Method.invoke(list2, <span class="number">100</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;list2æ·»åŠ 100ä¹‹åå…ƒç´ ä¸ªæ•°ï¼š&quot;</span> + list2.size()); <span class="comment">// 2</span></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * è¿™ä¸ªæ—¶å€™list2å°±ä¸èƒ½ç”¨Stringç±»å‹æ¥éå†äº†</span></span><br><span class="line"><span class="comment">             * ä¼šæŠ¥java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String</span></span><br><span class="line"><span class="comment">             * è¦ç”¨æ‰€æœ‰å…±åŒçˆ¶ç±»Object</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="comment">//éå† æ³¨æ„è¿™é‡Œæ˜¯Objectä¸æ˜¯String</span></span><br><span class="line">            <span class="keyword">for</span> (Object str : list2</span><br><span class="line">            ) &#123;</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åå°„ </tag>
            
            <tag> æ³›å‹ </tag>
            
            <tag> é›†åˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java-æ–¹æ³•åå°„çš„åŸºæœ¬æ“ä½œ</title>
      <link href="/2020/09/21/java-%E6%96%B9%E6%B3%95%E5%8F%8D%E5%B0%84%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
      <url>/2020/09/21/java-%E6%96%B9%E6%B3%95%E5%8F%8D%E5%B0%84%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassDemo2</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span>: 2020/9/21 10:37</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¦è·å–ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯è·å–ä¸€ä¸ªç±»çš„ä¿¡æ¯ï¼Œè¦è·å–ç±»ï¼Œå°±è¦å…ˆè·å–è¯¥ç±»çš„ç±»ç±»å‹</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">        Class&lt;? <span class="keyword">extends</span> <span class="title class_">A</span>&gt; aClass = a.getClass();</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è·å–æ–¹æ³•</span></span><br><span class="line"><span class="comment">         * getMethod()è·å–çš„æ—¶æ‰€æœ‰publicçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">         * getDelcaredMethod()è·å–çš„æ—¶è‡ªå·±å£°æ˜çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Method</span> <span class="variable">aClassDeclaredMethod</span> <span class="operator">=</span> aClass.getMethod(<span class="string">&quot;print&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;<span class="type">int</span>.class, <span class="type">int</span>.class&#125;);</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ–¹æ³•çš„å‘å°„</span></span><br><span class="line"><span class="comment">             * è§åˆ°å‚æ•°ä¸­å‡ºç°...å¯ä»¥ä½¿ç”¨è¯¥ç±»å‹çš„æ•°ç»„å½¢å¼æˆ–è€…ç›´æ¥å‚æ•°å½¢å¼</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="comment">//æ­£å¸¸è°ƒç”¨ a.print();</span></span><br><span class="line">            aClassDeclaredMethod.invoke(a, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="number">1</span>, <span class="number">1</span>&#125;);</span><br><span class="line">            System.out.println(<span class="string">&quot;========================&quot;</span>);</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> aClass.getMethod(<span class="string">&quot;print&quot;</span>, String.class, String.class);</span><br><span class="line">            method.invoke(a, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;Word&quot;</span>);</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ— å‚è°ƒç”¨ä¹Ÿæ˜¯ä¸¤ç§æ–¹å¼ï¼Œ</span></span><br><span class="line"><span class="comment">             * æ–¹å¼ä¸€ï¼šgetMethod(&quot;æ–¹æ³•å&quot;,&quot;new Class[]&#123;&#125;&quot;)</span></span><br><span class="line"><span class="comment">             * æ–¹å¼äºŒï¼šgetMethod(&quot;æ–¹æ³•å&quot;)</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="type">Method</span> <span class="variable">priMethod</span> <span class="operator">=</span> aClass.getMethod(<span class="string">&quot;print&quot;</span>);</span><br><span class="line">            priMethod.invoke(a);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;This No Param Method&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">        System.out.println(a + b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">(String a, String b)</span> &#123;</span><br><span class="line">        System.out.println(a.toUpperCase() + <span class="string">&quot;,&quot;</span> + b.toLowerCase());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ–¹æ³•åå°„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Wordpress:Briefly unavailable for scheduled maintenance. Check back in a minute.</title>
      <link href="/2020/09/18/wordpressbriefly-unavailable-for-scheduled-maintenance-check-back-in-a-minute/"/>
      <url>/2020/09/18/wordpressbriefly-unavailable-for-scheduled-maintenance-check-back-in-a-minute/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯æè¿°ï¼šWordpresså¸ƒç½®ç½‘ç«™ï¼Œåœ¨å‡çº§æ’ä»¶æ—¶å‡çº§å¤±è´¥ï¼Œå¯¼è‡´ç½‘ç«™æ‰€æœ‰å†…å®¹æ— æ³•è®¿é—®"><a href="#åœºæ™¯æè¿°ï¼šWordpresså¸ƒç½®ç½‘ç«™ï¼Œåœ¨å‡çº§æ’ä»¶æ—¶å‡çº§å¤±è´¥ï¼Œå¯¼è‡´ç½‘ç«™æ‰€æœ‰å†…å®¹æ— æ³•è®¿é—®" class="headerlink" title="åœºæ™¯æè¿°ï¼šWordpresså¸ƒç½®ç½‘ç«™ï¼Œåœ¨å‡çº§æ’ä»¶æ—¶å‡çº§å¤±è´¥ï¼Œå¯¼è‡´ç½‘ç«™æ‰€æœ‰å†…å®¹æ— æ³•è®¿é—®"></a>åœºæ™¯æè¿°ï¼šWordpresså¸ƒç½®ç½‘ç«™ï¼Œåœ¨å‡çº§æ’ä»¶æ—¶å‡çº§å¤±è´¥ï¼Œå¯¼è‡´ç½‘ç«™æ‰€æœ‰å†…å®¹æ— æ³•è®¿é—®</h3><p><strong>è®¿é—®ç½‘ç«™å‡ºç°ï¼š</strong>Briefly unavailable for scheduled maintenance. Check back in a minute.</p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>é€šè¿‡SSHæˆ–è€…FTPç™»é™†åˆ°wordpresså®‰è£…çš„æœåŠ¡å™¨ï¼Œç›®å½•åˆ‡æ¢åˆ°ç½‘ç«™çš„ç›®å½•ä¸‹ï¼Œé»˜è®¤ï¼š&#x2F;www&#x2F;wwwroot&#x2F;ç½‘ç«™åï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼šll -a ï¼Œæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶åŒ…å«éšè—çš„ï¼Œæ‰¾åˆ°**.maintenance **æ–‡ä»¶ç„¶ååˆ é™¤å³å¯</p><h4 id="sshé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šrm-rf-maintenanceï¼›"><a href="#sshé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šrm-rf-maintenanceï¼›" class="headerlink" title="sshé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šrm -rf .maintenanceï¼›"></a>sshé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šrm -rf .maintenanceï¼›</h4><h4 id="ftpé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šç›´æ¥å³é”®åˆ é™¤å³å¯"><a href="#ftpé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šç›´æ¥å³é”®åˆ é™¤å³å¯" class="headerlink" title="ftpé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šç›´æ¥å³é”®åˆ é™¤å³å¯"></a>ftpé“¾æ¥åˆ é™¤æ–¹æ³•ï¼šç›´æ¥å³é”®åˆ é™¤å³å¯</h4>]]></content>
      
      
      <categories>
          
          <category> Wordpress </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Classå·¥å…·ç±»-è·å–ç±»/æˆå‘˜å˜é‡/æ„é€ å‡½æ•°</title>
      <link href="/2020/09/17/class%E5%B7%A5%E5%85%B7%E7%B1%BB-%E8%8E%B7%E5%8F%96%E7%B1%BB%E7%9A%84%E4%BF%A1%E6%81%AF/"/>
      <url>/2020/09/17/class%E5%B7%A5%E5%85%B7%E7%B1%BB-%E8%8E%B7%E5%8F%96%E7%B1%BB%E7%9A%84%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Author</span>: www.itze.cn</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Date</span>: 2020/9/17 16:08</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Email</span>: 814565718@qq.com</span></span><br><span class="line"><span class="comment">     * æ‰“å°ç±»çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„æˆå‘˜å‡½æ•°ï¼Œå˜é‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> object è¯¥å¯¹è±¡æ‰€å±ç±»çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printClassMessage</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–ç±»çš„ä¿¡æ¯ï¼Œé¦–å…ˆè·å–ç±»çš„ç±»ç±»å‹</span></span><br><span class="line">        <span class="comment">//å‚æ•°ä¼ é€’çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼ŒobjectClasså°±æ˜¯ä»€ä¹ˆç±»å‹</span></span><br><span class="line">        Class&lt;?&gt; objectClass = object.getClass();</span><br><span class="line">        <span class="comment">//è·å–ç±»çš„åç§°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;ç±»çš„åç§°ï¼š&quot;</span> + objectClass.getName());</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Methodç±»</span></span><br><span class="line"><span class="comment">         * ä¸€ä¸ªæˆå‘˜æ–¹æ³•å°±æ˜¯ä¸€ä¸ªMethodå¯¹è±¡</span></span><br><span class="line"><span class="comment">         * getMethods();è·å–çš„æ˜¯æ‰€æœ‰publicå‡½æ•°çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ç»§æ‰¿çš„çˆ¶ç±»çš„</span></span><br><span class="line"><span class="comment">         * getDeclaredMethods();è·å–çš„æ˜¯æ‰€æœ‰è‡ªå·±å£°æ˜çš„æ–¹æ³•ï¼Œæ‰€æœ‰æƒé™çš„</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Method[] methods = objectClass.getMethods();</span><br><span class="line">        Method[] declaredMethods = objectClass.getDeclaredMethods();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; methods.length; i++) &#123;</span><br><span class="line">            <span class="comment">//å¾—åˆ°è¿”å›å€¼ç±»å‹çš„ç±»ç±»å‹</span></span><br><span class="line">            Class&lt;?&gt; returnType = methods[i].getReturnType();</span><br><span class="line">            System.out.print(<span class="string">&quot;æ–¹æ³•è¿”å›ç±»å‹ï¼š&quot;</span> + returnType.getName() + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            <span class="comment">//å¾—åˆ°æ–¹æ³•åç§°</span></span><br><span class="line">            System.out.println(<span class="string">&quot;æ–¹æ³•åç§°ï¼š&quot;</span>+methods[i].getName()+<span class="string">&quot;()&quot;</span>);</span><br><span class="line">            <span class="comment">//è·å–å‚æ•°ç±»å‹---å¾—åˆ°çš„æ˜¯å‚æ•°åˆ—è¡¨çš„ç±»å‹çš„ç±»ç±»å‹[int.class,String.class]</span></span><br><span class="line">            Class&lt;?&gt;[] parameterTypes = methods[i].getParameterTypes();</span><br><span class="line">            <span class="keyword">for</span> (Class&lt;?&gt; param:parameterTypes</span><br><span class="line">                 ) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;å‚æ•°ç±»å‹ï¼š&quot;</span>+param.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * æˆå‘˜å˜é‡ä¹Ÿæ˜¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">         * java.lang.reflect.Field</span></span><br><span class="line"><span class="comment">         * Fieldå°è£…äº†å…³äºæˆå‘˜å˜é‡çš„æ“ä½œ</span></span><br><span class="line"><span class="comment">         * getFields()è·å–çš„æ˜¯æ‰€æœ‰publicçš„æˆå‘˜å˜é‡ä¿¡æ¯</span></span><br><span class="line"><span class="comment">         * getDeclaredFieldsè·å–çš„æ˜¯è¯¥ç±»è‡ªå·±å£°æ˜çš„æˆå‘˜å˜é‡ä¿¡æ¯</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Field[] declaredFields = objectClass.getDeclaredFields();</span><br><span class="line">        <span class="keyword">for</span> (Field field : declaredFields</span><br><span class="line">            ) &#123;</span><br><span class="line">            <span class="comment">//å¾—åˆ°æˆå‘˜å˜é‡çš„ç±»å‹çš„ç±»ç±»å‹</span></span><br><span class="line">            Class&lt;?&gt; type = field.getType();</span><br><span class="line">            <span class="type">String</span> <span class="variable">typeName</span> <span class="operator">=</span> type.getName();</span><br><span class="line">            <span class="comment">//å¾—åˆ°æˆå‘˜å˜é‡çš„åç§°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">fieldName</span> <span class="operator">=</span> field.getName();</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆå‘˜å˜é‡ç±»å‹ï¼š&quot;</span> + typeName + <span class="string">&quot; æˆå‘˜å˜é‡å€¼ï¼š&quot;</span> + fieldName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è·å–æ„é€ å‡½æ•°ä¿¡æ¯</span></span><br><span class="line"><span class="comment">         * è°ƒç”¨æ–¹æ³•ç±»å.æ–¹æ³•å</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> object</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">printConMessage</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">            Class&lt;?&gt; objectClass = object.getClass();</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * æ„é€ å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</span></span><br><span class="line"><span class="comment">             * java.lang.Constructorä¸­å°è£…äº†å‡½æ•°ä¿¡æ¯</span></span><br><span class="line"><span class="comment">             * getDeclaredConstructors()è·å–è‡ªå·±ç”Ÿæˆçš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            Constructor&lt;?&gt;[] declaredConstructors = objectClass.getDeclaredConstructors();</span><br><span class="line">            <span class="keyword">for</span> (Constructor con : declaredConstructors</span><br><span class="line">                ) &#123;</span><br><span class="line">                System.out.print(con.getName() + <span class="string">&quot;(&quot;</span>);</span><br><span class="line">                <span class="comment">//è·å–æ„é€ å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼Œå¾—åˆ°çš„æ˜¯å‚æ•°åˆ—è¡¨çš„ç±»ç±»å‹</span></span><br><span class="line">                Class[] parameterTypes = con.getParameterTypes();</span><br><span class="line">                <span class="keyword">for</span> (Class par : parameterTypes</span><br><span class="line">                ) &#123;</span><br><span class="line">                    System.out.print(par.getName() + <span class="string">&quot;,&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">&quot;)&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">//ä»»ä½•ç±»å‹çš„å¯ä»¥</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    ClassUtil.printClassMessage(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è·å–ç±»çš„ä¿¡æ¯ç»“æœéƒ¨åˆ†æˆªå›¾"><a href="#è·å–ç±»çš„ä¿¡æ¯ç»“æœéƒ¨åˆ†æˆªå›¾" class="headerlink" title="è·å–ç±»çš„ä¿¡æ¯ç»“æœéƒ¨åˆ†æˆªå›¾"></a>è·å–ç±»çš„ä¿¡æ¯ç»“æœéƒ¨åˆ†æˆªå›¾</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/09/Class%E5%B7%A5%E5%85%B7%E7%B1%BB%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C.png"></p><h3 id="è·å–æˆå‘˜å˜é‡è¾“å‡ºç»“æœæˆªå›¾"><a href="#è·å–æˆå‘˜å˜é‡è¾“å‡ºç»“æœæˆªå›¾" class="headerlink" title="è·å–æˆå‘˜å˜é‡è¾“å‡ºç»“æœæˆªå›¾"></a>è·å–æˆå‘˜å˜é‡è¾“å‡ºç»“æœæˆªå›¾</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/09/%E6%88%90%E5%91%98%E5%8F%98%E9%87%8F%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C.png"></p><h3 id="è·å–æ„é€ å‡½æ•°è¾“å‡ºç»“æœæˆªå›¾"><a href="#è·å–æ„é€ å‡½æ•°è¾“å‡ºç»“æœæˆªå›¾" class="headerlink" title="è·å–æ„é€ å‡½æ•°è¾“å‡ºç»“æœæˆªå›¾"></a>è·å–æ„é€ å‡½æ•°è¾“å‡ºç»“æœæˆªå›¾</h3><p><img src="https://www.itze.cn/wp-content/uploads/2020/09/%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C.png"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Class </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jenkinså‘å¸ƒé¡¹ç›®[é¡¹ç›®å·²ç»é…ç½®å®Œæˆçš„æƒ…å†µä¸‹]</title>
      <link href="/2020/09/16/jenkins%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE%E9%A1%B9%E7%9B%AE%E5%B7%B2%E7%BB%8F%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B/"/>
      <url>/2020/09/16/jenkins%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE%E9%A1%B9%E7%9B%AE%E5%B7%B2%E7%BB%8F%E9%85%8D%E7%BD%AE%E5%AE%8C%E6%88%90%E7%9A%84%E6%83%85%E5%86%B5%E4%B8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="åœºæ™¯æè¿°ï¼šåœ¨Jenkinså·²ç»é…ç½®å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ç®€å•çš„æ„å»ºå‘å¸ƒé¡¹ç›®"><a href="#åœºæ™¯æè¿°ï¼šåœ¨Jenkinså·²ç»é…ç½®å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ç®€å•çš„æ„å»ºå‘å¸ƒé¡¹ç›®" class="headerlink" title="åœºæ™¯æè¿°ï¼šåœ¨Jenkinså·²ç»é…ç½®å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ç®€å•çš„æ„å»ºå‘å¸ƒé¡¹ç›®"></a>åœºæ™¯æè¿°ï¼šåœ¨Jenkinså·²ç»é…ç½®å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ç®€å•çš„æ„å»ºå‘å¸ƒé¡¹ç›®</h3><p><strong>1. ç‚¹å‡»éœ€è¦æ„å»ºå‘å¸ƒçš„é¡¹ç›®</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/09/Jenkins%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE1.png"> <strong>2. ç‚¹å‡»å·¦è¾¹çš„Build Now ç«‹å³æ„å»º</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/09/Jenkins%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE2-e1600225762217.png"> <strong>3. ç‚¹å‡»æ§åˆ¶å°è¾“å‡ºæŸ¥çœ‹æ„å»ºæ—¥å¿—</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/09/Jenkins%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE3.png"> <strong>4. æœ€åå‡ºç°SUCCESSå³å¯ï¼Œæ„å»ºå‘å¸ƒæˆåŠŸ</strong> <img src="https://www.itze.cn/wp-content/uploads/2020/09/Jenkins%E5%8F%91%E5%B8%83%E9%A1%B9%E7%9B%AE4.png"></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Jenkins </tag>
            
            <tag> è‡ªåŠ¨å‘å¸ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ABOUT</title>
      <link href="/2020/09/09/about/"/>
      <url>/2020/09/09/about/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> uncategorized </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å¾®åš</title>
      <link href="/2020/09/09/service/"/>
      <url>/2020/09/09/service/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> uncategorized </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ITçŸ¥è¯†åº“</title>
      <link href="/2020/09/09/%E5%8D%9A%E5%AE%A2/"/>
      <url>/2020/09/09/%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> uncategorized </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é¦–é¡µ</title>
      <link href="/2020/09/09/%E9%A6%96%E9%A1%B5/"/>
      <url>/2020/09/09/%E9%A6%96%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> uncategorized </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>å‹æƒ…é“¾æ¥</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ†ç±»</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>layuiåœ¨çº¿æ–‡æ¡£</title>
      <link href="/layui%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3/index.html"/>
      <url>/layui%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>éšç§æ”¿ç­–</title>
      <link href="/privacy-policy/index.html"/>
      <url>/privacy-policy/index.html</url>
      
        <content type="html"><![CDATA[<h2 id="æˆ‘ä»¬æ˜¯è°"><a href="#æˆ‘ä»¬æ˜¯è°" class="headerlink" title="æˆ‘ä»¬æ˜¯è°"></a>æˆ‘ä»¬æ˜¯è°</h2><p>æˆ‘ä»¬çš„ç«™ç‚¹åœ°å€æ˜¯ï¼š<a href="http://www.itze.cn./">http://www.itze.cnã€‚</a></p><h2 id="æˆ‘ä»¬æ”¶é›†ä½•ç§åŠä¸ºä½•æ”¶é›†ä¸ªäººæ•°æ®"><a href="#æˆ‘ä»¬æ”¶é›†ä½•ç§åŠä¸ºä½•æ”¶é›†ä¸ªäººæ•°æ®" class="headerlink" title="æˆ‘ä»¬æ”¶é›†ä½•ç§åŠä¸ºä½•æ”¶é›†ä¸ªäººæ•°æ®"></a>æˆ‘ä»¬æ”¶é›†ä½•ç§åŠä¸ºä½•æ”¶é›†ä¸ªäººæ•°æ®</h2><h3 id="è¯„è®º"><a href="#è¯„è®º" class="headerlink" title="è¯„è®º"></a>è¯„è®º</h3><p>å½“è®¿å®¢ç•™ä¸‹è¯„è®ºæ—¶ï¼Œæˆ‘ä»¬ä¼šæ”¶é›†è¯„è®ºè¡¨å•æ‰€æ˜¾ç¤ºçš„æ•°æ®ï¼Œå’Œè®¿å®¢çš„IPåœ°å€åŠæµè§ˆå™¨çš„user agentå­—ç¬¦ä¸²æ¥å¸®åŠ©æ£€æŸ¥åƒåœ¾è¯„è®ºã€‚</p><p>ç”±æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€æ‰€ç”Ÿæˆçš„åŒ¿ååŒ–å­—ç¬¦ä¸²ï¼ˆåˆç§°ä¸ºå“ˆå¸Œï¼‰å¯èƒ½ä¼šè¢«æä¾›ç»™GravataræœåŠ¡ç¡®è®¤æ‚¨æ˜¯å¦æœ‰ä½¿ç”¨è¯¥æœåŠ¡ã€‚GravataræœåŠ¡çš„éšç§æ”¿ç­–åœ¨æ­¤ï¼š<a href="https://automattic.com/privacy/%E3%80%82%E5%9C%A8%E6%82%A8%E7%9A%84%E8%AF%84%E8%AE%BA%E8%8E%B7%E6%89%B9%E5%87%86%E5%90%8E%EF%BC%8C%E6%82%A8%E7%9A%84%E8%B5%84%E6%96%99%E5%9B%BE%E7%89%87%E5%B0%86%E5%9C%A8%E6%82%A8%E7%9A%84%E8%AF%84%E8%AE%BA%E6%97%81%E5%85%AC%E5%BC%80%E5%B1%95%E7%A4%BA%E3%80%82">https://automattic.com/privacy/ã€‚åœ¨æ‚¨çš„è¯„è®ºè·æ‰¹å‡†åï¼Œæ‚¨çš„èµ„æ–™å›¾ç‰‡å°†åœ¨æ‚¨çš„è¯„è®ºæ—å…¬å¼€å±•ç¤ºã€‚</a></p><h3 id="åª’ä½“"><a href="#åª’ä½“" class="headerlink" title="åª’ä½“"></a>åª’ä½“</h3><p>å¦‚æœæ‚¨å‘æ­¤ç½‘ç«™ä¸Šä¼ å›¾ç‰‡ï¼Œæ‚¨åº”å½“é¿å…ä¸Šä¼ é‚£äº›æœ‰åµŒå…¥åœ°ç†ä½ç½®ä¿¡æ¯ï¼ˆEXIF GPSï¼‰çš„å›¾ç‰‡ã€‚æ­¤ç½‘ç«™çš„è®¿å®¢å°†å¯ä»¥ä¸‹è½½å¹¶æå–æ­¤ç½‘ç«™çš„å›¾ç‰‡ä¸­çš„ä½ç½®ä¿¡æ¯ã€‚</p><h3 id="è”ç³»è¡¨å•"><a href="#è”ç³»è¡¨å•" class="headerlink" title="è”ç³»è¡¨å•"></a>è”ç³»è¡¨å•</h3><h3 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h3><p>å¦‚æœæ‚¨åœ¨æˆ‘ä»¬çš„ç«™ç‚¹ä¸Šç•™ä¸‹è¯„è®ºï¼Œæ‚¨å¯ä»¥é€‰æ‹©ç”¨cookiesä¿å­˜æ‚¨çš„å§“åã€ç”µå­é‚®ä»¶åœ°å€å’Œç½‘ç«™ã€‚è¿™æ˜¯é€šè¿‡è®©æ‚¨å¯ä»¥ä¸ç”¨åœ¨è¯„è®ºæ—¶å†æ¬¡å¡«å†™ç›¸å…³å†…å®¹è€Œå‘æ‚¨æä¾›æ–¹ä¾¿ã€‚è¿™äº›cookiesä¼šä¿ç•™ä¸€å¹´ã€‚</p><p>å¦‚æœæ‚¨è®¿é—®æˆ‘ä»¬çš„ç™»å½•é¡µï¼Œæˆ‘ä»¬ä¼šè®¾ç½®ä¸€ä¸ªä¸´æ—¶çš„cookieæ¥ç¡®è®¤æ‚¨çš„æµè§ˆå™¨æ˜¯å¦æ¥å—cookiesã€‚æ­¤cookieä¸åŒ…å«ä¸ªäººæ•°æ®ï¼Œä¸”ä¼šåœ¨æ‚¨å…³é—­æµè§ˆå™¨æ—¶è¢«ä¸¢å¼ƒã€‚</p><p>å½“æ‚¨ç™»å½•æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¼šè®¾ç½®å¤šä¸ªcookiesæ¥ä¿å­˜æ‚¨çš„ç™»å½•ä¿¡æ¯åŠå±å¹•æ˜¾ç¤ºé€‰é¡¹ã€‚ç™»å½•cookiesä¼šä¿ç•™ä¸¤å¤©ï¼Œè€Œå±å¹•æ˜¾ç¤ºé€‰é¡¹cookiesä¼šä¿ç•™ä¸€å¹´ã€‚å¦‚æœæ‚¨é€‰æ‹©äº†â€œè®°ä½æˆ‘â€ï¼Œæ‚¨çš„ç™»å½•ä¼šä¿ç•™ä¸¤å‘¨ã€‚å¦‚æœæ‚¨æ³¨é”€ï¼Œç™»å½•cookieså°†è¢«ç§»é™¤ã€‚</p><p>å¦‚æœæ‚¨ç¼–è¾‘æˆ–å‘å¸ƒæ–‡ç« ï¼Œæˆ‘ä»¬ä¼šåœ¨æ‚¨çš„æµè§ˆå™¨ä¸­ä¿å­˜ä¸€ä¸ªé¢å¤–çš„cookieã€‚è¿™ä¸ªcookieä¸åŒ…å«ä¸ªäººæ•°æ®è€Œåªè®°å½•äº†æ‚¨åˆšæ‰ç¼–è¾‘çš„æ–‡ç« çš„IDã€‚è¿™ä¸ªå°ç”œé¥¼ä¼šä¿ç•™ä¸€å¤©ã€‚</p><h3 id="å…¶ä»–ç«™ç‚¹çš„åµŒå…¥å†…å®¹"><a href="#å…¶ä»–ç«™ç‚¹çš„åµŒå…¥å†…å®¹" class="headerlink" title="å…¶ä»–ç«™ç‚¹çš„åµŒå…¥å†…å®¹"></a>å…¶ä»–ç«™ç‚¹çš„åµŒå…¥å†…å®¹</h3><p>æ­¤ç«™ç‚¹ä¸Šçš„æ–‡ç« å¯èƒ½ä¼šåŒ…å«åµŒå…¥çš„å†…å®¹ï¼ˆå¦‚è§†é¢‘ã€å›¾åƒã€æ–‡ç« ç­‰ï¼‰ã€‚æ¥è‡ªå…¶ä»–ç«™ç‚¹çš„åµŒå…¥å†…å®¹çš„è¡Œä¸ºå’Œæ‚¨ç›´æ¥è®¿é—®è¿™äº›å…¶ä»–ç«™ç‚¹æ²¡æœ‰åŒºåˆ«ã€‚</p><p>è¿™äº›ç«™ç‚¹å¯èƒ½ä¼šæ”¶é›†å…³äºæ‚¨çš„æ•°æ®ã€ä½¿ç”¨cookiesã€åµŒå…¥é¢å¤–çš„ç¬¬ä¸‰æ–¹è·Ÿè¸ªç¨‹åºåŠç›‘è§†æ‚¨ä¸è¿™äº›åµŒå…¥å†…å®¹çš„äº¤äº’ï¼ŒåŒ…æ‹¬åœ¨æ‚¨æœ‰è¿™äº›ç«™ç‚¹çš„è´¦æˆ·å¹¶ç™»å½•äº†è¿™äº›ç«™ç‚¹æ—¶ï¼Œè·Ÿè¸ªæ‚¨ä¸åµŒå…¥å†…å®¹çš„äº¤äº’ã€‚</p><h3 id="ç»Ÿè®¡"><a href="#ç»Ÿè®¡" class="headerlink" title="ç»Ÿè®¡"></a>ç»Ÿè®¡</h3><h2 id="æˆ‘ä»¬ä¸è°å…±äº«æ‚¨çš„ä¿¡æ¯"><a href="#æˆ‘ä»¬ä¸è°å…±äº«æ‚¨çš„ä¿¡æ¯" class="headerlink" title="æˆ‘ä»¬ä¸è°å…±äº«æ‚¨çš„ä¿¡æ¯"></a>æˆ‘ä»¬ä¸è°å…±äº«æ‚¨çš„ä¿¡æ¯</h2><h2 id="æˆ‘ä»¬ä¿ç•™å¤šä¹…æ‚¨çš„ä¿¡æ¯"><a href="#æˆ‘ä»¬ä¿ç•™å¤šä¹…æ‚¨çš„ä¿¡æ¯" class="headerlink" title="æˆ‘ä»¬ä¿ç•™å¤šä¹…æ‚¨çš„ä¿¡æ¯"></a>æˆ‘ä»¬ä¿ç•™å¤šä¹…æ‚¨çš„ä¿¡æ¯</h2><p>å¦‚æœæ‚¨ç•™ä¸‹è¯„è®ºï¼Œè¯„è®ºå’Œå…¶å…ƒæ•°æ®å°†è¢«æ— é™æœŸä¿å­˜ã€‚æˆ‘ä»¬è¿™æ ·åšä»¥ä¾¿èƒ½è¯†åˆ«å¹¶è‡ªåŠ¨æ‰¹å‡†ä»»ä½•åç»­è¯„è®ºï¼Œè€Œä¸ç”¨å°†è¿™äº›åç»­è¯„è®ºåŠ å…¥å¾…å®¡é˜Ÿåˆ—ã€‚</p><p>å¯¹äºæœ¬ç½‘ç«™çš„æ³¨å†Œç”¨æˆ·ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä¿å­˜ç”¨æˆ·åœ¨ä¸ªäººèµ„æ–™ä¸­æä¾›çš„ä¸ªäººä¿¡æ¯ã€‚æ‰€æœ‰ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•æ—¶å€™æŸ¥çœ‹ã€ç¼–è¾‘æˆ–åˆ é™¤ä»–ä»¬çš„ä¸ªäººä¿¡æ¯ï¼ˆé™¤äº†ä¸èƒ½å˜æ›´ç”¨æˆ·åå¤–ï¼‰ã€ç«™ç‚¹ç®¡ç†å‘˜ä¹Ÿå¯ä»¥æŸ¥çœ‹åŠç¼–è¾‘é‚£äº›ä¿¡æ¯ã€‚</p><h2 id="æ‚¨å¯¹æ‚¨çš„ä¿¡æ¯æœ‰ä»€ä¹ˆæƒåˆ©"><a href="#æ‚¨å¯¹æ‚¨çš„ä¿¡æ¯æœ‰ä»€ä¹ˆæƒåˆ©" class="headerlink" title="æ‚¨å¯¹æ‚¨çš„ä¿¡æ¯æœ‰ä»€ä¹ˆæƒåˆ©"></a>æ‚¨å¯¹æ‚¨çš„ä¿¡æ¯æœ‰ä»€ä¹ˆæƒåˆ©</h2><p>å¦‚æœæ‚¨æœ‰æ­¤ç«™ç‚¹çš„è´¦æˆ·ï¼Œæˆ–æ›¾ç»ç•™ä¸‹è¯„è®ºï¼Œæ‚¨å¯ä»¥è¯·æ±‚æˆ‘ä»¬æä¾›æˆ‘ä»¬æ‰€æ‹¥æœ‰çš„æ‚¨çš„ä¸ªäººæ•°æ®çš„å¯¼å‡ºæ–‡ä»¶ï¼Œè¿™ä¹ŸåŒ…æ‹¬äº†æ‰€æœ‰æ‚¨æä¾›ç»™æˆ‘ä»¬çš„æ•°æ®ã€‚æ‚¨ä¹Ÿå¯ä»¥è¦æ±‚æˆ‘ä»¬æŠ¹é™¤æ‰€æœ‰å…³äºæ‚¨çš„ä¸ªäººæ•°æ®ã€‚è¿™ä¸åŒ…æ‹¬æˆ‘ä»¬å› ç®¡ç†ã€æ³•è§„æˆ–å®‰å…¨éœ€è¦è€Œå¿…é¡»ä¿ç•™çš„æ•°æ®ã€‚</p><h2 id="æˆ‘ä»¬å°†æ‚¨çš„ä¿¡æ¯å‘é€åˆ°å“ª"><a href="#æˆ‘ä»¬å°†æ‚¨çš„ä¿¡æ¯å‘é€åˆ°å“ª" class="headerlink" title="æˆ‘ä»¬å°†æ‚¨çš„ä¿¡æ¯å‘é€åˆ°å“ª"></a>æˆ‘ä»¬å°†æ‚¨çš„ä¿¡æ¯å‘é€åˆ°å“ª</h2><p>è®¿å®¢è¯„è®ºå¯èƒ½ä¼šè¢«è‡ªåŠ¨åƒåœ¾è¯„è®ºç›‘æµ‹æœåŠ¡æ£€æŸ¥ã€‚</p><h2 id="æ‚¨çš„è”ç³»ä¿¡æ¯"><a href="#æ‚¨çš„è”ç³»ä¿¡æ¯" class="headerlink" title="æ‚¨çš„è”ç³»ä¿¡æ¯"></a>æ‚¨çš„è”ç³»ä¿¡æ¯</h2><h2 id="å…¶ä»–ä¿¡æ¯"><a href="#å…¶ä»–ä¿¡æ¯" class="headerlink" title="å…¶ä»–ä¿¡æ¯"></a>å…¶ä»–ä¿¡æ¯</h2><h3 id="æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤æ‚¨çš„æ•°æ®"><a href="#æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤æ‚¨çš„æ•°æ®" class="headerlink" title="æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤æ‚¨çš„æ•°æ®"></a>æˆ‘ä»¬å¦‚ä½•ä¿æŠ¤æ‚¨çš„æ•°æ®</h3><h3 id="æˆ‘ä»¬æœ‰ä½•ç§æ•°æ®æ³„éœ²å¤„ç†æµç¨‹"><a href="#æˆ‘ä»¬æœ‰ä½•ç§æ•°æ®æ³„éœ²å¤„ç†æµç¨‹" class="headerlink" title="æˆ‘ä»¬æœ‰ä½•ç§æ•°æ®æ³„éœ²å¤„ç†æµç¨‹"></a>æˆ‘ä»¬æœ‰ä½•ç§æ•°æ®æ³„éœ²å¤„ç†æµç¨‹</h3><h3 id="æˆ‘ä»¬ä»å“ªäº›ç¬¬ä¸‰æ–¹æ¥æ”¶æ•°æ®"><a href="#æˆ‘ä»¬ä»å“ªäº›ç¬¬ä¸‰æ–¹æ¥æ”¶æ•°æ®" class="headerlink" title="æˆ‘ä»¬ä»å“ªäº›ç¬¬ä¸‰æ–¹æ¥æ”¶æ•°æ®"></a>æˆ‘ä»¬ä»å“ªäº›ç¬¬ä¸‰æ–¹æ¥æ”¶æ•°æ®</h3><h3 id="æˆ‘ä»¬é€šè¿‡ç”¨æˆ·æ•°æ®è¿›è¡Œä½•ç§è‡ªåŠ¨å†³ç­–åŠ-x2F-æˆ–å½’çº³"><a href="#æˆ‘ä»¬é€šè¿‡ç”¨æˆ·æ•°æ®è¿›è¡Œä½•ç§è‡ªåŠ¨å†³ç­–åŠ-x2F-æˆ–å½’çº³" class="headerlink" title="æˆ‘ä»¬é€šè¿‡ç”¨æˆ·æ•°æ®è¿›è¡Œä½•ç§è‡ªåŠ¨å†³ç­–åŠ&#x2F;æˆ–å½’çº³"></a>æˆ‘ä»¬é€šè¿‡ç”¨æˆ·æ•°æ®è¿›è¡Œä½•ç§è‡ªåŠ¨å†³ç­–åŠ&#x2F;æˆ–å½’çº³</h3><h3 id="è¡Œä¸šç›‘ç®¡æŠ«éœ²è¦æ±‚"><a href="#è¡Œä¸šç›‘ç®¡æŠ«éœ²è¦æ±‚" class="headerlink" title="è¡Œä¸šç›‘ç®¡æŠ«éœ²è¦æ±‚"></a>è¡Œä¸šç›‘ç®¡æŠ«éœ²è¦æ±‚</h3>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‡ç­¾</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
